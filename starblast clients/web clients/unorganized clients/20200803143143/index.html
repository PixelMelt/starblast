<!DOCTYPE html>
<html lang="en">
<head>
    <title>STARBLAST.IO</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui=1">
    <meta charset="UTF-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="Multiplayer Arcade Space Shooter io Game! Shoot asteroids and enemies to collect crystals. Upgrade your ship before you get killed!">
    <meta name="keywords" content="io, starblastio, starblast, iogame, star wars, shoot'em up, spaceship, game, games, web game, io games, html5, fun, flash">
    <meta property="og:title" content="starblast.io">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Multiplayer Arcade Space Shooter io Game! Shoot asteroids and enemies to collect crystals. Upgrade your ship before you get killed!">
    <meta property="og:url" content="https://starblast.io/">
    <meta property="og:site_name" content="starblast.io">
    <meta property="og:image" content="https://starblast.io/static/img/starblast.png?2">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@starblast_io">
    <meta name="twitter:creator" content="@neuronality">
    <meta name="twitter:title" content="Starblast.io, free online shoot'em up">
    <meta name="twitter:description" content="Multiplayer Arcade Space Shooter io Game! Shoot asteroids and enemies to collect crystals. Upgrade your ship before you get killed!">
    <meta name="twitter:image" content="https://starblast.io/static/img/starblast.png?2">
    <link rel="icon" type="image/png" href="https://starblast.io/static/img/icon64.png" />
    <link rel="image_src" href="https://starblast.io/static/img/starblast.png?2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>@font-face{font-family:'SBGlyphs';src:url('https://starblast.data.neuronality.com/fonts/starblast-glyphs.ttf?v=1');font-weight:normal;font-style:normal}.sbg{display:inline-block;font:normal normal normal 14px/1 SBGlyphs;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.sbg-fw{width:1.28571429em;text-align:center}.sbg-wiki:before{content:"\0021"}.sbg-lock:before{content:"\0022"}.sbg-tick:before{content:"\0023"}.sbg-heart:before{content:"\0024"}
.sbg-shield-mid:before{content:"\0025"}.sbg-lightning:before{content:"\0026"}.sbg-lightning-mid:before{content:"\0027"}.sbg-lightning-full:before{content:"\0028"}.sbg-diamond:before{content:"\0029"}.sbg-times:before{content:"\002a"}.sbg-crosshair:before{content:"\002b"}.sbg-fullscreen:before{content:"\002c"}.sbg-trophy:before{content:"\002d"}
.sbg-trophy-full:before{content:"\002e"}.sbg-asteroid:before{content:"\002f"}.sbg-alien:before{content:"\0030"}.sbg-team:before{content:"\0031"}.sbg-world:before{content:"\0032"}.sbg-station:before{content:"\0033"}.sbg-station-full:before{content:"\0034"}.sbg-station-inverted:before{content:"\0035"}.sbg-plus:before{content:"\0036"}
.sbg-plus-full:before{content:"\0037"}.sbg-plus-inverted:before{content:"\0038"}.sbg-coins:before{content:"\0039"}.sbg-vulcan:before{content:"\003a"}.sbg-wait:before{content:"\003b"}.sbg-yes:before{content:"\003c"}.sbg-no:before{content:"\003d"}.sbg-you:before{content:"\003e"}.sbg-me:before{content:"\003f"}.sbg-follow:before{content:"\0040"}
.sbg-happy:before{content:"\0041"}.sbg-menu:before{content:"\0042"}.sbg-infinity:before{content:"\0043"}.sbg-diamond-full:before{content:"\0044"}.sbg-vulkan-full:before{content:"\0045"}.sbg-bye-full:before{content:"\0046"}.sbg-np-full:before{content:"\0047"}.sbg-wait-full:before{content:"\0048"}.sbg-attack-full:before{content:"\0049"}
.sbg-help-full:before{content:"\004a"}.sbg-question-full:before{content:"\004b"}.sbg-yes-full:before{content:"\004c"}.sbg-no-full:before{content:"\004d"}.sbg-you-full:before{content:"\004e"}.sbg-me-full:before{content:"\004f"}.sbg-follow-full:before{content:"\0050"}.sbg-fire-full:before{content:"\0060"}.sbg-fly-mid:before{content:"\0061"}
.sbg-shield-capacity:before{content:"\0062"}.sbg-shield-regen:before{content:"\0063"}.sbg-generator-capacity:before{content:"\0064"}.sbg-generator-regen:before{content:"\0065"}.sbg-fire-damage:before{content:"\0066"}.sbg-fire-speed:before{content:"\0067"}.sbg-ship-speed:before{content:"\0068"}.sbg-ship-agility:before{content:"\0069"}.sbg-torpedo:before{content:"\006a"}
.sbg-missile:before{content:"\006b"}.sbg-rocket:before{content:"\006c"}.sbg-mine:before{content:"\006d"}.sbg-heavy-mine:before{content:"\006e"}.sbg-mining-pod:before{content:"\006f"}.sbg-attack-pod:before{content:"\0070"}.sbg-defense-pod:before{content:"\0071"}.sbg-thrust:before{content:"\0072"}.sbg-fly:before{content:"\0073"}.sbg-fire:before{content:"\0074"}
.sbg-shop:before{content:"\0075"}.sbg-rcs-on:before{content:"\0076"}.sbg-rcs-off:before{content:"\0077"}.sbg-gears:before{content:"\0078"}.sbg-user:before{content:"\0079"}.sbg-info:before{content:"\007a"}.sbg-discord:before{content:"\007b"}.sbg-facebook:before{content:"\007c"}.sbg-twitter:before{content:"\007d"}.sbg-reddit:before{content:"\007e"}
.sbg-skull-full:before{content:"\007f"}.sbg-sorry:before{content:"\00a1"}.sbg-np:before{content:"\00a2"}.sbg-gg:before{content:"\00a3"}.sbg-bye:before{content:"\00a4"}.sbg-help:before{content:"\00a5"}.sbg-skull:before{content:"\00a6"}.sbg-question:before{content:"\00a7"}.sbg-attack:before{content:"\00a8"}.sbg-caret-up:before{content:"\00a9"}
.sbg-caret-down:before{content:"\00aa"}.sbg-sb-caret-up:before{content:"\00ab"}.sbg-sb-caret-down:before{content:"\00ac"}.sbg-fly-full:before{content:"\00ae"}.sbg-thrust-full:before{content:"\00af"}.sbg-money-change:before{content:"\00b0"}.sbg-rounds:before{content:"\00b1"}.sbg-customgame:before{content:"\00c0"}.sbg-modding:before{content:"\00c1"}
.sbg-gift:before{content:"\00b7"}html,body{margin:0;padding:0;background-color:#000;overflow:hidden;font-family:Play,Verdana;transform:rotate("90deg")}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}a{text-decoration:none;color:hsl(200,50%,80%)}a:visited{color:hsl(200,50%,60%)}.grayblur{-moz-filter:grayscale(0.5) blur(3px);-webkit-filter:grayscale(0.5) blur(3px);filter:grayscale(0.5) blur(3px)}#loading-text-aip{font-size:.4em}
#overlay{display:none;position:fixed;top:0;bottom:0;left:0;right:0;z-index:2;text-align:center;font-size:2em;color:#EEE;text-shadow:0 0 3px #000,0 0 3px #000,0 0 3px #000,0 0 3px #000;transition:opacity .5s ease;box-shadow:0 0 6px hsla(200,80%,80%,1);text-shadow:0 0 2px hsla(200,80%,80%,.3);color:hsla(200,90%,90%,.8)}.gplay{position:fixed;top:0;text-align:center;bottom:0;left:0;right:0;z-index:2;background:rgba(0,0,0,.8)}.gplay:after{content:"×";position:fixed;top:0;right:0;color:#FFF;padding:0 5vw;font-size:10vw}
.gplay img{max-width:90vw;max-height:80vh}#content{transition:all .5s ease}#home,#home_mobile{display:none;text-align:center}#home_mobile{height:50px}#home{height:0}[id^=cdm-zone-0]{display:inline-block;margin:0 5px;height:250px;width:300px;overflow:hidden}#cdm-zone-01{height:90px;width:768px;margin:0}[data-ad-slot="vi_462315138"]{height:260px}#alsotry{font-size:1px}.textcentered{text-align:center !important}.loadwrapper{position:absolute;top:0;left:0;width:100%;background:rgba(255,255,255,.1);transition:all .5s ease}
.loadwrapper .progress{height:15px;width:0;background:hsl(200,90%,70%);background:linear-gradient(to right,hsl(200,30%,30%) 0,hsl(200,90%,70%) 100%)}.mobile-social{display:none;font-size:.6em;position:absolute;bottom:0;top:0;left:0;padding:10px;background:rgba(255,255,255,.0)}.mobile-tools{display:none;font-size:.6em;position:absolute;bottom:0;top:0;right:0;padding:10px;background:rgba(255,255,255,.0)}#vidContainer{display:none;position:absolute;background:#000;text-align:center;left:25%;width:50%;height:50%;margin:auto;z-index:10;-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%)}
#criteoContent{width:728px;height:90px;display:none;margin:auto}.followtools{font-family:Play,Verdana;display:none;font-size:.4em;position:absolute;bottom:0;right:0;padding:5px;text-align:left;z-index:1}.followtools a,.followtools a:visited{display:inline-block;background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 0,hsla(200,100%,80%,.5) 150%);box-shadow:0 0 6px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.9);border-radius:0;padding:7px;margin:4px;position:relative}
.followtools a.big{text-shadow:0 0 7px hsla(200,100%,80%,1);text-align:center;width:217px;margin:4px 4px 10px 4px;padding:4px 10px;line-height:13px;font-size:1.1em}.followtools a.big i{text-shadow:0 0 1px hsla(200,100%,80%,.2);font-size:2.8em}.followtools a.big.cup i{background-image:linear-gradient(135deg,#fceabb 0,#fccd4d 50%,#f8b500 51%,#fbdf93 100%);color:transparent;-webkit-background-clip:text;background-clip:text}.followtools a.gold,.followtools a.gold:visited,#donate_mobile{text-shadow:0 0 7px hsla(20,100%,80%,1);background:radial-gradient(ellipse at center,hsla(20,50%,0%,1) 0,hsla(20,100%,80%,.5) 150%);box-shadow:0 0 6px hsla(20,100%,80%,1);color:hsla(20,100%,90%,.9)}
.followtools a i{font-size:1.5em;vertical-align:middle}.followtools a.gold:hover{background:hsla(20,90%,40%,.8);color:#FFF}.followtools a:hover{background:hsla(200,50%,50%,.8);color:#FFF}.followtools span{text-transform:uppercase;letter-spacing:-0.5px}.social{font-size:.6em;position:absolute;bottom:0;right:0;left:0;padding:10px;background:rgba(0,0,0,.0)}.social i{margin:0 10px}.mobile-social i,.mobile-tools i{margin-bottom:20px}.social i,.mobile-social i,.mobile-tools i,.stats i{background:rgba(0,0,0,.6);padding:5px;font-size:1.4em;display:inline-block;width:40px;height:40px;line-height:40px;border:0;text-align:center;cursor:pointer;background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 0,hsla(200,100%,70%,.5) 150%);box-shadow:0 0 6px hsla(200,100%,80%,1);text-shadow:0 0 7px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.8)}
.social i:hover,.mobile-social i:hover,.mobile-tools i:hover,.stats i:hover{background:#000;border:0 solid hsl(200,90%,70%);background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 0,hsla(200,70%,70%,.5) 100%);box-shadow:0 0 6px hsla(200,100%,80%,1);text-shadow:0 0 7px hsla(200,100%,80%,1);color:#FFF}.hide{opacity:0}#logo{margin:auto;padding-bottom:1vh;transition:all 5s ease;max-width:40%;width:1200px;opacity:0}#logo img{max-width:100%}#colors{margin-top:10px}.inputwrapper{display:inline-block;background:linear-gradient(to top,hsla(200,70%,70%,.5) 0,hsla(200,50%,0%,1) 20%,hsla(200,50%,0%,1) 60%,hsla(200,20%,40%,.5) 100%);box-shadow:0 0 6px hsla(200,80%,80%,1);text-shadow:0 0 7px hsla(200,80%,80%,1);border-radius:4px;height:43px;margin-top:10px;position:relative;max-width:100%}
.colorwrapper{display:inline-block;cursor:pointer;position:absolute;right:10px}.colorchosen{transition:all .5s ease;background:red;display:inline-block;border:2px solid rgba(0,0,0,.5);vertical-align:middle;width:32px;height:32px;margin:0 0 5px 0}#colors span{transition:all .2s ease;display:inline-block;border:2px solid rgba(0,0,0,.5);margin:0 4px;opacity:.8;width:32px;height:32px;cursor:pointer}#colors span.selected{opacity:1;box-shadow:0 0 5px 2px #FFF;transform:scale(1.15)}#player,#respawn{transition:all .5s ease;margin:0 auto 15px auto;max-width:90%}
#player input{height:43px;line-height:43px;padding:0 8px;font-size:.8em;text-align:center;text-transform:uppercase;border:0 solid hsl(200,90%,10%);width:415px;max-width:80%;color:#EEE;outline:0;background:transparent;transition:all .5s ease;text-shadow:0 0 7px hsla(200,80%,80%,1);color:hsla(200,90%,90%,.8)}.stats input,.ecpinput{height:43px;line-height:43px;padding:0 8px;text-align:center;border:0 solid hsl(200,90%,10%);width:350px;outline:0;transition:all .5s ease;background:linear-gradient(to top,hsla(200,70%,70%,.5) 0,hsla(200,50%,0%,1) 20%,hsla(200,50%,0%,1) 60%,hsla(200,20%,40%,.5) 100%);box-shadow:0 0 6px hsla(200,80%,80%,1);color:hsla(200,90%,90%,.8);text-shadow:0 0 7px hsla(200,80%,80%,1);border-radius:4px;font-size:1.2em}
.ecpbtn{vertical-align:middle;width:50px;margin:0 10px;cursor:pointer}::input-placeholder{color:hsla(200,10%,80%,.4);text-shadow:0 0 7px hsla(200,80%,80%,.3);font-size:16px}::-webkit-input-placeholder{color:hsla(200,10%,80%,.4);text-shadow:0 0 7px hsla(200,80%,80%,.3);font-size:16px}::-moz-placeholder{color:hsla(200,10%,80%,.4);text-shadow:0 0 7px hsla(200,80%,80%,.3);font-size:16px}:-ms-input-placeholder{color:hsla(200,10%,80%,.4);text-shadow:0 0 7px hsla(200,80%,80%,.3);font-size:16px}#respawn_actions,#respawn_swap,.hT79D,.stats{transition:all .3s ease}
#player button,#respawn_actions button,.donate-btn{padding:10px 60px;font-size:1.2em;cursor:pointer;margin:20px 0 20px 0;text-align:center;background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 0,hsla(200,100%,70%,.5) 150%);box-shadow:0 0 6px hsla(200,100%,80%,1);text-shadow:0 0 7px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.8);font-family:Play,Verdana;border:0}#player button:hover,#respawn_actions button:hover,.donate-btn:hover,.ecpbtn:hover{background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 0,hsla(200,100%,70%,.5) 100%);box-shadow:0 0 8px hsla(200,100%,90%,1);color:#FFF}
.playbtn{white-space:nowrap}.playbtn i{padding:0 10px;font-size:2em;vertical-align:middle;font-family:normal normal normal 14px/1 FontAwesome;margin:9px 10px 0 10px;cursor:pointer;color:hsla(200,60%,80%,.5);text-align:center;text-shadow:0 0 7px hsla(200,100%,80%,1)}.playbtn i:hover{text-shadow:0 0 27px hsla(200,100%,80%,1)}#player #play{padding:0 60px 20px;position:relative}#play.orange{color:#FFF;background:radial-gradient(ellipse at center,hsla(20,50%,0%,1) 0,hsla(20,100%,70%,.5) 150%);text-shadow:0 0 7px hsla(20,100%,80%,1);box-shadow:0 0 6px hsla(20,100%,80%,1)}
#play.orange:hover{background:radial-gradient(ellipse at center,hsla(20,50%,0%,1) 0,hsla(20,100%,70%,.5) 100%);box-shadow:0 0 8px hsla(20,100%,90%,1)}#play #game_modes{position:absolute;bottom:0;left:0;right:0;background:rgba(255,255,255,.1);font-size:14px;overflow:hidden;white-space:nowrap}#play #game_modes span{display:inline-block;width:100%;transition:margin .5s ease}#respawn{display:none}.stats{font-size:.5em;border:2px solid hsl(200,50%,70%);box-shadow:0 0 15px hsl(200,50%,70%);background:hsla(200,50%,10%,.5);width:600px;padding:0 10px;margin:10px auto}
.stats i{margin:10px;font-size:1.6em}.stats p{font-size:2em;margin:10px 0 15px 0}.stats small{display:inline-block;background:rgba(0,0,0,.6);padding:10px 15px 5px 15px;border-radius:50% 50% 0 0}#respawn_actions button{padding:10px 0;font-size:.8em;width:175px}.statinfo{font-size:1.5em;height:40px;line-height:40px;padding:0 20px;border-bottom:1px solid hsl(200,50%,55%);transition:all .5s ease}.statinfo:last-child{border-bottom:0}.statinfo span:first-child{float:left}.statinfo span:last-child{float:right}
#connection_lost,#game_over,#adblocked_message{display:none;font-size:3.5vw;transition:all 2s ease;margin:20px 0}#adblocked_message div{font-size:.5em}#goinfo{color:hsl(200,50%,70%);font-size:2vw}#connection_lost .cry,#adblocked_message .cry{margin-top:50px;display:inline-block;transform:rotate(90deg)}.gameloader{margin-top:20px;display:none;text-align:center;color:#EEE;font-size:3.5vw;transition:opacity .5s ease}.gameloaderwrapper{width:90%;margin:0 auto;height:25px;background:linear-gradient(to bottom,#000 0,#444 49%,#222 50%,#000 100%);border:2px solid hsla(200,100%,70%,.8);box-shadow:0 0 10px hsla(200,100%,80%,1);border-radius:4px}
.sbg-facebook,.sbg-twitter{position:relative}.sbg-diamond{font-size:.8em;position:absolute;top:-10px;right:-10px}.sbg-facebook:hover .sbg-diamond,.sbg-twitter:hover .sbg-diamond{color:hsl(200,90%,70%)}.tutorial{width:90%;margin:0 auto;border-radius:2vw;color:#666}.desktop,.mobile{display:none}.desktop{margin-top:50px;background:rgba(255,255,255,.1)}.mobile{margin-top:20px;position:relative;height:15vw}.joystick-container{position:absolute;left:10vw;width:15vw;height:15vw;border-radius:15vw;background:radial-gradient(ellipse at center,rgba(140,140,140,0) 0,rgba(255,255,255,0) 20%,rgba(217,217,217,0) 32%,rgba(204,204,204,0.7) 34%,rgba(115,115,115,0.5) 64%,rgba(0,0,0,0.5) 100%)}
[class^="mobile-"]{position:absolute}.mobile-top{left:6.6vw}.mobile-bottom{left:6.6vw;top:11.4vw}.mobile-left{left:1.1vw;top:6.1vw}.mobile-right{top:6.1vw;left:12.7vw}.mobile-fire{position:absolute;right:10vw;height:15vw;width:10vw;line-height:15vw;background:rgba(255,255,255,.2);border-radius:2vw}table{width:100%}.keyboard,.mouse{position:relative;height:265px}.mouse-container{overflow:hidden;position:absolute;top:1vw;display:inline-block;border:1px solid #999;background:#EEE;width:8vw;height:12vw;border-radius:2vw}
.mouse-top{width:95%;height:4vw;line-height:4vw;margin:0 auto;border-bottom:3px solid #999;font-size:2.5vw}.mouse-left{width:50%;float:left;border-right:2px solid #999}.mouse-left{width:49%}[class^="kb-"]{display:inline-block;border:1px solid #999;background:#EEE;border-radius:.4vw;height:3vw;line-height:3vw;width:3vw;font-size:2vw;box-shadow:0 0 10px #000;text-align:center;vertical-align:middle}.keyboard .top{position:absolute;top:2vw}.keyboard .bottom{position:absolute;top:6vw}
.keyboard canvas{display:inline-block;vertical-align:middle}.keyboard span{font-size:1.75vw}.keyboard span.large{display:inline-block;width:200px;text-align:center}.kb-ctrl{width:7vw}.loaderprogress{height:25px;width:0;background:hsl(200,90%,70%);background:linear-gradient(to right,hsla(200,30%,30%,.7) 0,hsla(200,90%,80%,.8) 100%)}.textprogress{margin-top:20px;text-shadow:0 0 10px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.9)}.cookieconsent{opacity:0;transition:opacity 2s ease}.changelog-new,.extrabutton{text-align:left;width:18vw;border:0;background:linear-gradient(-45deg,hsla(200,50%,10%,.5) 0,hsla(200,50%,50%,.15) 100%);padding:5px 10px;box-shadow:0 0 6px hsla(200,100%,80%,1);font-size:.95vw;display:none;margin-top:10px}
.community a{display:inline-block;border:2px solid rgba(0,0,0,.5);width:20%;margin:.3%;padding:1vh 0;text-align:center;color:hsla(200,90%,90%,.8);border-radius:10px;background:rgba(0,0,0,.3);fill:currentColor}.community a .sbg{font-size:2em}.community a:hover{background:rgba(255,255,255,.1);color:#fff}.community a svg{width:60%}.adblock{font-size:1.5vw;padding:.5vw;text-align:center;display:none}.extrabutton{display:block;text-align:center}[data-display-only]{display:none}.alphacentauri{text-align:center}
.alphacentauri img{max-width:100%}.alphacentauri button{background:#B11;color:#FFF;box-shadow:0 0 5px #B11;border:0;width:7vw;padding:5px 0;font-size:.9vw;margin:.7vw;cursor:pointer;text-transform:uppercase}.alphacentauri button:hover{color:#FFF;box-shadow:0 0 10px #FFF}.alphacentauri h2{margin:10px 0;padding:0;padding-bottom:4px;border-bottom:solid 5px hsla(200,60%,60%,.2);font-size:16px}.changelog-new .fa-star,.extrabutton .fa-star{color:hsla(50,70%,70%,1)}.changelog-new h2{font-size:1.15vw;margin:10px 0;padding:0;padding-bottom:4px;border-bottom:solid 5px hsla(200,60%,60%,.2)}
.countdown,.event-time{padding:5px 0;background:rgba(0,0,0,.5);font-size:18px}a.full-changelog,a.full-changelog:visited{color:#ddd;text-shadow:none;display:block;text-align:center;padding:10px;border-top:1px solid hsla(200,60%,60%,.2);background:rgba(200,240,255,.02);font-size:.8em;margin:0 -10px -5px -10px}a.full-changelog:hover{color:#fff;text-decoration:none;background:rgba(200,240,255,.1)}.bottom-left,.top-left,.top-right{z-index:10;padding:10px;position:absolute;left:0}.bottom-left{bottom:0}
.top-right{top:0;right:0;left:auto;width:237px;display:none;font-size:.6em}.schedule{border:0;background:linear-gradient(-45deg,hsla(200,50%,10%,1) 0,hsla(200,50%,50%,.15) 100%);padding:5px 10px;box-shadow:0 0 6px hsla(200,100%,80%,1);font-size:1.3vw;margin-top:10px}.top-right .title{margin-bottom:10px;color:#EEE}.top-right .date{color:hsl(200,60%,75%);margin-bottom:3px}.top-right .event{color:#EEE;margin-bottom:10px;font-size:.8em}.steam-info{margin-top:-10px;background:hsla(200,50%,10%,.75);padding:20px 5px;font-size:14px}
.top-left{top:0;width:calc(18vw + 20px)}.top-left img,.top-right img{max-width:100%}.modal{z-index:3;position:fixed;left:0;right:0;top:-750px;margin:0 auto;box-shadow:0 0 6px hsla(200,100%,80%,1);width:800px;max-width:100%;max-height:100%;background:linear-gradient(135deg,hsla(200,30%,10%,1) 0,hsla(200,30%,30%,1) 150%);transition:top .6s ease;display:none;overflow:auto;color:hsla(200,80%,100%,.8);text-shadow:0 0 6px hsla(200,100%,60%,.75)}.modal::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,0.3);border-radius:0;background-color:transparent}
.modal::-webkit-scrollbar{width:10px}.modal::-webkit-scrollbar-thumb{border-radius:0;box-shadow:inset 0 0 6px rgba(0,0,0,.5);background-color:hsla(200,50%,70%,.5)}.modal .header{margin:5px 0;padding:5px 40px;font-size:2em;background:hsla(200,70%,70%,.1);border-bottom:5px solid hsla(200,50%,70%,.5)}.modal .modaltitle{display:inline-block}.modal .close-modal{cursor:pointer;width:40px;text-align:center;float:right}.modal .close-modal:hover{color:#FFF;background:rgba(240,250,255,.1)}.modal .modalbody{overflow:auto;padding:20px 40px;font-size:1.5em}
.modal .modalbody .regions{text-align:center;border-bottom:1px solid hsla(200,50%,70%,.5);margin:0 -40px 40px -40px;padding:10px 0;background:rgba(120,180,255,.08)}.modal .modalbody .regions .date{text-align:right;font-size:.5em}.modal .modalbody span.region{display:inline-block;width:180px;padding:5px 10px;margin:10px;cursor:pointer;transition:.2s ease all}.modal .modalbody span.region:hover{background:rgba(120,180,255,.05)}.modal .modalbody span.region.active{color:#FFF;background:radial-gradient(ellipse at center,hsla(20,50%,0%,1) 20%,hsla(20,50%,60%,.5) 150%);box-shadow:0 0 6px hsla(20,100%,80%,1);text-shadow:0 0 7px hsla(20,100%,80%,1)}
.modal .modal-header{background:rgba(0,0,0,.8);padding:10px;font-size:20px;margin:-20px -40px 20px -40px}.modal .mod{display:inline-block;width:31%;font-size:14px;position:relative;margin:10px}.modal .modecp{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.8);padding:10px;font-size:20px;text-align:left}.modal .modecp a{border-radius:2px;background-color:rgba(255,255,255,.25);padding:5px 10px;color:#FFF;margin:0 0 0 10px;float:right}.modal .modecp div{padding:5px 10px}.modal .mod:hover{cursor:pointer}
.modal .mod:hover img{filter:grayscale(0)}.modal .mod img{width:100%;filter:grayscale(60%)}.modal .mod.inactive{cursor:default}.modal .mod.inactive img{filter:grayscale(100%)}.modal .mod .title{background:rgba(0,0,0,.5);padding:3px 10px;text-align:left}.modal .mod .nowplaying,.modal .mod .author{float:right}.modal .mod .totalplayed{padding:0 10px;margin-bottom:-15px;background:#fff;color:#000;text-shadow:none;font-size:.8em;text-align:left;position:absolute;top:-7px;left:0;right:0;z-index:1}#ranks .rankings{width:100%;border-spacing:0;border-collapse:collapse}
#ranks .rankings canvas{opacity:0;transform:translateY(20px) scale(0);transition:1s ease all}#ranks .rankings tbody tr{height:45px}#ranks .rankings tbody tr:nth-child(odd){background:rgba(120,180,255,.08)}#ranks .rankings th:first-child{font-size:11px}#ranks .rankings th{text-align:center;padding:10px}#ranks .rankings th.orating{width:33.333%;background:rgba(0,0,0,.2);border:1px dashed hsl(200,50%,50%);border-bottom:0}#ranks .rankings td.trophies{width:10%;background:rgba(0,0,0,.2);border-right:1px dashed hsl(200,50%,50%);text-align:right}
#ranks .rankings tr:first-child td.trophies{color:gold}#ranks .rankings tr:nth-child(2) td.trophies{color:silver}#ranks .rankings tr:nth-child(3) td.trophies{color:#cd7f32}#ranks .rankings td:last-child{text-align:right}#ranks .rankings td{padding:5px 10px;width:auto;vertical-align:middle}#ranks .fa-long-arrow-up{color:#77ee90}#ranks .fa-long-arrow-down{color:#ed8256}#ranks small{font-size:.6em;display:inline-block;width:35px;text-align:center}.modal .modalbody label{float:right;vertical-align:middle}
.modal .modalbody select,.modal .modalbody input[type=text],.modal .modalbody input.number{font-size:.8em;padding:3px 5px;color:white;background:hsl(200,60%,15%);border:1px solid hsl(200,60%,10%);float:right;vertical-align:middle;width:241px;box-sizing:border-box}#mappreview{border:1px solid hsl(200,60%,10%);float:right}#mappreview:after{clear:both}.modal .modalbody hr{border-color:#587c8e}.modal .modalbody .gmodes{margin:-20px -40px 0 -40px;text-align:center}.modal .modalbody .gmodes span{display:inline-block;height:40px;line-height:40px;width:45%;margin:1%;border:2px solid hsl(200,60%,10%);text-align:center;cursor:pointer}
.modal .modalbody .gmodes span.selected{box-shadow:0 0 6px hsla(200,100%,80%,1);color:white}.modal .modalbody .range{float:right;vertical-align:middle;font-size:.7em;padding:0 100px 0 10px;position:relative;background:hsl(200,60%,15%);border:1px solid hsl(200,60%,10%);height:30px;line-height:30px}.modal .modalbody .range input{height:30px;padding:0;margin:0}.modal .modalbody .range span{position:absolute;top:0;right:10px}.modal .modalbody div.option{height:45px}.modal .modalbody div.option .fa-level-up{margin-left:30px}
.sandboxmode{padding:10px 20px 0 20px;background:rgba(0,0,30,.1);display:none}.smalltext{font-size:14px}.smalltext .date{display:block;margin:10px -40px 0 -40px;padding:10px 40px;font-size:1.7em;background:rgba(0,0,0,0.2)}.info{white-space:nowrap}.infos{font-size:.6em;text-align:justify}.infos p{margin:0 0 10px 0;padding:10px 0}.infos .center{text-align:center;margin:20px 0;font-size:16px}.infos h1,.infos h2{margin:15px 0 -5px 0}.customizeship{text-align:center;padding:15px;background:rgba(0,0,0,.3);margin-top:20px}
.buy-table tr{border:2px solid rgba(0,0,0,.3)}.buy-table tr td:nth-child(2){padding:10px;text-align:left}.buy-on{float:right;margin-top:10px;padding:5px;width:150px;text-align:center;cursor:pointer}.download-apps{text-align:center}.download-apps img{border:3px solid hsla(200,50%,60%,.5);border-radius:10px;width:64px;margin:10px}.download-apps img:hover{box-shadow:0 0 6px hsla(200,100%,80%,1)}.frozenbg,.frozenbg:visited{background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 20%,hsla(200,50%,60%,.5) 150%);box-shadow:0 0 6px hsla(200,100%,80%,1);text-shadow:0 0 7px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.8)}
.hotbg,.hotbg:visited{background:radial-gradient(ellipse at center,hsla(0,100%,30%,1) 20%,hsla(0,100%,50%,1) 150%);box-shadow:0 0 6px hsla(20,80%,70%,1);color:#FFF;border:0;cursor:pointer}.buy-on:hover{box-shadow:0 0 8px hsla(200,100%,90%,1);color:hsla(200,100%,95%,.9)}.customtable .title{display:inline-block;width:150px;line-height:25px;vertical-align:middle;position:relative}.customtable i{opacity:.5;vertical-align:middle;font-size:3em;padding:10px;cursor:pointer}.customtable i:hover{opacity:1}
.customtable{width:100%;text-align:center}.blue{color:hsl(200,50%,70%)}.smallblue{font-size:60%;color:hsl(200,50%,70%)}#infologo{text-align:center}#infologo img{max-width:70%}canvas{margin-left:auto;margin-right:auto;display:block}.pricechoice{display:inline-block;margin-top:5px;padding:5px}.pricechoice article{display:inline}.pricechoice span{display:inline-block;padding:3px;vertical-align:middle;margin-right:10px;background:linear-gradient(-45deg,hsla(200,30%,30%,.5) 0,hsla(200,50%,50%,.75) 100%);text-align:center;width:68px;cursor:pointer;font-size:1.2em;color:rgba(255,255,255,.5)}
.pricechoice span.active{background:linear-gradient(-45deg,hsla(120,70%,50%,.75) 0,hsla(120,50%,70%,1) 100%);box-shadow:0 0 5px hsl(120,60%,60%);color:rgba(255,255,255,.9)}.custom-amount{display:none;margin-top:10px}.custom-amount input{display:inline-block;padding:4px;vertical-align:middle;text-shadow:0 0 7px hsla(200,80%,80%,1);border:0;outline:0;background:rgba(255,255,255,.1);color:#FFF;margin-right:10px;width:100px;text-align:center;font-size:1.5em}#licenceKey{text-align:center;border:2px solid hsla(200,80%,80%,.2);background:rgba(0,0,0,.2);color:#FFF;width:150px;font-size:1.5em;vertical-align:middle;padding:5px}
#licenceKeyBtn{vertical-align:middle;font-size:1.5em;border:2px solid hsla(200,80%,80%,.2);background:rgba(0,0,0,.2);margin-left:10px;color:#fff;padding:5px 20px}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{display:none}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:white;-webkit-transition:.4s;transition:.4s}
input:checked+.slider{background-color:hsl(200,50%,10%)}input:focus+.slider{box-shadow:0 0 1px hsl(200,60%,30%)}input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}#_outbd_3,#_outbd_3 iframe{max-width:100%}#customEventable{box-shadow:0 0 1px hsl(200,60%,30%);border:0;background:radial-gradient(ellipse at center,hsla(200,50%,0%,1) 20%,hsla(200,50%,60%,.5) 150%);box-shadow:0 0 6px hsla(200,100%,80%,1);text-shadow:0 0 7px hsla(200,100%,80%,1);color:hsla(200,100%,90%,.8);padding:10px 32px;color:white;cursor:pointer}input[type=range]{-webkit-appearance:none;width:100%;margin:7.85px 0;background:transparent}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:9.3px;cursor:pointer;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;background:hsl(200,50%,45%);border-radius:1.3px;border:.2px solid #160101}input[type=range]::-webkit-slider-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:25px;width:16px;border-radius:3px;background:#fff;cursor:pointer;-webkit-appearance:none;margin-top:-8.05px}
input[type=range]:focus::-webkit-slider-runnable-track{background:hsl(200,60%,55%)}input[type=range]::-moz-range-track{width:100%;height:9.3px;cursor:pointer;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;background:hsl(200,50%,45%);border-radius:1.3px;border:.2px solid #160101}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:25px;width:16px;border-radius:3px;background:#fff;cursor:pointer}input[type=range]::-ms-track{width:100%;height:9.3px;cursor:pointer;background:transparent;border-color:transparent;color:transparent}
input[type=range]::-ms-fill-lower{background:#456394;border:.2px solid #160101;border-radius:2.6px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d}input[type=range]::-ms-fill-upper{background:hsl(200,50%,45%);border:.2px solid #160101;border-radius:2.6px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:25px;width:16px;border-radius:3px;background:#fff;cursor:pointer;height:9.3px}input[type=range]:focus::-ms-fill-lower{background:hsl(200,50%,45%)}
input[type=range]:focus::-ms-fill-upper{background:hsl(200,60%,55%)}.github-fork-ribbon:before{background-color:hsla(200,50%,60%,.65)}.github-fork-ribbon:hover:before{background-color:hsla(200,50%,60%,.85)}[data-translate-base="promocontest"]{display:none}[data-tooltip]{position:relative;z-index:2;cursor:pointer}[data-tooltip]:before,[data-tooltip]:after{visibility:hidden;opacity:0;pointer-events:none}[data-tooltip]:before{position:absolute;bottom:150%;left:50%;margin-bottom:-11px;margin-left:-97px;padding:7px;width:180px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background-color:#000;background-color:hsla(200,50%,30%,0.9);color:#fff;content:attr(data-tooltip);text-align:center;font-size:14px;line-height:1.2}.followtools [data-tooltip].fourth:before{margin-left:-125px}
.followtools [data-tooltip]:last-child:before{margin-left:-175px}[data-tooltip]:after{position:absolute;bottom:100%;left:50%;margin-left:-5px;width:0;border-top:5px solid #000;border-top:5px solid hsla(200,50%,30%,.9);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}[data-tooltip]:hover:before,[data-tooltip]:hover:after{visibility:visible;opacity:1}</style>
</head>
<body oncontextmenu="return false;">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-49553618-3', 'auto');
      ga('send', 'pageview');
    </script>
    <div id="canvaswrapper"></div>
    <div id="overlay">
        <div id="preroll"></div>
        <div class="adblock frozenbg"><span data-translate="Your ad-blocker may cause connection problems. Please disable it on Starblast.io to avoid any trouble.">Your ad-blocker may cause connection problems. Please disable it on Starblast.io to avoid any trouble.</span></div>
        <div class="top-right">
        </div>
        <div class="top-left">
            <div class="adsbyvli" data-ad-slot="vi_462315137"></div>
        </div>
        <div id="content">
            <div id="logo"></div>
            <form id="player" class="hide">
                <div class="inputwrapper">
                    <div class="colorwrapper"><span class="colorchosen"></span></div>
                    <input tabindex="0" type="text" maxlength="16" data-translate-placeholder="Your commander name">
                </div>
                <div id="colors" style="display:none;"></div>
                <div class="playbtn noselect">
                    <i id="prevMode" class="fa fa-caret-left"></i>
                    <button id="play">
                        <span data-translate="PLAY">PLAY</span>
                        <div id="game_modes"></div>
                    </button>
                    <i id="nextMode" class="fa fa-caret-right"></i>
                </div>
            </form>
            <div id="connection_lost">
                <span class="cry">:(</span>
                <div data-translate="Your connection has been lost">Your connection has been lost</div>
                <div id="serverip"></div>
            </div>
            <div id="adblocked_message">
                <span class="cry">:(</span>
                <div data-translate="Advertising helps us fund server costs and game development.">Advertising helps us fund server costs and game development.</div>
                <div data-translate="Please disable your adblocker for Starblast.io and you will never see this page again!">Please disable your adblocker for Starblast.io and you will never see this page again!</div>
                <div data-translate="Don't want to see ads? Buy your ECP, remove all ads and get cool bonus features!">Don't want to see ads? Buy your ECP, remove all ads and get cool bonus features!</div>
                <div data-translate="Thank you :)">Thank you :)</div>
                <div class="text-centered"><button class="donate-btn">10</button></div>
            </div>
            <div id="game_over">
                <div id="gameovermsg" data-translate="Game Over">Game Over</div>
                <div id="goinfo"></div>
            </div>
            <div id="respawn">
                <div class="stats"></div>
                <div id="respawn_actions">
                    <button id="continue_btn" data-translate="Continue">Continue</button>
                    <button id="respawn_btn" data-translate="Respawn">Respawn</button>
                    <button id="refresh_btn"><span data-translate="Quit">Quit</span> (<span id="menucountdown"></span>)</button>
                </div>
            </div>
            <div class="hT79D">
                <ins id="_outbd_3"></ins><br>
                <div id="home"></div> 
                <div id="home_mobile"></div>
            </div>
            <div id="respawn_swap"></div>
            <div class="gameloader">
                <div class="gameloaderwrapper"><div class="loaderprogress"></div></div>
                <div class="textprogress" data-translate="Loading...">Loading...</div>
                <div class="tutorial">
                    <div class="desktop">
                        <table>
                            <tr>
                                <td class="mouse">
                                    <div class="mouse-container">
                                        <div class="mouse-top">
                                            <div class="mouse-left"><i class="fa fa-fire"></i></div>
                                            <div class="mouse-right"><i class="fa fa-arrows"></i></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="keyboard">
                                    <div class="top">
                                        <span class="large"><i class="kb-z">Z</i></span>
                                        <span data-translate="ScreenShot">ScreenShot</span>
                                    </div>
                                    <div class="bottom">
                                        <span class="large"><i class="kb-ctrl">CTRL</i></span>
                                        <span id="rcstuto" data-translate="RCS Toggle">RCS Toggle</span>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="mobile">
                        <div class="joystick-container">
                            <i class="mobile-top fa fa-caret-up"></i>
                            <i class="mobile-right fa fa-caret-right"></i>
                            <i class="mobile-bottom fa fa-caret-down"></i>
                            <i class="mobile-left fa fa-caret-left"></i>
                        </div>
                        <i class="mobile-fire fa fa-fire"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="mobile-social">
            <i class="sbg sbg-facebook"></i><br />
            <i class="sbg sbg-twitter"></i>
        </div>
        <div class="mobile-tools">
            <i class="sbg sbg-info"></i><br />
            <i class="sbg sbg-gears"></i><br />
            <i id="donate_mobile" class="sbg sbg-trophy"></i>
        </div>
        <div class="bottom-left">
            <div class="changelog-new" data-translate-base="changelog_new" lang="en">
              <div>
                <h2 style="text-align:center"><i class="fa fa-star"></i> New ECP badges <i class="fa fa-star"></i></h2>
                <p>
                  We have released 5 new ECP badges: ACW / AOW factions. Thanks to Ancient_Sky, Goldman and Tournebulle for working on it :-)
                </p>
                <p style="text-align:center;">
                  <a target="_blank" href="https://starblast-shipyard.github.io/" alt="Loveship shipyard" style="text-decoration: underline">Starblast Shipyard</a>
                </p>
              </div>
              <a class="full-changelog" href="https://starblast.io/changelog.txt">
                  <i class="fa fa-fw fa-check-circle"></i> <span data-translate="Changelog">Changelog</span>
              </a>
            </div>
            <div class="changelog-new" data-translate-base="changelog_new" lang="fr">
              <div>
                <p style="text-align:center;">
                  <a target="_blank"href="https://starblast-shipyard.github.io/" alt="Loveship exoplanet shipyard" style="text-decoration: underline">Starblast Shipyard</a>
                </p>
              </div>
              <a class="full-changelog" href="https://starblast.io/changelog.txt">
                  <i class="fa fa-fw fa-check-circle"></i> <span data-translate="Changelog">Changelog</span>
              </a>
            </div>
            <div class="textcentered community changelog-new" data-translate-base="music" lang="en">
              <a href="https://open.spotify.com/user/gilpom/playlist/47N9rRbMXezlPXvhqVM3lJ?si=6bHzE9A9S-2TGh7C4OndkA" target="_blank"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.56-8-8-8zm3.68 11.56c-.16.24-.44.32-.68.16-1.88-1.16-4.24-1.4-7.04-.76-.28.08-.52-.12-.6-.36-.08-.28.12-.52.36-.6 3.04-.68 5.68-.4 7.76.88.28.12.32.44.2.68zm.96-2.2c-.2.28-.56.4-.84.2-2.16-1.32-5.44-1.72-7.96-.92-.32.08-.68-.08-.76-.4-.08-.32.08-.68.4-.76 2.92-.88 6.52-.44 9 1.08.24.12.36.52.16.8zm.08-2.24C10.16 5.6 5.88 5.44 3.44 6.2c-.4.12-.8-.12-.92-.48-.12-.4.12-.8.48-.92 2.84-.84 7.52-.68 10.48 1.08.36.2.48.68.28 1.04-.2.28-.68.4-1.04.2z" fill-rule="nonzero"/></svg><br>Spotify</a>
              <a href="https://www.deezer.com/playlist/5343057502" target="_blank"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M9.812 12.464h2.917v-.884H9.81v.884zm-6.54 0h2.916v-.884H3.27v.884zm-3.272 0h2.917v-.884H0v.884zm6.54 0h2.92v-.884H6.54v.884zm6.543 0H16v-.884h-2.917v.884zm0-1.15H16v-.883h-2.917v.89zm-6.542 0h2.92v-.883H6.54v.89zm-6.54 0h2.92v-.883H0v.89zm3.27 0h2.92v-.883H3.27v.89zm6.55 0h2.92v-.883H9.81v.89zm0-1.148h2.92v-.884H9.81v.884zm-6.54 0h2.91v-.884H3.27v.884zm-3.27 0h2.91v-.884H0v.884zm6.54 0h2.92v-.884H6.54v.884zm6.55 0H16v-.884h-2.917v.884zm0-1.15H16v-.883h-2.917v.884zm-6.54 0h2.91v-.883H6.54v.884zm-6.54 0h2.91v-.883H0v.884zm9.82 0h2.92v-.883H9.81v.884zm0-1.15h2.92v-.882H9.81v.883zm-9.82 0h2.91v-.88H0v.882zm6.54 0h2.92v-.88H6.54v.882zm6.54 0H16v-.882h-2.917v.884zM6.54 6.72h2.92v-.885H6.54v.884zm6.543-.002H16v-.883h-2.917v.883zM6.54 5.57h2.92v-.885H6.54v.885zm6.543 0H16v-.885h-2.917v.884zm0-1.15H16v-.884h-2.917v.884z"/></svg><br>Deezer</a>
            </div>
            <div class="textcentered community changelog-new" data-translate-base="music" lang="fr">
              <a href="https://open.spotify.com/user/gilpom/playlist/47N9rRbMXezlPXvhqVM3lJ?si=6bHzE9A9S-2TGh7C4OndkA" target="_blank"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.56-8-8-8zm3.68 11.56c-.16.24-.44.32-.68.16-1.88-1.16-4.24-1.4-7.04-.76-.28.08-.52-.12-.6-.36-.08-.28.12-.52.36-.6 3.04-.68 5.68-.4 7.76.88.28.12.32.44.2.68zm.96-2.2c-.2.28-.56.4-.84.2-2.16-1.32-5.44-1.72-7.96-.92-.32.08-.68-.08-.76-.4-.08-.32.08-.68.4-.76 2.92-.88 6.52-.44 9 1.08.24.12.36.52.16.8zm.08-2.24C10.16 5.6 5.88 5.44 3.44 6.2c-.4.12-.8-.12-.92-.48-.12-.4.12-.8.48-.92 2.84-.84 7.52-.68 10.48 1.08.36.2.48.68.28 1.04-.2.28-.68.4-1.04.2z" fill-rule="nonzero"/></svg><br>Spotify</a>
              <a href="https://www.deezer.com/playlist/5343057502" target="_blank"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M9.812 12.464h2.917v-.884H9.81v.884zm-6.54 0h2.916v-.884H3.27v.884zm-3.272 0h2.917v-.884H0v.884zm6.54 0h2.92v-.884H6.54v.884zm6.543 0H16v-.884h-2.917v.884zm0-1.15H16v-.883h-2.917v.89zm-6.542 0h2.92v-.883H6.54v.89zm-6.54 0h2.92v-.883H0v.89zm3.27 0h2.92v-.883H3.27v.89zm6.55 0h2.92v-.883H9.81v.89zm0-1.148h2.92v-.884H9.81v.884zm-6.54 0h2.91v-.884H3.27v.884zm-3.27 0h2.91v-.884H0v.884zm6.54 0h2.92v-.884H6.54v.884zm6.55 0H16v-.884h-2.917v.884zm0-1.15H16v-.883h-2.917v.884zm-6.54 0h2.91v-.883H6.54v.884zm-6.54 0h2.91v-.883H0v.884zm9.82 0h2.92v-.883H9.81v.884zm0-1.15h2.92v-.882H9.81v.883zm-9.82 0h2.91v-.88H0v.882zm6.54 0h2.92v-.88H6.54v.882zm6.54 0H16v-.882h-2.917v.884zM6.54 6.72h2.92v-.885H6.54v.884zm6.543-.002H16v-.883h-2.917v.883zM6.54 5.57h2.92v-.885H6.54v.885zm6.543 0H16v-.885h-2.917v.884zm0-1.15H16v-.884h-2.917v.884z"/></svg><br>Deezer</a>
            </div>
            <div class="textcentered community changelog-new" data-translate-base="community" lang="en">
              <a href="https://www.reddit.com/r/Starblastio/" target="_blank"><i class="sbg sbg-reddit"></i><br>Reddit</a>
              <a href="https://discord.gg/tvnvJTk" target="_blank"><i class="sbg sbg-discord"></i><br>Discord</a>
              <a href="https://starblastio.gamepedia.com" target="_blank"><i class="sbg sbg-wiki"></i><br>Wiki</a>
              <a href="https://www.redbubble.com/fr/people/neuronality/collections/925374-starblast" target="_blank"><i class="sbg sbg-gift"></i><br>Merch</a>
            </div>
            <div class="textcentered community changelog-new" data-translate-base="community" lang="fr">
              <a href="https://www.reddit.com/r/Starblastio/" target="_blank"><i class="sbg sbg-reddit"></i><br>Reddit</a>
              <a href="https://discord.gg/tvnvJTk" target="_blank"><i class="sbg sbg-discord"></i><br>Discord</a>
              <a href="https://starblastio.gamepedia.com" target="_blank"><i class="sbg sbg-wiki"></i><br>Wiki</a>
              <a href="https://www.redbubble.com/fr/people/neuronality/collections/925374-starblast" target="_blank"><i class="sbg sbg-gift"></i><br>Boutique</a>
            </div>
            <div class="extrabutton" data-display-only="es" lang="es">
                Hablas Español? Si es así , ya está disponible un nuevo canal en discord especial para aquellos que hablan español:<br /><br />
                <a href="https://discord.gg/SNwUder">Discord Starblast Español</a>
            </div>
        </div>
        <div class="social">
            <div class="adsbyvli" data-ad-slot="vi_462315138"></div><br>
            <i class="sbg sbg-info"></i>
            <i class="sbg sbg-gears"></i>
            <i class="sbg sbg-facebook"><span class="sbg sbg-diamond"></span></i>
            <i class="sbg sbg-twitter"><span class="sbg sbg-diamond"></span></i>
        </div>
        <div class="followtools">
            <a id="moddingspace" href="#" class="big">
                <i class="sbg sbg-modding"></i><br /><span data-translate="Modding Space">Modding Space</span>
            </a><br />
            <a id="donate" href="#" class="big gold">
                <i class="fa ecplogo"></i><br /><span data-translate="Elite Commander Pass">Elite Commander Pass</span>
            </a><br />
            <a id="rankings" href="#" class="big cup">
                <i class="fa fa-fw fa-trophy"></i><br /> <span data-translate="LEADERBOARD">LEADERBOARD</span>
            </a><br />
            <a data-display-only="en,fr" id="training" href="#" class="big">
                <i class="sbg sbg-fw sbg-fly-mid"></i><br /> <span data-translate="Training">Training</span>
            </a>
        </div>
    </div>
    <div class="modal">
        <div class="header"><span class="close-modal">&times;</span><span class="modaltitle"></span></div>
        <div class="modalbody"></div>
    </div>
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type":"VideoGame",
      "gamePlatform":[
        "https://en.wikipedia.org/wiki/Microsoft_Windows",
        "https://en.wikipedia.org/wiki/MacOS",
        "https://en.wikipedia.org/wiki/Linux"
      ],
      "applicationCategory":"Game",
      "operatingSystem":"Windows, MacOS, Linux",
      "contentRating":"E",
      "releasedEvent":{
        "@type":"PublicationEvent",
        "startDate":"2017-11-08",
        "location":{
          "@type":"Place",
          "name":"WW"
        }
      },
      "name":[
        {
          "@language":"en",
          "@value":"Starblast"
        }
      ],
      "description":[
        {
          "@language":"en",
          "@value":"Multiplayer Arcade Space Shooter Game! Shoot asteroids and enemies to collect crystals. Upgrade your ship before you get killed!"
        },
        {
          "@language":"fr",
          "@value":"Jeu d'arcade multijoueur, shoot'em up spatial ! Détruisez vos ennemis et des astéroïdes avant d'être tués."
        }
      ],
      "genre":[
        "Shoot'em up",
        "Top Down Shooter",
        "Multiplayer Arcade"
      ],
      "url":"https://starblast.io",
      "image":"https://starblast.data.neuronality.com/img/starblast-poster.png",
      "screenshot":"https://starblast.data.neuronality.com/img/screenshots/3-ori.jpg",
      "sameAs": [
        "https://neuronality.com/starblast.html"
      ],
      "trailer":{
        "@type":"VideoObject",
        "url":"https://www.youtube.com/watch?v=q9wuV3P8Adc",
        "inLanguage":"en",
        "name":"Starblast",
        "description":"Multiplayer Arcade Space Shooter io Game! Shoot asteroids and enemies to collect crystals. Upgrade your ship before you get killed!",
        "uploadDate":"2017-09-22",
        "thumbnailUrl":"https://starblast.data.neuronality.com/img/screenshots/starblast.jpg"
      }
    }
    </script>
    <script>var gdactive = false;</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/85/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockadblock/3.2.1/blockadblock.min.js" integrity="sha256-3zU5Lr4nIt3K/BgGOQMduajtZcPV9elIM/23RDXRp3o=" crossorigin="anonymous"></script>
    <script>
        var sdflogo = '<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="152" height="172" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><path d="M70.396,0l19.067,41.667l39.802,16.534l10.705,-10.902l-6.012,35.024l-49.189,4.642l-5.533,8.866l-13.582,0.115l-5.98,-8.104l-48.561,-5.646l-3.529,-33.562l10.259,10.495l36.551,-16.657l16.002,-42.472Z" style="fill:#fff;"/><path d="M129.294,79.457l-127.22,73.318l26.274,-2.885l-16.027,20.667l127.22,-73.319l6.128,-15.684l-16.375,-2.097Z" style="fill:#fff;"/><path d="M142.63,152.687l-127.212,-73.331l-15.418,3.391l5.169,14.39l127.212,73.331l-15.942,-20.335l26.191,2.554Z" style="fill:#fff;"/></svg>' ;
        var b64 = btoa(sdflogo);
        var domurl = self.URL || self.webkitURL || self ;
        var sdflogoimg = new Image();
        sdflogoimg.src = "data:image/svg+xml;base64,"+b64 ;
    </script>
    <script id="donatebox" type="text/x-template">
        <h2 data-translate="Buy Starblast and become an Elite Commander!"></h2>
        <ul>
            <li data-translate="Get a standalone application for Windows, MacOS and Linux with advanced interface, Galaxy Map, full gamepad support, ingame ship tree, enhanced graphics."></li>
            <li data-translate="Play on the web version starblast.io without ads."></li>
            <li data-translate="Customize your ship material and laser type."></li>
            <li data-translate="Stand out with your ingame custom badge"></li>
            <li data-translate="Be ranked in the leaderboards (Deathmatch and Invasion modes)"></li>
            <li data-translate="Start your games with a fully upgraded Lv1 ship!"></li>
            <li data-translate="Create private custom games with tons of options to share with your friends."></li>
            <li data-translate="Early access to features in beta testing."></li>
            <li data-translate="Show your support to the developers!"></li>
        </ul>
        <div class="textcentered" style="margin-top:30px;" data-translate="Buying options: All buying options include the standalone app and an ECP code to play on the web."></div>
        <table class="buy-table download-apps">
            <tr style="background:rgba(0,0,0,.2)">
                <td><img height="64" src="https://starblast.data.neuronality.com/img/paypal-square.png"></td>
                <td>
                    <div data-translate="Your ECP code will be sent to you by e-mail ; get back to this window to insert your code and find the download links to the standalone application. The minimum price is $10 but you can choose to donate more to show your love and support to the devs. Thanks!"></div>
                    <span class="pricechoice">
                        <span data-price="10">$10</span>
                        <span data-price="15" class="active">$15</span>
                        <span data-price="20">$20</span>
                        <span data-price="50">$50</span>
                    </span>
                    <span id="donatebtn" class="buy-on frozenbg" data-translate="Buy with PayPal"></span>
                </td>
            </tr>
            <tr style="background:rgba(0,0,0,.1)">
                <td><img height="64" src="https://starblast.data.neuronality.com/img/itch.png"></td>
                <td>
                    <div data-translate="Itch.io is a cool platform to buy indie games. You can pay with Paypal, Credit card (Stripe) or Bitcoins. Follow the link in the purchase confirmation e-mail to get your ECP code and download the standalone application."></div>
                    <a href="https://neuronality.itch.io/starblast" target="_blank" class="buy-on frozenbg" data-translate="Buy on Itch.io"></a>
                </td>
            </tr>
            <tr style="background:rgba(0,0,0,.2)">
                <td><img height="64" src="https://starblast.data.neuronality.com/img/steam.png"></td>
                <td>
                    <div data-translate="If you already use Steam, this is your best choice. Starblast standalone app will be added to your library and you will enjoy the Steam achievements (exclusive to Steam). You will also get an ECP code to play on the web. The ECP code is fetched from our servers the first time you join a game, then accessible in the About box in the main menu."></div>
                    <a href="http://store.steampowered.com/app/673260/Starblast/" target="_blank" class="buy-on frozenbg" data-translate="Buy on Steam"></a>
                </td>
            </tr>
        </table>
        <form id="paypal_submission" action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="charset" value="UTF-8" />
            <input type="hidden" name="cmd" value="_xclick" />
            <input type="hidden" name="business" value="admin@neuronball.com" />
            <input type="hidden" name="item_name" value="Starblast.io ECP" />
            <input type="hidden" name="amount" value="" />
            <input type="hidden" name="no_note" value="1" />
            <input type="hidden" name="currency_code" value="" />
            <input type="hidden" name="return" value="https://starblast.io/" />
            <input type="hidden" name="cancel_return" value="https://starblast.io/" />
            <input type="hidden" name="custom" value="" />
            <input type="hidden" name="lc" value="" />
            <input type="hidden" name="no_shipping" value="1" />
            <input type="hidden" name="notify_url" value="https://neuronality.com/starblastio/paypalcallback/" />
        </form>
        <hr />
        <h2 data-translate="Enter my key"></h2>
        <p data-translate="Your already own your ECP? Thank you for your purchase! Please enter your ECP key below:"></p>
        <form id="licenceKeyForm">
            <input id="licenceKey" data-translate-placeholder="Enter your key here"><button id="licenceKeyBtn">OK</button>
        </form>
        <p data-translate="For any problem with your ECP key, please e-mail us at contact@neuronality.com, we will help as soon as we can!"></p>
    </script>
    <script id="gameinfos" type="text/x-template">
        <div id='infologo'></div>
        <h2>Gameplay</h2>
        <p><b>Starblast.io is an online game created by Neuronality.</b>
            &nbsp;
        Shoot asteroids and enemies to collect crystals. With your crystals, upgrade your ship, buy new ships and buy extra lives for your existing ship.
            &nbsp;
        <b class='blue'>Share the game through Facebook and Twitter! As a reward, you will start games with a fully upgraded Level 1 ship.</b>
            &nbsp;
        Please disable any ad blocker! Advertising is our only way to provide this game for free.
        </p>
        <h2>Publisher information</h2>
        <p><b>Neuronality SARL</b>
        2 Chemin des Rochers
        67120 MOLSHEIM
        FRANCE
        Siret: R.C.S. Saverne TI 808 517 858
        contact@neuronality.com</p>
        <h2>Web Site Terms and Conditions of Use</h2>
        <p>These terms and conditions govern your use of this website; by using this website, you accept these terms and conditions in full. If you disagree with these terms and conditions or any part of these terms and conditions, you must not use this website.
            &nbsp;
            Neuronality may revise these terms and conditions from time-to-time. Revised terms and conditions will apply to the use of this website from the date of the publication of the revised terms and conditions on this website. Please check this page regularly to ensure you are familiar with the current version.
            &nbsp;
            Starblast.io is a Massively Multiplayer Online Web Arcade Game (MMOWAG)
            &nbsp;
            Starblast.io is provided as is, without any particular guarantee. If you like it, play. If you do not like it, leave. Neuronality will not be liable to you for any loss in relation to the use of the service.
            &nbsp;
            Neuronality owns intellectual property rights on the website and material on the website. You cannot reproduce, publish, use or otherwise exploit material on this website without Neuronality’s consent.
            &nbsp;
            Neuronality authorizes the use of starblast.io game footage in public videos or livestreams published on platforms like Youtube or similar. Published videos can be monetized by their creators. Neuronality cannot claim any share or rights on the revenue generated from such videos.
            &nbsp;
            You accept that Neuronality has the right to cancel your account for any reason, at any time.
            &nbsp;
            These terms and conditions will be governed by and construed in accordance with laws of France, and any disputes relating to these terms and conditions will be subject to the exclusive jurisdiction of the courts of Strasbourg, France.
        </p>
        <h2>Privacy</h2>
        <p>Our website uses local storage to store your nickname and game options.
            Our website uses Google Analytics for anonymous usage statistics.
            Our website uses third party advertising systems such as Google Adsense.</p>
        <h2>Tech info</h2>
        <p>* starblast.io uses THREE.js ; many thanks to mrdoob, WestLangley, alteredq and all contributors
        * We sometimes found inspiration on www.shadertoy.com ; thanks to Inigo Quilez for sharing his deep knowledge and cool experiments
        * starblast.io uses Node.js and engine.io ; thanks to all contributors</p>
        <h2>Music Credits</h2>
        <p>• Procedurality by PMGL (Survival mode, Team mode) <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC-BY</a>
           • Argon by Paralx (DeathMatch) <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC-BY</a> - <a href="https://soundcloud.com/paruhlaks" target="_blank">Paralx SoundCloud</a>
           • Warp Drive by ijash (Alien Intrusion) - <a href="https://www.soundcloud.com/ijash" target="_blank">ijash on SoundCloud</a>
           • Crystals by Professor Kliq (Invasion mode) - Licensed</p>
        <h2>Spatial thanks</h2>
        <p>Our spatial thanks for your <b>tests and support</b>: Cil, Kanzaki, Kent Wax, Leeroy, Yann, Dugame, Thiébaud, Nicolas, Cédric, Alberto, Steven, Arthur, Rémi, Jemy, Hugo, Anthony, Marine, Nadia, Adrien, Héloïse.
        &nbsp;
        <b>Our translators:</b>
        * <a href="https://www.reddit.com/user/SzQ1" target="_blank">SzQ1</a> for Polish
        * <a href="https://www.reddit.com/user/Mefodii" target="_blank">Mefodii</a>, <a href="https://www.reddit.com/user/desperad07">desperad07</a> for Russian
        * <a href="https://www.reddit.com/user/fuck_y_all" target="_blank">fkyall</a> for Hungarian
        * <a href="https://www.reddit.com/user/Starblast-Gpolic" target="_blank">Starblast-Gpolic</a> for Spanish
        * <a href="https://www.reddit.com/user/ayane_m" target="_blank">ayane_m</a> for Japanese
        * <a href="https://www.reddit.com/user/GALM-oficial" target="_blank">GALM-oficial</a> for Portuguese
        * <a href="https://www.reddit.com/user/1337_I-I3XX04" target="_blank">O---[==========></a> for German
        * <a href="https://www.reddit.com/user/Alcatraz_Cro" target="_blank">Alcatraze</a> for Croatian
        * <a href="https://www.reddit.com/user/TR_TurkeyFighter" target="_blank">Turkey Fighter</a> for Turkish
        * Kolo for Arabic
        * <a href="https://www.reddit.com/user/tsskyx" target="_blank">tsskyx</a> for Czech
        * A kind anonymous for Slovak
        * <a href="https://www.reddit.com/user/F3ZION" target="_blank">F3ZION</a> for Indonesian
        * A kind anonymous for Dutch
        * <a href="https://www.reddit.com/user/SergioPlus" target="_blank">SergioPlus</a> for Italian
        * <a href="https://www.reddit.com/user/UberVoyager" target="_blank">UberVoyager</a> for Swedish
        * <a href="https://www.reddit.com/user/Salajan_Caius" target="_blank">Salajan_Caius</a> for Romanian
        * <a href="https://www.reddit.com/user/HUCK45" target="_blank">HUCK45</a> for Hebrew
        * <a href="http://telegram.me/translationboard" target="_blank">soheil ahmady</a> for Farsi
        </p>
        <h2>More online games / partners</h2>
        <p>
        * <a href="http://titotu.io/">titotu.io</a>
        * <a href="http://iogames.space/">iogames.space</a>
        * <a href="http://vseigru.net/">vseigru.net</a>
        * <a href="http://www.addictinggames.com/">Addicting Games</a>
        * <a href="https://www.gametop.com/online/">GameTop</a>
        * <a href="https://www.crazygames.com/c/io">io games on CrazyGames</a>
        </p>
    </script>
    <script>
    var _comscore = _comscore || []; _comscore.push({ c1: "2", c2: "6035118" });
    (function() {
       var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
       s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
       el.parentNode.insertBefore(s, el);
    })();
    </script>
    <noscript><img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035118&amp;cv=2.0&amp;cj=1" /></noscript>
    <div><img src="//secure-us.imrworldwide.com/cgi-bin/m?ci=us-603339h&amp;cg=0&amp;cc=1&amp;ts=noscript" width="1" height="1" alt="" /></div>
    <div id="cdm-zone-end"></div>
    <script>(function(s,t,a,r,b,l,i,o){ var saveAs,II01O,extend,hasProp,OO10I,lOlOO,BuyWeaponButton,HealingButton,RemoveWeaponButton,StoreCountDown,TransferButton,WeaponStoreBackground,WeaponStoreExitButton,WeaponStorePlaceholder,WeaponStoreShipView,WeaponStoreTitle,deepspaceworker,workerfunk,nebulasworker,Scene,CONSTANTS,llllO,l000I,O1Ill,BATTLE_SHIP_TYPES,WEAPON_TYPES,ALIEN_TYPES,O1I10,lIOIO,OIOIO,lO1lI,l1IO1,STATION_MODULES,ATTACK_POD_MODEL,DEFENCE_POD_MODEL,MINING_POD_MODEL,i,MISSILE_MODEL,ROCKET_MODEL,TORPEDO_MODEL,MINE2_MODEL,MINE_MODEL,j,k,l,m,expand,bind,IFrameDetection,base,indexOf,II1l1,BATTLE_SHIPS,arrayMult,ALIEN_MODELS,HALO_MODELS,GIFT_MODEL,battle_finished,battle_started,O10IO,exportShipTree,I110I,gamesettings,Translations,t,texists,translations;!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,i=t.Blob&&function(){try{return!!new Blob}catch(t){return!1}}(),s=i&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),n=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,l=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(i||n)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,a,o,r,h,u,d,I,c;if(!(e=t.match(l)))throw Error("invalid data URI");for(a=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),o=!!e[4],r=t.slice(e[0].length),h=o?atob(r):decodeURIComponent(r),u=new ArrayBuffer(h.length),d=new Uint8Array(u),I=0;I<h.length;I+=1)d[I]=h.charCodeAt(I);return i?new Blob([s?d:u],{type:a}):(c=new n,c.append(u),c.getBlob(a))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,i,s){t(s&&e.toDataURL&&a?a(this.toDataURL(i,s)):this.mozGetAsFile("blob",i))}:e.toDataURL&&a&&(e.toBlob=function(t,e,i){t(a(this.toDataURL(e,i)))})),"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:t.dataURLtoBlob=a}(window),saveAs=saveAs||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,l=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=t.webkitRequestFileSystem,o=t.requestFileSystem||a||t.mozRequestFileSystem,r=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},h="application/octet-stream",u=0,d=function(e){var s=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};t.chrome?s():setTimeout(s,500)},I=function(t,e,i){var s,n;for(e=[].concat(e),s=e.length;s--;)if("function"==typeof(n=t["on"+e[s]]))try{n.call(t,i||t)}catch(t){r(t)}},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},p=function(e,r,p){p||(e=c(e));var O,m,f,g=this,y=e.type,v=!1,b=function(){I(g,"writestart progress IlOII writeend".split(" "))},w=function(){if((v||!O)&&(O=i().createObjectURL(e)),m)m.location.href=O;else{void 0==t.open(O,"_blank")&&"undefined"!=typeof safari&&(t.location.href=O)}g.readyState=g.DONE,b(),d(O)},x=function(t){return function(){return g.readyState!==g.DONE?t.apply(this,arguments):void 0}},k={create:!0,exclusive:!1};return g.readyState=g.INIT,r||(r="download"),n?(O=i().createObjectURL(e),s.href=O,s.download=r,void setTimeout(function(){l(s),b(),d(O),g.readyState=g.DONE})):(t.chrome&&y&&y!==h&&(f=e.slice||e.webkitSlice,e=f.call(e,0,e.size,h),v=!0),a&&"download"!==r&&(r+=".download"),(y===h||a)&&(m=t),o?(u+=e.size,void o(t.TEMPORARY,u,x(function(t){t.root.getDirectory("saved",k,x(function(t){var i=function(){t.getFile(r,k,x(function(t){t.createWriter(x(function(i){i.onwriteend=function(e){m.location.href=t.toURL(),g.readyState=g.DONE,I(g,"writeend",e),d(t)},i.onerror=function(){var t=i.error;t.code!==t.ABORT_ERR&&w()},"writestart progress IlOII abort".split(" ").forEach(function(t){i["on"+t]=g["on"+t]}),i.IlOII(e),g.abort=function(){i.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),w)}),w)};t.getFile(r,{create:!1},x(function(t){t.remove(),i()}),x(function(t){t.code===t.NOT_FOUND_ERR?i():w()}))}),w)}),w)):void w())},O=p.prototype,m=function(t,e,i){return new p(t,e,i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return i||(t=c(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(O.abort=function(){var t=this;t.readyState=t.DONE,I(t,"abort")},O.readyState=O.INIT=0,O.WRITING=1,O.DONE=2,O.error=O.onwritestart=O.onprogress=O.onwrite=O.onabort=O.onerror=O.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),window.makeScreenshot=function(){var t,e=I110I.display.O1OOO.domElement,i=document.createElement("canvas");i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0),i.toBlob(function(t){var e=new Date;saveAs(t,"starblast-"+e.getTime()+".png")},"image/png",1)},module={},require=function(t,e){return e},II01O=function(){var t,e,i;return i=function(){if(I110I.O1IO0.I10I0)return I110I.sendGAEvent("gd_resume"),I110I.resume(),I110I.respawn(),I110I.O1IO0.clear(),gdApi.play()},e=function(){},t={gameId:"918fa3adc9e24eaa9a8d4ccf68f42259",userId:"7BFF8669-0037-4D21-81C0-AE80D9608D4D-s1",resumeGame:i,pauseGame:e,onInit:function(t){},onError:function(t){if(I110I.O1IO0.I10I0)return I110I.sendGAEvent("gd_error"),I110I.resume(),I110I.respawn(),gdApi.play(),I110I.O1IO0.clear()}},function(t,e,i,s,n,l,a){t.GameDistribution=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,l=e.createElement(i),a=e.getElementsByTagName(i)[0],l.async=1,l.src="//html5.api.gamedistribution.com/libs/gd/api.js",a.parentNode.insertBefore(l,a)}(window,document,"script",0,"gdApi"),gdApi(t)},this.Ol001=function(){function t(t){this.value=t,this.speed=0,this.k=.1,this.f=.1,this.next=[],this.IOOOI=0,this.l0OI1=this.value}return t.prototype.l1lIO=function(t){if(this.value=t,this.IOOOI=0,null==this.value&&(this.value=this.l0OI1),this.next.length>0)return this.next=[]},t.prototype.push=function(t,e,i,s){return null==i&&(i=this.k),null==s&&(s=this.f),this.IOOOI<=0?this.set(t,e,i,s):this.next.push({target:t,IOOOI:e,k:i,f:s})},t.prototype.set=function(t,e,i,s,n){if(this.target=t,this.IOOOI=e,this.k=null!=i?i:this.k,this.f=null!=s?s:this.f,null==n&&(n=!0),null==this.target&&(this.target=this.l0OI1),n&&this.next.length>0)return this.next=[]},t.prototype.l1O00=function(t){var e,i;if(!(this.IOOOI<=0)){for(;;){if(t--<=0)break;if(this.IOOOI-=.0166667,this.IOOOI<=0)break;i="function"==typeof this.target?this.target(this.IOOOI):this.target,this.speed*=1-this.f,this.speed+=this.k*(i-this.value),this.value+=this.speed}if(this.IOOOI<=0){if(this.next.length>0)return e=this.next.splice(0,1)[0],this.set(e.target,e.IOOOI,e.k,e.f,!1);if("number"==typeof this.target&&(this.value=this.target),null!=this.OI001)return this.OI001(),this.OI001=null}}},t}(),this.I1I0O=function(){function t(t){this.component=t,this.I0O1O=new Ol001(1),this.I1ll0=new Ol001(1),this.rotation=new Ol001(0),this.III1l=new Ol001(0),this.I0O10=new Ol001(0),this.opacity=new Ol001(1)}return t.prototype.IOI0I=function(t){return this.I0O1O.OI001=t},t.prototype.isRunning=function(){return this.I0O1O.IOOOI>0},t.prototype.l1O00=function(){var t,e;return null==this.Ol000&&(this.Ol000=Date.now()),e=Date.now(),t=Math.max(1,Math.min(30,Math.round((e-this.Ol000)/1e3*60))),this.Ol000=e,this.I0O1O.l1O00(t),this.I1ll0.l1O00(t),this.rotation.l1O00(t),this.III1l.l1O00(t),this.I0O10.l1O00(t),this.opacity.l1O00(t)},t.prototype.title=function(t,e,i,s){return t=(t-(this.component.x+this.component.width/2))/this.component.width,e=(e-(this.component.y+this.component.height/2))/this.component.height,this.I0O1O.l1lIO(.1),this.I1ll0.l1lIO(.1),this.opacity.l1lIO(0),this.III1l.l1lIO(t),this.I0O10.l1lIO(e),this.rotation.l1lIO(s/2),this.I0O1O.push(i,2,.01,.1),this.I1ll0.push(i,2,.01,.1),this.III1l.push(t,2,.01,.1),this.I0O10.push(e,2,.01,.1),this.rotation.push(s,2,.01,.1),this.opacity.push(1,2,.1,.5),this.I0O1O.push(1,2,.05,.4),this.I1ll0.push(1,2,.05,.4),this.III1l.push(0,2,.05,.4),this.I0O10.push(0,2,.05,.4),this.rotation.push(0,2,.05,.4)},t.prototype.l1lIO=function(t){if(null!=t.I0O1O&&this.I0O1O.l1lIO(t.I0O1O),null!=t.I1ll0&&this.I1ll0.l1lIO(t.I1ll0),null!=t.III1l&&this.III1l.l1lIO(t.III1l),null!=t.I0O10&&this.I0O10.l1lIO(t.I0O10),null!=t.rotation&&this.rotation.l1lIO(t.rotation),null!=t.opacity)return this.opacity.l1lIO(t.opacity)},t.prototype.set=function(t,e,i,s){return null==t&&(t={}),null==e&&(e=1),null==i&&(i=.02),null==s&&(s=.2),e=null!=t.d?t.d:e,i=null!=t.k?t.k:i,s=null!=t.f?t.f:s,this.I0O1O.set(null!=t.I0O1O?t.I0O1O:1,e,i,s),this.I1ll0.set(null!=t.I1ll0?t.I1ll0:1,e,i,s),this.III1l.set(null!=t.III1l?t.III1l:0,e,i,s),this.I0O10.set(null!=t.I0O10?t.I0O10:0,e,i,s),this.rotation.set(null!=t.rotation?t.rotation:0,e,i,s),this.opacity.set(null!=t.opacity?t.opacity:1,e,i,s)},t.prototype.push=function(t,e,i,s){return null==e&&(e=1),null==i&&(i=.02),null==s&&(s=.2),e=null!=t.d?t.d:e,i=null!=t.k?t.k:i,s=null!=t.f?t.f:s,this.I0O1O.push(null!=t.I0O1O?t.I0O1O:1,e,i,s),this.I1ll0.push(null!=t.I1ll0?t.I1ll0:1,e,i,s),this.III1l.push(null!=t.III1l?t.III1l:0,e,i,s),this.I0O10.push(null!=t.I0O10?t.I0O10:0,e,i,s),this.rotation.push(null!=t.rotation?t.rotation:0,e,i,s),this.opacity.push(null!=t.opacity?t.opacity:1,e,i,s)},t.prototype.OOOI1=function(e){return this.l1lIO(t.IIOIl),null!=e&&this.pause(e),this.push(t.normal,1,.05,.3)},t.prototype.pause=function(t){return this.I0O1O.push(this.I0O1O.value,t,.1,.1),this.I1ll0.push(this.I1ll0.value,t,.1,.1),this.III1l.push(this.III1l.value,t,.1,.1),this.I0O10.push(this.I0O10.value,t,.1,.1),this.rotation.push(this.rotation.value,t,.1,.1),this.opacity.push(this.opacity.value,t,.1,.1)},t.IIOIl={I0O1O:.1,I1ll0:.1,opacity:0},t.normal={},t.pressed={I0O1O:.9,I1ll0:.9,rotation:0,III1l:0,I0O10:0,opacity:.8},t.II1OI={I0O1O:2,I1ll0:2,rotation:0,III1l:0,I0O10:0,opacity:0},t}(),this.IIIlO=function(){function t(t,e,i,s){this.x=null!=t?t:0,this.y=null!=e?e:0,this.width=null!=i?i:1,this.height=null!=s?s:1,this.parent=null,this.opacity=1,this.l00ll=!0,this.level=0,this.levelmod=0,this.fit="scale",this.visible=!0,this.rendered_width=0,this.rendered_height=0,this.filter=THREE.LinearFilter,this.blending=THREE.NormalBlending,this.l000l=new I1I0O(this)}return t.prototype.I1llI=function(t,e,i,s,n){var l,a,o;if(this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n,this.level+=this.levelmod,null!=this.force_ratio)return o=this.force_ratio,l=1,a=Math.min(this.IOII0/o,this.O0O10/l),o*=a,l*=a,this.px+=(this.IOII0-o)/2,this.align_top||(this.OO000+=(this.O0O10-l)/2),this.IOII0=o,this.O0O10=l},t.prototype.getAbsolutePosition=function(){var t;return null!=this.parent&&null!=this.parent.getAbsolutePosition?(t=this.parent.getAbsolutePosition(),{x:t.x+this.x*t.width,y:t.y+this.y*t.height,width:t.width*this.width,height:t.height*this.height}):{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.I0II1=function(){var t,e,i;return i=this.llI01(this.IOII0),e=this.llI01(this.O0O10),null==this.image||this.image.width!==i||this.image.height!==e?(this.image=document.createElement("canvas"),this.image.width=this.llI01(this.IOII0),this.image.height=this.llI01(this.O0O10)):this.image.getContext("2d").clearRect(0,0,i,e),t=this.image.getContext("2d"),t.save(),t.scale(this.image.width/this.IOII0,this.image.height/this.O0O10),t.translate(-this.px,-this.OO000),this.lOO01(t),t.restore(),this.rendered_width=this.IOII0,this.rendered_height=this.O0O10,this.image},t.prototype.llI01=function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.prototype.needsUpdate=function(){return this.l00ll||null==this.image||this.rendered_width!==this.IOII0||this.rendered_height!==this.O0O10},t.prototype.I0Ill=function(){var t;return t=this.l000l.opacity.value,null!=this.parent&&(t*=this.parent.I0Ill()),t},t.prototype.III10=function(){var t,e,i,s;if(this.l000l.l1O00(),null!=this.object){switch(this.object.position.x=this.px+this.IOII0/2+this.l000l.III1l.value*this.IOII0,this.object.position.y=this.OO000+this.O0O10/2+this.l000l.I0O10.value*this.O0O10,this.object.position.z=-1e3-this.level,this.fit){case"fit":s=Math.min(this.IOII0/this.image.width,this.O0O10/this.image.height),this.object.scale.x=-s*this.image.width*this.l000l.I0O1O.value,this.object.scale.y=s*this.image.height*this.l000l.I1ll0.value;break;default:this.object.scale.x=-this.IOII0*this.l000l.I0O1O.value,this.object.scale.y=this.O0O10*this.l000l.I1ll0.value}for(this.material.opacity=this.I0Ill(),this.material.rotation=this.l000l.rotation.value-Math.PI,i=this.parent,t=0,e=0;;){if(null==i)break;t-=i.l1l1O,e-=i.lll00,i=i.parent}return this.object.position.x+=t,this.object.position.y+=e}},t.prototype.IO0ll=function(){var t;if(this.needsUpdate()){if(t=this.image,this.I0II1(),null==this.image)return;if(this.image instanceof Image&&!this.image.complete)return;if(null==this.parent||null==this.parent.object)return;this.l00ll=!1,null==this.texture||t!==this.image?(this.texture=new THREE.Texture(this.image),this.texture.minFilter=this.filter,this.texture.needsUpdate=!0,this.material=new THREE.SpriteMaterial({map:this.texture,transparent:!0,blending:this.blending}),null!=this.object&&this.parent.object.remove(this.object),this.object=new THREE.Sprite(this.material),this.parent.object.add(this.object)):this.texture.needsUpdate=!0}if(null!=this.object)return this.object.visible=this.visible},t.prototype.lOO01=function(t){return t.fillStyle="rgba(255,255,255,.2)",t.fillRoundRect(0,0,this.IOII0,this.O0O10,10)},t.prototype.l11Il=function(t,e,i){return!1},t.prototype.O101O=function(t,e,i){return!1},t.prototype.I11IO=function(t,e,i){return!1},t.prototype.l0IlO=function(t){return!1},t.prototype.mouseMove=function(t,e,i){return!1},t.prototype.ll110=function(t){return this.IO0ll(),this.III10()},t.prototype.refresh=function(){if(this.O001I=!1,null!=this.parent)return this.parent.refresh()},t.prototype.IO0O1=function(){},t.prototype.dispose=function(){if(null!=this.object&&null!=this.object.dispose&&this.object.dispose(),null!=this.texture)return this.texture.dispose()},t.prototype.lOl1l=function(t){},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Ol0l0=function(t){function e(t){var i;this.I0I00=t,e.I0Il1.constructor.call(this),"string"==typeof this.I0I00&&(i=this.I0I00,this.I0I00=new Image,this.I0I00.crossOrigin="anonymous",this.I0I00.src=i,this.I0I00.onload=function(t){return function(){return t.I0I00.width>0&&t.I0I00.height>0&&(t.force_ratio=t.I0I00.width/t.I0I00.height),t.l00ll=!0}}(this)),this.I0I00.width>0&&this.I0I00.height>0&&(this.force_ratio=this.I0I00.width/this.I0I00.height)}return extend(e,t),e.prototype.lOO01=function(t){if(null!=this.I0I00&&this.I0I00.width>0&&this.I0I00.height>0)return t.drawImage(this.I0I00,this.px,this.OO000,this.IOII0,this.O0O10)},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.IO0Il=function(t){function e(t){this.OIl1l=t,e.I0Il1.constructor.call(this),this.pressed=!1,this.enabled=!0}return extend(e,t),e.prototype.l11Il=function(t,e,i){return!!this.enabled&&(null!=this.OIl1l&&null!=this.OIl1l.pressed&&"function"==typeof this.OIl1l.pressed?(this.pressed=!0,this.OIl1l.pressed()?this.l000l.set(I1I0O.pressed,.5,.3,.4):this.pressed=!1):(this.l000l.set(I1I0O.pressed,.5,.3,.4),this.pressed=!0),!0)},e.prototype.O101O=function(t,e,i){return!!this.enabled&&(t>=this.px&&e>=this.OO000&&t<this.px+this.IOII0&&e<this.OO000+this.O0O10?(this.pressed||(this.pressed=!0,this.l000l.set(I1I0O.pressed,.5,.4,.5)),Math.abs(this.OlO0l-t)<window.innerWidth/50&&Math.abs(this.OOIII-e)<window.innerHeight/50):(this.pressed&&(this.pressed=!1,this.l000l.set(I1I0O.normal,.5,.4,.5)),!1))},e.prototype.I11IO=function(t,e,i){return!!this.enabled&&(null!=this.OIl1l&&null!=this.OIl1l.O1O0l&&this.OIl1l.O1O0l(),this.pressed&&(this.l000l.set(I1I0O.normal,.5,.3,.4),this.pressed=!1,null!=this.OIl1l&&null!=this.OIl1l.O1I11&&this.OIl1l.O1I11()),!0)},e.prototype.l0IlO=function(t){return!!this.enabled&&(null!=this.OIl1l&&null!=this.OIl1l.O1O0l&&this.OIl1l.O1O0l(),this.pressed&&(this.l000l.set(I1I0O.normal,.5,.2,.3),this.pressed=!1),!0)},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.l0llO=function(t){function e(t){this.text=t,e.I0Il1.constructor.call(this),this.font="Verdana",this.stroke_size=0,this.stroke_color="#000",this.background="#456",this.radius=.1,this.color="#FFF",this.font_size=5,this.align="center",this.blending=THREE.AdditiveBlending,this.text_shadow={opacity:0,blur:0,color:"#000"}}return extend(e,t),e.prototype.l1O11=function(t){return this.l00ll=t!==this.text,this.text=t},e.prototype.lOO01=function(t){var e;if(t.save(),null!=this.background&&("function"==typeof this.background?this.background(t,this.px,this.OO000,this.IOII0,this.O0O10):(t.fillStyle=this.background,t.fillRoundRect(this.px,this.OO000,this.IOII0,this.O0O10,Math.min(this.IOII0,this.O0O10)*this.radius))),e=this.font_size*this.O0O10/10,t.font=e+"pt "+this.font,t.textBaseline="middle",t.textAlign=this.align,t.fillStyle=this.color,this.stroke_size>0&&this.text_shadow.opacity>0){switch(t.shadowColor=this.text_shadow.color,t.shadowOpacity=this.text_shadow.opacity,t.shadowBlur=this.text_shadow.blur*this.O0O10/100,this.align){case"center":t.fillText(this.text,this.px+this.IOII0/2,this.OO000+this.O0O10/2);break;case"left":t.fillText(this.text,this.px,this.OO000+this.O0O10/2);break;case"right":t.fillText(this.text,this.px+this.IOII0,this.OO000+this.O0O10/2)}t.shadowBlur=0,t.shadowOpacity=0}if(this.stroke_size>0)switch(t.lineWidth=this.stroke_size*this.O0O10/100,t.strokeStyle=this.stroke_color,this.align){case"center":t.strokeText(this.text,this.px+this.IOII0/2,this.OO000+this.O0O10/2);break;case"left":t.strokeText(this.text,this.px,this.OO000+this.O0O10/2);break;case"right":t.strokeText(this.text,this.px+this.IOII0,this.OO000+this.O0O10/2)}switch(this.text_shadow.opacity>0&&0===this.stroke_size&&(t.shadowColor=this.text_shadow.color,t.shadowOpacity=this.text_shadow.opacity,t.shadowBlur=this.text_shadow.blur*this.O0O10/100),this.align){case"center":t.fillText(this.text,this.px+this.IOII0/2,this.OO000+this.O0O10/2);break;case"left":t.fillText(this.text,this.px,this.OO000+this.O0O10/2);break;case"right":t.fillText(this.text,this.px+this.IOII0,this.OO000+this.O0O10/2)}return t.restore()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.OlOII=function(t){function e(t,i,s,n,l,a){this.text=t,this.OI001=i,null==s&&(s=0),null==n&&(n=0),null==l&&(l=1),null==a&&(a=1),e.I0Il1.constructor.call(this,s,n,l,a),this.background="hsl(200,50%,50%)",this.color="#FFF"}return extend(e,t),e.prototype.lOO01=function(t){var e;return t.save(),t.fillStyle=this.background,t.fillRoundRect(this.px,this.OO000,this.IOII0,this.O0O10,.05*Math.min(this.IOII0,this.O0O10)),e=Math.round(Math.min(this.IOII0/Math.max(1,this.text.length)*.8,this.O0O10/4)),t.font=e+"pt Verdana",t.textAlign="center",t.fillStyle=this.color,t.fillText(this.text,this.px+this.IOII0/2,this.OO000+this.O0O10/2+e/2),t.restore()},e.prototype.l1O11=function(t){return this.text=t,this.l00ll=!0},e.prototype.l11Il=function(t,e,i){return this.l000l.set(I1I0O.pressed,.5,.4,.5),this.pressed=!0,this.OlO0l=t,this.OOIII=e,!0},e.prototype.O101O=function(t,e,i){return t>=this.px&&e>=this.OO000&&t<this.px+this.IOII0&&e<this.OO000+this.O0O10?(this.pressed||(this.pressed=!0,this.l000l.set(I1I0O.pressed,.5,.4,.5)),Math.abs(this.OlO0l-t)<window.innerWidth/50&&Math.abs(this.OOIII-e)<window.innerHeight/50):(this.pressed&&(this.pressed=!1,this.l000l.set(I1I0O.normal,.5,.4,.5)),!1)},e.prototype.I11IO=function(t,e,i){return this.pressed&&(this.l000l.set(I1I0O.normal,.5,.4,.5),this.pressed=!1,null!=this.OI001&&this.OI001()),!0},e.prototype.l0IlO=function(t){return this.pressed&&(this.l000l.set(I1I0O.normal,.5,.4,.5),this.pressed=!1),!0},e.prototype.refresh=function(){if(this.O001I=!1,null!=this.parent)return this.parent.refresh()},e.prototype.IO0O1=function(){},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.lI1O1=function(t){function e(t){this.image=t,e.I0Il1.constructor.call(this,this.image),this.fit="scale",this.O1O10=11}return extend(e,t),e.prototype.IO0O1=function(){if(e.I0Il1.IO0O1.call(this),null!=this.texture)return this.texture.offset.x=this.value/this.O1O10,this.texture.repeat.x=1/this.O1O10},e.prototype.IO0ll=function(){if(null==this.object&&(e.I0Il1.IO0ll.call(this),null!=this.object))return this.IO0O1(),this.texture.needsUpdate=!0},e}(Ol0l0),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Il0ll=function(t){function e(t,i,s,n){null==t&&(t=0),null==i&&(i=0),null==s&&(s=1),null==n&&(n=1),e.I0Il1.constructor.call(this,t,i,s,n),this.children=[],this.IlI01=[],this.l1l1O=0,this.lll00=0,this.Il0lO=!1,this.lO0ll=0,this.l0I0O=0,this.III0l=0,this.lOIOO=0,this.l1I11=0,this.lOOO0=0,this.lI111=Date.now(),this.IIIl0=!0,this.OllIl=1,this.lOOOI=1.1}return extend(e,t),e.prototype.add=function(t,e,i){return null==i&&(i=e),t.lO110=e,t.O0l1I=i,this.children.push(t),t.parent=this},e.prototype.remove=function(t){var e,i,s,n,l;for(l=this.children,i=s=0,n=l.length;s<n;i=++s)if((e=l[i])===t)return this.children.splice(i,1),void(null!=e.object&&null!=this.object&&this.object.remove(e.object))},e.prototype.l111l=function(){for(;this.children.length>0;)this.remove(this.children[0])},e.prototype.l1IIl=function(t){return this.IOII0>this.O0O10*this.lOOOI&&null!=t.O0l1I?(t.x=t.O0l1I[0],t.y=t.O0l1I[1],t.width=t.O0l1I[2],t.height=t.O0l1I[3]):t.lO110&&(t.x=t.lO110[0],t.y=t.lO110[1],t.width=t.lO110[2],t.height=t.lO110[3]),t.I1llI(this.px+t.x*this.IOII0,this.OO000+t.y*this.O0O10,t.width*this.IOII0,t.height*this.O0O10,this.level+1)},e.prototype.I1llI=function(t,i,s,n,l){var a,o,r,h,u,d,I;for(e.I0Il1.I1llI.call(this,t,i,s,n,l),d=this.children,o=0,h=d.length;o<h;o++)a=d[o],this.l1IIl(a);if(this.Il0lO){for(this.lO0ll=0,this.l0I0O=0,I=this.children,r=0,u=I.length;r<u;r++)a=I[r],this.lO0ll=Math.max(this.lO0ll,a.px+a.IOII0-this.IOII0-this.px),this.l0I0O=Math.max(this.l0I0O,a.OO000+a.O0O10-this.O0O10-this.OO000);return this.scrollTo(this.l1I11,this.lOOO0)}},e.prototype.l1IOI=function(t,e){var i,s,n,l,a,o,r,h;for(h=[],o=r=this.children.length-1;r>=0;o=r+=-1)i=this.children[o],i.visible&&(l=i.px,a=i.OO000,n=i.IOII0,s=i.O0O10,null!=i.l000l&&(l+=n*i.l000l.III1l.value,a+=s*i.l000l.I0O10.value),t+this.l1l1O>=l&&t+this.l1l1O<l+n&&e+this.lll00>=a&&e+this.lll00<=a+s&&h.push(i));return h},e.prototype.l11Il=function(t,e,i){var s,n,l,a;for(this.Il0lO&&(this.pressed=!0,this.lI000=t,this.l110l=e,this.l0O0I=this.l1l1O,this.l01OI=this.lll00),a=this.l1IOI(t,e),n=0,l=a.length;n<l;n++)if(s=a[n],s.l11Il(t+this.l1l1O,e+this.lll00,i))return this.IlI01[i]=s,!0;return!!this.Il0lO},e.prototype.O101O=function(t,e,i){if(null!=this.IlI01[i]){if(this.IlI01[i].O101O(t+this.l1l1O,e+this.lll00,i))return!0;if(this.Il0lO)return this.IlI01[i].l0IlO(),delete this.IlI01[i],!0}else if(this.Il0lO)return this.l1I11=Math.max(0,Math.min(this.lO0ll,this.l0O0I+1.5*(this.lI000-t))),this.lOOO0=Math.max(0,Math.min(this.l0I0O,this.l01OI+1.5*(this.l110l-e))),!0;return!1},e.prototype.mouseMove=function(t,e,i){var s,n,l,a;for(a=this.l1IOI(t,e),n=0,l=a.length;n<l;n++)if(s=a[n],s.mouseMove(t+this.l1l1O,e+this.lll00,i))return!0;return!1},e.prototype.I11IO=function(t,e,i){var s;return this.pressed=!1,null!=this.IlI01[i]?(s=this.IlI01[i],delete this.IlI01[i],s.I11IO(t+this.l1l1O,e+this.lll00,i)):(this.Il0lO&&this.scrollTo(this.l0O0I+1.5*(this.lI000-t),this.l01OI+1.5*(this.l110l-e)),this.Il0lO)},e.prototype.scrollTo=function(t,e){var i,s;if(this.l1I11=Math.max(0,Math.min(this.lO0ll,t)),this.lOOO0=Math.max(0,Math.min(this.l0I0O,e)),!this.pressed)return i=Math.round(this.l1I11/(this.IOII0*this.OllIl)),s=Math.round(this.lOOO0/(this.O0O10*this.OllIl)),this.l1I11=Math.max(0,Math.min(this.lO0ll,i*this.IOII0*this.OllIl)),this.lOOO0=Math.max(0,Math.min(this.l0I0O,s*this.O0O10*this.OllIl))},e.prototype.l0IlO=function(t){var e;return this.pressed=!1,null!=this.IlI01[t]?(e=this.IlI01[t],delete this.IlI01[t],e.l0IlO(t)):this.Il0lO},e.prototype.ll110=function(t){var e,i,s,n;for(this.l000l.l1O00(),null==this.object?(this.object=new THREE.Group,t.add(this.object)):(this.object.scale.x=this.l000l.I0O1O.value,this.object.scale.y=this.l000l.I1ll0.value,this.object.position.x=this.IOII0*this.l000l.III1l.value,this.object.position.y=this.O0O10*this.l000l.I0O10.value,this.object.visible=this.visible),n=this.children,i=0,s=n.length;i<s;i++)null!=(e=n[i])&&e.ll110(this.object);return!0},e.prototype.IO0O1=function(){var t,i,s,n;for(e.I0Il1.IO0O1.call(this),this.l1I00(),n=this.children,i=0,s=n.length;i<s;i++)t=n[i],t.IO0O1();return!0},e.prototype.l1OIO=function(t,e){return this.scrollTo(this.l1l1O+t*this.IOII0*this.OllIl,this.lll00+e*this.O0O10*this.OllIl)},e.prototype.lOl1l=function(t){var e,i,s,n;for(n=this.children,i=0,s=n.length;i<s;i++)e=n[i],e.lOl1l(t)},e.prototype.l1I00=function(){var t,e,i,s;if(Math.abs(this.l1I11-this.l1l1O)+Math.abs(this.lOOO0-this.lll00)+Math.abs(this.III0l)+Math.abs(this.lOIOO)>.01){for(s=Math.min(30,Math.max(1,(Date.now()-this.lI111)/16)),e=1,i=s;1<=i?e<=i:e>=i;1<=i?++e:--e)t=.016,this.III0l=.7*this.III0l+t*(this.l1I11-this.l1l1O)*150,this.lOIOO=.7*this.lOIOO+t*(this.lOOO0-this.lll00)*150,this.l1l1O+=this.III0l*t,this.lll00+=this.lOIOO*t;this.refresh()}return this.lI111=Date.now()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.l0O0l=function(t){function e(){e.I0Il1.constructor.call(this),this.IOO1I=new THREE.Scene,this.lIIl0=new THREE.DirectionalLight(16777215,1),this.lIIl0.position.set(2,-1,3),this.IOO1I.add(this.lIIl0),this.object=this.IOO1I,this.lIlO1=!1,this.mousepressed=!1,this.lI011=1}return extend(e,t),e.prototype.startControl=function(t){return this.element=t,this.element.addEventListener("touchstart",function(t){return function(e){return t.II1lI(e)}}(this)),this.element.addEventListener("touchmove",function(t){return function(e){return t.IIO11(e)}}(this)),document.addEventListener("touchend",function(t){return function(e){return t.I1IOO(e)}}(this)),this.element.addEventListener("mousedown",function(t){return function(e){return t.O0010(e)}}(this)),this.element.addEventListener("mousemove",function(t){return function(e){return t.O0I11(e)}}(this)),document.addEventListener("mouseup",function(t){return function(e){return t.l0I1O(e)}}(this))},e.prototype.setSize=function(t,e,i){return this.width=t,this.height=e,this.lI011=null!=i?i:1,this.IOO11=new THREE.OrthographicCamera(0,this.width,0,this.height,.1,1e4)},e.prototype.getAbsolutePosition=function(){return{x:0,y:0,width:1,height:1}},e.prototype.II1lI=function(t){var e,i,s,n,l,a;for(t.preventDefault(),t.stopPropagation(),e=i=0,s=t.changedTouches.length-1;i<=s;e=i+=1)n=t.changedTouches[e],l=(n.clientX-this.element.offsetLeft)*this.lI011,a=(n.clientY-this.element.offsetTop)*this.lI011,this.l11Il(l,a,n.identifier)||null!=this.control_listener&&this.control_listener.l11Il(l,a,n.identifier);return!1},e.prototype.IIO11=function(t){var e,i,s,n,l,a;for(t.preventDefault(),t.stopPropagation(),e=i=0,s=t.changedTouches.length-1;i<=s;e=i+=1)n=t.changedTouches[e],l=(n.clientX-this.element.offsetLeft)*this.lI011,a=(n.clientY-this.element.offsetTop)*this.lI011,this.O101O(l,a,n.identifier)||null!=this.control_listener&&this.control_listener.O101O(l,a,n.identifier);return!1},e.prototype.I1IOO=function(t){var e,i,s,n,l,a;for(e=i=0,s=t.changedTouches.length-1;i<=s;e=i+=1)n=t.changedTouches[e],l=(n.clientX-this.element.offsetLeft)*this.lI011,a=(n.clientY-this.element.offsetTop)*this.lI011,this.I11IO(l,a,n.identifier)||null!=this.control_listener&&this.control_listener.I11IO(l,a,n.identifier);return!1},e.prototype.O0010=function(t){var e,i;return this.mousepressed=!0,e=(t.clientX-this.element.offsetLeft)*this.lI011,i=(t.clientY-this.element.offsetTop)*this.lI011,this.l11Il(e,i,"mouse")||null!=this.control_listener&&this.control_listener.mouseDown(e,i,t),!1},e.prototype.O0I11=function(t){var e,i,s;return t.preventDefault(),i=(t.clientX-this.element.offsetLeft)*this.lI011,s=(t.clientY-this.element.offsetTop)*this.lI011,e=!1,e=this.mousepressed?this.O101O(i,s,"mouse"):this.mouseMove(i,s,"mouse"),e||null!=this.control_listener&&this.control_listener.mouseMove(i,s,t),!1},e.prototype.l0I1O=function(t){var e,i;return this.mousepressed=!1,e=(t.clientX-this.element.offsetLeft)*this.lI011,i=(t.clientY-this.element.offsetTop)*this.lI011,this.I11IO(e,i,"mouse")||null!=this.control_listener&&this.control_listener.mouseUp(e,i,t),!1},e.prototype.OOOIO=function(){return this.I1llI(0,0,this.width,this.height,0)},e.prototype.render=function(t,e){if(null==e&&(e=!0),this.IO0O1(),this.OOOIO(),this.ll110(),this.lOl1l(t),e)return t.render(this.IOO1I,this.IOO11)},e.prototype.renderScreen=function(t){return t.render(this.IOO1I,this.IOO11)},e}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ShipAd=function(t){function e(t,i,s,n){this.I110I=t,this.ship_type=i,this.hue=null!=s?s:0,this.finish=null!=n?n:"zinc",e.I0Il1.constructor.call(this),this.l00ll=!1,this.scale=2}return extend(e,t),e.prototype.needsUpdate=function(){return this.l00ll},e.prototype.setCustom=function(t,e){if(null==this.object)return this.hue=t,void(this.finish=e);if(t!==this.hue){for(this.hue=t,this.finish=e;this.object.children.length>0;)this.object.remove(this.object.children[0]);return this.shipmodel=new l0Il0(II1l1.ships_by_code[this.ship_type],this.hue/360),this.object.add(this.shipmodel.I0llI),this.shipmodel.I0llI.scale.set(-1,1,1),this.shipmodel.I0llI.rotation.x=Math.PI/3,this.shipmodel.I0llI.rotation.order="XYZ",this.shipmodel.finish=this.finish,this.shipmodel.I1I00(),this.shipmodel.l1OI0.material=this.shipmodel.material}return e!==this.finish?(this.finish=e,this.shipmodel.finish=this.finish,this.shipmodel.I1I00(),this.shipmodel.l1OI0.material=this.shipmodel.material):void 0},e.prototype.III10=function(){var t,e,i,s;if(null!=this.object){for(s=Math.min(this.IOII0,this.O0O10),this.object.position.x=this.px+this.IOII0/2,this.object.position.y=this.OO000+this.O0O10/2,this.object.position.z=-500,this.object.scale.x=.25*s*this.scale,this.object.scale.y=.25*s*this.scale,this.object.scale.z=.25*s*this.scale,this.scale=1+.98*(this.scale-1),i=this.parent,t=0,e=0;;){if(null==i)break;t-=i.l1l1O,e-=i.lll00,i=i.parent}return this.object.position.x+=t,this.object.position.y+=e}},e.prototype.IO0ll=function(){return e.I0Il1.IO0ll.call(this),null==this.object&&(this.object=new THREE.Group,this.shipmodel=new l0Il0(II1l1.ships_by_code[this.ship_type],this.hue/360),this.object.add(this.shipmodel.I0llI),this.shipmodel.I0llI.scale.set(-1,1,1),this.shipmodel.I0llI.rotation.x=Math.PI/3,this.shipmodel.I0llI.rotation.order="XYZ", this.shipmodel.finish=this.finish,this.shipmodel.I1I00(),this.shipmodel.l1OI0.material=this.shipmodel.material,this.parent.object.add(this.object)),this.object.visible=this.visible},e.prototype.ll110=function(t){return e.I0Il1.ll110.call(this,t),this.IO0ll(),this.III10()},e.prototype.IO0O1=function(){if(null!=this.object&&this.object.visible)return this.shipmodel.I0llI.rotation.z=2*Math.PI*(Date.now()%1e4/1e4),this.shipmodel.propstep(!0)},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Adbg=function(t){function e(){e.I0Il1.constructor.call(this)}return extend(e,t),e.prototype.lOO01=function(t){var e;return t.save(),t.translate(this.px,this.OO000),e=t.createLinearGradient(0,0,this.IOII0,this.O0O10),e.addColorStop(0,"hsla(200,50%,50%,.1)"),e.addColorStop(1,"hsla(200,50%,50%,0)"),t.fillStyle=e,t.fillRect(0,0,this.IOII0,this.O0O10),t.restore(),t.strokeStyle="hsla(200,50%,50%,.5)",t.lineWidth=this.O0O10/50,t.strokeRect(0,0,this.IOII0,this.O0O10)},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ScorePanel=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;if(null!=this.view){for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),v=Math.round(20*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("RB",e,.5*this.IOII0,.05*this.IOII0,.8*v,this.hue):this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*v)+"pt Play",e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),v=Math.round(22*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",m=Math.min(10,this.view.getUint8(1)),u=2,c=this.I110I.IOO1I.IO010.status.rank,s=e.createLinearGradient(0,0,this.IOII0,0),s.addColorStop(0,"hsla("+this.hue+",40%,20%,.5)"),s.addColorStop(.05,"hsla("+this.hue+",40%,20%,0)"),s.addColorStop(1,"hsla("+this.hue+",40%,20%,.5)"),n=e.createLinearGradient(0,0,this.IOII0,0),n.addColorStop(0,"hsla("+this.hue+",40%,60%,.5)"),n.addColorStop(.05,"hsla("+this.hue+",40%,60%,0)"),n.addColorStop(1,"hsla("+this.hue+",40%,60%,.5)"),e.translate(0,this.O0O10/11),c>10&&(a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&(a=this.I110I.IOO1I.IO010.status.hue),I=this.I110I.player_name,p=this.I110I.IOO1I.IO010.status.score,o=9,e.fillStyle=n,e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",this.I110I.IOO1I.IO010.status.l10lI&&(l=Math.round(.08*this.O0O10),null!=(i=this.I110I.names.getCustom(this.I110I.IOO1I.IO010.status.id))&&(h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l))),e.fillText(c+". "+I,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(p,this.IOII0-10,(o+.5)/11*this.O0O10),m=Math.min(9,m)),o=d=0,f=m-1;d<=f;o=d+=1)r=this.view.getUint8(u),g=this.view.getUint32(u+4,!0),u+=8,a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&null!=(y=this.I110I.IOO1I.ll0lO.l1l0O[r])&&(a=y.OIIIl.status.hue),O=this.I110I.names.get(r),r===this.I110I.IOO1I.IO010.status.id?(e.fillStyle=n,i=this.I110I.names.getCustom(r)):(e.fillStyle=s,i=this.I110I.names.getCustom(r)),e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",null!=i&&(l=Math.round(.08*this.O0O10),h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l)),e.fillText(o+1+". "+O,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(g,this.IOII0-10,(o+.5)/11*this.O0O10);return e.restore()}},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.GameButton=function(t){function e(t,i,s,n,l){var a;this.I110I=t,this.name=i,this.icon=s,this.key=n,this.OI001=l,e.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.hue=180,null!=this.key&&(a="TAB"===this.key?9:"Esc"===this.key?27:this.key.charCodeAt(0),"F11"!==this.key&&this.I110I.addKeyListener(a,this)),this.using_gamepad=this.I110I.using_gamepad}return extend(e,t),e.prototype.lOO01=function(t){var e,i;this.background="hsl("+this.hue+",20%,20%)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.color,t.beginPath(),t.moveTo(0,0),t.lineTo(this.O0O10/3,this.O0O10),t.lineTo(this.IOII0,this.O0O10),t.lineTo(this.IOII0,0),t.closePath(),t.fill(),this.I110I.is_mobile,this.using_gamepad?(e=Math.round(this.O0O10/2.5),Gamepad.drawButton("menu",t,this.IOII0/2,this.O0O10/2,e,this.hue)):(e=Math.round(this.O0O10/2),t.font=e+"pt FontAwesome",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#000",t.fillText(this.icon,this.IOII0/2,this.O0O10/2)),this.I110I.is_mobile||null==this.key||this.using_gamepad||(e=Math.round(this.O0O10/4),t.font=e+"pt Play",t.fillText(this.key,.75*this.IOII0,.5*this.O0O10),t.strokeStyle="#000",i=Math.max(2,this.key.length)*this.O0O10/4,t.strokeRect(.75*this.IOII0-i/2,.25*this.O0O10,i,.5*this.O0O10)),t.restore()},e.prototype.OOOI1=function(){return this.enabled=!0,this.l000l.set({I0O10:0,d:1,k:.02,f:.2})},e.prototype.hide=function(){return this.enabled=!1,this.l000l.set({I0O10:-1.1,d:1,k:.02,f:.2})},e.prototype.IO0O1=function(){if(e.I0Il1.IO0O1.call(this),this.I110I.using_gamepad!==this.using_gamepad)return this.using_gamepad=this.I110I.using_gamepad,this.l00ll=!0},e.prototype.O1I11=function(){if(null!=this.OI001)return this.OI001()},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.l11Il=function(t,i){return null==t?e.I0Il1.l11Il.call(this,t,i):this.I110I.settings.check("buttons_disabled")?void 0:e.I0Il1.l11Il.call(this,t,i)},e.prototype.keyPressed=function(){return this.l11Il()},e.prototype.keyReleased=function(){return this.I11IO()},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.l0OOl=function(e){function i(t,e,s){var n,l,a;for(this.I110I=t,this.letter=e,this.type=s,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.buttonPressed()}}(this)},this.hue=180),this.blending=THREE.AdditiveBlending,this.l000l.l1lIO({I0O10:-1.1}),this.enabled=!1,n=l=0,a=this.letter.length-1;l<=a;n=l+=1)this.I110I.addKeyListener(this.letter.charCodeAt(n),this);this.show_gamepad=!1,this.gamepad_selected=!1}return extend(i,e),i.prototype.OOOI1=function(){return this.enabled=!0,this.l000l.set({I0O10:0,d:1,k:.02,f:.2})},i.prototype.hide=function(){return this.enabled=!1,this.l000l.set({I0O10:-1.1,d:1,k:.02,f:.2})},i.prototype.setHue=function(t){if(t!==this.hue)return this.hue=t,this.repaint()},i.prototype.set=function(t){if(t.code!==this.type.code)return this.type=t,this.repaint()},i.prototype.l11Il=function(t,e){return null==t?i.I0Il1.l11Il.call(this,t,e):this.I110I.settings.check("buttons_disabled")?void 0:i.I0Il1.l11Il.call(this,t,e)},i.prototype.setGamepadSelected=function(t){if(t!==this.gamepad_selected)return this.gamepad_selected=t,this.repaint()},i.prototype.setShowGamepad=function(t){if(t!==this.show_gamepad)return this.show_gamepad=t,this.repaint()},i.prototype.repaint=function(){return this.l00ll=!0},i.prototype.lOO01=function(e){var s,n,l,a,o;if(null!=this.type){if(this.I110I.is_mobile_app)return this.drawComponentMobile(e);this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),e.fillStyle=this.background,e.fillRect(0,0,this.IOII0,this.O0O10),e.fillStyle=this.medium,e.beginPath(),e.moveTo(0,0),e.lineTo(this.IOII0/32,0),e.lineTo(this.IOII0/32,.4*this.O0O10),e.lineTo(this.IOII0/64,.6*this.O0O10),e.lineTo(this.IOII0/64,this.O0O10),e.lineTo(0,this.O0O10),e.closePath(),e.fill(),e.beginPath(),e.moveTo(this.IOII0,0),e.lineTo(31*this.IOII0/32,0),e.lineTo(31*this.IOII0/32,.4*this.O0O10),e.lineTo(63*this.IOII0/64,.6*this.O0O10),e.lineTo(63*this.IOII0/64,this.O0O10),e.lineTo(this.IOII0,this.O0O10),e.closePath(),e.fill(),a=Math.round(this.O0O10/7),e.font=a+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.fillText(this.type.name,this.IOII0/16,this.O0O10/4),e.fillStyle=this.color,e.fillText(t("Lv")+""+this.type.level,this.IOII0/16,.75*this.O0O10),this.I110I.is_mobile||this.I110I.using_gamepad||(e.fillStyle=this.color,e.strokeStyle=this.color,e.strokeRect(this.IOII0/4-a,.75*this.O0O10-a,2*a,2*a),e.textAlign="center",e.fillText(this.letter.charAt(0),this.IOII0/4,.75*this.O0O10),e.textAlign="left"),this.I110I.using_gamepad&&(this.gamepad_selected?Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"top","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"top"):Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"leftright")),e.fillStyle=this.color,a=Math.round(this.O0O10/8),e.font=a+"pt Play",o=Math.round(.033333*(this.type.specs.ship.speed[0]+this.type.specs.ship.acceleration[0]+this.type.specs.ship.rotation[0])),l=Math.round(.05*(this.type.specs.shield.capacity[0]+10*this.type.specs.shield.reload[0])),s=Math.round(.05*(this.type.specs.generator.capacity[0]+10*this.type.specs.generator.reload[0])),e.fillText("MK "+l,.8*this.IOII0,.25*this.O0O10),e.fillText("MK "+s,.8*this.IOII0,.5*this.O0O10),e.fillText("MK "+o,.8*this.IOII0,.75*this.O0O10),e.font=a+"pt FontAwesome",e.fillText("",.75*this.IOII0,.25*this.O0O10),e.fillText("",.75*this.IOII0,.5*this.O0O10),e.fillText("",.75*this.IOII0,.75*this.O0O10),n=i.I0II1(this.type.code,this.hue),e.globalAlpha=.8,e.drawImage(n,this.IOII0/2-this.O0O10/2,0,this.O0O10,this.O0O10),e.restore()}},i.prototype.drawComponentMobile=function(e){var s,n,l,a;this.color="hsla("+this.hue+",70%,70%,1)",e.save(),e.translate(this.px,this.OO000),e.strokeStyle=this.color,e.lineWidth=this.O0O10/120,e.shadowBlur=this.O0O10/10,e.shadowOpacity=1,e.shadowColor=this.color,l=this.O0O10/30,s=this.O0O10/8,e.beginPath(),e.moveTo(l,this.O0O10-l),e.lineTo(this.IOII0-s,this.O0O10-l),e.lineTo(this.IOII0-l,this.O0O10-s),e.lineTo(this.IOII0-l,-l),e.lineTo(l,-l),e.closePath(),e.stroke(),e.shadowBlur=0,e.shadowOpacity=0,a=Math.round(this.O0O10/5),e.font=a+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.fillText(this.type.name,this.IOII0/16,this.O0O10/4),e.fillStyle=this.color,e.fillText(t("Lv")+""+this.type.level,this.IOII0/16,.5*this.O0O10),this.I110I.using_gamepad&&(this.gamepad_selected?Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"top","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"top"):Gamepad.drawDPad(e,this.IOII0/4,.75*this.O0O10,.4*this.O0O10,"leftright")),e.fillStyle=this.color,a=Math.round(this.O0O10/8),n=i.I0II1(this.type.code,this.hue),e.globalAlpha=1,e.drawImage(n,.6*this.IOII0-.55*this.O0O10,.05*-this.O0O10,1.1*this.O0O10,1.1*this.O0O10),e.fillStyle=this.color,a=Math.round(this.O0O10/4),e.font=a+"pt SBGlyphs",e.textBaseline="middle",e.textAlign="center",e.fillText("Q",.85*this.IOII0,this.O0O10/2),e.restore()},i.prototype.buttonPressed=function(){return this.I110I.lIllI.upgradeShip(this.type.code),this.pressed=!1,this.I110I.sendGAEvent("ship_evt",this.type.name+"-"+this.type.code),!0},i.prototype.IO0O1=function(){},i.prototype.keyPressed=function(){return this.l11Il()},i.prototype.keyReleased=function(){return this.I11IO()},i.images_buffer=[],i.I0II1=function(t,e){var s;return null==i.images_buffer[t]&&(s=new l0Il0(II1l1.ships_by_code[t],e/360),i.images_buffer[t]=s.I0II1(),s.dispose()),i.images_buffer[t]},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.I0IO0=function(t){function e(t){var i,s,n,l,a;for(this.I110I=t,e.I0Il1.constructor.call(this),this.buttons=[],this.lv=1,this.buttons.push(new l0OOl(this.I110I,"9ç",O1Ill.types_by_code[201])),this.buttons.push(new l0OOl(this.I110I,"0à",O1Ill.types_by_code[202])),this.life_button=new l0Oll(this.I110I,function(t){return function(){return t.I110I.lIllI.buyLife(),t.life_button.pressed=!1,t.I110I.sendGAEvent("buylife_evt"),!0}}(this)),this.buttons.push(this.life_button),a=this.buttons,s=n=0,l=a.length;n<l;s=++n)i=a[s],this.add(i,[s/2+.0025,0,.495,1]);this.shown=!1,this.toggled=!0,this.shown_since=0,this.manual_toggle=!1,this.current_type=null,this.togglable=!this.I110I.is_touch_device,this.toggle_button=new ToggleUpgradesButton(this.I110I,function(t){return function(){return t.toggle(!0)}}(this)),this.add(this.toggle_button,[0,0,1,.3]),this.I110I.addKeyListener("U".charCodeAt(0),{keyPressed:function(t){return function(){return t.toggle(!0)}}(this),keyReleased:function(t){return function(){}}()}),this.current_ship_can_upgrade=!0}return extend(e,t),e.prototype.toggle=function(t){return null==t&&(t=!0),t&&(this.manual_toggle=!0),this.toggled=!this.toggled,this.toggled?this.toggle_button.hide():this.toggle_button.OOOI1()},e.prototype.updateHue=function(t){var e,i,s,n;for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],e.setHue(t);return this.toggle_button.setHue(t)},e.prototype.OOOI1=function(){var t,e,i,s,n,l;if(!this.shown)for(this.shown=!0,this.shown_since=Date.now(),l=this.buttons,e=i=0,s=l.length;i<s;e=++i)t=l[e],!(e<2)||O1Ill.shipUpgrades(this.lv,this.I110I.IOO1I.ll0lO.survival)&&this.I110I.mode.shipCanUpgrade()?t.OOOI1():(t.hide(),0===e&&null!=(n=this.I110I.mode.shipUpgradeLockedMessage())&&this.I110I.message(n,"#F88"))},e.prototype.hide=function(){var t,e,i,s;if(this.shown)for(this.shown=!1,s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.hide()},e.prototype.relayout=function(){var t,e,i,s;if(this.I110I.mode.shipCanBuyLife()){for(s=.4,t=i=0;i<=1;t=i+=1)this.buttons[t].lO110=this.buttons[t].O0l1I=[t*s+.0025,0,s-.005,1];return this.life_button.lO110=this.life_button.O0l1I=[.8025,0,.195,1],this.life_button.visible=!0,this.life_button.enabled=!0}for(s=.5,t=e=0;e<=1;t=e+=1)this.buttons[t].lO110=this.buttons[t].O0l1I=[t*s+.0025,0,s-.005,1];return this.life_button.visible=!1,this.life_button.enabled=!1},e.prototype.IO0O1=function(){var t;if(this.visible=this.I110I.mode.showUpgrades(),(this.I110I.using_gamepad||this.I110I.mode.disable_ship_upgrade_collapsing)&&(this.togglable=!1),this.I110I.IO010.type!==this.current_type&&(this.current_type=this.I110I.IO010.type,this.lv=this.I110I.IO010.type.level,t=O1Ill.next(this.current_type),null!=t[0]&&this.buttons[0].set(t[0]),null!=t[1]&&this.buttons[1].set(t[1])),this.shown&&Date.now()-this.shown_since>1e4&&this.toggled&&this.togglable&&!this.manual_toggle&&this.toggle(!1),this.I110I.IO010.status.OO1I0>=this.I110I.IO010.type.level*this.I110I.IO010.type.level*20?this.toggled?(this.OOOI1(),this.relayout(),this.toggle_button.hide()):(this.hide(),this.toggle_button.OOOI1()):(this.hide(),this.toggle_button.hide(),this.manual_toggle||(this.toggled=!0)),this.I110I.mode.shipCanUpgrade()!==this.current_ship_can_upgrade&&(this.current_ship_can_upgrade=this.I110I.mode.shipCanUpgrade(),this.shown))return this.hide(),this.OOOI1()},e}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.lOIll=function(e){function i(t,e,s,n,l,a){var o,r,h;for(this.I110I=t,this.name=e,this.letter=s,this.hue=n,this.index=l,this.ref=a,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.buttonPressed()}}(this)}),this.value=0,this.max=1,this.enabled=!1,this.blending=THREE.AdditiveBlending,this.l000l.l1lIO({I0O10:1.1}),o=r=0,h=this.letter.length-1;r<=h;o=r+=1)this.I110I.addKeyListener(this.letter.charCodeAt(o),this);this.status="hidden",this.gamepad_selected=!1,this.show_gamepad=!1}return extend(i,e),i.prototype.OOOI1=function(){if(this.enabled=this.value<this.max,this.status="shown",this.value<this.max)return this.l000l.set({I0O10:0,d:1,k:.02,f:.2})},i.prototype.hide=function(){return this.enabled=!1,this.status="hidden",this.l000l.set({I0O10:1.1,d:1,k:.02,f:.2})},i.prototype.collapse=function(){return this.enabled=!1,this.status="collapsed",this.l000l.set({I0O10:.5,d:1,k:.02,f:.2})},i.prototype.set=function(t,e,i){var s;if(s=this.enabled,"collapsed"===this.status&&(s=this.value<this.max&&i),t!==this.value||e!==this.max||s!==this.enabled)return this.enabled=s,this.value=t,this.max=e,this.value>=this.max&&(this.enabled=!1),this.enabled||"shown"!==this.status||this.collapse(),this.enabled&&"collapsed"===this.status&&this.OOOI1(),this.repaint()},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r;if(this.I110I.is_mobile_app)return this.drawComponentMobile(e);for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",70%,70%,1)",e.save(),e.translate(this.px,this.OO000),e.fillStyle=this.background,e.fillRect(0,0,this.IOII0,this.O0O10),e.fillStyle=this.medium,e.beginPath(),e.moveTo(0,0),e.lineTo(this.IOII0/16,0),e.lineTo(this.IOII0/16,.4*this.O0O10),e.lineTo(this.IOII0/32,.6*this.O0O10),e.lineTo(this.IOII0/32,this.O0O10),e.lineTo(0,this.O0O10),e.closePath(),e.fill(),e.beginPath(),e.moveTo(this.IOII0,0),e.lineTo(15*this.IOII0/16,0),e.lineTo(15*this.IOII0/16,.4*this.O0O10),e.lineTo(31*this.IOII0/32,.6*this.O0O10),e.lineTo(31*this.IOII0/32,this.O0O10),e.lineTo(this.IOII0,this.O0O10),e.closePath(),e.fill(),l=this.name.split(" "),o=Math.round(Math.min(this.O0O10/5,this.IOII0/12)),e.font=o+"pt Play",e.textBaseline="middle",e.textAlign="center",e.fillStyle=this.color,e.fillText(t(l[1]),this.IOII0/2,this.O0O10/4),e.textAlign="left",this.value<this.max?e.fillText(t("Lv")+""+(this.value+1),this.IOII0/8,3*this.O0O10/4):e.fillText("Max",this.IOII0/8,3*this.O0O10/4),i=o/(2*this.max+this.max-1),s=n=0,a=this.max-1;n<=a;s=n+=1)this.value>s&&e.fillRect(7*this.IOII0/8-o,.25*this.O0O10+o/2-s*i*3-2*i,o,2*i);e.font=1.5*o+"pt SBGlyphs",e.fillStyle=this.color,e.fillText(l[0],this.IOII0/8,this.O0O10/4),e.textAlign="center",this.value<this.max&&(this.I110I.is_mobile||this.I110I.using_gamepad||(e.fillStyle=this.color,e.strokeStyle=this.color,o=this.IOII0/6,e.strokeRect(4.5*this.IOII0/6-o/2,.75*this.O0O10-o/2,o,o),r=Math.round(this.O0O10/6),e.font=r+"pt Play",e.fillText(this.letter.charAt(0),4.5*this.IOII0/6,.75*this.O0O10)),this.I110I.using_gamepad?this.gamepad_selected?Gamepad.drawDPad(e,2*this.IOII0/3,.75*this.O0O10,.4*this.O0O10,"bottom","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(e,2*this.IOII0/3,.75*this.O0O10,.4*this.O0O10,"bottom"):Gamepad.drawDPad(e,2*this.IOII0/3,.75*this.O0O10,.4*this.O0O10,"leftright"):(r=Math.round(this.O0O10/3),e.font=1*r+"pt SBGlyphs",e.fillStyle=this.color,e.fillText("",this.IOII0/2,.75*this.O0O10))),e.restore()},i.prototype.repaint=function(){return this.l00ll=!0},i.prototype.drawComponentMobile=function(t){var e,i,s,n,l,a,o,r,h,u;for(this.color="hsla("+this.hue+",70%,70%,1)",t.save(),t.translate(this.px,this.OO000),t.strokeStyle=this.color,t.lineWidth=this.O0O10/120,t.shadowBlur=this.O0O10/10,t.shadowOpacity=1,t.shadowColor=this.color,a=this.O0O10/30,i=this.O0O10/8,t.beginPath(),t.moveTo(a,a),t.lineTo(this.IOII0-i,a),t.lineTo(this.IOII0-a,i),t.lineTo(this.IOII0-a,this.O0O10+a),t.lineTo(a,this.O0O10+a),t.closePath(),t.stroke(),t.shadowBlur=0,t.shadowOpacity=0,o=this.name.split(" "),h=Math.round(Math.min(this.O0O10/4,this.IOII0/8)),t.font=h+"pt Play",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,e=this.O0O10/4,s=e/(2*this.max+this.max-1),n=l=0,r=this.max-1;l<=r;n=l+=1)this.value>n&&t.fillRect(.7*this.IOII0-e/2,.275*this.O0O10+e/2-n*s*3-2*s,e,2*s);t.font=1.7*h+"pt SBGlyphs",t.fillStyle=this.color,t.textAlign="center",t.fillText(o[0],.3*this.IOII0,.275*this.O0O10),t.textAlign="center",this.value<this.max&&(this.I110I.using_gamepad?(u=Math.round(this.O0O10/4),t.font=1*u+"pt SBGlyphs",t.fillStyle=this.color,t.fillText("",.3*this.IOII0,.75*this.O0O10),this.gamepad_selected?Gamepad.drawDPad(t,.7*this.IOII0,.75*this.O0O10,.4*this.O0O10,"bottom","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(t,.7*this.IOII0,.75*this.O0O10,.4*this.O0O10,"bottom"):Gamepad.drawDPad(t,.7*this.IOII0,.75*this.O0O10,.4*this.O0O10,"leftright")):(u=Math.round(this.O0O10/4),t.font=1*u+"pt SBGlyphs",t.fillStyle=this.color,t.fillText("8",this.IOII0/2,.75*this.O0O10))),t.restore()},i.prototype.setGamepadSelected=function(t){if(t!==this.gamepad_selected)return this.gamepad_selected=t,this.repaint()},i.prototype.setShowGamepad=function(t){if(t!==this.show_gamepad)return this.show_gamepad=t,this.repaint()},i.prototype.l1O11=function(t){if(t!==this.text)return this.text=t,this.repaint()},i.prototype.buttonPressed=function(){return this.I110I.lIllI.upgradeSpec(this.index),this.pressed=!1,Math.random()<.1&&this.I110I.sendGAEvent("upgrade_evt",this.ref),!0},i.prototype.l11Il=function(t,e){return null==t?i.I0Il1.l11Il.call(this,t,e):this.I110I.settings.check("buttons_disabled")?void 0:i.I0Il1.l11Il.call(this,t,e)},i.prototype.keyPressed=function(){return this.l11Il()},i.prototype.keyReleased=function(){return this.I11IO()},i.prototype.IO0O1=function(){},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.lOIIO=function(t){function e(t){var i,s,n,l,a,o,r,h,u,d;for(this.I110I=t,e.I0Il1.constructor.call(this),this.buttons=[],s=0,n=[180,180,60,60,30,30,0,0],this.buttons.push(new lOIll(this.I110I,"b Capacity","1&",n[s++],0,"shield_capacity")),this.buttons.push(new lOIll(this.I110I,"c Regen","2é",n[s++],1,"shield_regen")),this.buttons.push(new lOIll(this.I110I,"d Capacity",'3"',n[s++],2,"generator_capacity")),this.buttons.push(new lOIll(this.I110I,"e Regen","4'",n[s++],3,"generator_regen")),this.buttons.push(new lOIll(this.I110I,"f Damage","5(",n[s++],4,"fire_damage")),this.buttons.push(new lOIll(this.I110I,"g Speed","6§-",n[s++],5,"fire_speed")),this.buttons.push(new lOIll(this.I110I,"h Speed","7è",n[s++],6,"ship_speed")),this.buttons.push(new lOIll(this.I110I,"i Agility","8!_",n[s++],7,"ship_agility")),h=.005,d=(1-8*h)/8,u=d+h,this.I110I.is_mobile_app&&(d=1/8,u=d),r=this.buttons,l=a=0,o=r.length;a<o;l=++a)i=r[l],this.add(i,[l*u,0,d,1]);this.status="hidden"}return extend(e,t),e.prototype.OOOI1=function(){var t,e,i,s;if("shown"!==this.status)for(this.status="shown",s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.OOOI1()},e.prototype.collapse=function(){var t,e,i,s;if("collapsed"!==this.status)for(this.status="collapsed",s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.collapse()},e.prototype.hide=function(){var t,e,i,s;if("hidden"!==this.status)for(this.status="hidden",s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.hide()},e.prototype.IO0O1=function(){var t,e,i,s,n,l,a,o;for(this.visible=this.I110I.mode.showUpgrades(),e=this.I110I.IO010.status.OO1I0>=5*this.I110I.IO010.type.level,a=this.buttons,i=s=0,n=a.length;s<n;i=++s)t=a[i],o=this.I110I.IO010.instance.levels[i],l=this.I110I.IO010.type.level,t.set(o,l,e);return this.I110I.IO010.status.OO1I0>=5*this.I110I.IO010.type.level&&!this.I110I.IO010.instance.allMaxed()&&O1Ill.levelUpgrades(this.I110I.IO010.type.level)&&this.I110I.IO010.status.alive&&!this.I110I.gameover?this.OOOI1():this.I110I.IO010.status.alive&&0!==this.I110I.IO010.instance.IlOII()&&this.I110I.IO010.status.alive&&!this.I110I.gameover?this.collapse():this.hide()},e}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.l0Oll=function(e){function i(e,s){var n;this.I110I=e,this.OI001=s,i.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.hue=180,this.key="+",this.name=t("Life"),n=187,this.I110I.addKeyListener(n,this),this.l000l.l1lIO({I0O10:-1.1}),this.enabled=!1,this.show_gamepad=!1,this.gamepad_selected=!1}return extend(i,e),i.prototype.lOO01=function(t){var e,i,s;if(this.I110I.is_mobile_app)return this.drawComponentMobile(t);this.background="hsla("+this.hue+",50%,20%,.5)",this.medium="hsla("+this.hue+",50%,50%,.5)",this.color="hsla("+this.hue+",40%,75%,1)",t.save(),t.translate(this.px,this.OO000),t.fillStyle=this.background,t.fillRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.medium,t.beginPath(),t.moveTo(0,this.O0O10),t.lineTo(this.IOII0/8,this.O0O10),t.lineTo(this.IOII0/8,.6*this.O0O10),t.lineTo(this.IOII0/16,.4*this.O0O10),t.lineTo(this.IOII0/16,0),t.lineTo(0,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(this.IOII0,this.O0O10),t.lineTo(7*this.IOII0/8,this.O0O10),t.lineTo(7*this.IOII0/8,.6*this.O0O10),t.lineTo(15*this.IOII0/16,.4*this.O0O10),t.lineTo(15*this.IOII0/16,0),t.lineTo(this.IOII0,0),t.closePath(),t.fill(),e=this.I110I.is_mobile?.5:.4,i=Math.round(this.O0O10/3),t.font=i+"pt FontAwesome",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText("",this.IOII0/2,this.O0O10*e),t.globalCompositeOperation="destination-out",t.font=Math.round(.5*i)+"pt FontAwesome",t.fillText("",this.IOII0/2,this.O0O10*e),t.globalCompositeOperation="source-over",this.I110I.is_mobile||this.I110I.using_gamepad||(i=Math.round(this.O0O10/8),t.font=i+"pt Play",t.fillText(this.key,this.IOII0/2,.85*this.O0O10),t.strokeStyle=this.color,s=Math.max(2,this.key.length)*this.IOII0/16,t.strokeRect(this.IOII0/2-s/2,.85*this.O0O10-s/2,s,s)),this.I110I.using_gamepad&&(this.gamepad_selected?Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"top","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"top"):Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"leftright")),t.restore()},i.prototype.drawComponentMobile=function(t){var e,i,s,n,l;this.color="hsla("+this.hue+",70%,70%,1)",t.save(),t.translate(this.px,this.OO000),t.strokeStyle=this.color,t.lineWidth=this.O0O10/120,t.shadowBlur=this.O0O10/10,t.shadowOpacity=1,t.shadowColor=this.color,s=this.O0O10/30,e=this.O0O10/8,t.beginPath(),t.moveTo(s,this.O0O10-s),t.lineTo(this.IOII0-e,this.O0O10-s),t.lineTo(this.IOII0-s,this.O0O10-e),t.lineTo(this.IOII0-s,-s),t.lineTo(s,-s),t.closePath(),t.stroke(),t.shadowBlur=0,t.shadowOpacity=0,i=this.I110I.is_mobile?.5:.4,n=Math.round(this.O0O10/3),t.font=n+"pt FontAwesome",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText("",this.IOII0/2,this.O0O10*i),t.globalCompositeOperation="destination-out",t.font=Math.round(.5*n)+"pt FontAwesome",t.fillText("",this.IOII0/2,this.O0O10*i),t.globalCompositeOperation="source-over",this.I110I.is_mobile||this.I110I.using_gamepad||(n=Math.round(this.O0O10/8),t.font=n+"pt Play",t.fillText(this.key,this.IOII0/2,.85*this.O0O10),t.strokeStyle=this.color,l=Math.max(2,this.key.length)*this.IOII0/16,t.strokeRect(this.IOII0/2-l/2,.85*this.O0O10-l/2,l,l)),this.I110I.using_gamepad&&(this.gamepad_selected?Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"top","","hsl(120,80%,40%)"):this.show_gamepad?Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"top"):Gamepad.drawDPad(t,this.IOII0/2,.8*this.O0O10,.4*this.O0O10,"leftright")),t.restore()},i.prototype.setGamepadSelected=function(t){if(t!==this.gamepad_selected)return this.gamepad_selected=t,this.l00ll=!0},i.prototype.setShowGamepad=function(t){if(t!==this.show_gamepad)return this.show_gamepad=t,this.l00ll=!0},i.prototype.OOOI1=function(){return this.enabled=!0,this.l000l.set({I0O10:0,d:1,k:.02,f:.2})},i.prototype.hide=function(){return this.enabled=!1,this.l000l.set({I0O10:-1.1,d:1,k:.02,f:.2})},i.prototype.IO0O1=function(){},i.prototype.O1I11=function(){if(null!=this.OI001)return this.OI001()},i.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.keyPressed=function(){return this.l11Il()},i.prototype.keyReleased=function(){return this.I11IO()},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ToggleUpgradesButton=function(t){function e(t,i){this.I110I=t,this.top=null==i||i,e.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.hue=180,this.l000l.l1lIO({I0O10:-1.1}),this.force_ratio=16,this.shown=!1}return extend(e,t),e.prototype.lOO01=function(t){var e,i;return this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.background,t.fillRect(0,0,this.IOII0,this.O0O10),i=Math.round(this.O0O10/2),e=this.top?"":"",t.font=i+"pt FontAwesome",t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.color,t.fillText(e,this.O0O10/2,this.O0O10/2),t.textAlign="right",t.fillText(e,this.IOII0-this.O0O10/2,this.O0O10/2),t.strokeStyle=this.color,t.rect(this.IOII0/2-.4*this.O0O10,.1*this.O0O10,.8*this.O0O10,.8*this.O0O10),t.stroke(),t.font=i+"pt Play",t.textAlign="center",t.fillText("U",this.IOII0/2,this.O0O10/2),t.restore()},e.prototype.OOOI1=function(){if(!this.shown)return this.shown=!0,this.l000l.set({I0O10:0,d:1,k:.02,f:.2})},e.prototype.hide=function(){if(this.shown)return this.shown=!1,this.l000l.set({I0O10:-1.1,d:1,k:.02,f:.2})},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e}(IIIlO),this.ll000=function(){function t(t){this.I110I=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=512,
(this.I110I.mode.radar_zoom>2||this.I110I.mode.high_def_radar)&&(this.canvas.width=1024,this.canvas.height=1024),this.canvas2=document.createElement("canvas"),this.canvas2.width=512,this.canvas2.height=512,this.I0llI=new THREE.Group,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.texture.wrapS=this.texture.wrapT=THREE.RepeatWrapping,this.texture.repeat.set(1/this.I110I.mode.radar_zoom,1/this.I110I.mode.radar_zoom),this.texture2=new THREE.Texture(this.canvas2),this.texture2.minFilter=THREE.LinearFilter,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({map:this.texture,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending}),this.m1=new THREE.Mesh(this.OOl0O,this.material),this.geom2=new THREE.PlaneGeometry(1,1),this.material2=new THREE.MeshBasicMaterial({map:this.texture2,transparent:!0,depthTest:!1,depthWrite:!1}),this.m2=new THREE.Mesh(this.geom2,this.material2),this.I0llI.add(this.m2),this.I0llI.add(this.m1),this.m1.position.z=-1}return t.prototype.IOO0I=function(t,e){var i;t/=this.I110I.size,e/=this.I110I.size,i=.5-.5/this.I110I.mode.radar_zoom,this.texture.offset.x=t+i,this.texture.offset.y=e+i},t.prototype.setHue=function(t){if(t!==this.hue&&null!=this.data)return this.III10(this.data,t)},t.prototype.Il11I=function(t){var e,i,s,n,l,a,o,r,h,u;for(i=this.canvas.getContext("2d"),i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.translate(this.canvas.width/2,this.canvas.height/2),i.scale(this.canvas.width/2,this.canvas.height/2),e=new O1IIl(t,this.I110I.OlO0I,this.I110I.mode),u={},i.fillStyle="hsla("+this.hue+",50%,50%,.4)",n=a=-this.I110I.OlO0I,r=this.I110I.OlO0I-1;a<=r;n=a+=1)for(l=o=-this.I110I.OlO0I,h=this.I110I.OlO0I-1;o<=h;l=o+=1)e.get(n,l,u),u.on&&(i.beginPath(),i.arc(u.x/this.I110I.OlO0I,-u.y/this.I110I.OlO0I,u.size/this.I110I.OlO0I,0,2*Math.PI,!0),i.fill());return s=i.createRadialGradient(0,0,0,0,0,.05),s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(.5,"hsla("+this.hue+",90%,80%,1)"),s.addColorStop(1,"hsla("+this.hue+",90%,80%,0)"),i.fillStyle=s,i.fillRect(-.05,-.05,.1,.1),this.I110I.mode.drawRadarInfo(i),i.restore(),this.texture.needsUpdate=!0},t.prototype.III10=function(t,e){return this.data=t,this.hue=e,this.Il11I(this.data.seed),this.update2(this.data,this.hue)},t.prototype.update2=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;for(c=new l000I(t.seed),this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",i=this.canvas2.getContext("2d"),i.save(),i.translate(this.canvas2.width/2,this.canvas2.height/2),i.scale(this.canvas2.width/2,this.canvas2.height/2),i.clearRect(-1,-1,2,2),l=i.createRadialGradient(0,0,0,0,0,1.41),l.addColorStop(0,"rgba(0,0,0,1)"),l.addColorStop(1,"rgba(0,0,0,0.5)"),i.fillStyle=l,i.fillRect(-1,-1,2,2),l=i.createRadialGradient(0,0,0,0,0,1),l.addColorStop(0,"hsla("+e+",100%,80%,.3)"),l.addColorStop(1,"hsla("+e+",100%,80%,0)"),i.fillStyle=l,i.fillRect(-1,-1,2,2),i.lineWidth=.02,i.strokeStyle="hsla("+e+",50%,70%,.5)",i.beginPath(),i.rect(-1,-1,2,2),i.lineWidth=.02,s=.2*c.next()+.1,g=c.O1010(5)+2,I=o=.1,p=s;o<=.8;I=o+=p)for(v=Math.PI/(2*g),a=r=0,O=g-1;r<=O;a=r+=1)i.strokeStyle="hsla("+e+",30%,50%,"+(1-I)+")",i.beginPath(),i.arc(0,0,I,4*a*v-v+Math.PI/2,4*a*v+v+Math.PI/2,!1),i.stroke();for(i.lineWidth=.005,l=i.createRadialGradient(0,0,0,0,0,1.1),l.addColorStop(0,"hsla("+e+",100%,90%,.5)"),l.addColorStop(1,"hsla("+e+",100%,90%,0)"),i.strokeStyle=l,n=.05*(1+c.O1010(2)),a=h=-1,m=n;h<=1.01;a=h+=m)y=1,i.beginPath(),i.moveTo(-y,a),i.lineTo(y,a),i.stroke(),i.beginPath(),i.moveTo(a,-y),i.lineTo(a,y),i.stroke();for(i.strokeStyle="hsla("+e+",90%,80%,.5)",n=.025*(1+c.O1010(2)),a=u=-.75,f=n;u<=.751;a=u+=f);for(a=d=0;d<=3;a=++d);return i.fillStyle=this.color,i.fillRect(-.015,-.04,.03,.08),i.fillRect(-.04,-.015,.08,.03),i.fillStyle=this.color,i.fillRect(-1,-1,.03,2),i.fillRect(.97,-1,.03,2),i.save(),i.scale(2/this.canvas.width,2/this.canvas.height),i.fillStyle="hsla("+e+",90%,90%,1)",i.font="12pt Bungee",i.textAlign="center",i.restore(),i.restore(),this.texture2.needsUpdate=!0},t.prototype.updateRepulsor=function(t){var e,i,s,n,l,a,o;if(null==this.repulsor_backup&&(this.repulsor_backup=document.createElement("canvas"),this.repulsor_backup.width=this.canvas.width,this.repulsor_backup.height=this.canvas.height,this.repulsor_backup.getContext("2d").drawImage(this.canvas,0,0),this.repulsor_time=0),(a=Date.now())>this.repulsor_time){if(this.repulsor_time=a+1e3,e=this.canvas.getContext("2d"),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.repulsor_backup,0,0),e.fillStyle="hsla("+(this.hue+180)+",90%,80%,.15)",e.strokeStyle="hsla("+(this.hue+180)+",90%,80%,.3)",e.lineWidth=2,(o=t*CONSTANTS.RADIATION_SIZE)>1)for(i=n=-1;n<=1;i=n+=1)for(s=l=-1;l<=1;s=l+=1)e.beginPath(),e.arc(this.canvas.width/2+i*this.canvas.width,this.canvas.height/2+s*this.canvas.height,this.canvas.width/2*o,0,2*Math.PI,!0),e.fill(),e.stroke();else e.beginPath(),e.arc(this.canvas.width/2,this.canvas.height/2,this.canvas.width/2*o,0,2*Math.PI,!0),e.fill(),e.stroke();return this.texture.needsUpdate=!0}},t}(),this.SystemName=function(){function t(t){this.I110I=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=64,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({map:this.texture,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(1,.125,1),this.l1OI0.position.y=.5875}return t.prototype.setHue=function(t){if(t!==this.hue&&null!=this.data)return this.III10(this.data,t)},t.prototype.IO0O1=function(){if(this.using_gamepad!==this.I110I.using_gamepad&&(this.using_gamepad=this.I110I.using_gamepad,null!=this.data&&null!=this.hue))return this.III10(this.data,this.hue)},t.prototype.III10=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p;for(this.data=t,this.hue=e,u=new l000I(t.seed),this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",s=this.canvas.getContext("2d"),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.fillStyle=this.background,s.fillRect(0,0,this.canvas.width,this.canvas.height),n=this.canvas.height/4,l=n/2,s.fillStyle=this.color,s.beginPath(),s.moveTo(0,0),s.lineTo(0,this.canvas.height),s.lineTo(l,this.canvas.height),s.lineTo(l,.7*this.canvas.height),s.lineTo(n,.5*this.canvas.height),s.lineTo(n,0),s.closePath(),s.fill(),s.strokeStyle=this.medium,s.fillStyle=this.color,s.lineWidth=1.5,r=2+u.O1010(3),a=o=1,d=r;o<=d;a=o+=1)s.beginPath(),s.arc(this.canvas.height/2+n,this.canvas.height/2,a/(r+1)*this.canvas.height/2,0,2*Math.PI,!0),s.stroke(),i=u.next()*Math.PI*2,c=this.canvas.height/2+n+a/(r+1)*this.canvas.height/2*Math.cos(i),p=this.canvas.height/2+a/(r+1)*this.canvas.height/2*Math.sin(i),h=2*u.next()+1,s.beginPath(),s.arc(c,p,h,0,2*Math.PI,!0),s.fill();for(s.fillStyle=this.color,s.beginPath(),s.arc(this.canvas.height/2+n,this.canvas.height/2,3,0,2*Math.PI,!0),s.fill(),s.beginPath(),s.moveTo(this.canvas.width,0),s.lineTo(this.canvas.width,this.canvas.height),s.lineTo(this.canvas.width-l,this.canvas.height),s.lineTo(this.canvas.width-l,.7*this.canvas.height),s.lineTo(this.canvas.width-n,.5*this.canvas.height),s.lineTo(this.canvas.width-n,0),s.closePath(),s.fill(),s.fillStyle=this.color,I=28;;){if(s.font=I+"pt Play",s.measureText(t.name).width<.7*this.canvas.width||I<10)break;I-=1}return s.textAlign="left",s.textBaseline="middle",s.fillText(t.name,this.canvas.height+2*n,this.canvas.height/2),this.using_gamepad||(s.font=Math.round(.6*I)+"pt Play",s.textAlign="center",s.fillText("R",this.canvas.width-4*n,this.canvas.height/2),s.strokeStyle=this.color,s.lineWidth=1,s.strokeRect(this.canvas.width-5*n,this.canvas.height/2-n,2*n,2*n)),this.texture.needsUpdate=!0},t}(),this.RadarLine=function(){function t(t){var e,i,s,n;for(this.I110I=t,this.canvas=document.createElement("canvas"),this.canvas.width=128,this.canvas.height=64,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({map:this.texture,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending}),s=this.OOl0O.vertices,e=0,i=s.length;e<i;e++)n=s[e],n.x+=.5,n.y+=.5;this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(.5,.25,1)}return t.prototype.setHue=function(t){if(t!==this.hue&&null!=this.data)return this.III10(this.data,t)},t.prototype.III10=function(t,e){var i,s;return this.data=t,this.hue=e,new l000I(t.seed),i=this.canvas.getContext("2d"),i.save(),i.translate(0,64),i.scale(1,-1),s=i.createLinearGradient(0,0,0,this.canvas.height),s.addColorStop(0,"hsla("+e+",90%,90%,1)"),s.addColorStop(1,"hsla("+e+",90%,90%,0)"),i.fillStyle=s,i.fillRect(0,0,this.canvas.width,this.canvas.height),i.globalCompositeOperation="destination-in",s=i.createLinearGradient(0,0,this.canvas.width,0),s.addColorStop(0,"rgba(255,255,255,0)"),s.addColorStop(1,"rgba(255,255,255,1)"),i.fillStyle=s,i.fillRect(0,0,this.canvas.width,this.canvas.height),s=i.createRadialGradient(0,0,0,0,0,this.canvas.width),s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=s,i.fillRect(0,0,this.canvas.width,this.canvas.height),i.globalCompositeOperation="source-over",s=i.createLinearGradient(0,0,this.canvas.width,0),s.addColorStop(0,"hsla("+e+",90%,0%,.0)"),s.addColorStop(.1,"hsla("+e+",90%,0%,.0)"),s.addColorStop(.2,"hsla("+e+",90%,0%,.8)"),s.addColorStop(.5,"hsla("+e+",90%,0%,.8)"),s.addColorStop(1,"hsla("+e+",90%,0%,.0)"),i.fillStyle=s,s=i.createLinearGradient(0,0,this.canvas.width,0),s.addColorStop(0,"hsla("+e+",90%,90%,.0)"),s.addColorStop(.1,"hsla("+e+",90%,90%,.0)"),s.addColorStop(.2,"hsla("+e+",90%,90%,.8)"),s.addColorStop(.5,"hsla("+e+",90%,90%,.8)"),s.addColorStop(1,"hsla("+e+",90%,90%,.0)"),i.fillStyle=s,i.fillRect(0,1,this.canvas.width,3),i.restore(),this.texture.needsUpdate=!0},t.prototype.l1O00=function(){var t;return t=60*this.I110I.IOO1I.ll0lO.l100I/1e3,this.l1OI0.rotation.z=(this.l1OI0.rotation.z-.04*t)%(2*Math.PI)},t}(),this.IIOl0=function(){function t(t,e){var i,s,n;for(this.I110I=t,this.size=null!=e?e:150,this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),2),this.vertices=new Float32Array(3*this.size),this.oldpos=new Float32Array(2*this.size),this.color=new Float32Array(3*this.size),this.time=new Float32Array(this.size),this.l1l1l=new Float32Array(this.size),this.type=new Float32Array(this.size),this.hue=0,this.index=0,this.max_pindex=0,this.I1llO=Date.now(),i=s=0,n=this.size-1;s<=n;i=s+=1)this.vertices[3*i]=2*(Math.random()-.5),this.vertices[3*i+1]=2*(Math.random()-.5),this.vertices[3*i+2]=0,this.color[3*i]=1,this.color[3*i+1]=1,this.color[3*i+2]=1,this.time[i]=0,this.l1l1l[i]=0===i?5:0;this.lOIIl(),this.iteration=0,this.posmap=[],this.asteromap=[],this.alienmap=[],this.leaderid=7}return t.prototype.IOO0I=function(t,e){var i;i=20*this.I110I.IOO1I.height/1e3,this.vertices[0]=0,this.vertices[1]=0,this.vertices[2]=1e3,this.oldpos[0]=0,this.oldpos[1]=0,this.l1l1l[0]=i,this.type[0]=0,this.time[0]=this.I110I.IOO1I.ll0lO.ll01O,this.material.uniforms.mypos.value.set(t/this.I110I.Ill01,e/this.I110I.Ill01)},t.prototype.updateHue=function(t,e){if(this.hue=e,null!=t.mode.friendly_colors)return this.friendly_colors=t.mode.friendly_colors},t.prototype.setHue=function(t){this.hue=t},t.prototype.l1O00=function(){return this.material.uniforms.lIl10.value=this.I110I.IOO1I.ll0lO.ll01O},t.prototype.updateAsteroidsAliens=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;for(s=t.getUint16(6,!0),e=t.getUint16(8,!0),I=this.max_pindex,g=10*this.I110I.IOO1I.height/1e3,r=10,f=[],Oll0O.I00Il(0,0,.4,f),a=h=0,p=s-1;h<=p&&!(I>=this.size);a=h+=1)o=t.getUint16(r,!0),i=t.getUint8(r+2),y=t.getInt8(r+3)/128,v=t.getInt8(r+4)/128,r+=5,n=Math.abs(y-this.material.uniforms.mypos.value.x),l=Math.abs(v-this.material.uniforms.mypos.value.y),n=Math.min(n,2-n),l=Math.min(l,2-l),Math.max(Math.abs(n),Math.abs(l)),n>1/this.I110I.mode.radar_zoom||l>1/this.I110I.mode.radar_zoom||(c=this.asteromap[o],null!=c&&c.iteration===this.iteration-1?(c.x<y-1?c.x+=2:c.x>y+1&&(c.x-=2),c.y<v-1?c.y+=2:c.y>v+1&&(c.y-=2),this.oldpos[2*I]=c.x,this.oldpos[2*I+1]=c.y):(this.oldpos[2*I]=y,this.oldpos[2*I+1]=v,null==c&&(c={},this.asteromap[o]=c)),c.x=y,c.y=v,c.iteration=this.iteration,this.vertices[3*I]=y,this.vertices[3*I+1]=v,this.vertices[3*I+2]=0,this.type[I]=5,this.color[3*I]=f[0]/255,this.color[3*I+1]=f[1]/255,this.color[3*I+2]=f[2]/255,this.time[I]=this.I110I.IOO1I.ll0lO.ll01O,this.l1l1l[I]=g*Math.max(1,Math.min(4,i/20)),I++);for(Oll0O.I00Il(0,.7,.7,f),a=u=0,O=e-1;u<=O&&!(I>=this.size);a=u+=1)o=t.getUint16(r,!0),i=t.getUint8(r+2),y=t.getInt8(r+3)/128,v=t.getInt8(r+4)/128,r+=5,n=Math.abs(y-this.material.uniforms.mypos.value.x),l=Math.abs(v-this.material.uniforms.mypos.value.y),n=Math.min(n,2-n),l=Math.min(l,2-l),Math.max(Math.abs(n),Math.abs(l)),n>1/this.I110I.mode.radar_zoom||l>1/this.I110I.mode.radar_zoom||(c=this.alienmap[o],null!=c&&c.iteration===this.iteration-1?(c.x<y-1?c.x+=2:c.x>y+1&&(c.x-=2),c.y<v-1?c.y+=2:c.y>v+1&&(c.y-=2),this.oldpos[2*I]=c.x,this.oldpos[2*I+1]=c.y):(this.oldpos[2*I]=y,this.oldpos[2*I+1]=v,null==c&&(c={},this.alienmap[o]=c)),c.x=y,c.y=v,c.iteration=this.iteration,this.vertices[3*I]=y,this.vertices[3*I+1]=v,this.vertices[3*I+2]=0,this.type[I]=6,this.color[3*I]=f[0]/255,this.color[3*I+1]=f[1]/255,this.color[3*I+2]=f[2]/255,this.time[I]=this.I110I.IOO1I.ll0lO.ll01O,this.l1l1l[I]=g*Math.max(2,Math.min(4,i/10)),I++);for(a=d=I,m=this.size-1;d<=m;a=d+=1)this.l1l1l[a]=0;return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("oldpos").needsUpdate=!0,this.geometry.getAttribute("type").needsUpdate=!0},t.prototype.updateShips=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c;for(o=this.max_pindex,d=10*this.I110I.IOO1I.height/1e3,l=1,u=[],Oll0O.I00Il(0,.7,1,u);l<t.byteLength&&!(o>=this.size);)n=t.getUint8(l),I=t.getInt8(l+1)/128,c=t.getInt8(l+2)/128,l+=3,e=Math.abs(I-this.material.uniforms.mypos.value.x),i=Math.abs(c-this.material.uniforms.mypos.value.y),e=Math.min(e,2-e),i=Math.min(i,2-i),Math.max(Math.abs(e),Math.abs(i)),e>1/this.I110I.mode.radar_zoom||i>1/this.I110I.mode.radar_zoom||(r=this.posmap[n],null!=r&&r.iteration===this.iteration-1?(r.x<I-1?r.x+=2:r.x>I+1&&(r.x-=2),r.y<c-1?r.y+=2:r.y>c+1&&(r.y-=2),this.oldpos[2*o]=r.x,this.oldpos[2*o+1]=r.y):(this.oldpos[2*o]=I,this.oldpos[2*o+1]=c,null==r&&(r={},this.posmap[n]=r)),r.x=I,r.y=c,r.iteration=this.iteration,this.vertices[3*o]=I,this.vertices[3*o+1]=c,this.vertices[3*o+2]=0,this.type[o]=n===this.I110I.IOO1I.IO010.status.id?12:2,this.color[3*o]=u[0]/255,this.color[3*o+1]=u[1]/255,this.color[3*o+2]=u[2]/255,this.time[o]=this.I110I.IOO1I.ll0lO.ll01O,this.l1l1l[o]=2*d,o++);for(s=a=o,h=this.size-1;a<=h;s=a+=1)this.l1l1l[s]=0;return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("oldpos").needsUpdate=!0,this.geometry.getAttribute("type").needsUpdate=!0},t.prototype.III10=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S;if(this.I1Oll.visible){if(f=t.getUint8(1),d=2,g=1,this.max_index=1,z=this.I110I.settings.check("colorblind")?1:.7,null!=this.I110I.mode.updateRadar){for(h=I=g,v=this.size-1;I<=v;h=I+=1)this.l1l1l[h]=0;return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("oldpos").needsUpdate=!0,this.geometry.getAttribute("type").needsUpdate=!0,void this.iteration++}for(k=[],h=c=0,b=f-1;c<=b&&!(g>=this.size-this.I110I.IOO1I.ll0lO.stations.length);h=c+=1)i=!0&t.getUint8(d+3),u=t.getUint8(d),E=t.getInt8(d+1)/128,S=t.getInt8(d+2)/128,d+=8,l=Math.abs(E-this.material.uniforms.mypos.value.x),a=Math.abs(S-this.material.uniforms.mypos.value.y),l=Math.min(l,2-l),a=Math.min(a,2-a),s=Math.max(Math.abs(l),Math.abs(a)),this.I110I.IOO1I.ll0lO.l1l0O[u],r=20,r=this.hue,Oll0O.I00Il(r/360,.2,.8,k),M=10*this.I110I.IOO1I.height/1e3,o=!1,null!=this.friendly_colors&&this.friendly_colors>0&&null!=(n=this.I110I.names.getData(u))&&(r=n.hue,Oll0O.I00Il(r/360,z,1,k),r===this.I110I.IOO1I.IO010.status.hue&&(o=!0)),u!==e&&(o||0===h||s<=1/this.I110I.mode.radar_zoom||this.I110I.killers[u]||this.I110I.IOO1I.ll0lO.survival)&&(y=this.posmap[u],this.vertices[3*g]=E,this.vertices[3*g+1]=S,this.vertices[3*g+2]=i?0:1e3,this.type[g]=1,0===h&&this.I110I.mode.radar_shows_leader?(Oll0O.I00Il(30/360,z,1,k),this.type[g]=3):h<=9&&(this.type[g]=1),h>0&&(this.I110I.killers[u]||this.I110I.IOO1I.ll0lO.survival)&&"survival"===this.I110I.mode.id&&(Oll0O.I00Il(0,z,1,k),this.type[g]=2),this.I110I.mode.isTarget(u)&&(Oll0O.I00Il(0,z,1,k),this.type[g]=2),null!=y&&y.iteration===this.iteration-1?(y.x<E-1?y.x+=2:y.x>E+1&&(y.x-=2),y.y<S-1?y.y+=2:y.y>S+1&&(y.y-=2),this.oldpos[2*g]=y.x,this.oldpos[2*g+1]=y.y):(this.oldpos[2*g]=E,this.oldpos[2*g+1]=S,null==y&&(y={},this.posmap[u]=y)),y.x=E,y.y=S,y.iteration=this.iteration,this.color[3*g]=k[0]/255,this.color[3*g+1]=k[1]/255,this.color[3*g+2]=k[2]/255,this.time[g]=this.I110I.IOO1I.ll0lO.ll01O,this.l1l1l[g]=M*(this.type[g]>1?2:1.5),g++);for(w=this.I110I.IOO1I.ll0lO.stations,h=O=0,p=w.length;O<p&&(_=w[h],!(g>=this.size));h=++O)_.alive&&(y=this.posmap[h+1e3],E=_.I0llI.position.x/this.I110I.Ill01,S=_.I0llI.position.y/this.I110I.Ill01,null!=y&&y.iteration===this.iteration-1?(y.x<E-1?y.x+=2:y.x>E+1&&(y.x-=2),y.y<S-1?y.y+=2:y.y>S+1&&(y.y-=2),this.oldpos[2*g]=y.x,this.oldpos[2*g+1]=y.y):(this.oldpos[2*g]=E,this.oldpos[2*g+1]=S,null==y&&(y={},this.posmap[h+1e3]=y)),y.x=E,y.y=S,y.iteration=this.iteration,this.vertices[3*g]=E,this.vertices[3*g+1]=S,this.vertices[3*g+2]=0,this.type[g]=4,Oll0O.I00Il(_.hue/360,z,1,k),this.color[3*g]=k[0]/255,this.color[3*g+1]=k[1]/255,this.color[3*g+2]=k[2]/255,this.time[g]=this.I110I.IOO1I.ll0lO.ll01O,this.l1l1l[g]=2*M,g++);for(this.max_pindex=g,h=m=g,x=this.size-1;m<=x;h=m+=1)this.l1l1l[h]=0;return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("oldpos").needsUpdate=!0,this.geometry.getAttribute("type").needsUpdate=!0,this.iteration++}},t.prototype.lOIIl=function(){var t,e,i,s;return s="attribute vec3 color;\nvarying vec3 vcolor;\nattribute float l1l1l;\nattribute float time;\nattribute float type ;\nattribute vec2 oldpos ;\nuniform float lIl10;\nuniform float lO1Il;\nuniform vec2 mypos ;\nvarying float opacity ;\nvarying float toffset ;\n\nvoid main() {\n  vcolor = color ;\n  float t = clamp((lIl10-time)/60.0,0.0,1.0) ;\n  vec3 O0000 = vec3(oldpos*(1.0-t)+position.xy*t,position.z);\n  O0000.xy -= mypos ;\n  O0000.xy = mod(O0000.xy+vec2(1.0),vec2(2.0))-vec2(1.0);\n  O0000.xy *= "+this.I110I.mode.radar_zoom+".0 ;\n  O0000.xy = clamp(O0000.xy,-.95,.95);\n  toffset = type ;\n  gl_PointSize = lO1Il*l1l1l;\n  if (type == 12.0)\n  {\n    O0000.xy = vec2(0.0,0.0);\n    toffset = 2.0 ;\n    gl_PointSize *= 1.5;\n  }\n  vec4 mvPosition = modelViewMatrix * vec4(O0000, 1.0);\n  gl_Position = projectionMatrix * mvPosition ;\n  opacity = clamp(l1l1l,0.0,1.0);\n  float f = abs(time+30.0-lIl10);\n}",t="varying vec3 vcolor ;\nvarying float opacity ;\nuniform sampler2D texture ;\nvarying float toffset;\n\nvoid main() {\n  gl_FragColor = texture2D(texture,(gl_PointCoord+vec2(toffset,0.0))*vec2(.0625,1.0))*vec4(vcolor,opacity) ;\n}",e=this.createTexture(),i={texture:{type:"t",value:e},lIl10:{type:"f",value:(Date.now()-this.I1llO)/1e3},lO1Il:{type:"f",value:1},mypos:{type:"v2",value:new THREE.Vector2(0,0)}},this.material=new THREE.ShaderMaterial({uniforms:i,vertexShader:s,fragmentShader:t,transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("color",new THREE.BufferAttribute(this.color,3)),this.geometry.addAttribute("time",new THREE.BufferAttribute(this.time,1)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("oldpos",new THREE.BufferAttribute(this.oldpos,2)),this.geometry.addAttribute("type",new THREE.BufferAttribute(this.type,1)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.position.z=0},t.prototype.createTexture=function(){var t,e,i,s,n,l,a,o,r;for(null==this.canvas&&(this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=32),t=this.canvas.getContext("2d"),t.save(),t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="#FFF",r=["","","","","","","","4","5","6","7","8","9","10"],null==this.alien_img&&(this.alien_img=new Image,this.alien_img.crossOrigin="Anonymous",this.alien_img.src="https://starblast.data.neuronality.com/img/alien.png",this.alien_img.onload=function(t){return function(){return t.createTexture()}}(this)),t.textAlign="center",t.textBaseline="middle",t.translate(0,32),t.scale(1,-1),e=s=0,o=r.length-1;0<=o?s<=o:s>=o;e=0<=o?++s:--s)if(""===r[e]){for(t.beginPath(),a=new l000I(1),i=n=0;n<=19;i=n+=1)l=12*(.4*a.next()+.8),0===e?t.moveTo(16+32*e+l*Math.cos(i/20*Math.PI*2),16+l*Math.sin(i/20*Math.PI*2)):t.lineTo(16+32*e+l*Math.cos(i/20*Math.PI*2),16+l*Math.sin(i/20*Math.PI*2));t.closePath(),t.fill()}else r[e].charCodeAt(0)>127?(t.font="24pt FontAwesome",t.fillText(r[e],16+32*e,16)):""===r[e]?this.alien_img.complete&&this.alien_img.width>0&&t.drawImage(this.alien_img,16+32*e-12,4,24,24):(t.font="18pt Play",t.fillText(r[e],16+32*e-.5,15.5),t.fillText(r[e],16+32*e+.5,15.5),t.fillText(r[e],16+32*e+.5,16.5),t.fillText(r[e],16+32*e-.5,16.5));return t.restore(),null==this.texture&&(this.texture=new THREE.Texture(this.canvas)),this.texture.needsUpdate=!0,this.texture},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.OIlI0=function(t){function e(t,i){this.I110I=t,this.seed=i,e.I0Il1.constructor.call(this),this.l00ll=!1}return extend(e,t),e.prototype.I1llI=function(t,e,i,s,n){this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n},e.prototype.needsUpdate=function(){return this.l00ll},e.prototype.III10=function(){var t,e,i,s;if(null!=this.object){for(Math.min(this.IOII0,this.O0O10)/20,s=Math.min(this.IOII0,this.O0O10),this.object.position.x=this.px+this.IOII0-s/2,this.object.position.y=this.OO000+this.O0O10-s/2-.15*s,this.object.position.z=-100,this.object.scale.x=s,this.object.scale.y=-s,this.object.scale.z=s,i=this.parent,t=0,e=0;;){if(null==i)break;t-=i.l1l1O,e-=i.lll00,i=i.parent}return this.object.position.x+=t,this.object.position.y+=e}},e.prototype.IOO0I=function(t,e){if(null!=this.OII1l&&this.OII1l.IOO0I(t,e),null!=this.background)return this.background.IOO0I(t,e)},e.prototype.O10II=function(t,e){if(null!=this.OII1l)return this.OII1l.III10(t,e)},e.prototype.IOIIl=function(t,e){if(null!=this.background)return this.background.III10(t,e),this.systemname.III10(t,e),this.infobar.III10(t,e),this.line.III10(t,e),this.OII1l.updateHue(t,e)},e.prototype.setHue=function(t){if(null!=this.background)return this.background.setHue(t),this.systemname.setHue(t),this.infobar.setHue(t),this.line.setHue(t),this.OII1l.setHue(t)},e.prototype.IO0ll=function(){return null==this.object&&(this.object=new THREE.Group,this.background=new ll000(this.I110I),this.object.add(this.background.I0llI),this.systemname=new SystemName(this.I110I),this.object.add(this.systemname.l1OI0),this.infobar=new InfoBar(this.I110I),this.object.add(this.infobar.l1OI0),this.line=new RadarLine(this.I110I),this.object.add(this.line.l1OI0),this.OII1l=new IIOl0(this.I110I),this.object.add(this.OII1l.I1Oll),this.OII1l.I1Oll.scale.set(.5,.5,.5),this.parent.object.add(this.object)),this.object.visible=this.visible},e.prototype.ll110=function(t){return this.IO0ll(),this.III10()},e.prototype.IO0O1=function(){if(null!=this.object&&this.object.visible)return null!=this.line&&this.line.l1O00(),null!=this.OII1l&&this.OII1l.l1O00(),null!=this.infobar&&this.infobar.l1O00(),null!=this.systemname?this.systemname.IO0O1():void 0},e.prototype.hide=function(){if(null!=this.object)return this.object.visible=!1},e.prototype.OOOI1=function(){if(null!=this.object)return this.object.visible=!0},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.l0lII=function(t){function e(t){this.I110I=t,this.l00ll=!1,this.angle=0,this.OIIl0=.5}return extend(e,t),e.prototype.I1llI=function(t,e,i,s,n){this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n},e.prototype.needsUpdate=function(){return this.l00ll},e.prototype.set=function(t,e){if(this.angle=t,this.OIIl0=e,!this.I110I.is_mobile_app)return this.OIIl0=Math.min(2,Math.max(this.OIIl0,.5)),this.material.opacity=1},e.prototype.III10=function(){var t,e,i,s;if(null!=this.object){for(this.object.position.x=this.px+Math.cos(this.angle)*this.OIIl0*this.parent.O0O10/8,this.object.position.y=this.OO000+Math.sin(this.angle)*this.OIIl0*this.parent.O0O10/8,this.object.position.z=-100,this.object.rotation.z=this.angle,s=Math.min(this.IOII0,this.O0O10),this.object.scale.x=.5*s,this.object.scale.y=-s,this.object.scale.z=s,i=this.parent,t=0,e=0;;){if(null==i)break;t-=i.l1l1O,e-=i.lll00,i=i.parent}return this.object.position.x+=t,this.object.position.y+=e}},e.prototype.IO0ll=function(){var t,e,i;if(null==this.object)return this.OOl0O=new THREE.PlaneGeometry(1,1),t=document.createElement("canvas"),t.width=64,t.height=64,e=t.getContext("2d"),e.translate(t.width/2,t.height/2),e.scale(t.width/2,t.height/2),e.fillStyle="hsla(200,50%,70%,1)",e.moveTo(1,0),e.lineTo(0,-.7),e.lineTo(0,-.2),e.lineTo(-1,-.3),e.lineTo(-1,.3),e.lineTo(0,.2),e.lineTo(0,.7),e.lineTo(1,0),e.fill(),i=new THREE.Texture(t),i.needsUpdate=!0,this.material=new THREE.MeshBasicMaterial({transparent:!0,map:i,opacity:0}),this.object=new THREE.Mesh(this.OOl0O,this.material),this.parent.object.add(this.object)},e.prototype.ll110=function(t){return this.IO0ll(),this.III10()},e.prototype.IO0O1=function(){if(null!=this.material&&(this.material.opacity*=.98),null!=this.object)return this.object.visible=this.material.opacity>.01},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Joystick=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.l00ll=!1,this.angle=0,this.OIIl0=.5,this.pressed=!1,this.posx=0,this.posy=0,this.jx=0,this.jy=0}return extend(e,t),e.prototype.I1llI=function(t,e,i,s,n){this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n},e.prototype.needsUpdate=function(){return this.l00ll},e.prototype.set=function(t,e,i,s){if(this.posx=t,this.posy=e,this.jx=i,this.jy=s,this.pressed=!0,this.IO0ll(),null!=this.material)return this.material.opacity=1},e.prototype.setHue=function(t){this.hue=t},e.prototype.III10=function(){var t,e,i,s;if(null!=this.object&&this.object.visible){for(this.object.position.x=this.posx*this.parent.O0O10,this.object.position.y=this.posy*this.parent.O0O10,this.object.position.z=-99,this.dot.position.x=this.jx*this.parent.O0O10,this.dot.position.y=this.jy*this.parent.O0O10,this.dot.position.z=-98,s=Math.min(this.IOII0,this.O0O10)*this.I110I.IOO1I.control.joystickRatio(),this.object.scale.x=s,this.object.scale.y=-s,this.object.scale.z=s,this.dot.scale.x=.25*s,this.dot.scale.y=.25*-s,this.dot.scale.x=.25*s,i=this.parent,t=0,e=0;;){if(null==i)break;t-=i.l1l1O,e-=i.lll00,i=i.parent}return this.object.position.x+=t,this.object.position.y+=e}},e.prototype.createCanvas=function(t){var e,i;return e=document.createElement("canvas"),e.width=512,e.height=512,i=e.getContext("2d"),i.translate(e.width/2,e.height/2),i.scale(e.width/2,e.height/2),i.lineWidth=.016,i.strokeStyle="hsla("+this.hue+",50%,80%,1)",i.shadowBlur=10,i.shadowOpacity=1,i.shadowColor="hsl("+this.hue+",50%,100%)",i.beginPath(),i.arc(0,0,.8,0,2*Math.PI,!0),i.stroke(),i.strokeStyle="hsla("+this.hue+",50%,80%,.4)",i.beginPath(),i.arc(0,0,.75,0,2*Math.PI,!0),i.stroke(),i.strokeStyle="hsla("+this.hue+",50%,80%,.6)",i.beginPath(),i.arc(0,0,.3,0,2*Math.PI,!0),i.stroke(),t&&(i.lineWidth=.05,i.beginPath(),i.arc(0,0,.85,0,2*Math.PI,!0),i.stroke()),e},e.prototype.createDotTexture=function(){var t,e,i,s;return t=document.createElement("canvas"),t.width=128,t.height=128,e=t.getContext("2d"),e.translate(t.width/2,t.height/2),e.scale(t.width/2,t.height/2),i=e.createRadialGradient(0,0,0,0,0,1),i.addColorStop(0,"hsla("+this.hue+",50%,80%,.5)"),i.addColorStop(.7,"hsla("+this.hue+",50%,80%,0)"),i.addColorStop(.7,"hsla("+this.hue+",50%,80%,1)"),i.addColorStop(.8,"hsla("+this.hue+",50%,80%,1)"),i.addColorStop(.8,"hsla("+this.hue+",50%,80%,.5)"),i.addColorStop(1,"hsla("+this.hue+",50%,80%,0)"),e.fillStyle=i,e.fillRect(-1,-1,2,2),s=new THREE.Texture(t),s.minFilter=s.magFilter=THREE.LinearFilter,s.needsUpdate=!0,s},e.prototype.IO0ll=function(){var t;if(null==this.object)return this.OOl0O=new THREE.PlaneGeometry(1,1),this.texture=new THREE.Texture(this.createCanvas(!1)),this.texture.minFilter=this.texture.magFilter=THREE.LinearFilter,this.texture.needsUpdate=!0,this.texture_thrust=new THREE.Texture(this.createCanvas(!0)),this.texture.minFilter=this.texture.magFilter=THREE.LinearFilter,this.texture_thrust.needsUpdate=!0,this.material=new THREE.MeshBasicMaterial({transparent:!0,map:this.texture,blending:THREE.AdditiveBlending,opacity:1,depthTest:!1,depthWrite:!1}),this.object=new THREE.Mesh(this.OOl0O,this.material),this.dot_material=new THREE.MeshBasicMaterial({transparent:!0,map:this.createDotTexture(),blending:THREE.AdditiveBlending,opacity:1,depthTest:!1,depthWrite:!1}),t=new THREE.PlaneGeometry(1,1),this.dot=new THREE.Mesh(t,this.dot_material),this.parent.object.add(this.object),this.parent.object.add(this.dot)},e.prototype.ll110=function(t){return this.pressed&&this.IO0ll(),this.III10()},e.prototype.IO0O1=function(){var t,e,i,s,n,l;if(null==this.parent||null==this.parent.object||null!=this.object||this.pressed||null==this.I110I.IOO1I.control||(i=this.I110I.display.height,l=this.I110I.IOO1I.control.joystickRadius(),t=this.I110I.IOO1I.IO010.l0l1O.angle,t=-t*Math.PI/180,e=l/2,s=1*e*4,n=i-1*e*4,this.set(s/i,n/i,s/i,n/i)),null!=this.object&&(this.object.visible=this.visible,this.dot.visible=this.visible),null!=this.material)return this.I110I.settings.check("joystick_thrust")&&this.I110I.IOO1I.IO010.l0l1O.up?this.material.map=this.texture_thrust:this.material.map=this.texture},e}(IIIlO),this.InfoBar=function(){function t(t){this.I110I=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=64,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({map:this.texture,transparent:!0,depthTest:!1,depthWrite:!1,blending:THREE.AdditiveBlending}),this.data={name:""},
this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(1,.125,1),this.l1OI0.position.y=-.5875,this.fps=60,this.players=0,this.IOI01=0,this.ping=0,this.refresh_time=0}return t.prototype.setHue=function(t){if(t!==this.hue)return this.hue=t,this.repaint()},t.prototype.III10=function(t,e){return this.data=t,this.hue=e,this.repaint()},t.prototype.repaint=function(){var t,e,i;return this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",t=this.canvas.getContext("2d"),t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle=this.background,t.fillRect(0,0,this.canvas.width,this.canvas.height),e=this.canvas.height/4,i=e/2,t.fillStyle=this.color,t.beginPath(),t.moveTo(0,0),t.lineTo(0,this.canvas.height),t.lineTo(e,this.canvas.height),t.lineTo(e,.7*this.canvas.height),t.lineTo(i,.5*this.canvas.height),t.lineTo(i,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(this.canvas.width,0),t.lineTo(this.canvas.width,this.canvas.height),t.lineTo(this.canvas.width-e,this.canvas.height),t.lineTo(this.canvas.width-e,.7*this.canvas.height),t.lineTo(this.canvas.width-i,.5*this.canvas.height),t.lineTo(this.canvas.width-i,0),t.closePath(),t.fill(),t.fillStyle=this.color,t.font="20pt Play",t.textAlign="left",t.textBaseline="middle",t.fillText(this.players+" on "+this.data.name,this.canvas.width/8,this.canvas.height/4),this.IOI01>=100&&t.fillText(this.IOI01+" total",this.canvas.width/8,3*this.canvas.height/4),t.textAlign="right",t.fillText(this.fps+" FPS",15*this.canvas.width/16,this.canvas.height/4),t.fillText("("+this.I110I.region+") ping "+this.ping+" ms",15*this.canvas.width/16,3*this.canvas.height/4),t.font="20pt FontAwesome",t.fillText("",this.canvas.width/10,this.canvas.height/4),t.fillText("",this.canvas.width/10,.75*this.canvas.height),this.texture.needsUpdate=!0},t.prototype.l1O00=function(){var t,e;if(!((e=Date.now())<this.refresh_time))return t=!1,this.I110I.display.fps!==this.fps&&(this.fps=this.I110I.display.fps,t=!0),this.I110I.total_players!==this.IOI01&&(this.IOI01=this.I110I.total_players,t=!0),this.I110I.system_players!==this.players&&(this.players=this.I110I.system_players,t=!0),this.I110I.ping!==this.ping&&(this.ping=this.I110I.ping,t=!0),t?(this.refresh_time=e+1e3,this.I110I.display.addJob(0,function(t){return function(){return t.repaint()}}(this))):void 0},t}(),OO10I=function(){function t(t,e){this.I110I=t,this.welcome=null!=e&&e,this.antialiasing=this.I110I.settings.check("antialias"),this.O1OOO=new THREE.WebGLRenderer({antialias:this.antialiasing,transparent:!1}),this.O1OOO.setSize(1280,720),this.O1OOO.autoClear=!1,this.hideCursor(),this.I110I.is_app&&this.welcome?this.screen=new AppScreen(this.I110I,this.welcome):this.screen=new lOlOO(this.I110I,this.welcome),this.screen.startControl(this.O1OOO.domElement),this.ll1Ol=this.I110I.settings.check("fullres")?1:Math.sqrt(2),this.pixelated=!1,this.lI011=1,this.fps_time=Date.now(),this.fps_count=0,this.raming=0,this.frame_count=0,this.fadein_start=0,window.addEventListener("resize",function(t){return function(){return t.resize()}}(this)),this.resize(),this.I110I.is_app&&(this.screenshots=[],this.I110I.screenshots=this.screenshots),this.paused=!1,this.jobs=[]}return t.prototype.addJob=function(t,e){if(!(this.jobs.length>15))return this.jobs.push({priority:t,OI001:e})},t.prototype.hideCursor=function(){return this.cursor_shown=!1,this.I110I.is_app&&this.O1OOO.domElement.classList.remove("custom-cursor"),this.O1OOO.domElement.style.cursor="none"},t.prototype.showCursor=function(){return this.cursor_shown=!0,this.I110I.is_app?this.O1OOO.domElement.classList.add("custom-cursor"):this.O1OOO.domElement.style.cursor="default"},t.prototype.start=function(){return document.getElementById("canvaswrapper").innerHTML="",document.getElementById("canvaswrapper").appendChild(this.O1OOO.domElement),this.l0l01||this.ll111(),this.l0l01=!0},t.prototype.resize=function(){return this.width=window.innerWidth,this.height=window.innerHeight,this.rotated=!1,this.width<this.height&&(this.rotated=!0),this.welcome||(this.I110I.is_mobile_app?this.width=Math.round(Math.min(18*this.height/9,this.width)):this.width=Math.round(Math.min(16*this.height/9,this.width))),this.O1OOO.setSize(this.width,this.height),this.screen.setSize(this.width,this.height,this.lI011),this.fixed=!1},t.prototype.fixSize=function(){var t,e,i,s,n,l;if(i=this.O1OOO.context,e=this.O1OOO.domElement,null!=i&&null!=e)return this.fixed=!0,s=window.devicePixelRatio||1,t=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,this.lI011=s/t/this.ll1Ol,1!==this.lI011&&(l=this.width,n=this.height,this.width=Math.round(this.lI011*this.width),this.height=Math.round(this.lI011*this.height),this.O1OOO.setSize(this.width,this.height),this.screen.setSize(this.width,this.height,this.lI011),e.style.width=Math.round(l)+"px",e.style.height=Math.round(n)+"px",this.pixelated)?e.style["image-rendering"]="pixelated":void 0},t.prototype.kill=function(t){if(null==t&&(t=!0),this.killed=!0,t)return document.getElementById("canvaswrapper").removeChild(this.O1OOO.domElement)},t.prototype.showCapture=function(t,e){var i,s,n,l,a;return null==e&&(e=.7),i=document.createElement("canvas"),i.width=t.width/5.1,i.height=t.height/5.1*1.2,n=i.getContext("2d"),l=n.createLinearGradient(0,0,i.width,i.height),l.addColorStop(0,"#FFF"),l.addColorStop(1,"#CCC"),n.fillStyle=l,n.fillRect(0,0,i.width,i.height),a=.95*i.width/t.width,n.drawImage(t,.025*i.width,.025*i.width,t.width*a,t.height*a),s=new Ol0l0(i),this.screen.O0lll.add(s,[.025,e,.2,.25]),s.l000l.l1lIO({opacity:0,I0O1O:.5,I1ll0:.5,rotation:.4,k:.1,d:.5}),s.l000l.push({opacity:1}),s.l000l.push({III1l:-2,rotation:-1}),setTimeout(function(t){return function(){return t.screen.O0lll.remove(s)}}(this),2e3)},t.prototype.doJobs=function(){var t;if(this.jobs.length>0)for(this.jobs.sort(function(t,e){return e.priority-t.priority}),this.jobs.length,t=this.jobs.splice(0,1)[0],t.OI001();this.jobs.length>5;)t=this.jobs.splice(0,1)[0],t.OI001()},t.prototype.ll111=function(){var t,e,i,s,n,l;if(!this.killed){if(requestAnimationFrame(function(t){return function(){return t.ll111()}}(this)),this.I110I.paused){if(this.paused)return;this.paused=!0}else this.paused=!1;if(this.frame_count++,this.fixed||this.fixSize(),0===this.fadein_start&&(this.fadein_start=Date.now()),this.fadein_start>0&&(s=Math.max(0,Math.min(1,(Date.now()-this.fadein_start)/2e3)),document.getElementById("canvaswrapper").style.opacity=s,1===s&&(this.fadein_start=-1,document.getElementById("canvaswrapper").style.removeProperty("opacity"))),this.doJobs(),this.I110I.settings.check("antialias")!==this.antialiasing&&(this.antialiasing=this.I110I.settings.check("antialias"),document.getElementById("canvaswrapper").removeChild(this.O1OOO.domElement),this.O1OOO=new THREE.WebGLRenderer({antialias:this.antialiasing,transparent:!1}),this.O1OOO.autoClear=!1,document.getElementById("canvaswrapper").appendChild(this.O1OOO.domElement),this.cursor_shown?this.showCursor():this.hideCursor(),this.screen.startControl(this.O1OOO.domElement),null!=this.I110I.IOO1I.control&&this.I110I.IOO1I.startControl(),this.resize()),this.I110I.settings.check("fullres")||1!==this.ll1Ol?this.I110I.settings.check("fullres")&&1!==this.ll1Ol&&(this.ll1Ol=1,this.resize()):(this.ll1Ol=Math.sqrt(2),this.resize()),this.make_screenshot&&this.I110I.is_app&&this.screenshot_time<Date.now())for(this.make_screenshot=!1,this.screen.render(this.O1OOO,!1),l={type:this.screenshot_type,value:this.screenshot_value},t=this.O1OOO.domElement,n=document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0),l.image=n,"user"===l.type&&this.showCapture(n),this.screen.renderScreen(this.O1OOO),n=document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0),l.full_image=n,this.screenshots.push(l),this.screenshots.sort(function(t,e){return t.value-e.value});this.screenshots.length>9;)this.screenshots.splice(0,1);else this.screen.render(this.O1OOO,!0);return this.I110I.l1O00(),null!=this.screen.O0lll.lI0Il&&this.screen.O0lll.lI0Il.IOO0I(this.I110I.IOO1I.IO010.status.x,this.I110I.IOO1I.IO010.status.y),this.fps_count++,this.fps_count>=20&&Date.now()>=this.fps_time+1e3&&(i=Date.now()-this.fps_time,this.fps=Math.round(this.fps_count/(.001*i)),this.fps_count=0,this.fps_time=Date.now(),this.fps<45?this.raming++:this.raming=0,this.raming>=8&&(this.raming=0,this.I110I.settings.auto&&(this.I110I.settings.set("antialias",!1),this.I110I.settings.set("galaxies",!1)))),this.make_screenshot&&!this.I110I.is_app?(this.make_screenshot=!1,t=this.O1OOO.domElement,n=document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0),n.toBlob(function(t){var e;return e=new Date,saveAs(t,"starblast-"+e.getTime()+".png")},"image/png",1)):void 0}},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Figures=function(e){function i(t,e){var s,n,l,a;for(this.I110I=t,this.size=null!=e?e:100,i.I0Il1.constructor.call(this),this.l00ll=!1,this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-2e4,-2e4,-2e4),new THREE.Vector3(2e4,2e4,2e4)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),4e4),this.vertices=new Float32Array(3*this.size),this.time=new Float32Array(this.size),this.figure=new Float32Array(this.size),this.fill=new Float32Array(this.size),this.l1l1l=new Float32Array(this.size),this.opac=new Float32Array(this.size),this.color=new Float32Array(3*this.size),this.speed=new Float32Array(this.size),this.time=new Float32Array(this.size),this.bar_size=9,this.display_size=1+this.bar_size+3,this.heart_index=11,this.level_index=12,this.shield_index=14,this.generator_index=this.shield_index+this.display_size,this.crystal_index=this.generator_index+this.display_size,this.start_index=this.crystal_index+this.display_size,this.index=this.start_index,this.I1llO=Date.now(),this.score=-1,this.score_target=0,this.shield=0,this.generator=0,this.shield_max=0,this.generator_max=0,this.generator_depleted=!1,this.ll1I0=0,this.lives=-1,this.livesblink=!1,this.lvl=1,this.last_shield_warning=0,s=n=0;n<=9;s=n+=1)this.vertices[3*s]=.02*s+.02,this.vertices[3*s+1]=.05,this.vertices[3*s+2]=1e3,this.figure[s]=0,this.color[3*s]=.8,this.color[3*s+1]=.9,this.color[3*s+2]=1,this.time[s]=0,this.l1l1l[s]=.025,this.opac[s]=1,this.fill[s]=1,this.speed[s]=0;for(s=10,this.vertices[3*s]=.5,this.vertices[3*s+1]=.5,this.vertices[3*s+2]=1e3,this.figure[s]=14,this.color[3*s]=1,this.color[3*s+1]=1,this.color[3*s+2]=1,this.time[s]=0,this.l1l1l[s]=.025,this.opac[s]=1,this.fill[s]=1,s=l=11,a=this.size-1;l<=a;s=l+=1)this.vertices[3*s]=0,this.vertices[3*s+1]=0,this.vertices[3*s+2]=1e3,this.color[3*s]=.8,this.color[3*s+1]=.9,this.color[3*s+2]=1;this.lOIIl(),this.initBar(this.shield_index,.12,.5,.9,1,13),this.initBar(this.generator_index,.16,1,.9,.5,12),this.initBar(this.crystal_index,.2,1,.5,.5,11),this.setBar(this.shield_index,this.shield,100),this.setBar(this.generator_index,this.generator,100),this.setBar(this.crystal_index,this.ll1I0,100),this.updateLives(),this.updateLevel()}return extend(i,e),i.prototype.hide=function(){return this.I1Oll.visible=!1},i.prototype.OOOI1=function(){return this.I1Oll.visible=!0},i.prototype.initBar=function(t,e,i,s,n,l){var a,o,r,h,u;for(a=0,r=h=t,u=t+this.display_size-1;h<=u;r=h+=1)this.vertices[3*r]=.01+.015*(a+1),this.vertices[3*r+1]=e,this.vertices[3*r+2]=0,this.figure[r]=0,this.color[3*r]=i,this.color[3*r+1]=s,this.color[3*r+2]=n,this.time[r]=0,this.l1l1l[r]=.015,this.opac[r]=1,this.fill[r]=1,this.speed[r]=0,0===a?this.figure[r]=l:a<=this.bar_size?this.figure[r]=16:(o=a-this.bar_size,o=2-o,this.vertices[3*r]+=.003*o,this.figure[r]=0),a++;return r=t,this.vertices[3*r]=.02,this.l1l1l[r]=.02},i.prototype.setBar=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c;for(l=a=0,u=this.bar_size-1;a<=u;l=a+=1)n=t+1+l,I=1/this.bar_size,s=l*I,c=e/i,this.fill[n]=c<s?0:Math.min(1,(c-s)/I);for(h=e>=Math.pow(10,2)?3:e>=Math.pow(10,1)?2:1,n=o=0,d=h-1;o<=d;n=o+=1)l=t+1+this.bar_size+n,this.figure[l]=Math.floor(e/Math.pow(10,h-1-n))%10,this.vertices[3*l+2]=0;for(n=r=h;r<=2;n=r+=1)l=t+1+this.bar_size+n,this.vertices[3*l+2]=1e3;this.geometry.getAttribute("fill").needsUpdate=!0,this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("figure").needsUpdate=!0},i.prototype.setBarColor=function(t,e,i,s){var n,l,a,o;for(l=a=0,o=this.display_size-1;a<=o;l=a+=1)n=t+l,this.color[3*n]=e,this.color[3*n+1]=i,this.color[3*n+2]=s;this.geometry.getAttribute("color").needsUpdate=!0},i.prototype.updateLives=function(){var t,e,i,s,n;return e=0===this.lives?Oll0O.hsvToRgbHex(0,.5,1):Oll0O.hsvToRgbHex(this.hue,.2,.9),n=(e>>16&255)/255,i=(e>>8&255)/255,t=(255&e)/255,s=this.heart_index,this.color[3*s]=n,this.color[3*s+1]=i,this.color[3*s+2]=t,this.vertices[3*s]=.02,this.vertices[3*s+1]=.05,this.vertices[3*s+2]=this.livesblink?1e3:0,this.l1l1l[s]=.025,this.figure[s]=19+this.lives,this.fill[s]=1,this.opac[s]=1,this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0},i.prototype.updateLevel=function(){var t;return t=this.level_index,this.vertices[3*t]=.185,this.vertices[3*t+1]=.05,this.vertices[3*t+2]=0,this.l1l1l[t]=.02,this.figure[t]=17,this.fill[t]=1,this.opac[t]=1,t=this.level_index+1,this.vertices[3*t]=.2,this.vertices[3*t+1]=.05,this.vertices[3*t+2]=0,this.l1l1l[t]=.014,this.figure[t]=this.lvl,this.fill[t]=1,this.opac[t]=1,this.geometry.getAttribute("figure").needsUpdate=!0},i.prototype.setHue=function(t){var e,i,s,n,l,a,o;for(this.hue=t,i=Oll0O.hsvToRgbHex(this.hue,.2,.9),a=(i>>16&255)/255,s=(i>>8&255)/255,e=(255&i)/255,n=l=0,o=this.shield_index-1;l<=o;n=l+=1)10!==n&&(this.color[3*n]=a,this.color[3*n+1]=s,this.color[3*n+2]=e);return this.geometry.getAttribute("color").needsUpdate=!0},i.prototype.hideMouse=function(){return this.vertices[32]=1e3,this.geometry.getAttribute("position").needsUpdate=!0},i.prototype.bonus=function(t,e,i,s,n,l){var a,o,r,h,u,d;for(null==s&&(s=16777215),null==n&&(n=10),null==l&&(l=1),e-=this.I110I.IOO1I.IO010.status.x,i-=this.I110I.IOO1I.IO010.status.y,e<this.I110I.Ill01&&(e+=this.I110I.size),e>this.I110I.Ill01&&(e-=this.I110I.size),i<this.I110I.Ill01&&(i+=this.I110I.size),i>this.I110I.Ill01&&(i-=this.I110I.size),u=this.I110I.display.width/this.I110I.display.height,e=.016*e/u+.5,i=.016*-i+.5,h=1;t>=Math.pow(10,h);)h++;for(d=.011*l,a=-d*(h+1)/2,this.vertices[3*this.index]=e+a,this.vertices[3*this.index+1]=i,this.vertices[3*this.index+2]=0,this.figure[this.index]=n,this.time[this.index]=this.material.uniforms.lIl10.value,this.opac[this.index]=1,this.speed[this.index]=-1,this.l1l1l[this.index]=.01*l,this.fill[this.index]=1,this.color[3*this.index]=(s>>16&255)/255,this.color[3*this.index+1]=(s>>8&255)/255,this.color[3*this.index+2]=(255&s)/255,this.index+=1,this.index>=this.size&&(this.index=this.start_index),o=r=h-1;r>=0;o=r+=-1)this.figure[this.index]=Math.floor(t/Math.pow(10,o))%10,this.vertices[3*this.index]=e+a+(h-o)*d,this.vertices[3*this.index+1]=i,this.vertices[3*this.index+2]=0,this.time[this.index]=this.material.uniforms.lIl10.value,this.opac[this.index]=1,this.speed[this.index]=-1,this.l1l1l[this.index]=.015*l,this.fill[this.index]=1,this.color[3*this.index]=(s>>16&255)/255,this.color[3*this.index+1]=(s>>8&255)/255,this.color[3*this.index+2]=(255&s)/255,this.index+=1,this.index>=this.size&&(this.index=this.start_index);return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("figure").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("opac").needsUpdate=!0,this.geometry.getAttribute("speed").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("speed").needsUpdate=!0,this.geometry.getAttribute("fill").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0},i.prototype.lOIIl=function(){var t,e,i,s;return s="uniform float IOII0;\nuniform float O0O10;\nuniform float size;\nuniform float lIl10 ;\nattribute float l1l1l;\nattribute float fill ;\nattribute float figure;\nattribute vec3 color ;\nattribute float speed ;\nattribute float time ;\nvarying float toffset;\nvarying float opacity ;\nvarying vec3 vcol ;\nvarying float fil ;\nattribute float opac ;\n\nvoid main() {\n  toffset = figure;\n  opacity = opac;\n  vcol = color ;\n  fil = fill ;\n  gl_PointSize = l1l1l*size;\n\n  vec3 O0000 = position ;\n  if (speed != 0.0)\n  {\n    float t = clamp((lIl10-time)/120.0,0.0,1.0);\n    opacity *= pow(1.0-t,.5) ;\n    gl_PointSize *= pow(1.0-t,.1) ;\n    O0000.y += (1.0-exp(-t))*.2*speed ;\n  }\n  vec4 mvPosition = modelViewMatrix * vec4(O0000*vec3(IOII0,O0O10,1.0), 1.0);\n  gl_Position = projectionMatrix * mvPosition ;\n}",t="varying float toffset;\nvarying float opacity;\nvarying vec3 vcol ;\nvarying float fil ;\nuniform sampler2D texture;\n\nvoid main() {\n  gl_FragColor = texture2D(texture,vec2((gl_PointCoord.x+toffset)/32.0,1.0-gl_PointCoord.y))*vec4(vcol,opacity);\n  gl_FragColor.xyz *= .3+.7*pow(max(fil-gl_PointCoord.x,0.0),.1) ;\n}",e=this.createTexture(),i={texture:{type:"t",value:e},IOII0:{type:"f",value:this.IOII0},O0O10:{type:"f",value:this.O0O10},size:{type:"f",value:1e3},lIl10:{type:"f",value:0}},this.material=new THREE.ShaderMaterial({uniforms:i,vertexShader:s,fragmentShader:t,transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("opac",new THREE.BufferAttribute(this.opac,1)),this.geometry.addAttribute("figure",new THREE.BufferAttribute(this.figure,1)),this.geometry.addAttribute("color",new THREE.BufferAttribute(this.color,3)),this.geometry.addAttribute("fill",new THREE.BufferAttribute(this.fill,1)),this.geometry.addAttribute("speed",new THREE.BufferAttribute(this.speed,1)),this.geometry.addAttribute("time",new THREE.BufferAttribute(this.time,1)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.position.z=0},i.prototype.createTexture=function(){var e,i,s,n,l,a,o,r,h,u,d,I;for(e=document.createElement("canvas"),e.width=2048,e.height=64,i=e.getContext("2d"),d="0123456789",i.font="60pt Play",i.fillStyle="#FFF",i.strokeStyle="#000",i.lineWidth=2,i.shadowBlur=6,i.shadowColor="#888",i.shadowOpacity=1,i.textAlign="center",i.textBaseline="middle",n=l=0,h=d.length-1;0<=h?l<=h:l>=h;n=0<=h?++l:--l)i.fillText(d.substring(n,n+1),32+64*n,32);for(d=["7","D","(","%","+","a"],i.font="38pt SBGlyphs",n=a=0,u=d.length-1;0<=u?a<=u:a>=u;n=0<=u?++a:--a)n===d.length-1?(i.save(),i.translate(32+64*(n+10),32),i.scale(.7,1),i.fillText(d[n],0,0),i.restore()):(i.fillText(d[n],32+64*(n+10),32),n===d.length-2&&i.strokeText(d[n],32+64*(n+10),32));for(s=i.createLinearGradient(0,0,0,64),s.addColorStop(0,"#FFF"),s.addColorStop(.6,"#FFF"),s.addColorStop(.6,"#CCC"),i.fillStyle=s,i.shadowBlur=2,i.translate(1024,0),n=o=0;o<=2;n=o+=1)i.beginPath(),i.moveTo(2,2),i.lineTo(12,2),i.lineTo(12,12),i.lineTo(18,22),i.lineTo(18,62),i.lineTo(8,62),i.lineTo(8,52),i.lineTo(2,42),i.closePath(),i.fill(),i.translate(64/3,0);for(i.textBaseline="middle",i.font="40pt Play",i.fillStyle="#FFF",i.fillText(t("Lv"),32,32),i.translate(64,0),n=r=0;r<=6;n=r+=1)0!==n?(i.font="38pt SBGlyphs",i.fillStyle="#FFF",i.fillText("$",32,32),i.globalCompositeOperation="destination-out",i.font=0===n?"32pt Arial":"22pt Play",i.fillStyle="rgba(0,0,0,.7)",d=0===n?"":n-1,i.fillText(d,32,30),i.globalCompositeOperation="source-over",i.translate(64,0)):i.translate(64,0);return I=new THREE.Texture(e),I.minFilter=THREE.LinearFilter,I.needsUpdate=!0,I},i.prototype.I1llI=function(t,e,i,s,n){this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n},i.prototype.needsUpdate=function(){return this.l00ll},i.prototype.III10=function(){},i.prototype.IO0ll=function(){return null==this.object&&(this.object=this.I1Oll,this.object.position.z=-100,this.parent.object.add(this.object)),this.object.visible=this.visible},i.prototype.ll110=function(t){return this.IO0ll(),this.III10()},i.prototype.IO0O1=function(){var e,i,s,n,l,a,o,r,h,u,d;if(null!=this.material){if(this.material.uniforms.IOII0.value=this.IOII0,this.material.uniforms.O0O10.value=this.O0O10,this.material.uniforms.size.value=this.I110I.display.width,this.material.uniforms.lIl10.value=this.I110I.IOO1I.ll0lO.ll01O,this.score_target=Math.min(999999,this.I110I.IO010.status.score),this.I110I.IO010.status.bestscore=Math.max(this.I110I.IO010.status.score,this.I110I.IO010.status.bestscore),this.score!==this.score_target){for(Math.abs(this.score-this.score_target)<1?this.score=this.score_target:this.score=.98*this.score+.02*this.score_target,d=Math.round(this.score),h=1,n=l=0;l<=9;n=l+=1)0===n||d>=Math.pow(10,n)?(this.vertices[3*n+2]=0,this.figure[n]=Math.floor(d/Math.pow(10,n))%10,this.fill[n]=1,h=n+1):n<6?(this.vertices[3*n+2]=0,this.figure[n]=0,this.fill[n]=0):this.vertices[3*n+2]=1e3;for(h=Math.max(6,h),s=.02*h,n=a=0,u=h-1;a<=u;n=a+=1)this.vertices[3*n]=.02*(9-n)+s-.15;this.geometry.getAttribute("figure").needsUpdate=!0,this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("fill").needsUpdate=!0}return this.shield===Math.floor(this.I110I.IOO1I.IO010.status.shield)&&this.shield_max===this.I110I.IOO1I.IO010.instance.shield_capacity||(this.shield>0&&0===Math.floor(this.I110I.IOO1I.IO010.status.shield)&&this.I110I.IO010.status.alive&&this.I110I.IOO1I.ll0lO.ll01O-this.last_shield_warning>300&&(this.I110I.message(t("Warning: Shield disabled"),"#8FF"),this.last_shield_warning=this.I110I.IOO1I.ll0lO.ll01O),this.shield=Math.floor(this.I110I.IOO1I.IO010.status.shield),this.shield_max=this.I110I.IOO1I.IO010.instance.shield_capacity,this.setBar(this.shield_index,this.shield,this.shield_max)),this.OO1I0!==this.I110I.IOO1I.IO010.status.OO1I0&&(r=this.I110I.IO010.type.level,this.OO1I0<5*r&&this.I110I.IOO1I.IO010.status.OO1I0>=5*r&&!this.I110I.IO010.instance.allMaxed()&&O1Ill.levelUpgrades(r)&&this.I110I.mode.showUpgrades()&&this.I110I.message(t("Upgrades unlocked"),"#F88",!0),this.OO1I0<20*r*r&&this.I110I.IOO1I.IO010.status.OO1I0>=20*r*r&&this.lvl<6&&this.I110I.mode.shipCanUpgrade()&&this.I110I.message(t("Ship Upgrade"),"#FFF"),this.OO1I0=this.I110I.IOO1I.IO010.status.OO1I0,this.setBar(this.crystal_index,this.OO1I0,this.I110I.IOO1I.IO010.instance.crystals_capacity)),i=!1,this.I110I.IOO1I.IO010.isPulseType()&&(i=Math.floor(this.I110I.IOO1I.IO010.status.generator)<this.I110I.IOO1I.IO010.pulsePower(),this.generator_depleted&&this.I110I.IOO1I.ll0lO.ll01O<this.I110I.IOO1I.IO010.last_pulse_shot+60/this.I110I.IOO1I.IO010.pulseRate()&&(i=!0)),this.generator_depleted!==i&&(this.generator_depleted=i,i?this.setBarColor(this.generator_index,.5,.45,.25):(this.I110I.IO010.l0l1O.llOIl||this.I110I.OlIl1.beep(2,.25),this.setBarColor(this.generator_index,1,.9,.5))),this.generator===Math.floor(this.I110I.IOO1I.IO010.status.generator)&&this.generator_max===this.I110I.IOO1I.IO010.instance.generator_capacity||(this.generator=Math.floor(this.I110I.IOO1I.IO010.status.generator),this.generator_max=Math.max(this.generator,this.I110I.IOO1I.IO010.instance.generator_capacity),this.setBar(this.generator_index,this.generator,this.generator_max)),this.lvl!==this.I110I.IOO1I.IO010.type.level&&(this.lvl=this.I110I.IOO1I.IO010.type.level,this.updateLevel()),o=this.I110I.IOO1I.IO010.status.lives-1,this.lvl===Math.floor(this.I110I.mode.options.starting_ship/100)&&this.I110I.mode.infinite_base_lives&&(o=this.I110I.IOO1I.ll0lO.survival?0:-1),this.I110I.IOO1I.ll0lO.survival?(o=0,e=Date.now()/500%1<.5):e=!1,this.lives!==o||e!==this.livesblink?(this.lives=o,this.livesblink=e,this.updateLives()):void 0}},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Cursor=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.l00ll=!0,this.visible=!0,this.levelmod=-100}return extend(e,t),e.prototype.I1llI=function(t,e,i,s,n){this.px=t,this.OO000=e,this.IOII0=i,this.O0O10=s,this.level=n},e.prototype.needsUpdate=function(){return this.l00ll},e.prototype.set=function(t,e){this.posx=t,this.posy=e},e.prototype.III10=function(){var t;if(null!=this.object)return this.object.visible=this.visible,this.object.position.x=this.posx,this.object.position.y=this.posy,this.object.position.z=-1100,this.object.renderOrder=999,t=Math.min(this.IOII0,this.O0O10),this.object.scale.x=t,this.object.scale.y=-t,this.object.scale.z=t},e.prototype.IO0ll=function(){var t,e,i;if(null==this.object)return t=document.createElement("canvas"),t.width=64,t.height=64,e=t.getContext("2d"),e.translate(t.width/2,t.height/2),e.font="50pt FontAwesome",e.shadowBlur=5,e.shadowOpacity=1,e.shadowColor="#000",e.fillStyle="#EEE",e.textAlign="center",e.textBaseline="middle",e.fillText("",0,0),i=new THREE.Texture(t),i.needsUpdate=!0,i.minFilter=THREE.LinearFilter,this.material=new THREE.SpriteMaterial({map:i,transparent:!0,blending:THREE.NormalBlending,depthWrite:!1,depthTest:!1}),this.object=new THREE.Sprite(this.material),this.parent.object.add(this.object)},e.prototype.ll110=function(t){return this.IO0ll(),this.III10()},e.prototype.IO0O1=function(){},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ll0OO=function(e){function i(e,s,n){var l,a,o,r;this.screen=e,this.I110I=s,this.welcome=n,i.I0Il1.constructor.call(this),this.IOO1I=this.I110I.IOO1I,this.survival=!1,this.welcome&&null!=this.I110I.ship_ad_code&&(o=O1Ill.types_by_code[this.I110I.ship_ad_code],this.add(new ShipAd(this.I110I,this.I110I.ship_ad_code),[0,-.1,.2,.4]),a=new l0llO(t("NEW SHIP!")),this.add(a,[.01,.175,.18,.025]),a.background=null,a.text_shadow={opacity:1,blur:30,color:"#8FF"},a=new l0llO(o.name+" - "+t("Level")+" "+o.level),this.add(a,[.01,.2,.18,.025]),a.background=null,a.text_shadow={opacity:1,blur:30,color:"#8FF"}),this.welcome||(this.I110I.is_mobile_app&&("survival"!==this.I110I.mode.id&&"invasion"!==this.I110I.mode.id||this.showTooltips()),this.I110I.mode.show_weaponsbar&&(this.weapons_bar=new WeaponsBar(this.I110I),this.I110I.is_mobile_app?this.I110I.is_tablet?this.add(this.weapons_bar,[.8,.3,.2,.25]):this.add(this.weapons_bar,[.8,.2,.2,.25]):this.add(this.weapons_bar,[0,.36,.05,.45])),this.lI0Il=new OIlI0(this.I110I),this.I110I.is_mobile_app?this.welcome||this.add(this.lI0Il,[.25,.1,.5,.8]):this.welcome||this.add(this.lI0Il,[.8,.5,.2,.5]),this.I110I.is_mobile_app&&(this.fire_buttons=new FireButtons(this.I110I),this.I110I.is_tablet?this.add(this.fire_buttons,[.8,.6,.2,.35]):this.add(this.fire_buttons,[.8,.5,.2,.45])),this.cursor=new Cursor,this.add(this.cursor,[-1,-1,.03,.03]),this.I110I.is_touch_device&&(this.arrow=new l0lII(this.I110I),this.welcome||this.add(this.arrow,[.5,.5,.05,.05]),this.joystick=new Joystick(this.I110I),this.welcome||this.add(this.joystick,[0,0,.4,.4])),this.figures=new Figures(this.I110I),this.welcome||this.add(this.figures,[0,0,1,1]),this.specupgrades=new lOIIO(this.I110I),this.I110I.is_mobile_app?this.add(this.specupgrades,[.245,.9,.51,.1]):this.add(this.specupgrades,[0,.92,.8,.08]),this.shipupgrades=new I0IO0(this.I110I),this.add(this.shipupgrades,[.25,0,.5,.1]),this.I110I.is_mobile_app?(this.buttons_panel=new MobileButtonsPanel(this.I110I),this.fullscreen_button=this.buttons_panel.fullscreen_button,this.add(this.buttons_panel,[.8,0,.2,.1]),this.game_menu=new GameMenu(this.I110I),this.add(this.game_menu,[.8,0,.2,1]),this.gamepad_helper=new GamepadHelper(this.I110I)):this.I110I.is_app?(this.fullscreen_button=new GameButton(this.I110I,"options","","Esc",function(t){return function(){return t.toggleOptions()}}(this)),this.game_menu=new GameMenu(this.I110I),this.add(this.game_menu,[.8,0,.2,1]),this.gamepad_helper=new GamepadHelper(this.I110I)):(this.fullscreen_button=new GameButton(this.I110I,"options","","Esc",function(t){return function(){return t.toggleOptions()}}(this)),this.game_menu=new GameMenu(this.I110I),this.add(this.game_menu,[.8,0,.2,1])),this.I110I.is_mobile_app||(this.add(this.fullscreen_button,[.945,0,.055,.1*.2*16/10-.002]),r=.055,l=.1*.2*16/10-.002,this.fullscreen_button.force_ratio=16/9*r/l,this.fullscreen_button.align_top=!0),this.radar_shown=!0,this.I110I.addKeyListener("R".charCodeAt(0),{keyPressed:function(t){return function(){return t.radar_shown=!t.radar_shown,t.lI0Il.visible=t.radar_shown}}(this),keyReleased:function(t){return function(){}}()}),this.chatpanel=new ChatPanel(this.I110I),this.add(this.chatpanel,[0,.5,.25,.4]),"yes"===localStorage.getItem("dissmissed_info_"+this.I110I.mode.id)||this.I110I.is_app||null!=this.I110I.mode.tips_test&&texists(this.I110I.mode.tips_test)&&"tutorial"!==this.I110I.mode.id&&(this.mode_info=new ModeInfo(this.I110I),this.add(this.mode_info,[.05,.5,.19,.45]))),CanvasRenderingContext2D.prototype.fillRoundRect=CanvasRenderingContext2D.prototype.fillRect,this.messages=new Messages(this.I110I,this)}return extend(i,e),i.prototype.lOl1l=function(t){return this.IOO1I.ll111(t)},i.prototype.IOIIl=function(t){var e,i;return i=new l000I(t.seed),e=120+i.O1010(240),null!=this.lI0Il&&this.lI0Il.IOIIl(t,e),this.setHue(e)},i.prototype.setHue=function(t){if(this.hue=t,null!=this.figures&&this.figures.setHue(t/360),null!=this.fullscreen_button&&this.fullscreen_button.setHue(t),null!=this.shipupgrades&&this.shipupgrades.updateHue(t),null!=this.chatpanel&&this.chatpanel.updateHue(t),null!=this.roomlink&&this.roomlink.setHue(t),null!=this.mode_info&&this.mode_info.setHue(t),null!=this.lI0Il&&this.lI0Il.setHue(t),null!=this.rcs&&this.rcs.setHue(t),null!=this.game_menu&&this.game_menu.setHue(t),null!=this.weapons_bar&&this.weapons_bar.setHue(t),null!=this.fire_buttons&&this.fire_buttons.setHue(t),null!=this.joystick&&this.joystick.setHue(t),null!=this.buttons_panel)return this.buttons_panel.setHue(t)},i.prototype.hide=function(){return this.hidden=!0,this.lI0Il.visible=!1,this.figures.visible=!1,this.specupgrades.visible=!1,this.shipupgrades.visible=!1,this.fullscreen_button.visible=!1,null!=this.survival_info&&(this.survival_info.visible=!1),this.chatpanel.visible=!1,null!=this.roomlink&&(this.roomlink.visible=!1),null!=this.mode_info&&(this.mode_info.visible=!1),null!=this.rcs&&(this.rcs.visible=!1),null!=this.weapons_bar&&(this.weapons_bar.visible=!1),null!=this.joystick&&(this.joystick.visible=!1),null!=this.fire_buttons&&(this.fire_buttons.visible=!1),null!=this.buttons_panel&&(this.buttons_panel.visible=!1),null!=this.weapon_store&&this.weapon_store.hide(),this.I110I.mode.hideUI(),null!=this.cursor&&(this.cursor.visible=!1),null!=this.game_menu&&this.game_menu.shown&&this.game_menu.hide(),this},i.prototype.OOOI1=function(){if(this.hidden=!1,this.I110I.mode.showUI(),this.lI0Il.visible=this.radar_shown,this.figures.visible=!0,this.specupgrades.visible=!0,this.shipupgrades.visible=!0,this.fullscreen_button.visible=!0,null!=this.survival_info&&(this.survival_info.visible=!0),this.chatpanel.visible=!0,null!=this.roomlink&&(this.roomlink.visible=!0),null!=this.mode_info&&(this.mode_info.visible=!0),null!=this.rcs&&(this.rcs.visible=!0),null!=this.weapons_bar&&(this.weapons_bar.visible=!0),null!=this.cursor&&(this.cursor.visible=!0),null!=this.joystick&&(this.joystick.visible=!0),null!=this.fire_buttons&&(this.fire_buttons.visible=!0),null!=this.buttons_panel&&(this.buttons_panel.visible=!0),null!=this.game_menu&&this.game_menu.shown)return this.game_menu.hide()},
i.prototype.IO0O1=function(){var e,s,n;if(i.I0Il1.IO0O1.call(this),this.messages.III10(),this.welcome&&this.I110I.settings.check("gamepad_control")&&!this.I110I.is_app&&(e=navigator.getGamepads()[0])&&e.buttons.length>3&&(null==this.padstartbutton?this.padstartbutton=e.buttons[0].pressed||e.buttons[1].pressed||e.buttons[2].pressed||e.buttons[3].pressed:(e.buttons[0].pressed||e.buttons[1].pressed||e.buttons[2].pressed||e.buttons[3].pressed)!==this.padstartbutton&&(this.padstartbutton=e.buttons[0].pressed||e.buttons[1].pressed||e.buttons[2].pressed||e.buttons[3].pressed,this.padstartbutton&&this.I110I.O1IO0.startGame())),null!=this.I110I.mode&&this.I110I.mode.options.rcs_toggle&&null==this.rcs&&(this.rcs=new RCS(this.I110I,this.fullscreen_button.hue),this.I110I.is_mobile_app?this.I110I.is_tablet?this.add(this.rcs,[.02,.5,.08,.12]):this.add(this.rcs,[.02,.34,.08,.12]):this.add(this.rcs,[0,.23,.2,.05])),this.survival!==this.I110I.IOO1I.ll0lO.survival?(this.survival=this.I110I.IOO1I.ll0lO.survival,this.radiation_com=0,this.survival&&(this.survival_info=new I011I(this.I110I),this.add(this.survival_info,[0,.29,.2,.12]),this.I110I.OlIl1.alert(),null!=this.roomlink&&this.remove(this.roomlink))):null!=this.survival_info&&(n=(this.I110I.IOO1I.ll0lO.ll01O-this.I110I.IOO1I.ll0lO.survival_start)/CONSTANTS.RADIATION_TIME,s=Math.max(0,Math.min(100,Math.round(100*(1-n)))),this.survival_info.set(this.I110I.lIllI.alive_ships,s),this.radiation_com<1&&n>.02&&(this.radiation_com=1,this.I110I.message(t("Warning: Repulsive gravity field detected"),"#F62"))),null!=this.gamepad_helper)return this.gamepad_helper.IO0O1()},i.prototype.toggleOptions=function(){if(!(null==this.game_menu||this.game_menu.settings_shown&&this.game_menu.shown))return this.game_menu.shown?(this.game_menu.hide(),null!=this.fire_buttons&&(this.fire_buttons.visible=!0),this.I110I.is_mobile_app||(this.fullscreen_button.icon="",this.fullscreen_button.l00ll=!0,this.hidden)?void 0:(this.radar_shown&&(this.lI0Il.visible=!0),this.I110I.mode.showScorePanel())):(this.I110I.is_mobile_app||(this.fullscreen_button.icon="",this.fullscreen_button.l00ll=!0,this.lI0Il.visible=!1,this.I110I.mode.hideScorePanel()),null!=this.fire_buttons&&(this.fire_buttons.visible=!1),this.game_menu.OOOI1())},i.prototype.shipUpgradesNavigation=function(){if(null!=this.gamepad_helper)return this.gamepad_helper.shipUpgradesNavigation()},i.prototype.statsUpgradesNavigation=function(){if(null!=this.gamepad_helper)return this.gamepad_helper.statsUpgradesNavigation()},i.prototype.showWeaponStore=function(t){if(this.I110I.mode.show_weaponsbar&&(!this.I110I.mode.restricted_weapons_store||t))return null==this.weapon_store&&(this.weapon_store=new WeaponStore(this.I110I),this.I110I.is_mobile_app?this.add(this.weapon_store,[.05,.05,.9,.9]):this.add(this.weapon_store,[.25,.25,.5,.5])),this.weapon_store.OOOI1(),this.I110I.is_mobile_app&&null!=this.cursor?this.cursor.visible=!1:void 0},i.prototype.hideWeaponStore=function(){if(null!=this.weapon_store&&this.weapon_store.hide(),this.I110I.is_mobile_app&&null!=this.cursor)return this.cursor.visible=!0},i.prototype.toggleWeaponStore=function(){return null==this.weapon_store?this.showWeaponStore():this.weapon_store.shown?this.hideWeaponStore():this.showWeaponStore()},i.prototype.showTooltips=function(){if(this.I110I.is_mobile_app&&!this.tooltips_shown)return this.tooltips_shown=!0,this.tooltips=new Tooltips(this.I110I),this.add(this.tooltips,[0,0,1,1])},i}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,lOlOO=function(t){function e(t,i){this.I110I=t,this.welcome=null!=i&&i,e.I0Il1.constructor.call(this),this.O0lll=new ll0OO(this,this.I110I,this.welcome),this.add(this.O0lll,[0,0,1,1],[0,0,1,1])}return extend(e,t),e}(l0O0l),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Message=function(t){function e(t,i,s,n,l){this.parent=t,this.text=i,this.color=s,this.bottom=n,null==l&&(l=!1),e.I0Il1.constructor.call(this),l?(this.force_ratio=8,this.l000l.l1lIO({opacity:.5,I0O1O:4,I1ll0:4}),this.l000l.push({d:.5,k:.08,f:.3,I0O1O:1,I1ll0:1}),this.l000l.push({d:1.5,k:.001,f:.1,I0O1O:.75,I1ll0:.75,I0O10:this.bottom?1:-1,opacity:.5}),this.l000l.push({d:1,k:.01,f:.1,I0O1O:.5,I1ll0:.5,I0O10:this.bottom?1.5:-1.5,opacity:0})):(this.force_ratio=16,this.l000l.push({d:2,k:.001,f:.1,I0O1O:.75,I1ll0:.75,I0O10:this.bottom?1:-1,opacity:.5}),this.l000l.push({d:1,k:.01,f:.1,I0O1O:.5,I1ll0:.5,I0O10:this.bottom?1.5:-1.5,opacity:0})),this.creation=Date.now()}return extend(e,t),e.prototype.lOO01=function(t){var e;for(t.save(),t.translate(this.px,this.OO000),t.strokeStyle="#000",t.lineWidth=.05*this.O0O10,t.fillStyle=this.color,t.textAlign="center",t.textBaseline="middle",e=Math.round(this.O0O10/1.6);;){if(t.font=e+"pt Play",t.measureText(this.text).width<.99*this.IOII0||e<=5)break;e-=1}t.strokeText(this.text,this.IOII0/2,this.O0O10/2),t.fillText(this.text,this.IOII0/2,this.O0O10/2),t.restore()},e}(IIIlO),this.Messages=function(){function t(t,e){this.I110I=t,this.panel=e,this.messages=[]}return t.prototype.message=function(t,e,i,s){var n,l;return null==e&&(e="#FFF"),null==s&&(s=!1),l=new Message(this,t,e,i,s),n=s?.2:.06,i?this.panel.add(l,[.3,.8,.4,n]):this.panel.add(l,[.3,.1+.05*(1+this.messages.length),.4,n]),this.messages.push(l)},t.prototype.III10=function(){var t,e,i,s;for(s=Date.now(),t=e=this.messages.length-1;e>=0;t=e+=-1)i=this.messages[t],i.creation+5e3<s&&(this.panel.remove(i),this.messages.splice(t,1))},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.I011I=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this),this.survivors=0,this.shield_regen=100,this.blending=THREE.AdditiveBlending,this.force_ratio=4,this.l000l.l1lIO({I0O1O:1,I1ll0:1,III1l:2,opacity:0}),this.l000l.push({d:2,k:.02,f:.3,I0O1O:2,I1ll0:2,III1l:2}),this.l000l.push({d:2,k:.02,f:.3}),this.creation_date=Date.now()}return extend(i,e),i.prototype.set=function(t,e){if(!(Date.now()-this.creation_date<6e3))return t!==this.survivors&&(this.survivors=t,this.l00ll=!0),e!==this.shield_regen?(this.shield_regen=e,this.l00ll=!0):void 0},i.prototype.lOO01=function(e){var i;if(e.save(),e.translate(this.px,this.OO000),e.fillStyle="#F88",e.textAlign="center",e.textBaseline="middle",0===this.survivors){for(i=Math.round(this.O0O10/3);;){if(e.font=i+"pt Play",i<5||e.measureText(t("Survival Mode!")).width<this.IOII0)break;i-=1}e.fillText(t("Survival Mode!"),this.IOII0/2,this.O0O10/2)}else this.shield_regen<99?(i=Math.round(this.O0O10/3),e.font=i+"pt Play",e.fillText(t("Survivors:")+" "+this.survivors,this.IOII0/2,.2*this.O0O10)):(i=Math.round(this.O0O10/3),e.font=i+"pt Play",e.fillText(t("Survivors:")+" "+this.survivors,this.IOII0/2,this.O0O10/2));e.restore()},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.RCS=function(t){function e(t,i){this.I110I=t,this.hue=i,e.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.status=!0,this.I110I.is_mobile_app||(this.force_ratio=4.9,this.rcsimage=this.createRCSImage()),this.using_gamepad=!1,this.levelmod=100}return extend(e,t),e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.lOO01=function(t){var e,i;return null!=this.material&&(this.material.depthTest=!0,this.material.depthWrite=!1),this.I110I.is_mobile_app?this.drawComponentMobile(t):(this.status?t.globalAlpha=1:t.globalAlpha=.5,this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,40%,.5)",this.color="hsla("+this.hue+",70%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.textAlign="left",t.textBaseline="middle",e=Math.round(this.O0O10/3),t.font=e+"pt FontAwesome",i=this.O0O10/4,t.fillStyle=this.medium,t.beginPath(),t.moveTo(0,0),t.lineTo(this.IOII0-i,0),t.lineTo(this.IOII0,i),t.lineTo(this.IOII0,this.O0O10),t.lineTo(i,this.O0O10),t.lineTo(0,this.O0O10-i),t.closePath(),t.fill(),t.fillStyle=this.color,t.globalAlpha=1,this.status?t.drawImage(this.shipicon,this.IOII0/2,0,this.O0O10,this.O0O10):t.drawImage(this.rcsimage,this.IOII0/2-.5*this.O0O10,0,2*this.O0O10,this.O0O10),t.globalAlpha=this.status?1:.5,t.font=e+"pt Play",this.status?t.fillText("RCS: ON",.25*this.O0O10,this.O0O10/2):t.fillText("RCS: OFF",.25*this.O0O10,this.O0O10/2),this.using_gamepad?Gamepad.drawButton("LT",t,this.IOII0-this.O0O10/4-.4*this.O0O10,this.O0O10/2,.6*e,this.hue):(t.textAlign="center",t.font=Math.round(.6*e)+"pt Play",t.fillText("CTRL",this.IOII0-this.O0O10/4-.4*this.O0O10,this.O0O10/2),t.strokeStyle=this.color,t.strokeRect(this.IOII0-this.O0O10/4-.8*this.O0O10,.3*this.O0O10,.8*this.O0O10,.4*this.O0O10)),t.restore())},e.prototype.drawComponentMobile=function(t){var e;return this.color="hsla("+this.hue+",70%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.textAlign="center",t.textBaseline="middle",e=Math.round(.75*Math.min(this.IOII0,this.O0O10)),t.font=e+"pt SBGlyphs",t.fillStyle=this.color,t.shadowBlur=e/20,t.shadowOpacity=1,t.shadowColor=this.color,t.fillText(this.status?"w":"v",.5*this.IOII0,.5*this.O0O10),t.restore()},e.prototype.l11Il=function(){return this.I110I.is_mobile_app?(this.I110I.IOO1I.IO010.l0l1O.glide=!this.I110I.IOO1I.IO010.l0l1O.glide,this.I110I.IOO1I.IO010.OO111()):!this.I110I.settings.check("buttons_disabled")&&(document.onkeydown({keyCode:17}),!0)},e.prototype.I11IO=function(){return this.I110I.is_mobile_app||(this.I110I.IOO1I.control.control_pressed=!1),!0},e.prototype.repaint=function(){return this.l00ll=!0},e.prototype.IO0O1=function(){if(this.status!==!this.I110I.IO010.status.glide&&(this.status=!this.I110I.IO010.status.glide,this.repaint()),this.I110I.using_gamepad!==this.using_gamepad)return this.using_gamepad=this.I110I.using_gamepad,this.repaint()},e.prototype.createRCSImage=function(){var t,e,i,s,n,l,a;for(t=document.createElement("canvas"),this.shipicon=new l0Il0(II1l1.getDefaultShip(),0).getIcon(128),t.width=128,t.height=64,e=t.getContext("2d"),l=1.2*t.height,e.translate(t.height/2,t.height/2),a=(t.width-t.height)/20,i=s=1;s<=10;i=s+=1)t.height/2,n=.12*-Math.PI*i/10,e.globalCompositeOperation="destination-out",e.globalAlpha=1,e.rotate(n),e.drawImage(this.shipicon,-l/2,-l/2,l,l),e.rotate(-n),e.translate(a,0),e.rotate(n),e.globalCompositeOperation="source-over",e.globalAlpha=Math.pow(i/10,2),e.drawImage(this.shipicon,-l/2,-l/2,l,l),e.rotate(-n),e.translate(a,0);return t},e.staticRCSImage=function(t){return new e(t,0).createRCSImage()},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.RoomLinkButton=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this,this),this.hue=0,this.force_ratio=4,this.I110I.is_app||(this.l000l.l1lIO({I0O1O:.5,I1ll0:.5,III1l:-2,opacity:0}),this.l000l.push({d:5,k:.02,f:.3,I0O1O:2.5,I1ll0:2.5,III1l:-3,opacity:0}),this.l000l.push({d:2,k:.02,f:.15})),this.copied=!1,this.systemid=null}return extend(i,e),i.prototype.lOO01=function(e){var i,s,n;return this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),e.clearRect(0,0,this.IOII0,this.O0O10),e.textAlign="center",e.textBaseline="middle",s=Math.round(this.O0O10/4),e.font=s+"pt Play",e.fillStyle=this.background,OpenChatButton.roundRect(e,2,2,this.IOII0-4,this.O0O10-4,this.O0O10/12),e.fill(),e.lineWidth=2,e.strokeStyle=this.color,e.fillStyle=this.color,this.copied?e.fillText(t("Copied!"),this.IOII0/2,this.O0O10/2):(e.fillText(t("Copy Room Link"),this.IOII0/2,.22*this.O0O10),n=.9*this.IOII0,i=.4*this.O0O10,e.strokeStyle=this.medium,null!=this.I110I.private_address?(e.font=Math.round(.6*s)+"pt Play",e.fillText("starblast.io#"+this.I110I.private_address,this.IOII0/2,.7*this.O0O10),n=this.IOII0,e.strokeRect(this.IOII0/2-n/2,.7*this.O0O10-i/2,n,i)):(e.fillText("starblast.io#"+this.systemid,this.IOII0/2,.7*this.O0O10),e.strokeRect(this.IOII0/2-n/2,.7*this.O0O10-i/2,n,i))),e.restore()},i.prototype.O1I11=function(){return this.I110I.O1IO0.copyRoomLink(),this.copied=!0,this.l00ll=!0,this.l000l.push({d:1,k:.02,f:.3}),this.l000l.push({I0O1O:.5,I1ll0:.5,III1l:-2,opacity:0,d:2,k:.02,f:.3}),setTimeout(function(t){return function(){return t.parent.remove(t)}}(this),4e3)},i.prototype.IO0O1=function(){if(this.I110I.systemid!==this.systemid)return this.systemid=this.I110I.systemid,this.l00ll=!0},i.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ModeInfo=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this,this),this.hue=this.I110I.hue,this.blending=THREE.AdditiveBlending,this.l000l.l1lIO({I0O1O:.5,I1ll0:.5,III1l:-2,opacity:0}),this.l000l.push({d:1,k:.02,f:.3,III1l:-2,opacity:0}),this.l000l.push({d:2,k:.02,f:.3}),this.copied=!1,this.systemid=null,this.closed=!1}return extend(i,e),i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p;for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),e.clearRect(0,0,this.IOII0,this.O0O10),r=Math.round(this.IOII0/20),e.fillStyle=this.background,e.fillRect(0,0,this.IOII0,this.O0O10),e.fillStyle=this.medium,e.fillRect(0,0,this.IOII0,3*r),e.textBaseline="middle",e.textAlign="right",e.fillStyle=this.color,e.font=Math.round(1.2*r)+"pt FontAwesome",e.fillText("",this.IOII0-r,1.5*r),e.textAlign="left",e.font=r+"pt Play",e.fillText(t(this.I110I.mode.name),r,1.5*r),l=4,c=this.IOII0-2*r,h=e.measureText(" ").width,i=e.measureText("• ").width,a=this.I110I.mode.tips,s=0,n=a.length;s<n;s++){for(u=a[s],u="• "+u,o=u.split(" "),p=0;;){if(0===o.length)break;I=o.splice(0,1)[0],d=e.measureText(I).width,p+d>c&&p>i&&(p=i,l+=1),e.fillText(I,p+r,l*r*1.4),p+=d+h}l+=2}return e.fillRect(.25*this.IOII0,.85*this.O0O10,.5*this.IOII0,.1*this.O0O10),e.fillStyle="#000",e.textAlign="center",e.fillText(t("OK"),.5*this.IOII0,.9*this.O0O10),e.restore()},i.prototype.close=function(){if(!this.closed)return this.closed=!0,this.l000l.push({d:.25,k:.02,f:.3}),this.l000l.push({I0O1O:.5,I1ll0:.5,III1l:-2,opacity:0,d:2,k:.02,f:.3}),setTimeout(function(t){return function(){return t.parent.remove(t)}}(this),4e3)},i.prototype.O1I11=function(){return this.close(),localStorage.setItem("dissmissed_info_"+this.I110I.mode.id,"yes")},i.prototype.IO0O1=function(){},i.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ChatPanel=function(e){function i(e){var s,n,l,a,o,r,h,u,d,I,c;if(this.I110I=e,i.I0Il1.constructor.call(this),this.buttons=[],this.open_button=new OpenChatButton(this.I110I,t("TALK"),"","C",function(t){return function(){return t.toggleChat()}}(this)),this.add(this.open_button,[0,.8,.2,.2]),this.I110I.vocabulary={},null!=this.I110I.mode){for(h=this.I110I.mode.vocabulary,l=0,o=h.length;l<o;l++)n=h[l],this.buttons.push(new ChatButton(this.I110I,t(n.text),n.icon,n.key,function(t){return function(e){return t.typed(e)}}(this))),this.I110I.vocabulary[n.key]={icon:n.icon,text:t(n.text)};0===this.I110I.mode.vocabulary.length&&(this.open_button.visible=!1,this.open_button.enabled=!1)}for(d=1,u=this.buttons,n=a=0,r=u.length;a<r;n=++a)s=u[n],I=n%4,c=Math.floor(n/4),this.add(s,[(I+1)*d/5+.01,.25*c+.01,d/5-.02,.23]);this.shown=!1,this.close_time=0,this.phrase=""}return extend(i,e),i.prototype.gamepadChat=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f;if(t){if(this.close_time=Date.now()+6e3,!this.shown){for(this.lO110=this.O0l1I=[.25,.1,.5,.8],l=.2,this.I110I.is_mobile_app&&(this.lO110=this.O0l1I=[.25,.05,.5,.9],l=.125),O=this.buttons,r=h=0,I=O.length;h<I;r=++h)s=O[r],i=2*Math.PI*r/this.buttons.length,s.O0l1I=s.lO110=[.5+.4*Math.cos(i)-l/2,.5-.4*Math.sin(i)-l/2,l,l],s.l000l.l1lIO({I0O1O:.1,I1ll0:.1,opacity:0}),this.I110I.is_mobile_app?s.l000l.set({I0O1O:1,I1ll0:1}):s.l000l.set({I0O1O:.5,I1ll0:.5});this.OOOI1()}for(n=null,o=360,m=this.buttons,r=u=0,c=m.length;u<c;r=++u)s=m[r],i=360*r/this.buttons.length,a=e-i,a<-180&&(a+=360),a>180&&(a-=360),(a=Math.abs(a))<o&&(n=s,o=a);for(f=this.buttons,r=d=0,p=f.length;d<p;r=++d)s=f[r],s!==n||this.I110I.is_mobile_app?this.I110I.is_mobile_app?(s.setSelected(!1),s.l000l.set({I0O1O:1,I1ll0:1})):(s.setSelected(!1),s.l000l.set({I0O1O:.5,I1ll0:.5})):(s.l000l.set(),s.setSelected(!0),this.gamepad_selected=s)}else this.shown&&this.hide()},i.prototype.gamepadChatClick=function(){if(null!=this.gamepad_selected)return this.gamepad_selected.O1I11()},i.prototype.updateHue=function(t){var e,i,s,n;for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],e.setHue(t);return this.open_button.setHue(t)},i.prototype.toggleChat=function(){return this.shown?this.hide():(this.OOOI1(),this.close_time=Date.now()+6e3)},i.prototype.typed=function(t){if(this.shown||this.OOOI1(),this.close_time=Date.now()+6e3,this.phrase+=t,this.I110I.lIllI.say(this.phrase),this.phrase.length>=4&&this.hide(),Math.random()<.01)return this.I110I.sendGAEvent("chat_evt",t)},i.prototype.OOOI1=function(){var t,e,i,s,n;if(!this.shown){for(this.shown=!0,this.phrase="",this.open_button.hide(),n=this.buttons,e=i=0,s=n.length;i<s;e=++i)t=n[e],t.OOOI1();if(null!=this.I110I.display.screen.O0lll.mode_info)return this.I110I.display.screen.O0lll.mode_info.close()}},i.prototype.hide=function(){var t,e,i,s;if(this.shown)for(this.phrase="",this.shown=!1,this.I110I.using_gamepad||this.I110I.is_mobile_app||this.open_button.OOOI1(),s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.hide()},i.prototype.IO0O1=function(){if(i.I0Il1.IO0O1.call(this),this.shown&&Date.now()>this.close_time&&this.hide(),this.I110I.using_gamepad||this.I110I.is_mobile_app)return this.open_button.visible=!1},i}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ChatButton=function(t){function e(t,i,s,n,l){var a,o,r;for(this.I110I=t,this.name=i,this.icon=s,this.key=n,this.OI001=l,e.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.hue=180,this.force_ratio=.9,this.l000l.l1lIO({III1l:-6}),a=o=0,r=this.key.length-1;o<=r;a=o+=1)this.I110I.addKeyListener(this.key.charCodeAt(a),this);this.shown=!1,this.selected=!1}return extend(e,t),e.prototype.setSelected=function(t){if(t!==this.selected)return this.selected=t,this.l00ll=!0},e.prototype.lOO01=function(t){var i,s;this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.background,e.bubble(t,.02*this.O0O10,.02*this.O0O10,this.IOII0-.04*this.O0O10,.96*this.O0O10,.1*this.O0O10),t.fill(),this.selected&&(t.strokeStyle=this.color,t.lineWidth=.04*this.O0O10,t.stroke()),i=Math.round(this.O0O10/8),t.font=i+"pt Play",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText(this.name,this.IOII0/2,.12*this.O0O10),i=Math.round(this.O0O10/3),t.font=i+"pt SBGlyphs","GG"===this.icon&&(t.font=i+"pt Play"),t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText(this.icon,this.IOII0/2,.45*this.O0O10),this.I110I.is_mobile||this.I110I.is_mobile_app||this.using_gamepad||(i=Math.round(this.O0O10/8),t.font=i+"pt Play",t.fillText(this.key,.8*this.IOII0,.7*this.O0O10),t.strokeStyle=this.color,s=Math.max(2,this.key.length)*this.IOII0/8,t.strokeRect(.8*this.IOII0-s/2,.7*this.O0O10-.1*this.O0O10,s,.2*this.O0O10)),t.restore()},e.bubble=function(t,e,i,s,n,l){return s<2*l&&(l=s/2),n<2*l&&(l=n/2),t.beginPath(),t.moveTo(e+l,i),t.arcTo(e+s,i,e+s,i+n-l,l),t.arcTo(e+s,i+n-l,e,i+n-l,l),t.lineTo(e+s/2+l,i+n-l),t.lineTo(e+s/2,i+n),t.lineTo(e+s/2,i+n-l),t.arcTo(e,i+n-l,e,i,l),t.arcTo(e,i,e+s,i,l),t.closePath()},e.prototype.OOOI1=function(){if(this.shown=!0,this.visible=!0,!this.using_gamepad&&!this.I110I.is_mobile_app)return this.l000l.set({III1l:0,d:1,k:.02,f:.2})},e.prototype.hide=function(){return this.shown=!1,this.using_gamepad||this.I110I.is_mobile_app?this.l000l.set({I0O1O:.1,I1ll0:.1,opacity:0}):this.l000l.push({III1l:-6,d:1,k:.02,f:.2}),setTimeout(function(t){return function(){if(!t.shown)return t.visible=!1}}(this),1e3)},e.prototype.O1I11=function(){if(null!=this.OI001&&this.OI001(this.key),this.I110I.is_mobile_app)return this.l000l.set({I0O1O:1,I1ll0:1})},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.l11Il=function(t,i){return null==t?e.I0Il1.l11Il.call(this,t,i):this.I110I.settings.check("buttons_disabled")?void 0:e.I0Il1.l11Il.call(this,t,i)},e.prototype.keyPressed=function(){if(null!=this.I110I.mode&&0===this.I110I.mode.options.strafe||this.I110I.display.screen.O0lll.chatpanel.shown)return this.l11Il()},e.prototype.keyReleased=function(){if(null!=this.I110I.mode&&0===this.I110I.mode.options.strafe||this.I110I.display.screen.O0lll.chatpanel.shown)return this.I11IO()},e.prototype.IO0O1=function(){if(this.using_gamepad!==this.I110I.using_gamepad)return this.using_gamepad=this.I110I.using_gamepad,this.l00ll=!0},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.OpenChatButton=function(t){function e(t,i,s,n,l){var a,o,r;for(this.I110I=t,this.name=i,this.icon=s,this.key=n,this.OI001=l,e.I0Il1.constructor.call(this,this),this.blending=THREE.AdditiveBlending,this.hue=180,this.force_ratio=1,this.l000l.l1lIO({III1l:-1}),a=o=0,r=this.key.length-1;o<=r;a=o+=1)this.I110I.addKeyListener(this.key.charCodeAt(a),this);this.I110I.addKeyListener(13,this),this.OOOI1()}return extend(e,t),e.prototype.lOO01=function(t){var i,s,n;this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.25)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.background,i=.1*this.O0O10,e.roundRect(t,-i,0,this.IOII0+i,this.O0O10,i),t.fill(),s=Math.round(this.O0O10/8),t.font=s+"pt Play",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText(this.name,this.IOII0/2,.12*this.O0O10),s=Math.round(this.O0O10/3),t.font=s+"pt FontAwesome",t.textBaseline="middle",t.textAlign="center",t.fillStyle=this.color,t.fillText(this.icon,this.IOII0/2,.45*this.O0O10),this.I110I.is_mobile||(s=Math.round(this.O0O10/8),t.font=s+"pt Play",t.fillText(this.key,.5*this.IOII0,.8*this.O0O10),t.strokeStyle=this.color,n=Math.max(2,this.key.length)*this.IOII0/8,t.strokeRect(.5*this.IOII0-n/2,.8*this.O0O10-.1*this.O0O10,n,.2*this.O0O10)),t.restore()},e.roundRect=function(t,e,i,s,n,l){return s<2*l&&(l=s/2),n<2*l&&(l=n/2),t.beginPath(),t.moveTo(e+l,i),t.arcTo(e+s,i,e+s,i+n,l),t.arcTo(e+s,i+n,e,i+n,l),t.arcTo(e,i+n,e,i,l),t.arcTo(e,i,e+s,i,l),t.closePath()},e.prototype.OOOI1=function(){return this.l000l.set({III1l:0,d:1,k:.02,f:.2})},e.prototype.hide=function(){return this.l000l.set({III1l:-1,d:1,k:.02,f:.2})},e.prototype.O1I11=function(){if(null!=this.OI001)return this.OI001()},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.l11Il=function(t,i){return null==t?e.I0Il1.l11Il.call(this,t,i):this.I110I.settings.check("buttons_disabled")?void 0:e.I0Il1.l11Il.call(this,t,i)},e.prototype.keyPressed=function(){return this.enabled=!0,this.l11Il()},e.prototype.keyReleased=function(){return this.I11IO(),this.enabled=!1},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.WeaponsBar=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.selected=0,this.hue=0,this.blending=THREE.AdditiveBlending,this.using_gamepad=!1,this.store_allowed=!1,this.ship_level=1,this.setEnabled(!1),this.cooling=[!1,!1,!1,!1,!1,!1]}return extend(e,t),e.prototype.setEnabled=function(t){if(t!==this.enabled)return this.enabled=t,this.enabled?this.l000l.set({III1l:0}):this.l000l.set({III1l:-1.1})},e.prototype.setHue=function(t){return this.hue=t,this.repaint()},e.prototype.getNumSlots=function(){return Math.min(6,this.I110I.IOO1I.IO010.type.level)},e.prototype.lOO01=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O;if(this.I110I.weapons){for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,40%,.5)",this.color="hsla("+this.hue+",50%,80%,1)",r=Math.min(6,this.ship_level),l=this.O0O10/8,i=l/4,O=.7*this.IOII0,t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.medium,t.beginPath(),t.moveTo(0,0),t.lineTo(O-i,0),t.lineTo(O,i),t.lineTo(O,l*(r+2)-i),t.lineTo(O-i,l*(r+2)),t.lineTo(0,l*(r+2)),t.closePath(),t.fill(),this.signature=this.I110I.weapons.signature,l=this.O0O10/8,o=.03*this.IOII0,s=n=0,h=r-1;n<=h;s=n+=1)p=this.I110I.weapons.weapons[s],null!=p?(t.fillStyle="rgba(0,0,0,.5)",t.fillRect(o,(s+1)*l,O-2*o,l-o),d=Math.min(O-2*o,l-2*o),e=p.type.glyph,t.fillStyle="#FFF",t.font=Math.round(.7*d)+"pt SBGlyphs",t.textAlign="center",t.textBaseline="middle",p.next_shot<=this.I110I.IOO1I.ll0lO.ll01O?(t.globalAlpha=.8,t.fillText(e,O/2,(s+1.5)*l),t.globalAlpha=1,this.cooling[s]=!1):(t.globalAlpha=.3,t.fillText(e,O/2,(s+1.5)*l),t.globalAlpha=1,this.cooling[s]=!0),p.type.llOIl?(d=Math.floor(d/5),t.fillStyle=this.color,t.textAlign="center",t.textBaseline="middle",t.font=d+"pt Play",t.fillText(p.ammo,.85*O,(s+1.8)*l)):(t.fillStyle=this.color,u=p.ammo/255,t.fillRect(o,(s+1.9)*l,(O-2*o)*u,.1*l-o))):(t.fillStyle="rgba(0,0,0,.2)",t.fillRect(o,(s+1)*l,O-2*o,l-o));this.store_allowed&&(a=2*o,c=Math.sqrt(a),t.fillStyle=this.color,t.beginPath(),t.moveTo(a,l*(r+1)+o),t.lineTo(O-a,l*(r+1)+o),t.lineTo(O-a,l*(r+1.75)-c),t.lineTo(O-c-i,l*(r+2)-a),t.lineTo(a,l*(r+2)-a),t.closePath(),t.fill(),d=Math.floor(.12*this.IOII0),t.font=d+"pt Play",t.textAlign="center",t.textBaseline="middle",t.fillStyle="rgba(0,0,0,.8)",t.font=d+"pt FontAwesome",t.fillText("",.2*O,l*(r+1.5)),this.using_gamepad?Gamepad.drawButton("X",t,.5*O,l*(r+1.5),.12*this.IOII0,this.hue):(I=.1*this.IOII0,d=Math.floor(.12*this.IOII0),t.font=d+"pt Play",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000",t.fillText("W",.5*O,l*(r+1.5)),t.strokeStyle="#000",t.strokeRect(.5*O-I,l*(r+1.5)-I,2*I,2*I))),this.countSelectableWeapons()>=1&&(I=.1*this.IOII0,d=Math.floor(.12*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("B",t,.5*O,.5*l,d,this.hue,!0):(t.font=d+"pt Play",t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.color,t.fillRect(.5*O-1.25*I,.5*l-I,2*I*1.25,2*I),t.fillStyle="rgba(0,0,0,.8)",t.fillText("Alt",.5*O,.5*l)),t.fillStyle=this.color,t.font=d+"pt FontAwesome",t.fillText("",.2*O,.5*l),this.selected>=0&&(t.fillStyle=this.color,t.beginPath(),t.moveTo(.65*this.IOII0,l*(this.selected+1)),t.lineTo(.9*this.IOII0,l*(this.selected+1)),t.lineTo(this.IOII0,l*(this.selected+1)+I),t.lineTo(this.IOII0,l*(this.selected+2)-I),t.lineTo(.9*this.IOII0,l*(this.selected+2)),t.lineTo(.65*this.IOII0,l*(this.selected+2)),t.lineTo(.7*this.IOII0,l*(this.selected+2)-I),t.lineTo(.7*this.IOII0,l*(this.selected+1.5)+I),t.lineTo(.6*this.IOII0,l*(this.selected+1.5)),t.lineTo(.7*this.IOII0,l*(this.selected+1.5)-I),t.lineTo(.7*this.IOII0,l*(this.selected+1)+I),t.closePath(),t.fill()),this.countSelectableWeapons()>1&&(this.using_gamepad?Gamepad.drawButton("Y",t,.85*this.IOII0,l*(this.selected+1.5),.12*this.IOII0,this.hue):(d=Math.floor(.12*this.IOII0),t.font=d+"pt Play",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000",t.fillText("⇧",.85*this.IOII0,l*(this.selected+1.5)+.1*I),t.strokeStyle="#000",t.strokeRect(.75*this.IOII0,l*(this.selected+1.5)-I,2*I,2*I)),t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000",t.font=d+"pt FontAwesome",t.fillText("",.85*this.IOII0,l*(this.selected+1.2)),t.fillText("",.85*this.IOII0,l*(this.selected+1.8)))),t.restore()}},e.prototype.countSelectableWeapons=function(){var t,e,i,s,n;for(s=0,i=this.I110I.weapons.weapons,t=0,e=i.length;t<e;t++)n=i[t],n.type.llOIl&&s++;return s},e.prototype.toggleStore=function(){return this.store_allowed?this.I110I.display.screen.O0lll.toggleWeaponStore():null!=this.I110I.display.screen.O0lll.weapon_store&&this.I110I.display.screen.O0lll.weapon_store.shown?this.I110I.display.screen.O0lll.hideWeaponStore():void 0},e.prototype.l11Il=function(t,e){if(!this.I110I.settings.check("buttons_disabled"))if(-1===(e=Math.floor((e-this.OO000)/(this.O0O10/8))-1))this.llOIl();else if(e===this.getNumSlots())this.toggleStore();else if(e>=0&&e<this.I110I.weapons.weapons.length&&this.I110I.weapons.weapons[e].type.llOIl&&e!==this.selected)return this.selected=e,this.repaint(),!0;return!0},e.prototype.O101O=function(t,e){},e.prototype.repaint=function(){return this.l00ll=!0},e.prototype.IO0O1=function(){var t,i,s,n,l,a,o,r,h,u,d,I;for(e.I0Il1.IO0O1.call(this),this.signature!==this.I110I.weapons.signature&&(this.signature=this.I110I.weapons.signature,this.repaint(),this.fixSelection()),this.ship_level!==this.I110I.IOO1I.IO010.type.level&&(this.ship_level=this.I110I.IOO1I.IO010.type.level,this.repaint()),this.I110I.using_gamepad!==this.using_gamepad&&(this.using_gamepad=this.I110I.using_gamepad,this.repaint()),h=this.I110I.weapons.weapons,s=n=0,a=h.length;n<a;s=++n)I=h[s],this.cooling[s]&&I.next_shot<=this.I110I.IOO1I.ll0lO.ll01O&&(this.cooling[s]=!1,this.repaint(),this.I110I.OlIl1.beep(2,.25));for(d=!this.I110I.mode.restricted_weapons_store,d!==this.store_allowed&&(this.store_allowed=d,this.repaint()),r=1e7,u=WEAPON_TYPES.types,l=0,o=u.length;l<o;l++)I=u[l],r=Math.min(I.price,r);t=d,i=t||this.I110I.weapons.weapons.length>0,this.setEnabled(i)},e.prototype.shiftSelection=function(){var t,e;for(t=0,e=this.I110I.weapons.weapons.length-1;t<=e;t+=1)if(this.selected=(this.selected+1)%this.I110I.weapons.weapons.length,this.I110I.weapons.weapons[this.selected].type.llOIl)return void this.repaint();-1!==this.selected&&(this.selected=-1,this.repaint())},e.prototype.selectUp=function(){var t,e;for(t=0,e=this.I110I.weapons.weapons.length-1;t<=e;t+=1)if(this.selected=(this.selected-1+this.I110I.weapons.weapons.length)%this.I110I.weapons.weapons.length,this.I110I.weapons.weapons[this.selected].type.llOIl)return void this.repaint();-1!==this.selected&&(this.selected=-1,this.repaint())},e.prototype.selectDown=function(){return this.shiftSelection()},e.prototype.fixSelection=function(){return this.selected<0?this.shiftSelection():this.selected>=this.I110I.weapons.weapons.length?(this.selected=-1,this.shiftSelection()):this.I110I.weapons.weapons[this.selected].type.llOIl?void 0:this.shiftSelection()},e.prototype.llOIl=function(){this.selected>=0&&this.selected<this.I110I.weapons.weapons.length&&!this.I110I.IOO1I.IO010.status.guided&&this.I110I.weapons.weapons[this.selected].type.llOIl&&this.I110I.lIllI.shootWeapon(this.selected,this.I110I.weapons.weapons[this.selected].code)},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}
for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.WeaponStore=function(t){function e(t){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;for(this.I110I=t,e.I0Il1.constructor.call(this),this.levelmod=10,this.hue=this.I110I.display.screen.O0lll.hue,this.background="hsla("+this.hue+",50%,20%,.75)",this.medium="hsla("+this.hue+",50%,40%,.5)",this.color="hsla("+this.hue+",50%,80%,1)",c=.01,I=16*c/9,this.title=new WeaponStoreTitle(this),this.add(this.title,[0,0,1,.075]),this.exit_button=new WeaponStoreExitButton(this),this.add(this.exit_button,[.8,.9,.2,.1]),this.ship_view=new WeaponStoreShipView(this),this.add(this.ship_view,[c,.075+I+.15+I,.3-2*c,.5-(.075+I+.15+I)]),this.transfer_button=new TransferButton(this),this.add(this.transfer_button,[c,.075+I,.3-2*c,.15]),m=.5,O=.08,this.I110I.mode.options.healing_enabled&&(this.healing_button=new HealingButton(this),this.add(this.healing_button,[c,.5,.3-2*c,.1]),m=.6,O=.06),s=n=0;n<=5;s=n+=1)this.add(new RemoveWeaponButton(this,s),[c,m+I+s*O,.3-2*c,O-I/2]);for(f=0,g=0,this.buy_buttons=[],u=WEAPON_TYPES.types,l=0,o=u.length;l<o;l++)p=u[l],null!=p.price&&p.price>0&&this.buy_buttons.push(new BuyWeaponButton(this,p));for(this.buy_buttons.sort(function(t,e){return t.weapon.price-e.weapon.price}),d=this.buy_buttons,a=0,r=d.length;a<r;a++)i=d[a],.01,h=I,this.add(i,[.3+c+f/4*(.7-c),.075+I+g/3*.7,.175-c,.7/3-h]),(f+=1)>=4&&(f=0,g+=1);this.background_component=new WeaponStoreBackground(this),this.background_component.levelmod=1,this.add(this.background_component,[0,0,1,1]),this.I110I.mode.restricted_weapons_store&&(this.countdown=new StoreCountDown(this),this.add(this.countdown,[.7,.9,.1,.1])),this.shown=!1,this.visible=!1,this.block_ship_control=!0}return extend(e,t),e.prototype.OOOI1=function(){var t,e,i,s;if(!this.shown)for(this.shown=!0,this.I110I.IOO1I.control.setNavigationListener(this),this.visible=!0,this.transfer_button.transferring=!1,null!=this.countdown&&this.countdown.OI11I(),this.l000l.l1lIO({I0O1O:.5,I1ll0:.5,III1l:.5,I0O10:.5}),this.l000l.set({I0O1O:1}),s=this.children,e=0,i=s.length;e<i;e++)t=s[e],t.enabled=!0,t.l000l.l1lIO({opacity:0,I0O1O:.5,I1ll0:.5}),t.l000l.set({opacity:1})},e.prototype.hide=function(){var t,e,i,s;if(this.shown){for(this.shown=!1,this.I110I.is_mobile_app&&null!=this.I110I.display.screen.O0lll.cursor&&(this.I110I.display.screen.O0lll.cursor.visible=!0),this.I110I.IOO1I.control.setNavigationListener(null),this.I110I.mode.undock(),this.l000l.set({I0O1O:.5,I1ll0:.5,III1l:.5,I0O10:.5}),s=this.children,e=0,i=s.length;e<i;e++)t=s[e],t.enabled=!1,t.l000l.set({opacity:0,I0O1O:.5,I1ll0:.5});if(setTimeout(function(t){return function(){if(!t.shown)return t.visible=!1}}(this),1e3),this.transfer_button.transferring)return this.transfer_button.transferring=!1,this.setTransferring(!1)}},e.prototype.IO0O1=function(){return e.I0Il1.IO0O1.call(this)},e.prototype.toggle=function(){return this.shown?this.hide():this.OOOI1()},e.prototype.buyWeapon=function(t){this.I110I.lIllI.buyWeapon(t.code)},e.prototype.removeWeapon=function(t){if(null!=this.I110I.weapons.weapons[t])return this.I110I.lIllI.removeWeapon(t)},e.prototype.setTransferring=function(t){return t?this.I110I.IOO1I.IO010.status.OO1I0>0?this.I110I.lIllI.startTransfer():void 0:this.I110I.lIllI.endTransfer()},e.prototype.gamepadNavigation=function(t){switch(t){case"cancel":case"interrupted":case"menu":return this.hide(),!0}return!1},e}(Il0ll),WeaponStorePlaceholder=function(t){function e(t){this.store=t,e.I0Il1.constructor.call(this)}return extend(e,t),e.prototype.lOO01=function(t){return t.save(),t.translate(this.px,this.OO000),t.fillStyle="rgba(255,255,255,.5)",t.fillRect(0,0,this.IOII0,this.O0O10),t.restore()},e}(IIIlO),WeaponStoreBackground=function(t){function e(t){this.store=t,e.I0Il1.constructor.call(this)}return extend(e,t),e.prototype.lOO01=function(t){var e,i;return t.save(),t.translate(this.px,this.OO000),e=t.createLinearGradient(0,0,this.IOII0,this.O0O10),e.addColorStop(0,this.store.background),e.addColorStop(1,"#000"),t.fillStyle=e,i=.025*this.O0O10,t.beginPath(),t.moveTo(i,0),t.lineTo(this.IOII0,0),t.lineTo(this.IOII0,this.O0O10-i),t.lineTo(this.IOII0-i,this.O0O10),t.lineTo(0,this.O0O10),t.lineTo(0,i),t.closePath(),t.fill(),e=t.createLinearGradient(0,0,this.IOII0,this.O0O10),e.addColorStop(0,this.store.medium),e.addColorStop(1,this.store.background),t.fillStyle=e,t.beginPath(),t.moveTo(.3*this.IOII0,0),t.lineTo(this.IOII0,0),t.lineTo(this.IOII0,this.O0O10-i),t.lineTo(this.IOII0-i,this.O0O10),t.lineTo(.3*this.IOII0,this.O0O10),t.lineTo(.3*this.IOII0,i),t.closePath(),t.fill(),t.restore()},e}(IIIlO),WeaponStoreTitle=function(t){function e(t){this.store=t,e.I0Il1.constructor.call(this),this.credits=0}return extend(e,t),e.prototype.lOO01=function(t){var e;return t.save(),t.translate(this.px,this.OO000),t.fillStyle=this.store.color,e=this.O0O10/4,t.beginPath(),t.moveTo(e,0),t.lineTo(this.IOII0,0),t.lineTo(this.IOII0,this.O0O10),t.lineTo(0,this.O0O10),t.lineTo(0,e),t.closePath(),t.fill(),t.font=Math.round(this.O0O10/3)+"pt Play",t.textAlign="left",t.textBaseline="middle",t.fillStyle="rgba(0,0,0,.8)",t.fillText(this.store.I110I.mode.getWeaponStoreName(),2*e,this.O0O10/2),t.font=Math.round(this.O0O10/3)+"pt FontAwesome",t.textAlign="right",t.fillText("",this.IOII0-2*e,this.O0O10/2),t.font=Math.round(this.O0O10/3)+"pt Play",t.fillText(this.credits,this.IOII0-2*e-2*this.O0O10/3,this.O0O10/2),t.restore()},e.prototype.IO0O1=function(){if(this.credits!==this.store.I110I.weapons.credits)return this.credits=this.store.I110I.weapons.credits,this.l00ll=!0},e}(IIIlO),WeaponStoreExitButton=function(e){function i(t){this.store=t,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.store.hide(),!1}}(this)})}return extend(i,e),i.prototype.lOO01=function(e){var i;return e.save(),e.translate(this.px,this.OO000),e.fillStyle=this.store.color,i=this.O0O10/4,e.beginPath(),e.moveTo(i,0),e.lineTo(this.IOII0,0),e.lineTo(this.IOII0,this.O0O10-i),e.lineTo(this.IOII0-i,this.O0O10),e.lineTo(0,this.O0O10),e.lineTo(0,i),e.closePath(),e.fill(),e.font=Math.round(this.O0O10/4)+"pt Play",e.textAlign="center",e.textBaseline="middle",e.fillStyle="rgba(0,0,0,.8)",e.fillText(t("EXIT"),this.IOII0/2,this.O0O10/2),e.restore()},i}(IO0Il),BuyWeaponButton=function(e){function i(t,e){this.store=t,this.weapon=e,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.store.buyWeapon(t.weapon),!0}}(this)}),this.can_buy=!1}return extend(i,e),i.prototype.lOO01=function(e){var i,s,n;return i=this.can_buy?1:.25,e.save(),e.globalAlpha=i,e.translate(this.px,this.OO000),e.clearRect(0,0,this.IOII0,this.O0O10),e.fillStyle="rgba(0,0,0,.5)",e.fillRect(0,0,this.IOII0,this.O0O10),n=.7*Math.min(this.IOII0,this.O0O10),e.globalAlpha=.8*i,s=this.weapon.glyph,e.fillStyle="#FFF",e.font=Math.round(.7*n)+"pt SBGlyphs",e.textAlign="center",e.textBaseline="middle",e.fillText(s,this.IOII0/2,this.O0O10/2),e.globalAlpha=i,e.fillStyle=this.store.color,e.font=Math.round(this.O0O10/10)+"pt Play",e.textAlign="center",e.textBaseline="middle",e.fillText(t(this.weapon.name),this.IOII0/2,.1*this.O0O10),this.weapon.llOIl&&e.fillText("x"+this.weapon.ammo,.15*this.IOII0,.9*this.O0O10),e.beginPath(),e.moveTo(.55*this.IOII0,this.O0O10),e.lineTo(.6*this.IOII0,.8*this.O0O10),e.lineTo(this.IOII0,.8*this.O0O10),e.lineTo(this.IOII0,this.O0O10),e.closePath(),e.fill(),e.fillStyle="#000",e.fillText(this.weapon.price,.8*this.IOII0,.9*this.O0O10),e.restore()},i.prototype.IO0O1=function(){var t;if(t=this.store.I110I.weapons.credits>=this.weapon.price&&this.store.I110I.weapons.weapons.length<this.store.I110I.IOO1I.IO010.type.level,this.can_buy!==t)return this.can_buy=t,this.l00ll=!0,this.enabled=this.can_buy},i}(IO0Il),TransferButton=function(t){function e(t){this.store=t,e.I0Il1.constructor.call(this,{pressed:function(t){return function(){if(t.store.shown)return t.transferring=!t.transferring,t.store.setTransferring(t.transferring),!0}}(this)}),this.transferring=!1,this.next_up=0,this.credits=0,this.OO1I0=0}return extend(e,t),e.prototype.lOO01=function(t){var e,i;return t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle="rgba(0,0,0,.5)",t.fillRect(0,0,this.IOII0,this.O0O10),t.globalAlpha=this.enabled?1:.25,e=Math.round(this.O0O10/4),i=Math.round(this.O0O10/8),t.fillStyle="rgba(255,255,255,.9)",t.font=e+"pt FontAwesome",t.textAlign="center",t.textBaseline="middle",t.fillText("",.25*this.IOII0,this.O0O10/2),t.fillText("",.5*this.IOII0,this.O0O10/2),t.fillText("",.75*this.IOII0,this.O0O10/2),t.font=i+"pt Play",t.fillText(this.OO1I0,.25*this.IOII0,.8*this.O0O10),t.fillText(this.credits,.75*this.IOII0,.8*this.O0O10),t.restore()},e.prototype.IO0O1=function(){if(e.I0Il1.IO0O1.call(this),this.credits===this.store.I110I.weapons.credits&&this.OO1I0===this.store.I110I.IOO1I.IO010.status.OO1I0||(this.credits=this.store.I110I.weapons.credits,this.OO1I0=this.store.I110I.IOO1I.IO010.status.OO1I0,this.l00ll=!0),this.enabled=this.OO1I0>0,this.transferring&&this.OO1I0<=0&&(this.transferring=!1),this.enabled&&!this.transferring&&Date.now()>this.next_up&&!this.l000l.isRunning())return this.next_up=Date.now()+500,this.l000l.set({I0O1O:1.025,I1ll0:1.05,d:.15,k:.1,f:.3}),this.l000l.push({III1l:0,d:.35})},e}(IO0Il),StoreCountDown=function(t){function e(t){this.store=t,e.I0Il1.constructor.call(this),this.IIOO0=60,this.end=Date.now()+6e4}return extend(e,t),e.prototype.OI11I=function(){return this.end=Date.now()+6e4},e.prototype.lOO01=function(t){return t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.store.color,t.font=Math.round(this.O0O10/2)+"pt Play",t.textAlign="center",t.textBaseline="middle",t.fillText(this.IIOO0,this.IOII0/2,this.O0O10/2),t.restore()},e.prototype.IO0O1=function(){var t;if(e.I0Il1.IO0O1.call(this),(t=Math.round(Math.max(0,Math.min(60,(this.end-Date.now())/1e3))))!==this.IIOO0)return this.IIOO0=t,this.l00ll=!0,this.l000l.set({I0O1O:1.05,I1ll0:1.1,d:.15,k:.1,f:.3}),this.l000l.push({III1l:0,d:.85})},e}(IIIlO),WeaponStoreShipView=function(t){function e(t,i){this.store=t,this.weapon=i,e.I0Il1.constructor.call(this),this.type=101}return extend(e,t),e.prototype.lOO01=function(t){var e,i,s;return s=new l0Il0(this.store.I110I.mode.II1l1.ships_by_code[this.type],0),e=s.I0II1(256),t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle="rgba(0,0,0,.5)",t.fillRect(0,0,this.IOII0,this.O0O10),i=Math.min(this.IOII0,this.O0O10),t.drawImage(e,this.IOII0/2-i/2,this.O0O10/2-i/2,i,i),t.restore()},e.prototype.IO0O1=function(){if(this.type!==this.store.I110I.IOO1I.IO010.type.code)return this.type=this.store.I110I.IOO1I.IO010.type.code,this.l00ll=!0},e}(IIIlO),RemoveWeaponButton=function(t){function e(t,i){this.store=t,this.weapon_index=i,e.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.store.removeWeapon(t.weapon_index),!0}}(this)}),this.I110I=this.store.I110I,this.can_delete=!1,this.weapon_code=0,this.weapon_ammo=0}return extend(e,t),e.prototype.lOO01=function(t){var e,i,s;return t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),s=this.I110I.weapons.weapons[this.weapon_index],this.can_delete&&null!=s&&(t.fillStyle="rgba(0,0,0,.5)",t.fillRect(0,0,this.IOII0,this.O0O10),i=this.O0O10,t.globalAlpha=.7,e=s.type.glyph,t.font=Math.round(.7*i)+"pt SBGlyphs",t.fillStyle="#FFF",t.textAlign="center",t.textBaseline="middle",t.fillText(e,this.O0O10/2,this.O0O10/2),t.globalAlpha=1,t.fillStyle=this.store.color,t.font=Math.round(this.O0O10/2)+"pt FontAwesome",t.textAlign="center",t.textBaseline="middle",t.fillText("",this.IOII0-this.O0O10/2,this.O0O10/2),s.type.llOIl&&(t.font=Math.round(this.O0O10/3)+"pt Play",t.textAlign="left",t.textBaseline="middle",t.fillText("x"+s.ammo,2*this.O0O10,this.O0O10/2))),t.restore()},e.prototype.IO0O1=function(){var t,e;if(e=this.I110I.weapons.weapons[this.weapon_index],t=null!=e,t!==this.can_delete&&(this.can_delete=t,this.l00ll=!0),null!=e&&(e.ammo,this.weapon_code!==e.code||this.weapon_ammo!==e.ammo))return this.weapon_code=e.code,this.weapon_ammo=e.ammo,this.l00ll=!0},e}(IO0Il),HealingButton=function(e){function i(t){this.store=t,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.store.I110I.lIllI.toggleHealing(),!0}}(this)}),this.healing=!1,this.next_up=0,this.credits=0,this.OO1I0=0}return extend(i,e),i.prototype.lOO01=function(e){var i,s;return e.save(),e.translate(this.px,this.OO000),e.clearRect(0,0,this.IOII0,this.O0O10),e.fillStyle="rgba(0,0,0,.25)",e.fillRect(0,0,this.IOII0,this.O0O10),i=Math.round(this.O0O10/2),s=Math.round(this.O0O10/6),e.font=i+"pt FontAwesome",e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.healing?"rgba(255,255,255,1)":"rgba(255,255,255,.2)",e.fillText("",this.IOII0-i,.6*this.O0O10),e.fillStyle=this.healing?"rgba(255,255,255,.2)":"rgba(255,255,255,1)",e.fillText("",i,.6*this.O0O10),e.font=s+"pt Play",e.fillStyle="rgba(255,255,255,.8)",e.fillText(t("Lasers Operation").toUpperCase(),.5*this.IOII0,.15*this.O0O10),e.font=this.healing?Math.round(1.3*s)+"pt Play":Math.round(1.5*s)+"pt Play",e.fillStyle=this.healing?"rgba(255,255,255,.2)":"rgba(255,255,255,1)",e.fillText(t("Offensive").toUpperCase(),.5*this.IOII0,.5*this.O0O10),e.fillStyle=this.healing?"rgba(255,255,255,1)":"rgba(255,255,255,.2)",e.font=this.healing?Math.round(1.5*s)+"pt Play":Math.round(1.3*s)+"pt Play",e.fillText(t("Healing").toUpperCase(),.5*this.IOII0,.8*this.O0O10),e.restore()},i.prototype.IO0O1=function(){if(i.I0Il1.IO0O1.call(this),this.healing!==this.store.I110I.IOO1I.IO010.status.healing)return this.healing=this.store.I110I.IOO1I.IO010.status.healing,this.l00ll=!0},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.GameMenu=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this),this.background=new GameMenuBackground(this.I110I),this.add(this.background,[0,0,1,1]),this.hue=0,this.visible=!1,this.shown=!1,this.ship_tree=new ShipTree(this.I110I),this.add(this.ship_tree,[.025,.65,.95,.34]),this.ship_tree.visible="deathmatch"!==this.I110I.mode.id,this.game_stats=new GameStats(this.I110I),this.add(this.game_stats,[0,.4,1,.1]),this.quit_menu_shown=!1}return extend(i,e),i.prototype.createMainMenu=function(){var e,i,s,n;if(null!=this.buttons)for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],this.remove(e);return this.buttons=[],this.button_index=0,this.I110I.is_mobile_app?(this.resume=new MobileMenuButton(this.I110I,this,t("RESUME"),"²","resume"),this.settings=new MobileMenuButton(this.I110I,this,t("SETTINGS"),"x","settings"),this.quit=new MobileMenuButton(this.I110I,this,t("Quit to Menu").toUpperCase(),"³","quit"),this.addButton(this.settings),this.addButton(this.quit)):this.I110I.is_app?(this.resume=new MenuButton(this.I110I,this,t("RESUME"),"resume"),this.roomlink=new MenuButton(this.I110I,this,t("Copy Room Link").toUpperCase(),"roomlink"),this.settings=new MenuButton(this.I110I,this,t("SETTINGS"),"settings"),this.quit=new MenuButton(this.I110I,this,t("QUIT"),"quit"),this.addButton(this.resume),this.addButton(this.roomlink),this.addButton(this.settings),this.addButton(this.quit)):(this.resume=new MenuButton(this.I110I,this,t("RESUME"),"resume"),this.lIlO1=new MenuButton(this.I110I,this,t("FULLSCREEN"),"lIlO1"),this.roomlink=new MenuButton(this.I110I,this,t("Copy Room Link").toUpperCase(),"roomlink"),this.addButton(this.resume),this.addButton(this.lIlO1),this.addButton(this.roomlink)),this.selected_index=0,this.updateSelection()},i.prototype.createQuitMenu=function(){var e,i,s,n;if(null!=this.buttons)for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],this.remove(e);return this.buttons=[],this.button_index=0,this.quit_cancel=new MenuButton(this.I110I,this,t("Cancel").toUpperCase(),"quit_cancel"),this.quit_to_menu=new MenuButton(this.I110I,this,t("Quit to Menu").toUpperCase(),"quit_to_menu"),this.quit_game=new MenuButton(this.I110I,this,t("Quit Game").toUpperCase(),"quit_game"),this.addButton(this.quit_cancel),this.addButton(this.quit_to_menu),this.addButton(this.quit_game),this.selected_index=0,this.updateSelection(),this.quit_menu_shown=!0},i.prototype.addButton=function(t){var e;return t.setHue(this.hue),this.buttons.push(t),e=this.I110I.is_mobile_app?.16:.06,this.add(t,[.05,.05+this.button_index++*e,.9,e-.01]),t.l000l.l1lIO({opacity:0,I0O1O:.8,I1ll0:.8}),t.l00ll=!0,t.l000l.set({d:1})},i.prototype.updateSelection=function(){var t,e,i,s,n;for(n=this.buttons,e=i=0,s=n.length;i<s;e=++i)t=n[e],t.O1I1O=e===this.selected_index&&(this.I110I.using_gamepad||!this.I110I.is_mobile_app)},i.prototype.setHue=function(t){return this.hue=t,this.background.setHue(this.hue)},i.prototype.OOOI1=function(){if(!this.shown&&(this.createMainMenu(),this.selected_index=0,this.updateSelection(),this.shown=!0,this.visible=!0,this.l000l.l1lIO({III1l:1.1}),this.l000l.set({III1l:0}),null!=this.I110I.IOO1I.control.gamepad))return this.I110I.IOO1I.control.setNavigationListener(this)},i.prototype.hide=function(){if(this.shown&&(this.shown=!1,this.l000l.set({III1l:1.1}),this.l000l.IOI0I(function(t){return function(){if(!t.shown)return t.visible=!1}}(this)),null!=this.I110I.IOO1I.control.gamepad))return this.I110I.IOO1I.control.setNavigationListener(null)},i.prototype.O1I11=function(e){switch(e){case"quit":return this.I110I.is_mobile_app?(window.onbeforeunload=null,document.location.hash="",document.location.reload()):(this.quit_menu_shown=!0,this.createQuitMenu());case"quit_to_menu":return window.onbeforeunload=null,document.location.hash="",document.location.reload();case"quit_game":if(null!=window.parent)return window.parent.postMessage("quit","*");break;case"quit_cancel":return this.quit_menu_shown=!1,this.createMainMenu();case"roomlink":return this.roomlink.llOl1(t("Copied!").toUpperCase()),this.I110I.O1IO0.copyRoomLink(),setTimeout(function(t){return function(){var e;return e=null!=t.I110I.private_address?"starblast.io#"+t.I110I.private_address:"starblast.io#"+t.I110I.systemid,t.roomlink.llOl1(e)}}(this),1e3);case"settings":return this.I110I.O1IO0.showSettings(),this.settings_shown=!0,this.I110I.O1IO0.modal_close_callback=function(t){return function(){return t.settings_shown=!1}}(this);case"resume":return this.I110I.display.screen.O0lll.toggleOptions();case"lIlO1":return this.I110I.O1IO0.toggleFullScreen(),this.I110I.display.screen.O0lll.toggleOptions()}},i.prototype.gamepadNavigation=function(t){if(this.settings_shown)return this.I110I.O1IO0.gamepadNavigation(t),!0;if("menu"===t)return this.I110I.display.screen.O0lll.toggleOptions(),!0;if(this.shown)switch(t){case"up":return this.selected_index=(this.selected_index-1+this.buttons.length)%this.buttons.length,this.updateSelection(),!0;case"OlOI1":return this.selected_index=(this.selected_index+1)%this.buttons.length,this.updateSelection(),!0;case"cancel":return this.quit_menu_shown?(this.createMainMenu(),this.quit_menu_shown=!1):this.I110I.display.screen.O0lll.toggleOptions(),!0;case"ok":return this.selected_index<this.buttons.length&&this.buttons[this.selected_index].O1I11(),!0}return!1},i}(Il0ll),this.GameMenuBackground=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this),this.hue=0,this.blending=THREE.AdditiveBlending}return extend(i,e),i.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.lOO01=function(e){var i;return this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),i=Math.round(20*this.IOII0/512),e.font=i+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.medium,e.fillRect(0,.1*this.IOII0,this.IOII0,.02*this.IOII0),e.fillStyle=this.background,e.fillRect(0,.12*this.IOII0,this.IOII0,this.O0O10-.12*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Options"),.05*this.IOII0,.05*this.IOII0),e.restore()},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.GameStats=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.credits=new GameStat("9","CREDITS",0),this.add(this.credits,[.05,0,.9,.25]),this.credits.visible=!1,this.kills=new GameStat("[","KILLS",0),this.add(this.kills,[.05,.25,.9,.25]),this.deaths=new GameStat("I","DEATHS",0),this.add(this.deaths,[.05,.5,.9,.25]),this.contribution=new GameStat("D","CONTRIBUTION",0),this.add(this.contribution,[.05,.75,.9,.25]),this.contribution.visible=!1}return extend(e,t),e.prototype.IO0O1=function(){if(e.I0Il1.IO0O1.call(this),this.credits.setValue(this.I110I.weapons.credits),this.kills.setValue(this.I110I.IO010.status.kills),this.deaths.setValue(this.I110I.IO010.status.deaths),this.contribution.setValue(this.I110I.IO010.status.contribution),this.I110I.IO010.status.contribution>0&&(this.contribution.visible=!0),this.I110I.weapons.credits>0)return this.credits.visible=!0},e}(Il0ll),this.GameStat=function(t){function e(t,i,s){this.icon=t,this.name=i,this.value=s,e.I0Il1.constructor.call(this)}return extend(e,t),e.prototype.setValue=function(t){if(t!==this.value)return this.value=t,this.l00ll=!0},e.prototype.lOO01=function(t){return this.color="rgba(255,255,255,.7)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.color,t.textAlign="left",t.textBaseline="middle",t.font=Math.round(this.O0O10/2)+"pt SBGlyphs",t.fillText(this.icon,0,this.O0O10/2),t.font=Math.round(this.O0O10/2)+"pt Play",t.fillText(this.name,this.O0O10,this.O0O10/2),t.textAlign="right",t.fillText(this.value,this.IOII0,this.O0O10/2),t.restore()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.MenuButton=function(t){function e(t,i,s,n){this.I110I=t,this.menu=i,this.name=s,this.id=n,e.I0Il1.constructor.call(this,this),this.hue=0,this.blending=THREE.AdditiveBlending,this.O1I1O=!1,this.blinkon=!1}return extend(e,t),e.prototype.llOl1=function(t){return this.name=t,this.l00ll=!0},e.prototype.lOO01=function(t){var e;for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.05)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.medium,t.fillRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.color,t.textAlign="center",t.textBaseline="middle",e=Math.round(this.O0O10/3);;){if(t.font=e+"pt Play",t.measureText(this.name).width<.8*this.IOII0)break;e-=1}return t.fillText(this.name,this.IOII0/2,this.O0O10/2),this.blinkon&&(t.font=e+"pt FontAwesome",t.fillText("",this.O0O10/2,this.O0O10/2)),t.restore()},e.prototype.O1I11=function(){return this.menu.O1I11(this.id)},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.IO0O1=function(){var t;if(e.I0Il1.IO0O1.call(this),(t=!!this.O1I1O&&Date.now()%600<300)!==this.blinkon)return this.blinkon=t,this.l00ll=!0},e}(IO0Il),this.MobileMenuButton=function(t){function e(t,i,s,n,l){this.I110I=t,this.menu=i,this.name=s,this.icon=n,this.id=l,e.I0Il1.constructor.call(this,this),this.hue=0,this.blending=THREE.AdditiveBlending,this.O1I1O=!1,this.blinkon=!1}return extend(e,t),e.prototype.llOl1=function(t){return this.name=t,this.l00ll=!0},e.prototype.lOO01=function(t){var e;for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",70%,40%,.05)",this.color="hsla("+this.hue+",50%,80%,1)",t.save(),t.translate(this.px,this.OO000),t.clearRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.medium,t.fillRect(0,0,this.IOII0,this.O0O10),t.fillStyle=this.color,t.textAlign="center",t.textBaseline="middle",e=Math.round(this.O0O10/9);;){if(t.font=e+"pt Play",t.measureText(this.name).width<.8*this.IOII0)break;e-=1}return t.fillText(this.name,this.IOII0/2,.875*this.O0O10),t.font=2.5*e+"pt SBGlyphs",t.fillText(this.icon,this.IOII0/2,.375*this.O0O10),this.blinkon&&(t.font=e+"pt FontAwesome",t.fillText("",this.O0O10/2,this.O0O10/2)),t.restore()},e.prototype.O1I11=function(){return this.menu.O1I11(this.id)},e.prototype.setHue=function(t){return this.hue=t,this.l00ll=!0},e.prototype.IO0O1=function(){var t;if(e.I0Il1.IO0O1.call(this),(t=!!this.O1I1O&&Date.now()%600<300)!==this.blinkon)return this.blinkon=t,this.l00ll=!0},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ShipTree=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.used_ships=[],this.last_ship=0,this.ship_types=O1Ill}return extend(e,t),e.prototype.IO0O1=function(){if(e.I0Il1.IO0O1.call(this),this.I110I.IO010.type.code!==this.last_ship&&null!=O1Ill.types_by_code[this.I110I.IO010.type.code])return this.last_ship=this.I110I.IO010.type.code,this.used_ships.push(this.last_ship),this.l00ll=!0},e.prototype.addShipType=function(t){var e,i,s,n;if(null==this.ship_types.types_by_code[t.code])for(this.ship_types.add(t),s=O1Ill.next(t),e=0,i=s.length;e<i;e++)n=s[e],this.addShipType(n)},e.prototype.createShipTypes=function(t){var e;return this.ship_types=new OIIl1,e=O1Ill.types_by_code[t],this.addShipType(e)},e.prototype.lOO01=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L;if("battleroyale"!==this.I110I.mode.id&&0!==this.used_ships.length){for(t.save(),t.translate(this.px,this.OO000),t.fillStyle="#111",this.ships=[],this.ships_by_code={},y=this.ship_types.levels.length-1,p=this.O0O10/y,m=0,n=l=1,_=y;l<=_;n=l+=1)if(null!=this.ship_types.levels[n])for(m=Math.max(m,this.ship_types.levels[n].length),z=this.ship_types.levels[n],a=0,r=z.length;a<r;a++)B=z[a],j={code:B.code,reachable:!1},this.ships.push(j),this.ships_by_code[B.code]=j;for(n=o=0,M=y-1;o<=M;n=o+=1)t.fillRect(0,1+n*p,this.IOII0,p-2);for(e=Math.min(p,this.IOII0/m),H=.7*e,this.I110I.is_mobile_app&&(H=.9*e),n=O=0,E=y-1;O<=E;n=O+=1)if(null!=this.ship_types.levels[n+1])for(s=this.O0O10-p/2-n*p,b=this.IOII0/2-(this.ship_types.levels[n+1].length-1)*e/2,S=this.ship_types.levels[n+1],L=f=0,h=S.length;f<h;L=++f)D=S[L],this.ships_by_code[D.code].x=b+L*e,this.ships_by_code[D.code].y=s,this.ships_by_code[D.code].size=H;for(A=function(t){return function(e){var i,s,n;if(null!=t.ships_by_code[e])for(t.ships_by_code[e].reachable=!0,s=t.ship_types.next(t.ship_types.types_by_code[e]),n=0,i=s.length;n<i;n++)B=s[n],A(B.code)}}(this),this.last_ship>0&&A(this.last_ship),T=this.used_ships,v=0,u=T.length;v<u;v++)i=T[v],null!=this.ships_by_code[i]&&(this.ships_by_code[i].reachable=!0);for(P=this.ships,w=0,d=P.length;w<d;w++)for(j=P[w],g=this.ship_types.next(this.ship_types.types_by_code[j.code]),x=0,I=g.length;x<I;x++)D=g[x],C=this.ships_by_code[D.code],this.used_ships.indexOf(D.code)>=0&&this.used_ships.indexOf(j.code)>=0?(t.strokeStyle="#FFF",t.lineWidth=5):C.reachable&&j.reachable?(t.strokeStyle="#333",t.lineWidth=3):(t.strokeStyle="#000",t.lineWidth=3),t.beginPath(),t.moveTo(j.x,j.y),t.lineTo(C.x,C.y),t.stroke();for(R=this.ships,k=0,c=R.length;k<c;k++)j=R[k],this.drawShip(j.code,t,j.x,j.y,j.size,j.reachable);return t.restore()}},e.prototype.drawShip=function(t,e,i,s,n,l){var a;return a=l0Il0.getShipIcon(t),e.fillStyle="#333",e.beginPath(),e.arc(i,s,n/2,0,2*Math.PI,!0),e.closePath(),e.fill(),this.used_ships.indexOf(t)>=0?(e.strokeStyle="#FFF",e.lineWidth=3,e.stroke()):l?(e.strokeStyle="#666",e.lineWidth=2):(e.strokeStyle="#000",e.lineWidth=2,e.stroke()),this.I110I.is_mobile_app||(n*=.8),this.used_ships.indexOf(t)>=0?e.drawImage(a,i-n/2,s-n/2,n,n):l?(e.globalAlpha=.75,e.drawImage(a,i-n/2,s-n/2,n,n),e.globalAlpha=1):(e.globalCompositeOperation="destination-out",e.drawImage(a,i-n/2,s-n/2,n,n),e.globalCompositeOperation="source-over")},e}(IIIlO),this.Explosions=function(){function t(t,e){var i,s,n;for(this.IOO1I=t,this.size=null!=e?e:2e3,this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-2e4,-2e4,-2e4),new THREE.Vector3(2e4,2e4,2e4)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),4e4),this.vertices=new Float32Array(3*this.size),this.time=new Float32Array(this.size),this.speed=new Float32Array(3*this.size),this.l1l1l=new Float32Array(this.size),this.opac=new Float32Array(this.size),this.OO0l1=new llllO,this.index=0,this.I1llO=Date.now(),i=s=0,n=this.size-1;s<=n;i=s+=1)this.vertices[3*i]=0,this.vertices[3*i+1]=900,this.vertices[3*i+2]=0,this.speed[3*i]=0,this.speed[3*i+1]=0,this.speed[3*i+2]=0,this.time[i]=0,this.l1l1l[i]=10,this.opac[i]=1;this.lOIIl(),this.IlOl1=new THREE.PointLight(16736256,0,100,.5),this.IlOl1.position.set(0,0,2)}return t.prototype.explode=function(t,e,i,s,n){var l,a,o,r,h,u,d,I,c,p,O,m,f,g;if(null==s&&(s=1),null==n&&(n=0),s=Math.min(25,s),null!=this.IOO1I.IOO11&&(o=Math.abs(this.IOO1I.IOO11.position.x-t),r=Math.abs(this.IOO1I.IOO11.position.y-e),o=Math.min(o,this.IOO1I.I110I.size-o),r=Math.min(r,this.IOO1I.I110I.size-r),!(o>32*(2+.1*s)||r>18*(2+.1*s)))){for(s>2*this.IlOl1.intensity&&(this.IlOl1.position.set(t,e,2),this.IlOl1.intensity=s),d=Math.min(this.size,Math.round(25*Math.pow(s,2))),c=.6*s*this.IOO1I.height/1e3/this.IOO1I.ll0lO.IOO11.zoom,p=5*s,u=1e3*Math.random(),h=0,I=d;h<=I;h+=1)this.vertices[3*this.index]=t+1*(Math.random()-.5),this.vertices[3*this.index+1]=e+1*(Math.random()-.5),this.vertices[3*this.index+2]=n,a=2*Math.random()*Math.PI,m=Math.cos(a),f=Math.sin(a),O=Math.pow(Math.random(),.5)*p*Math.pow(this.OO0l1.I1OOI(u+3*m,3*f,3),2)*2,m*=O,f*=O,g=5*O*Math.random(),null!==i&&(l=4*(Math.random()-0),m+=O*l*Math.cos(i),f+=O*l*Math.sin(i)),this.speed[3*this.index]=m,this.speed[3*this.index+1]=f,this.speed[3*this.index+2]=g,this.time[this.index]=this.material.uniforms.lIl10.value+(1+5*Math.random())/60,this.l1l1l[this.index]=(10+10*Math.random())*c,this.opac[this.index]=1,this.index=(this.index+1+Math.floor(3*Math.random()))%this.size;this.IOO1I.I110I.settings.check("explolight")&&(this.vertices[3*this.index]=t,this.vertices[3*this.index+1]=e,this.vertices[3*this.index+2]=0,this.speed[3*this.index]=0,this.speed[3*this.index+1]=0,this.speed[3*this.index+2]=0,this.time[this.index]=this.material.uniforms.lIl10.value+1/60,this.l1l1l[this.index]=Math.min(250*c,this.IOO1I.height/3),this.opac[this.index]=.25,this.index=(this.index+1+Math.floor(3*Math.random()))%this.size),this.updateBuffers(!0)}},t.prototype.blast=function(t,e,i,s){var n,l,a,o,r,h,u,d,I,c,p,O,m,f;if(null==i&&(i=1),null==s&&(s=0),i=Math.min(25,i),null!=this.IOO1I.IOO11&&(l=Math.abs(this.IOO1I.IOO11.position.x-t),a=Math.abs(this.IOO1I.IOO11.position.y-e),l=Math.min(l,this.IOO1I.I110I.size-l),a=Math.min(a,this.IOO1I.I110I.size-a),!(l>32*(2+.1*i)||a>18*(2+.1*i)))){for(i>2*this.IlOl1.intensity&&(this.IlOl1.position.set(t,e,2),this.IlOl1.intensity=i),h=Math.min(this.size,Math.round(25*Math.pow(i,2))),I=.6*i*this.IOO1I.height/1e3/this.IOO1I.ll0lO.IOO11.zoom,c=5*i,r=1e3*Math.random(),o=0,u=h;o<=u;o+=1)this.vertices[3*this.index]=t+1*(Math.random()-.5),this.vertices[3*this.index+1]=e+1*(Math.random()-.5),this.vertices[3*this.index+2]=s,n=2*Math.random()*Math.PI,O=Math.cos(n),m=Math.sin(n),d=Math.random(),d<.1?(m=0,O=Math.random()<.5?1:-1,p=Math.pow(Math.random(),1)*c*4,
this.l1l1l[this.index]=(10+10*Math.random())*I,f=0):d<.6?(p=Math.pow(Math.random(),.01)*c*2,this.l1l1l[this.index]=(10+10*Math.random())*I,f=0):(this.l1l1l[this.index]=(10+10*Math.random())*I,p=Math.pow(Math.random(),.5)*c*Math.pow(this.OO0l1.I1OOI(r+3*O,3*m,3),2)*2,f=5*p*Math.random()),O*=p,m*=p,this.speed[3*this.index]=O,this.speed[3*this.index+1]=m,this.speed[3*this.index+2]=f,this.time[this.index]=this.material.uniforms.lIl10.value+(1+5*Math.random())/60,this.opac[this.index]=1,this.index=(this.index+1+Math.floor(3*Math.random()))%this.size;this.IOO1I.I110I.settings.check("explolight")&&(this.vertices[3*this.index]=t,this.vertices[3*this.index+1]=e,this.vertices[3*this.index+2]=0,this.speed[3*this.index]=0,this.speed[3*this.index+1]=0,this.speed[3*this.index+2]=0,this.time[this.index]=this.material.uniforms.lIl10.value+1/60,this.l1l1l[this.index]=Math.min(250*I,this.IOO1I.height/3),this.opac[this.index]=.25,this.index=(this.index+1+Math.floor(3*Math.random()))%this.size),this.updateBuffers(!0)}},t.prototype.buffersNeedUpdate=function(){this.buffers_need_update||(this.buffers_need_update=!0,this.IOO1I.I110I.display.addJob(1,function(t){return function(){return t.updateBuffers()}}(this)))},t.prototype.updateBuffers=function(t){if(null==t&&(t=!1),t||this.buffers_need_update)return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("speed").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("opac").needsUpdate=!0,this.buffers_need_update=!1},t.prototype.III10=function(t){return t=Date.now(),this.material.uniforms.lIl10.value=(t-this.I1llO)/1e3,this.IlOl1.intensity*=.98,this.IlOl1.visible=this.IOO1I.I110I.settings.check("explolight"),this.IlOl1.position.x=this.IOO1I.IOO11.position.x+Math.fmod(this.IlOl1.position.x-this.IOO1I.IOO11.position.x+this.IOO1I.I110I.Ill01,this.IOO1I.I110I.size)-this.IOO1I.I110I.Ill01,this.IlOl1.position.y=this.IOO1I.IOO11.position.y+Math.fmod(this.IlOl1.position.y-this.IOO1I.IOO11.position.y+this.IOO1I.I110I.Ill01,this.IOO1I.I110I.size)-this.IOO1I.I110I.Ill01},t.prototype.lOIIl=function(){var t,e,i,s;return s="attribute vec3 speed;\nattribute float l1l1l;\nattribute float time;\nuniform float lIl10;\nvarying float toffset;\nvarying float opacity ;\nattribute float opac ;\nuniform float system_size;\n\nvoid main() {\n  float t = max(0.0,lIl10-time)*pow(opac,.5) ;\n  toffset = floor(t*32.0/1.0);\n  float t2 = 1.0-exp(-t*2.0) ;\n  vec4 mvPosition = modelViewMatrix * vec4(position+speed*t2, 1.0);\n  mvPosition.x = mod(mvPosition.x+system_size*.5,system_size)-system_size*.5;\n  mvPosition.y = mod(mvPosition.y+system_size*.5,system_size)-system_size*.5;\n  gl_Position = projectionMatrix * mvPosition ;\n  gl_PointSize = l1l1l*max(0.0,1.0-t);\n  opacity = clamp(gl_PointSize,0.0,1.0)*opac;\n}",t="varying float toffset;\nvarying float opacity;\nuniform sampler2D texture;\n\nvoid main() {\n  gl_FragColor = texture2D(texture,(gl_PointCoord+vec2(toffset,0.0))/vec2(32.0,1.0));\n//  gl_FragColor = texture2D(texture,vec2((gl_PointCoord.x+toffset)/32.0,gl_PointCoord.y));\n  gl_FragColor.w *= opacity;\n//  float len = length(gl_PointCoord-vec2(.5,.5))*2.0;\n\n//  gl_FragColor = vec4(1.0,1.0,1.0,(1.0-len)*opacity);\n}",e=this.createTexture(),i={texture:{type:"t",value:e},lIl10:{type:"f",value:(Date.now()-this.I1llO)/1e3},system_size:{type:"f",value:this.IOO1I.I110I.size}},this.material=new THREE.ShaderMaterial({uniforms:i,vertexShader:s,fragmentShader:t,transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("time",new THREE.BufferAttribute(this.time,1)),this.geometry.addAttribute("speed",new THREE.BufferAttribute(this.speed,3)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("opac",new THREE.BufferAttribute(this.opac,1)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.position.z=0},t.prototype.createTextureTest=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(t=document.createElement("canvas"),t.width=1024,t.height=1024,e=t.getContext("2d"),c=new llllO,s=e.getImageData(0,0,32,32),O=h=0;h<=31;O=h+=1)for(m=u=0;u<=31;m=u+=1){for(o=d=0;d<=31;o=d+=1)for(r=I=0;I<=31;r=I+=1)n=(o-15.5)/15.5,l=(r-15.5)/15.5,i=Math.max(0,1-(n*n+l*l)),i=Math.pow(i,2)*(1-1.2*c.O01Il(10*m+2*n,2*l,O/32*4,6)),s.data[4*(32*r+o)]=255,s.data[4*(32*r+o)+1]=255,s.data[4*(32*r+o)+2]=255,s.data[4*(32*r+o)+3]=255*i;e.putImageData(s,32*O,32*m)}return e.globalCompositeOperation="source-in",a=e.createLinearGradient(0,0,1024,0),a.addColorStop(0,"#F82"),a.addColorStop(.2,"#400"),a.addColorStop(.5,"#333"),a.addColorStop(1,"#000"),e.fillStyle=a,e.fillRect(0,0,1024,1024),p=new THREE.Texture(t),p.minFilter=THREE.LinearFilter,p.wrapS=p.wrapT=THREE.RepeatWrapping,p.needsUpdate=!0,p},t.prototype.createTexture=function(){var t,e,i,s,n,l;for(t=document.createElement("canvas"),t.width=1024,t.height=32,e=t.getContext("2d"),e.scale(t.width/32,t.height),e.translate(.5,.5),s=n=0;n<=31;s=n+=1)i=e.createRadialGradient(s,0,0,s,0,.5),i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,128,16,0)"),e.fillStyle=i,e.beginPath(),e.arc(s,0,.5,0,2*Math.PI,!0),e.fill();return e.globalCompositeOperation="source-in",i=e.createLinearGradient(0,0,32,0),i.addColorStop(0,"#F82"),i.addColorStop(.2,"#400"),i.addColorStop(.5,"#333"),i.addColorStop(1,"#000"),e.fillStyle=i,e.fillRect(-.5,-.5,32,1),l=new THREE.Texture(t),l.minFilter=THREE.LinearFilter,l.wrapS=l.wrapT=THREE.RepeatWrapping,l.needsUpdate=!0,l},t}(),this.I101O=function(){function t(){}return t.createTexture=function(){var e,i,s,n,l,a,o,r;for(e=document.createElement("canvas"),e.width=2048,e.height=1024,this.shapes=[],this.shapes.push(t.shape1()),this.shapes.push(t.shape2()),this.shapes.push(t.shape3()),this.shapes.push(t.shape4()),this.shapes.push(t.shape5()),this.shapes.push(t.shape6()),this.shapes.push(t.shape7()),i=e.getContext("2d"),i.translate(0,e.height),i.scale(e.width/8,-e.width/8),i.translate(.5,.5),i.scale(.5,.5),n=[.5,.1,.04,.1,.5],o=this.shapes,s=l=0,a=o.length;l<a;s=++l)r=o[s],i.save(),i.translate(s%5*3,3*Math.floor(s/5)),this.drawGradient(i,n[s],s),this.drawLaser(i,r),i.restore();return e},t.drawGradient=function(t,e,i){var s;if(null==e&&(e=.5),null==i&&(i=0),s=t.createRadialGradient(0,0,0,0,0,1),s.addColorStop(0,"hsla(10,100%,100%,"+e+")"),s.addColorStop(1,"hsla(10,100%,100%,0)"),t.fillStyle=s,t.fillRect(-1,-1,2,2),1===i)return t.fillStyle="#000",t.fillRect(-1,-.025,2,.05)},t.getShape=function(t){switch(t){case 3:return this.shape4();case 1:return this.shape2();case 2:return this.shape3();default:return this.shape1()}},t.shape1=function(){var t,e,i,s,n,l;for(s=[],e=i=0;i<=20;e=i+=1)t=e/20*Math.PI*2,n=Math.cos(t),l=Math.sin(t),n=n<0?-Math.sqrt(-n):Math.sqrt(n),l=l<0?-Math.sqrt(-l):Math.sqrt(l),s.push([n,l/3]);return[s]},t.shape2=function(){var t,e,i,s,n,l,a,o;for([],n=[],e=i=0;i<=20;e=i+=1)t=e/20*Math.PI*2,a=Math.cos(t),o=Math.sin(t),a=a<0?-Math.sqrt(-a):Math.sqrt(a),o=o<0?-1:Math.sqrt(o),n.push([1.4*a,.2+o/10]);for(l=[],e=s=0;s<=20;e=s+=1)t=e/20*Math.PI*2,a=Math.cos(t),o=Math.sin(t),a=a<0?-Math.sqrt(-a):Math.sqrt(a),o=o<0?-Math.sqrt(-o):1,l.push([1.4*a,o/10-.2]);return[n,l]},t.shape3=function(){return[[[2,0],[1,.1],[.55,.8],[.35,-.1],[.05,.8],[-.25,-.1],[-.55,.8],[-1,.1],[-2,0],[-1,-.1],[-.85,-.8],[-.55,.1],[-.25,-.8],[.05,.1],[.35,-.8],[.55,.1],[.75,-.8],[1,-.1],[2,0]]]},t.shape4=function(){return[[[1.4,-.6],[1.1,-.6],[1.1,.6],[1.4,.6]],[[.55,-.6],[.25,-.6],[.25,.6],[.55,.6]],[[-.55,-.6],[-.25,-.6],[-.25,.6],[-.55,.6]],[[-1.4,-.6],[-1.1,-.6],[-1.1,.6],[-1.4,.6]]]},t.shape5=function(){var t,e,i,s,n,l,a,o;for(l=[],t=[0,70,90,110,180,250,270,290,360],s=[1,1,.7,1,1,1,.7,1,1],e=i=0,n=s.length-1;i<=n;e=i+=1)a=Math.cos(t[e]*Math.PI/180)*s[e],o=Math.sin(t[e]*Math.PI/180)*s[e],l.push([a,o/2]);return[l]},t.shape6=function(){return[[[2,.4],[2,-.4],[-2,-.4],[-2,.4]],[[.4,2],[.4,-2],[-.4,-2],[-.4,2]]]},t.shape7=function(){var t,e,i,s,n,l;for(s=[],e=i=0;i<=20;e=i+=1)t=e/20*Math.PI*2,n=Math.cos(t),l=Math.sin(t),s.push([n,l]);return[s]},t.drawLaser=function(t,e){var i,s,n,l,a,o,r,h;for(i=t.createRadialGradient(0,0,0,0,0,.3),i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,.5)"),t.fillStyle=i,r=[],s=0,l=e.length;s<l;s++){for(h=e[s],t.beginPath(),n=0,a=h.length;n<a;n++)o=h[n],t.lineTo(.3*o[0],.3*o[1]);t.closePath(),r.push(t.fill())}return r},t}(),this.Laserticles=function(){function t(t,e){var i,s,n;for(this.IOO1I=t,this.size=null!=e?e:2e3,this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-2e4,-2e4,-2e4),new THREE.Vector3(2e4,2e4,2e4)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),4e4),this.vertices=new Float32Array(3*this.size),this.time=new Float32Array(this.size),this.speed=new Float32Array(2*this.size),this.speedratio=new Float32Array(this.size),this.angle=new Float32Array(this.size),this.color=new Float32Array(3*this.size),this.l1l1l=new Float32Array(this.size),this.type=new Float32Array(this.size),this.opac=new Float32Array(this.size),this.IOOOI=new Float32Array(this.size),this.core_size=500,this.trail_size=this.size-this.core_size,this.index=this.core_size,this.core_index=0,this.I1llO=Date.now(),i=s=0,n=this.size-1;s<=n;i=s+=1)this.vertices[3*i]=0,this.vertices[3*i+1]=0,this.vertices[3*i+2]=1e3,this.l1l1l[i]=1,this.opac[i]=0;this.lOIIl(),this.lasers=[]}return t.prototype.llOIl=function(t){var e,i,s,n,l,a,o,r,h,u,d,I;switch(t.core_index=this.core_index,t.index=this.index,this.vertices[3*this.core_index]=t.x,this.vertices[3*this.core_index+1]=t.y,this.vertices[3*this.core_index+2]=t.z,d=(t.IlOlO>>16&255)/255,n=(t.IlOlO>>8&255)/255,e=(255&t.IlOlO)/255,this.color[3*this.core_index]=d,this.color[3*this.core_index+1]=n,this.color[3*this.core_index+2]=e,this.speed[2*this.core_index]=t.OI10I,this.speed[2*this.core_index+1]=t.OI0O1,this.angle[this.core_index]=t.angle,this.time[this.core_index]=t.I0O0I,this.speedratio[this.core_index]=t.speed/100,this.l1l1l[this.core_index]=60*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,this.opac[this.core_index]=.1,this.IOOOI[this.core_index]=t.IOOOI/60,this.type[this.core_index]=t.type,this.core_index=(this.core_index+1)%this.core_size,i=Math.cos(t.angle),I=Math.sin(t.angle),t.type){case 1:for(l=a=1;a<=9;l=a+=1)this.vertices[3*this.index]=t.x,this.vertices[3*this.index+1]=t.y,this.vertices[3*this.index+2]=t.z,this.color[3*this.index]=d,this.color[3*this.index+1]=n,this.color[3*this.index+2]=e,this.speed[2*this.index]=t.OI10I,this.speed[2*this.index+1]=t.OI0O1,this.angle[this.index]=t.angle+0*(Math.random()-.5),this.time[this.index]=t.I0O0I,this.opac[this.index]=.5,this.IOOOI[this.index]=t.IOOOI/60,this.type[this.index]=t.type,this.speedratio[this.index]=t.speed/100*(1-l/100),this.l1l1l[this.index]=60*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,this.index=(this.index-this.core_size+1)%this.trail_size+this.core_size;break;case 2:for(l=o=1;o<=9;l=o+=1)this.vertices[3*this.index]=t.x,this.vertices[3*this.index+1]=t.y,this.vertices[3*this.index+2]=t.z,this.color[3*this.index]=d,this.color[3*this.index+1]=n,this.color[3*this.index+2]=e,this.speed[2*this.index]=t.OI10I,this.speed[2*this.index+1]=t.OI0O1,this.angle[this.index]=t.angle+0*(Math.random()-.5),this.time[this.index]=t.I0O0I,this.opac[this.index]=.5,this.IOOOI[this.index]=t.IOOOI/60,this.type[this.index]=t.type,this.speedratio[this.index]=t.speed/100*(1-l/60),this.l1l1l[this.index]=60*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/Math.pow(this.IOO1I.ll0lO.IOO11.zoom,1-l/25),this.index=(this.index-this.core_size+1)%this.trail_size+this.core_size;break;case 3:for(l=r=1;r<=9;l=r+=1)this.vertices[3*this.index]=t.x,this.vertices[3*this.index+1]=t.y,this.vertices[3*this.index+2]=t.z,this.color[3*this.index]=d,this.color[3*this.index+1]=n,this.color[3*this.index+2]=e,this.speed[2*this.index]=t.OI10I,this.speed[2*this.index+1]=t.OI0O1,this.angle[this.index]=t.angle+0*(Math.random()-.5),this.time[this.index]=t.I0O0I,this.opac[this.index]=.5,this.IOOOI[this.index]=t.IOOOI/60,this.type[this.index]=t.type,this.speedratio[this.index]=t.speed/100*(1-l/60),this.l1l1l[this.index]=60*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,this.index=(this.index-this.core_size+1)%this.trail_size+this.core_size;break;case 4:case 6:for(l=h=1;h<=19;l=h+=1)s=Math.random(),this.vertices[3*this.index]=t.x+.1*(Math.random()-.5),this.vertices[3*this.index+1]=t.y+.1*(Math.random()-.5),this.vertices[3*this.index+2]=t.z,this.color[3*this.index]=d,this.color[3*this.index+1]=n,this.color[3*this.index+2]=e,this.speed[2*this.index]=t.OI10I,this.speed[2*this.index+1]=t.OI0O1,this.angle[this.index]=t.angle+.025*(Math.random()-.5),this.time[this.index]=t.I0O0I,this.opac[this.index]=.2,this.IOOOI[this.index]=t.IOOOI/60,this.type[this.index]=t.type,this.speedratio[this.index]=Math.pow(Math.random(),.1)*t.speed/100,this.l1l1l[this.index]=.25*Math.pow(Math.random(),1)*60*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,this.index=(this.index-this.core_size+1)%this.trail_size+this.core_size;break;default:for(l=u=1;u<=19;l=u+=1)s=Math.random(),this.vertices[3*this.index]=t.x-s*i,this.vertices[3*this.index+1]=t.y-s*I,this.vertices[3*this.index+2]=t.z,this.color[3*this.index]=d,this.color[3*this.index+1]=n,this.color[3*this.index+2]=e,this.speed[2*this.index]=t.OI10I,this.speed[2*this.index+1]=t.OI0O1,this.angle[this.index]=t.angle+0*(Math.random()-.5),this.time[this.index]=t.I0O0I,this.opac[this.index]=1,this.IOOOI[this.index]=t.IOOOI/60,this.type[this.index]=t.type,this.speedratio[this.index]=Math.pow(Math.random(),.05)*t.speed/100,this.l1l1l[this.index]=15*Math.random()*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,this.index=(this.index-this.core_size+1)%this.trail_size+this.core_size}return this.updateBuffers(!0)},t.prototype.kill=function(t,e,i,s){var n,l,a,o,r;for(o=18,t.type>0&&t.type<4&&(o=8),this.vertices[3*t.core_index+2]=1e3,n=a=0,r=o;a<=r;n=a+=1)l=(t.index+n-this.core_size)%this.trail_size+this.core_size,Math.random(),this.vertices[3*l]=e,this.vertices[3*l+1]=i,this.vertices[3*l+2]=3,this.speed[2*l]=0,this.speed[2*l+1]=0,s||6===t.type?this.angle[l]=t.angle+2*(Math.random()-.5)+Math.PI:this.angle[l]=t.angle+1*(Math.random()-.5),this.time[l]=this.IOO1I.ll0lO.ll01O,this.opac[l]=1,this.IOOOI[l]=t.IOOOI/120,this.speedratio[l]=t.speed/100*Math.random()*.4,this.l1l1l[l]=45*Math.random()*this.IOO1I.height/1e3*Math.pow(t.damage/10,.75)/this.IOO1I.ll0lO.IOO11.zoom,6===t.type&&(this.type[l]=5,this.opac[l]=.2,this.speedratio[l]*=.5);return this.updateBuffers(!0)},t.prototype.buffersNeedUpdate=function(){this.buffers_need_update||(this.buffers_need_update=!0,this.IOO1I.I110I.display.addJob(2,function(t){return function(){return t.updateBuffers()}}(this)))},t.prototype.updateBuffers=function(t){if(null==t&&(t=!1),t||this.buffers_need_update)return this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("speed").needsUpdate=!0,this.geometry.getAttribute("time").needsUpdate=!0,this.geometry.getAttribute("angle").needsUpdate=!0,this.geometry.getAttribute("speedratio").needsUpdate=!0,this.geometry.getAttribute("l1l1l").needsUpdate=!0,this.geometry.getAttribute("type").needsUpdate=!0,this.geometry.getAttribute("color").needsUpdate=!0,this.geometry.getAttribute("opac").needsUpdate=!0,this.geometry.getAttribute("IOOOI").needsUpdate=!0,this.buffers_need_update=!1},t.prototype.III10=function(t){return this.material.uniforms.lIl10.value=t},t.prototype.lOIIl=function(){var t,e,i,s;return s="attribute vec2 speed;\nattribute float l1l1l;\nattribute float time;\nattribute float angle;\nattribute float speedratio;\nattribute vec3 color ;\nattribute float opac ;\nattribute float type ;\n\nattribute float IOOOI ;\n\nuniform float lIl10;\nvarying float opacity ;\nuniform float system_size;\nvarying vec3 IlOlO ;\nvarying float co ;\nvarying float si ;\nvarying vec2 toffset ;\n\nvoid main() {\n  float t = max(0.0,(lIl10-time)/60.0) ;\n  float IO1I1 = 1.0-exp(-t*.5);\n  float c = cos(angle) ;\n  float s = sin(angle) ;\n  vec3 O0000 = position ;\n  O0000.x += speedratio*c*IO1I1*100.0+speed.x*60.0*t ;\n  O0000.y += speedratio*s*IO1I1*100.0+speed.y*60.0*t ;\n\n  vec4 mvPosition = modelViewMatrix * vec4(O0000, 1.0);\n  mvPosition.x = mod(mvPosition.x+system_size*.5,system_size)-system_size*.5;\n  mvPosition.y = mod(mvPosition.y+system_size*.5,system_size)-system_size*.5;\n  gl_Position = projectionMatrix * mvPosition ;\n  opacity = 1.0*pow(max(0.0,(IOOOI-t)/IOOOI),opac);\n  gl_PointSize = l1l1l*opacity;\n  IlOlO = color ;\n  float a = angle ;\n  if (type == 5.0)\n  {\n    a = 0.0 ; //+= t*4.5;\n  }\n  co = cos(a);\n  si = -sin(a);\n  toffset = vec2(mod(type,5.0)*1.5,floor(type/5.0)*1.5);\n}",t="uniform sampler2D texture;\n\nvarying vec2 toffset;\nvarying float opacity;\nvarying vec3 IlOlO ;\nvarying float co ;\nvarying float si ;\n\nvoid main() {\n  vec2 pt = (gl_PointCoord-.5)*2.0 ;\n  pt = vec2(pt.x*co+pt.y*si,pt.x*si-pt.y*co);\n  gl_FragColor = texture2D(texture,(toffset+pt*.5+.5)*vec2(.125,.25))*vec4(IlOlO,opacity);\n}",e=this.createTexture(),i={texture:{type:"t",value:e},lIl10:{type:"f",value:(Date.now()-this.I1llO)/1e3},system_size:{type:"f",value:this.IOO1I.I110I.size}},this.material=new THREE.ShaderMaterial({uniforms:i,vertexShader:s,fragmentShader:t,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("time",new THREE.BufferAttribute(this.time,1)),this.geometry.addAttribute("speed",new THREE.BufferAttribute(this.speed,2)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("opac",new THREE.BufferAttribute(this.opac,1)),this.geometry.addAttribute("type",new THREE.BufferAttribute(this.type,1)),this.geometry.addAttribute("angle",new THREE.BufferAttribute(this.angle,1)),this.geometry.addAttribute("color",new THREE.BufferAttribute(this.color,3)),this.geometry.addAttribute("speedratio",new THREE.BufferAttribute(this.speedratio,1)),this.geometry.addAttribute("IOOOI",new THREE.BufferAttribute(this.IOOOI,1)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.position.z=0},t.prototype.createTexture=function(){var t,e;return t=I101O.createTexture(),e=new THREE.Texture(t),e.minFilter=THREE.LinearFilter,e.needsUpdate=!0,e},t}(),this.OlO1O=function(){function t(t,e,i,s,n,l){this.I110I=t,this.seed=e,this.OIIl0=i,this.radius=s,this.level=null!=n?n:0,this.lIOll=l,this.random=new l000I(this.seed),this.I0llI=new THREE.Group,this.moons=[],0===this.level?(this.lIOll.add(function(t){return function(){return t.build1()}}(this)),this.lIOll.add(function(t){return function(){return t.build2()}}(this)),this.lIOll.add(function(t){return function(){return t.build3()}}(this)),this.lIOll.add(function(t){return function(){return t.build4()}}(this))):this.O010I(),this.smoothed=!1}return t.prototype.O010I=function(){return this.build1(),this.build2(),this.build3(),this.build4()},t.prototype.build1=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f;if(u=Math.max(1,Math.min(5,Math.round(Math.log(this.radius)/Math.log(2)+1))),this.I110I.is_mobile_app&&(u=Math.max(1,u-1)),this.OOl0O=new THREE.IcosahedronGeometry(1,u),this.I110I.is_app)for(t=this.OOl0O.vertices[0].x-this.OOl0O.vertices[1].x,e=this.OOl0O.vertices[0].y-this.OOl0O.vertices[1].y,i=this.OOl0O.vertices[0].z-this.OOl0O.vertices[1].z,d=Math.sqrt(t*t+e*e+i*i),a=new llllO(100),o=new llllO(200),r=new llllO(300),p=1/d/2,c=3*d,h=this.OOl0O.vertices,s=0,n=h.length;s<n;s++)I=h[s],O=a.O01Il(I.x*p,I.y*p,I.z*p)-.5,m=o.O01Il(I.x*p,I.y*p,I.z*p)-.5,f=r.O01Il(I.x*p,I.y*p,I.z*p)-.5,I.x+=O*c,I.y+=m*c,I.z+=f*c,l=1/Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z),I.x*=l,I.y*=l,I.z*=l},t.prototype.build2=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M;switch(this.OO0l1=new llllO(this.random.next()),this.broken=this.random.next()<.01&&0===this.level,b=2+10*Math.pow(this.random.next(),4),w=2+10*Math.pow(this.random.next(),4),x=2+10*Math.pow(this.random.next(),4),t=this.I0OOO=.4*Math.pow(this.random.next(),2),d=2+8*this.random.next(),this.random.next()<.5&&(t*=-1,this.random.next()<.1&&0===this.level&&!this.broken&&(this.volcanic=!0,t=Math.min(-.1,t))),this.random.O1010(2,2)){case 0:e=function(t){return function(e,i,s){return t.OO0l1.O01Il(e,i,s)}}(this);break;default:e=function(t){return function(e,i,s){return t.OO0l1.I100O(e,i,s)}}(this)}for(m=this.OOl0O.vertices,s=0,a=m.length;s<a;s++)k=m[s],I=e(k.x*b,k.y*w,k.z*x),k.relief=I,I=1+Math.pow(I,d)*t,k.x*=I,k.y*=I,k.z*=I;if(this.broken){for(i=n=0,f=this.OOl0O.faces.length-1;0<=f?n<=f:n>=f;i=0<=f?++n:--n)_=this.OOl0O.vertices[this.OOl0O.faces[i].a],z=this.OOl0O.vertices[this.OOl0O.faces[i].b],M=this.OOl0O.vertices[this.OOl0O.faces[i].c],c=Math.max(.3,Math.min(1,Math.pow(2.5*this.OO0l1.O01Il(.5*_.x,.5*_.y,.5*_.z,6),4))),p=Math.max(.3,Math.min(1,Math.pow(2.5*this.OO0l1.O01Il(.5*z.x,.5*z.y,.5*z.z,6),4))),O=Math.max(.3,Math.min(1,Math.pow(2.5*this.OO0l1.O01Il(.5*M.x,.5*M.y,.5*M.z,6),4))),this.OOl0O.faceVertexUvs[0][i]=[new THREE.Vector2(0,c),new THREE.Vector2(0,p),new THREE.Vector2(0,O)];for(g=this.OOl0O.vertices,l=0,o=g.length;l<o;l++)k=g[l],I=Math.max(.3,Math.min(1,Math.pow(2.5*this.OO0l1.O01Il(.5*k.x,.5*k.y,.5*k.z,6),4))),k.x*=I,k.y*=I,k.z*=I}if(this.volcanic)for(i=h=0,y=this.OOl0O.faces.length-1;0<=y?h<=y:h>=y;i=0<=y?++h:--h)_=this.OOl0O.vertices[this.OOl0O.faces[i].a],z=this.OOl0O.vertices[this.OOl0O.faces[i].b],M=this.OOl0O.vertices[this.OOl0O.faces[i].c],c=_.relief,p=z.relief,O=M.relief,this.OOl0O.faceVertexUvs[0][i]=[new THREE.Vector2(0,c),new THREE.Vector2(0,p),new THREE.Vector2(0,O)];if(this.OOl0O.computeFaceNormals(),this.OOl0O.computeBoundingSphere(),this.OOl0O.computeBoundingBox(),this.smoothed)this.OOl0O.computeVertexNormals();else for(v=this.OOl0O.faces,u=0,r=v.length;u<r;u++)e=v[u],e.vertexNormals[0]=e.normal,e.vertexNormals[1]=e.normal,e.vertexNormals[2]=e.normal},t.prototype.build3=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P;for(M=1+10*Math.pow(this.random.next(),4),E=1+10*Math.pow(this.random.next(),4),S=1+10*Math.pow(this.random.next(),4),this.OO0l1=new llllO,u=new Gradient,P=0,z=[];;)if(Oll0O.I00Il(this.random.next(),.4*Math.pow(this.random.next(),2),.2+.8*Math.pow(this.random.next(),2),z),u.add([P,z[0],z[1],z[2]]),(P+=.25*Math.pow(this.random.next(),2))>1)break;switch(_=1-0*Math.pow(this.random.next(),2),this.random.O1010(2)){case 0:h=function(t){return function(e,i,s){return t.OO0l1.O01Il(e,i,s)}}(this);break;default:h=function(t){return function(e,i,s){return t.OO0l1.I100O(e,i,s)}}(this)}if(this.broken&&(I=new Gradient,I.add([.4,255,255,255]),I.add([.5,255,255,128]),I.add([.65,160,32,16]),I.add([.8,0,0,0]),I.add([1,0,0,0])),this.computeAmbientLighting(),this.broken)for(w=this.OOl0O.faces,p=0,f=w.length;p<f;p++)r=w[p],P=this.OOl0O.vertices[r.a],t=Math.sqrt(P.x*P.x+P.y*P.y+P.z*P.z),t<.9?a=I.getInt(t/.9):(i=u.getInt(P.relief),P=this.OOl0O.vertices[r.b],s=u.getInt(P.relief),P=this.OOl0O.vertices[r.c],n=u.getInt(P.relief),b=((i>>16&255)+(s>>16&255)+(n>>16&255))/3|0,c=((i>>8&255)+(s>>8&255)+(n>>8&255))/3|0,e=((255&i)+(255&s)+(255&n))/3|0,a=b<<16|c<<8|e),i=this.darkenColor(a,1-this.OOl0O.vertices[r.a].IlOl1),s=this.darkenColor(a,1-this.OOl0O.vertices[r.b].IlOl1),n=this.darkenColor(a,1-this.OOl0O.vertices[r.c].IlOl1),r.vertexColors=[new THREE.Color(i),new THREE.Color(s),new THREE.Color(n)];else if(this.smoothed)for(x=this.OOl0O.faces,O=0,g=x.length;O<g;O++)r=x[O],P=this.OOl0O.vertices[r.a],v=h(P.x*M,P.y*E,P.z*S)*(1-_)+P.relief*_,i=u.getInt(v),P=this.OOl0O.vertices[r.b],v=h(P.x*M,P.y*E,P.z*S)*(1-_)+P.relief*_,s=u.getInt(v),P=this.OOl0O.vertices[r.c],v=h(P.x*M,P.y*E,P.z*S)*(1-_)+P.relief*_,n=u.getInt(v),r.vertexColors=[new THREE.Color(i),new THREE.Color(s),new THREE.Color(n)];else for(k=this.OOl0O.faces,m=0,y=k.length;m<y;m++)r=k[m],P=this.OOl0O.vertices[r.a],i=u.getInt(P.relief),P=this.OOl0O.vertices[r.b],s=u.getInt(P.relief),P=this.OOl0O.vertices[r.c],n=u.getInt(P.relief),b=((i>>16&255)+(s>>16&255)+(n>>16&255))/3|0,c=((i>>8&255)+(s>>8&255)+(n>>8&255))/3|0,e=((255&i)+(255&s)+(255&n))/3|0,a=b<<16|c<<8|e,i=this.darkenColor(a,1-this.OOl0O.vertices[r.a].IlOl1),s=this.darkenColor(a,1-this.OOl0O.vertices[r.b].IlOl1),n=this.darkenColor(a,1-this.OOl0O.vertices[r.c].IlOl1),r.vertexColors=[new THREE.Color(i),new THREE.Color(s),new THREE.Color(n)];return this.broken?(l=document.createElement("canvas"),l.width=64,l.height=64,o=l.getContext("2d"),d=o.createLinearGradient(0,0,0,l.height),d.addColorStop(1,"#FFF"),d.addColorStop(.6,"#FF1"),d.addColorStop(.3,"#F00"),d.addColorStop(.1,"#000"),d.addColorStop(0,"#000"),o.fillStyle=d,o.fillRect(0,0,l.width,l.height),T=new THREE.Texture(l),T.needsUpdate=!0,this.material=new THREE.MeshLambertMaterial({color:16777215,vertexColors:THREE.VertexColors,emissive:16777215,emissiveMap:T})):this.volcanic?(l=document.createElement("canvas"),l.width=64,l.height=64,o=l.getContext("2d"),d=o.createLinearGradient(0,0,0,l.height),d.addColorStop(0,"#FFF"),d.addColorStop(.2,"#FF1"),d.addColorStop(.3,"#F00"),d.addColorStop(.4,"#000"),d.addColorStop(1,"#000"),o.fillStyle=d,o.fillRect(0,0,l.width,l.height),T=new THREE.Texture(l),T.needsUpdate=!0,this.material=new THREE.MeshLambertMaterial({color:16777215,vertexColors:THREE.VertexColors,emissive:16777215,emissiveMap:T})):this.material=new THREE.MeshLambertMaterial({color:16777215,vertexColors:THREE.VertexColors})},t.prototype.build4=function(){var e,i,s,n,l,a,o,r;if(this.planet_group=new THREE.Group,i=new THREE.BufferGeometry,i.fromGeometry(this.OOl0O),this.OOl0O=i,this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.I0llI.add(this.planet_group),this.planet_group.add(this.l1OI0),this.l1OI0.rotation.x=this.random.next()*Math.PI*2,this.l1OI0.rotation.y=this.random.next()*Math.PI*2,this.planet_group.position.x=this.OIIl0,0===this.level&&(this.I0llI.position.z=-50),0===this.level&&(a=this.random.next(),a<.1?(this.atm_height=1.01+this.I0OOO+.3*this.random.next(),this.atm=this.O000O(),this.atm.scale.set(this.radius*this.atm_height,this.radius*this.atm_height,this.radius*this.atm_height),this.planet_group.add(this.atm)):a<.2&&(this.rings=this.createRings(),this.rings.scale.set(4*this.radius,4*this.radius,4*this.radius),this.rings.rotation.set(this.random.next()*Math.PI*2,this.random.next()*Math.PI*2,this.random.next()*Math.PI*2),this.planet_group.add(this.rings))),this.l1OI0.scale.set(this.radius,this.radius,this.radius),this.orbit_phase=2*this.random.next()*Math.PI,this.self_rotation_speed=.01*(this.level+1)*(1+this.random.next()),this.orbit_speed=.1/this.OIIl0*(1+3*this.random.next()),this.random.next()<.5&&(this.orbit_speed*=-1),this.moons=[],this.level<2)for(l=Math.floor(3*Math.pow(this.random.next(),4)),s=1,r=l;s<=r;s+=1)o=(.1+.1*this.random.next())*this.radius,e=this.radius+o+this.random.next()*this.radius,n=new t(this.I110I,1-this.random.next(),e,o,this.level+1),this.moons.push(n),n.I0llI.rotation.x=this.random.next()*Math.PI*2,n.I0llI.rotation.y=this.random.next()*Math.PI*2,this.planet_group.add(n.I0llI)},t.prototype.III10=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(this.l1OI0.rotation.z=t/60*Math.PI*2*this.self_rotation_speed,0===this.level?(n=t/60*Math.PI*2*this.orbit_speed+this.orbit_phase,p=Math.cos(n)*this.OIIl0,O=Math.sin(n)*this.OIIl0,e<p-this.I110I.Ill01?p-=this.I110I.size:e>p+this.I110I.Ill01&&(p+=this.I110I.size),i<O-this.I110I.Ill01?O-=this.I110I.size:i>O+this.I110I.Ill01&&(O+=this.I110I.size),this.planet_group.position.x=p,this.planet_group.position.y=O,null!=this.atm&&(m=this.I0llI.position.z,l=10,d=p-e,I=O-i,c=m-l,u=Math.sqrt(d*d+I*I+c*c),d/=u,I/=u,c/=u,s=Math.asin(d),this.atm.rotation.y=-s/2,this.atm.rotation.x=Math.asin(I)/2)):this.I0llI.rotation.z=t/60*Math.PI*2*this.orbit_speed+this.orbit_phase,h=this.moons,a=0,o=h.length;a<o;a++)r=h[a],r.III10(t)},t.prototype.updateVisibility=function(t,e){var i,s,n,l;for(this.planet_group.visible=e,l=this.moons,i=0,s=l.length;i<s;i++)n=l[i],n.I0llI.visible=t},t.prototype.O000O=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c;for(e=document.createElement("canvas"),e.width=e.height=512,i=e.getContext("2d"),i.translate(e.width/2,e.height/2),i.scale(e.width/2,e.height/2),u=Math.round(255*this.random.next()),n=Math.round(255*this.random.next()),t=Math.round(255*this.random.next()),l=i.createRadialGradient(0,0,0,0,0,1),l.addColorStop(0,"rgba(255,255,255,0)"),l.addColorStop(1/this.atm_height,"rgba(255,255,255,.5)"),l.addColorStop(1,"rgba("+u+","+n+","+t+",0)"),i.fillStyle=l,i.arc(0,0,1,0,2*Math.PI,!0),i.fill(),I=new THREE.Texture(e),I.needsUpdate=!0,h=new THREE.IcosahedronGeometry(1,3),r=new THREE.MeshLambertMaterial({map:I,color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),h.faceVertexUvs=[[]],d=h.faces,a=0,o=d.length;a<o;a++)s=d[a],c=[],c[0]=new THREE.Vector2((h.vertices[s.a].x+1)/2,(h.vertices[s.a].y+1)/2),c[1]=new THREE.Vector2((h.vertices[s.b].x+1)/2,(h.vertices[s.b].y+1)/2),c[2]=new THREE.Vector2((h.vertices[s.c].x+1)/2,(h.vertices[s.c].y+1)/2),h.faceVertexUvs[0].push(c);return new THREE.Mesh(h,r)},t.prototype.createRings=function(){var t,e,i,s,n,l,a,o,r,h;for(t=document.createElement("canvas"),t.width=t.height=512,e=t.getContext("2d"),e.translate(t.width/2,t.height/2),e.scale(t.width/2,t.height/2),i=e.createRadialGradient(0,0,0,0,0,1),i.addColorStop(0,"rgba(0,0,0,0)"),r=o=.5*this.random.next()+.5,s=this.random.next()*(1-o),i.addColorStop(o,"rgba(255,255,255,0)");;){if((o+=.1*this.random.next()*s)>r+s)break;i.addColorStop(o,"hsla("+this.random.O1010(360)+","+(this.random.O1010(40)+10)+"%,"+(this.random.O1010(90)+10)+"%,"+(.9*this.random.next()+.1)+")")}return i.addColorStop(Math.min(1,o),"rgba(0,0,0,0)"),e.fillStyle=i,e.arc(0,0,1,0,2*Math.PI,!0),e.fill(),h=new THREE.Texture(t),h.needsUpdate=!0,a=new THREE.PlaneGeometry(1,1),n=new THREE.MeshLambertMaterial({map:h,emissiveMap:h,emissive:2105376,color:8421504,opacity:1,side:THREE.DoubleSide,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),l=new THREE.Mesh(a,n),l.position.z=.001,l},t.prototype.computeAmbientLighting=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M;for(w=this.OOl0O.vertices,u=0,c=w.length;u<c;u++)M=w[u],M.segments=[],M.IlOl1=1;if(this.I110I.is_app){for(_={},z=[],b=function(t,e,i,s){var n,l;return n=Math.min(t,e)+"-"+Math.max(t,e),null==_[n]?(l={III0I:t,v2:e,f1:s,opp1:i},_[n]=l,z.push(l)):(_[n].f2=s,_[n].opp2=i)},x=this.OOl0O.faces,d=0,p=x.length;d<p;d++)h=x[d],b(h.a,h.b,h.c,h),b(h.a,h.c,h.b,h),b(h.b,h.c,h.a,h);for(I=0,O=z.length;I<O;I++)k=z[I],f=k.f1.normal,t=(this.OOl0O.vertices[k.f1.a].x+this.OOl0O.vertices[k.f1.b].x+this.OOl0O.vertices[k.f1.c].x)/3,e=(this.OOl0O.vertices[k.f1.a].y+this.OOl0O.vertices[k.f1.b].y+this.OOl0O.vertices[k.f1.c].y)/3,i=(this.OOl0O.vertices[k.f1.a].z+this.OOl0O.vertices[k.f1.b].z+this.OOl0O.vertices[k.f1.c].z)/3,s=(this.OOl0O.vertices[k.f2.a].x+this.OOl0O.vertices[k.f2.b].x+this.OOl0O.vertices[k.f2.c].x)/3,n=(this.OOl0O.vertices[k.f2.a].y+this.OOl0O.vertices[k.f2.b].y+this.OOl0O.vertices[k.f2.c].y)/3,l=(this.OOl0O.vertices[k.f2.a].z+this.OOl0O.vertices[k.f2.b].z+this.OOl0O.vertices[k.f2.c].z)/3,a=s-t,o=n-e,r=l-i,(v=f.x*a+f.y*o+f.z*r)>0&&(g=k.f1.normal,y=k.f2.normal,v=Math.max(-1,Math.min(1,g.x*y.x+g.y*y.y+g.z*y.z)),m=1-Math.acos(v)/Math.PI,this.OOl0O.vertices[k.III0I].IlOl1*=m,this.OOl0O.vertices[k.v2].IlOl1*=m)}},t.prototype.darkenColor=function(t,e){var i,s,n,l;return s=Math.min(1,Math.max(0,1-e)),l=(t>>16&255)*s,n=(t>>8&255)*s,i=(255&t)*s,l<<16|n<<8|i},t}(),this.Stars=function(){function t(t,e){var i,s,n,l,a;for(this.size=null!=t?t:500,this.welcome=e,
this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-2e4,-2e4,-2e4),new THREE.Vector3(2e4,2e4,2e4)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),4e4),this.vertices=new Float32Array(3*this.size),this.l1l1l=new Float32Array(this.size),this.opac=new Float32Array(this.size),this.vcolor=new Float32Array(3*this.size),this.startype=new Float32Array(this.size),this.amplitude=new Float32Array(this.size),this.lIlI0=new Float32Array(this.size),this.index=0,this.I1llO=Date.now(),n=l=0,a=this.size-1;l<=a;n=l+=1)this.vertices[3*n]=350*(Math.random()-.5),this.vertices[3*n+1]=350*(Math.random()-.5),this.vertices[3*n+2]=0,this.l1l1l[n]=Math.round(4+10*Math.random()),this.opac[n]=.7*Math.random()+.3,this.lIlI0[n]=4*Math.pow(Math.random(),2)+1,this.amplitude[n]=.2*Math.pow(Math.random(),1),this.startype[n]=Math.floor(5*Math.random()),s=(240*Math.random()+180)%360,i=Oll0O.hsvToRgbHex(s/360,.2,1),this.vcolor[3*n]=(i>>16&255)/255,this.vcolor[3*n+1]=(i>>8&255)/255,this.vcolor[3*n+2]=(255&i)/255;this.lOIIl()}return t.prototype.lOIIl=function(){var t,e,i,s,n;return n="attribute float l1l1l;\nuniform vec2 O00O0;\nuniform float ll1O1;\nattribute float opac ;\nattribute vec3 vcolor ;\nattribute float amplitude ;\nattribute float lIlI0 ;\nattribute float startype ;\nvarying float opacity ;\nvarying vec3 IlOlO ;\nuniform float time ;\nvarying float stype ;\n\nvoid main() {\n  vec3 O0000 = vec3(O00O0*l1l1l"+(this.welcome?"*l1l1l*.25":"")+",0.0)+position;\n  O0000.xy = mod(O0000.xy,350.0)-175.0;\n  vec4 mvPosition = modelViewMatrix * vec4(O0000, 1.0);\n  gl_Position = projectionMatrix * mvPosition ;\n  gl_PointSize = l1l1l*ll1O1*(1.0+amplitude+amplitude*sin(time*lIlI0));\n  opacity = opac;//*(1.0-amplitude+amplitude*sin(time*lIlI0)) ;\n  IlOlO = vcolor ;\n  stype = startype ;\n}",i="uniform sampler2D texture;\nvarying float opacity ;\nvarying vec3 IlOlO ;\nvarying float stype ;\n\nvoid main() {\n  gl_FragColor = texture2D(texture,(gl_PointCoord+vec2(stype,0.0))*vec2(.125,1.0));\n  gl_FragColor.w *= opacity ;\n  gl_FragColor.xyz *= IlOlO ;\n}",t=document.createElement("canvas"),t.width=256,t.height=32,e=t.getContext("2d"),e.translate(t.width/16,t.height/2),e.scale(t.width/16,t.height/2),this.drawStarBody(e,1),e.translate(2,0),this.drawStarBody(e,.5),this.drawStarLine(e),e.rotate(Math.PI/2),this.drawStarLine(e),e.rotate(-Math.PI/2),e.translate(2,0),e.rotate(Math.PI/4),this.drawStarBody(e,.5),this.drawStarLine(e),e.rotate(Math.PI/2),this.drawStarLine(e),e.rotate(-3*Math.PI/4),this.drawStarGlow(e),e.translate(2,0),this.drawStarBody(e,.75),e.rotate(Math.PI/2),this.drawStarLine(e),e.rotate(-Math.PI/2),this.drawStarGlow(e),e.translate(2,0),this.drawStarBody(e,.75),e.rotate(Math.PI/2),this.drawStarLine(e),e.rotate(-Math.PI/2),s=new THREE.Texture(t),Math.max(window.innerWidth,window.innerHeight)*window.devicePixelRatio>1200&&(s.minFilter=s.magFilter=THREE.LinearFilter),s.needsUpdate=!0,this.O00O0=new THREE.Vector2(0,0),this.uniforms={texture:{type:"t",value:s},O00O0:{type:"v2",value:this.O00O0},ll1O1:{type:"f",value:Math.max(400,Math.min(window.innerHeight,window.innerWidth))/1e3},time:{type:"f",value:0}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:n,fragmentShader:i,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("opac",new THREE.BufferAttribute(this.opac,1)),this.geometry.addAttribute("startype",new THREE.BufferAttribute(this.startype,1)),this.geometry.addAttribute("amplitude",new THREE.BufferAttribute(this.amplitude,1)),this.geometry.addAttribute("lIlI0",new THREE.BufferAttribute(this.lIlI0,1)),this.geometry.addAttribute("vcolor",new THREE.BufferAttribute(this.vcolor,3)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.position.z=-100},t.prototype.II0lI=function(t,e){return this.uniforms.ll1O1.value=Math.max(400,Math.min(t,e))/1e3},t.prototype.III10=function(t,e,i){return this.O00O0.set(t,e),this.uniforms.time.value=i},t.prototype.drawStarBody=function(t,e){var i;return i=t.createRadialGradient(0,0,0,0,0,1),i.addColorStop(0,"rgba(255,255,255,"+e+")"),i.addColorStop(.2,"rgba(255,255,255,"+e+")"),i.addColorStop(.21,"rgba(255,255,255,.1)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(-1,-1,2,2)},t.prototype.drawStarLine=function(t){var e;return e=t.createLinearGradient(0,-1,0,1),e.addColorStop(0,"rgba(255,255,255,0)"),e.addColorStop(.5,"rgba(255,255,255,.5)"),e.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=e,t.beginPath(),t.moveTo(0,-1),t.lineTo(.1,0),t.lineTo(0,1),t.lineTo(-.1,0),t.closePath(),t.fill()},t.prototype.drawStarGlow=function(t){var e;return e=t.createRadialGradient(0,0,0,0,0,1),e.addColorStop(0,"rgba(255,255,255,0)"),e.addColorStop(.2,"rgba(255,255,255,0)"),e.addColorStop(.5,"rgba(255,255,255,.1)"),e.addColorStop(.8,"rgba(255,255,255,0)"),t.fillStyle=e,t.fillRect(-1,-1,2,2)},t}(),this.Galaxy=function(){function t(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O;for(this.seed=t,this.random=new l000I(this.seed),this.width=60+60*Math.pow(this.random.next(),1),this.size=Math.round(1e3*Math.pow(this.width/25,2)),this.geometry=new THREE.BufferGeometry,this.geometry.lO1II=new THREE.Box3(new THREE.Vector3(-1.5,-1.5,-1.5),new THREE.Vector3(1.5,1.5,1.5)),this.geometry.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),1.5),this.vertices=new Float32Array(3*this.size),this.color=new Float32Array(3*this.size),this.l1l1l=new Float32Array(this.size),this.expo=new Float32Array(this.size),this.index=0,this.I1llO=Date.now(),i=2+this.random.O1010(4),n=.1*(.5*this.random.next()+.75),p=.5+1*this.random.next(),n*=2*(2.5-p)/2*2/i,r=new Gradient,r.add([0,255,255,255]),r.add([.25,255,192,96]),r.add([.4,255,128,32]),r.add([.7,192,224,255]),r.add([1,128,192,255]),d=new llllO(this.random.next()),h=u=0,c=this.size-1;u<=c;h=u+=1)O=Math.pow(h/this.size,1),e=O*Math.PI*2*p+h%i*Math.PI*2/i,I=O,this.vertices[3*h]=I*Math.cos(e),this.vertices[3*h+1]=I*Math.sin(e),this.vertices[3*h+2]=0,l=2*(this.random.next()-.5),a=2*(this.random.next()-.5),o=2*(this.random.next()-.5),l=l<0?-Math.pow(-l,2):Math.pow(l,2),a=a<0?-Math.pow(-a,2):Math.pow(a,2),o=o<0?-Math.pow(-o,2):Math.pow(o,2),this.vertices[3*h]+=l*n*(1+2*Math.abs(O-.5))*.5,this.vertices[3*h+1]+=a*n*(1+2*Math.abs(O-.5))*.5,this.vertices[3*h+2]+=o*n*4*Math.pow(1-O,2)*.5,this.vertices[3*h]+=.2*(d.O01Il(2*this.vertices[3*h],2*this.vertices[3*h+1],2*this.vertices[3*h+2],5,.6)-.5),this.vertices[3*h+1]+=.2*(d.O01Il(10+2*this.vertices[3*h],2*this.vertices[3*h+1],2*this.vertices[3*h+2],5,.6)-.5),this.vertices[3*h+2]+=.2*(d.O01Il(20+2*this.vertices[3*h],2*this.vertices[3*h+1],2*this.vertices[3*h+2],5,.6)-.5),s=r.get(O),this.color[3*h]=s[0]/255,this.color[3*h+1]=s[1]/255,this.color[3*h+2]=s[2]/255,this.l1l1l[h]=2-O,this.expo[h]=2+4*Math.pow(this.random.next(),.25),h<5?(this.l1l1l[h]*=Math.sqrt(this.width),this.vertices[3*h]=.2*(this.random.next()-.5),this.vertices[3*h+1]=.2*(this.random.next()-.5),this.vertices[3*h+2]=.2*(this.random.next()-.5)):this.random.next()<.02&&(this.l1l1l[h]*=Math.sqrt(this.width));this.lOIIl(),this.IllO1=(2e5+2e5*this.random.next())*this.width/25,this.psize_ref=7}return t.prototype.III10=function(t,e,i){return this.material.uniforms.lO1Il.value=Math.min(e,i)/1e3*this.psize_ref,t*=1e3/60,this.I1Oll.rotation.z=-t/this.IllO1%this.IllO1*2*Math.PI},t.prototype.lOIIl=function(){var t,e,i;return i="uniform float lO1Il;\nattribute vec3 color ;\nattribute float l1l1l ;\nattribute float expo ;\nvarying vec3 IlOlO ;\nvarying float pexpo;\n\nvoid main() {\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * mvPosition ;\n  gl_PointSize = lO1Il*l1l1l ;\n  IlOlO = color ;\n  pexpo = expo ;\n}",t="varying vec3 IlOlO ;\nvarying float pexpo ;\n\nvoid main() {\n  vec2 d = (gl_PointCoord-vec2(.5,.5))*2.0 ;\n  float r = pow(1.0-length(d),pexpo);\n  gl_FragColor = vec4(IlOlO,r*.1);\n}",e={lO1Il:{type:"f",value:6}},this.material=new THREE.ShaderMaterial({uniforms:e,vertexShader:i,fragmentShader:t,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.vertices,3)),this.geometry.addAttribute("color",new THREE.BufferAttribute(this.color,3)),this.geometry.addAttribute("l1l1l",new THREE.BufferAttribute(this.l1l1l,1)),this.geometry.addAttribute("expo",new THREE.BufferAttribute(this.expo,1)),this.I1Oll=new THREE.Points(this.geometry,this.material),this.I1Oll.rotation.order="XYZ",this.I1Oll.scale.set(this.width,this.width,this.width),this.I1Oll.rotation.x=2*Math.PI*this.random.next(),this.I1Oll.rotation.y=2*Math.PI*this.random.next()},t}(),this.OOI10=function(){function t(e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y;if(this.I110I=e,this.random=i,this.OOl0O=new THREE.PlaneGeometry(1,1),this.time_offset=this.random.O1010(3e4),null==t.texture){for(s=document.createElement("canvas"),s.width=128,s.height=128,n=s.getContext("2d"),l=n.getImageData(0,0,s.width,s.height),p=new llllO,a=r=0,O=s.width-1;0<=O?r<=O:r>=O;a=0<=O?++r:--r)for(o=h=0,m=s.height-1;0<=m?h<=m:h>=m;o=0<=m?++h:--h)g=a/s.width*16,y=o/s.height*16,d=255*p.O00lI(g,y,8),I=255*p.O00lI(g+5,y+3,8),c=255*p.O00lI(g+2,y+7,8),l.data[4*a+o*s.width*4]=d,l.data[4*a+o*s.width*4+1]=I,l.data[4*a+o*s.width*4+2]=c,l.data[4*a+o*s.width*4+3]=255;n.putImageData(l,0,0),f=new THREE.Texture(s),f.wrapS=f.wrapT=THREE.RepeatWrapping,f.minFilter=THREE.LinearFilter,f.maxFilter=THREE.LinearFilter,f.needsUpdate=!0,t.texture=f}this.r=4*this.random.next()+1,this.g=4*this.random.next()+1,this.b=4*this.random.next()+1,u=Math.max(this.r,this.g,this.b),this.r=this.r/u*5,this.g=this.g/u*5,this.b=this.b/u*5,this.I110I.mode.aow&&(this.r=5,this.g=1.5,this.b=.25),this.phase=this.random.next()*Math.PI*2,this.I110I.mode.aow?this.fragmentshader="      uniform float itime ;\n      uniform sampler2D tex ;\n      varying vec2 vUv ;\n\nvoid main()\n{\n    vec2 d = (vUv-.5) ;\n    float lg = length(d);\n    float fade = 1.0-lg*2.0;\n    float a = atan(d.y,d.x);\n    float IOII0 = .5+.25*sin(itime*6.2831);\n    float ttt = mod(itime*30.0,3.0);\n    vec3 dotv = vec3( max(0.0,max(1.0-ttt,ttt-2.0)) , max(0.0,1.0-abs(1.0-ttt)) , max(0.0,1.0-abs(2.0-ttt)) ) ;\n\n    lg = pow(lg*2.0,1.0+6.0*IOII0)*.5 ;\n    vec3 OO0l1 = texture2D(tex,vUv*4.0).xyz+texture2D(tex,vUv*8.0).xyz*.5;\n    lg *= .5+.4*pow(dot(OO0l1,dotv)*.75,2.0);\n    float n = texture2D(tex,vec2(a/(3.14159265*2.0)*3.0,itime)).x;\n    float li1 = max(0.0,1.0-lg);\n    float li = (pow(li1,2.0)*.1+li1*pow(n,lg*16.0))*fade;\n\n    gl_FragColor = vec4(li,li*.9,li*.85,0.0);\n    float halo = pow(li1,64.0)*fade ;\n    gl_FragColor += vec4(halo*vec3("+this.r+","+this.g+","+this.b+"),1.0);\n}":this.fragmentshader="      uniform float itime ;\n      uniform sampler2D tex ;\n      varying vec2 vUv ;\n\nvoid main()\n{\n    vec2 d = (vUv-.5) ;\n    float lg = length(d);\n    float fade = 1.0-lg*2.0;\n    float a = atan(d.y,d.x);\n    lg *= .7;\n    float n = texture2D(tex,vec2(a/(3.14159265*2.0),itime)).x;\n    float li = 1.0-lg;\n    li = (pow(li,2.0)*.1+li*.5*pow(n,lg*16.0))*fade;\n\n    gl_FragColor = vec4(li,li*.9,li*.85,0.0);\n    float halo = pow(1.0-lg,64.0)*fade ;\n    gl_FragColor += vec4(halo*vec3("+this.r+","+this.g+","+this.b+"),1.0);\n}",this.vertexshader="varying vec2 vUv;\n\nvoid main()\n{\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n}",this.uniforms={itime:{type:"f",value:1},tex:{value:t.texture}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexshader,fragmentShader:this.fragmentshader,transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material)}return t.prototype.dispose=function(){return this.OOl0O.dispose(),this.material.dispose()},t.prototype.III10=function(){return this.uniforms.itime.value=(Date.now()+this.time_offset)%3e4/3e4},t}(),this.Repulsor=function(){function t(t){this.source=t,this.OOl0O=new THREE.PlaneGeometry(1,1),this.r=this.source.r,this.g=this.source.g,this.b=this.source.b,this.fragmentshader="  uniform float itime ;\n  uniform sampler2D tex ;\n  varying vec2 vUv ;\n\nvoid main()\n{\nvec2 d = (vUv-.5) ;\nfloat leng = length(d)*2.0;\nfloat fade = pow(max(0.0,1.0-leng),.75);\nfloat lg = pow(leng,2.0);\nfloat a = atan(d.y,d.x);\nfloat phase = lg*20.0+20.0-itime*20.0;\nfloat n = texture2D(tex,vec2(a/3.14159265*2.0,itime+leng)).x;\nfloat n2 = texture2D(tex,vec2(a/3.14159265*4.0,itime+leng+.5)).x;\nphase += n*.5;\nphase = abs(phase-floor(phase+.5));\nfloat I0OOO = pow((.5-phase)*2.0,4.0)*2.0*n2;\ngl_FragColor = vec4(pow(vec3(I0OOO*fade),vec3("+this.r+","+this.g+","+this.b+")),1.0);\n}",this.vertexshader="varying vec2 vUv;\n\nvoid main()\n{\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n}",this.uniforms={itime:{type:"f",value:1},tex:{value:OOI10.texture}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexshader,fragmentShader:this.fragmentshader,transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material)}return t.prototype.III10=function(t){return this.uniforms.itime.value=t/60/30},t}(),this.BackgroundScene=function(){function t(t,e,i,s){this.I110I=t,this.seed=e,this.lIOll=i,this.welcome=s,this.random=new l000I(this.seed),this.IOO1I=new THREE.Scene,this.lIOll.add(function(t){return function(){return t.buildDeepSpace()}}(this)),this.lIOll.add(function(t){return function(){return t.buildNebulas()}}(this)),this.I110I.is_app&&this.welcome?(this.lIOll.add(function(t){return function(){return t.buildGalaxies()}}(this)),this.lIOll.add(function(t){return function(){return t.buildStars()}}(this)),this.lIOll.add(function(t){return function(){return t.buildSuns()}}(this)),this.buildAppPlanet()):(this.welcome||this.lIOll.add(function(t){return function(){return t.buildGalaxies()}}(this)),this.lIOll.add(function(t){return function(){return t.buildStars()}}(this)),this.lIOll.add(function(t){return function(){return t.buildSuns()}}(this)),this.buildPlanets()),this.details_level=1}return t.prototype.buildDeepSpace=function(){return this.createDeepSpace()},t.prototype.buildNebulas=function(){return this.nebula_group=this.createSmallNebulas(),this.IOO1I.add(this.nebula_group)},t.prototype.buildGalaxies=function(){var t,e,i;for(this.galaxy_group=new THREE.Group,this.IOO1I.add(this.galaxy_group),this.galaxies=[],this.numgal=this.random.O1010(3,2),e=1,i=this.numgal;e<=i;e+=1)t=new Galaxy(this.random.next()),this.galaxy_group.add(t.I1Oll),t.I1Oll.position.set(300*(this.random.next()-.5),300*(this.random.next()-.5),-150),this.galaxies.push(t)},t.prototype.buildStars=function(){return this.IO0IO=new Stars(500+this.random.O1010(4500,2),this.welcome),this.IOO1I.add(this.IO0IO.I1Oll)},t.prototype.buildSuns=function(){if(this.suns=[],this.number_of_suns=1,!this.welcome)for(;this.random.next()<.1;)this.number_of_suns++;return this.sun_group=this.createStar(this.number_of_suns),this.sun_group.position.set(0,0,-150),this.welcome&&this.I110I.is_mobile_app&&this.sun_group.position.set(120,25,-150),this.I110I.size<400&&(this.sun_group.position.set(0,0,-50),this.sun_group.scale.x*=.5,this.sun_group.scale.y*=.5,this.sun_group.scale.z*=.5),this.IOO1I.add(this.sun_group),this.repulsors=[]},t.prototype.updateRepulsor=function(t){var e,i,s,n,l,a,o,r,h;if(0===this.repulsors.length)for(e=0;e<=3;e+=1)h=this.createRepulsor(),h.position.set(0,0,this.sun_group.position.z),this.IOO1I.add(h);for(a=this.repulsors,n=0,i=a.length;n<i;n++)r=a[n],r.III10(this.I110I.IOO1I.ll0lO.ll01O);for(this.I110I.IOO1I.IO010.status.x,this.I110I.IOO1I.IO010.status.y,t*=1.2*this.I110I.size,o=this.repulsors,l=0,s=o.length;l<s;l++)r=o[l],r.l1OI0.scale.set(t,t,t)},t.prototype.buildPlanets=function(){var t;if(this.planets=[],this.IlOl1=new THREE.PointLight(16777215),this.IlOl1.intensity=1.1,this.IlOl1.position.set(0,0,-50),this.IOO1I.add(this.IlOl1),this.Ill1O=0,this.llIIO=0,this.O0000=0,this.radius=10,t=0,!this.welcome)for(;this.O0000<this.I110I.Ill01&&t<10;)if(this.buildNextPlanet(),t++,this.welcome&&t>2)return},t.prototype.buildAppPlanet=function(){var t;return this.planets=[],this.li=new THREE.DirectionalLight(16777215),this.li.intensity=1.5,this.li.position.set(1,1,-2),this.IOO1I.add(this.li),this.li2=new THREE.DirectionalLight(1581096),this.li2.position.set(-1,-1,2),this.IOO1I.add(this.li2),this.Ill1O=0,this.llIIO=0,this.O0000=0,this.radius=10,0,t=new AppPlanet(this),t.I0llI.position.set(-50,-35,-50),t.I0llI.scale.set(40,40,40),this.IOO1I.add(t.I0llI),this.app_planet=t},t.prototype.buildNextPlanet=function(){var t;if(this.newradius=4+this.random.next()*(16+this.O0000/20),this.O0000+=1.3*this.radius+this.newradius+10*this.random.next(),!(this.O0000>this.I110I.Ill01))return this.radius=this.newradius,t=new OlO1O(this.I110I,1-this.random.next(),this.O0000,this.radius,0,this.lIOll),this.lIOll.add(function(e){return function(){if(e.IOO1I.add(t.I0llI),e.planets.push(t),e.I110I.size<400)return t.I0llI.position.z=-30}}(this))},t.prototype.createDeepSpace=function(){return new DeepSpace(this)},t.prototype.createDeepSpaceOld=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K,W,Y,J,Z,X,Q,$,tt;for(localStorage.getItem("ds_detail"),this.details_level=2,K=Date.now(),A=new THREE.PlaneGeometry(1,1),n=document.createElement("canvas"),n.width=256*this.details_level,n.height=256*this.details_level,a=n.getContext("2d"),h=a.getImageData(0,0,n.width,1),C=new llllO(this.random.next()),E=new llllO(this.random.next()),S=new llllO(this.random.next()),T=new llllO(this.random.next()),P=new llllO(this.random.next()),R=new llllO(this.random.next()),l=4,r=h.data,s=Oll0O.I00Il(this.random.next(),1,1),c=1+s[0]/255*2,I=1+s[1]/255*2,u=1+2*Math.pow(s[2]/255,2),this.welcome&&(u>I&&(o=u,u=I,I=o),u>c&&(o=u,u=c,c=o)),this.random.next()<.5?(w=160,d=11,p=function(t,e){return C.periodicTurbulence2d(t/n.width*8,e/n.height*8,8,d,.7)}):(w=255,d=11,p=function(t,e){return C.O00lI(t/n.width*10,e/n.height*10,10,d,.8)}),U=[],v=[],i=[],W=[],Y=[],X=_=0;_<=10;X=_+=1)for($=z=0;z<=10;$=z+=1)U[X+11*$]=c+6*E.O00lI(100+X/10*l,200+$/10*l,l,4,.6),v[X+11*$]=I+6*S.O00lI(100+X/10*l,200+$/10*l,l,4,.6),i[X+11*$]=u+6*T.O00lI(100+X/10*l,200+$/10*l,l,4,.6),W[X+11*$]=P.O00lI(100+X/10*4,200+$/10*4,4,4,.6)*n.width/5,Y[X+11*$]=R.O00lI(100+X/10*4,200+$/10*4,4,4,.6)*n.height/5;for($=L=0,V=n.height-1;L<=V;$=L+=1){for(tt=$/n.width*10,k=Math.floor(tt),m=tt-k,m=m*m*(3-2*m),X=q=0,N=n.width-1;q<=N;X=q+=1)Q=X/n.width*10,x=Math.floor(Q),O=Q-x,O=O*O*(3-2*O),j=x+11*k,H=x+1+11*k,B=x+11*(k+1),D=x+1+11*(k+1),F=(1-m)*(U[j]*(1-O)+U[H]*O)+m*(U[B]*(1-O)+U[D]*O),f=(1-m)*(v[j]*(1-O)+v[H]*O)+m*(v[B]*(1-O)+v[D]*O),t=(1-m)*(i[j]*(1-O)+i[H]*O)+m*(i[B]*(1-O)+i[D]*O),J=(1-m)*(W[j]*(1-O)+W[H]*O)+m*(W[B]*(1-O)+W[D]*O),Z=(1-m)*(Y[j]*(1-O)+Y[H]*O)+m*(Y[B]*(1-O)+Y[D]*O),o=p(X+J,$+Z),b=4*X,G=Math.pow(o,F)*w,g=Math.pow(o,f)*w,e=Math.pow(o,t)*w,y=(G+g+e)/3,r[b]=y+2*(G-y),r[b+1]=y+2*(g-y),r[b+2]=y+2*(e-y),r[b+3]=255;a.putImageData(h,0,$)}return n=this.addNoise(n,2048/n.width),this.texture=new THREE.Texture(n),this.texture.wrapS=this.texture.wrapT=THREE.RepeatWrapping,this.texture.needsUpdate=!0,M=new THREE.MeshBasicMaterial({color:10526880,map:this.texture}),this.l0O00=new THREE.Mesh(A,M),this.welcome?(this.l0O00.scale.set(1600,800,800),this.texture.repeat.x=2):this.l0O00.scale.set(800,800,800),this.l0O00.position.set(0,0,-400),this.IOO1I.add(this.l0O00),K=Date.now()-K,K<300?localStorage.setItem("ds_detail","2"):K>1e3?localStorage.setItem("ds_detail","1"):void 0},t.prototype.createSmallNebulas=function(){return new Nebulas(this).l1OI0},t.prototype.createSmallNebulasOld=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(s=new THREE.Geometry,s.faceVertexUvs=[[]],I=128,h=32,t=document.createElement("canvas"),t.width=I,t.height=I*h,e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.width),l=o=0,d=h-1;o<=d;l=o+=1)this.createSmallNebula(i,t.width),e.putImageData(i,0,l*t.width),I=.5*(30+20*this.random.next())*2,p=300*(this.random.next()-.5),O=300*(this.random.next()-.5),m=-150-50*this.random.next(),u=2*Math.PI*this.random.next(),a=s.vertices.length,s.vertices.push(new THREE.Vector3(p+I*Math.cos(u),O+I*Math.sin(u),m)),s.vertices.push(new THREE.Vector3(p+I*Math.cos(u+Math.PI/2),O+I*Math.sin(u+Math.PI/2),m)),s.vertices.push(new THREE.Vector3(p+I*Math.cos(u+Math.PI),O+I*Math.sin(u+Math.PI),m)),s.vertices.push(new THREE.Vector3(p+I*Math.cos(u+3*Math.PI/2),O+I*Math.sin(u+3*Math.PI/2),m)),s.faces.push(new THREE.Face3(a,a+1,a+2)),s.faces.push(new THREE.Face3(a+2,a+3,a)),n=1/h,s.faceVertexUvs[0].push([new THREE.Vector2(0,l*n),new THREE.Vector2(1,l*n),new THREE.Vector2(1,(l+1)*n)]),s.faceVertexUvs[0].push([new THREE.Vector2(1,(l+1)*n),new THREE.Vector2(0,(l+1)*n),new THREE.Vector2(0,l*n)]);return c=new THREE.Texture(t),c.needsUpdate=!0,r=new THREE.MeshBasicMaterial({color:8421504,map:c,transparent:!0,depthWrite:!1}),new THREE.Mesh(s,r)},t.prototype.createSmallNebula=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x;for(o=new Gradient,r=0;;){if(i=Oll0O.I00Il(this.random.next(),this.random.next(),this.random.next()),o.add([r,i[0],i[1],i[2]]),r>=1)break;r+=.3*this.random.next()}for(p=new llllO(this.random.next()),n=t.data,a=2+3*this.random.next(),d=.5+.3*this.random.next(),l=this.random.next()<0?function(t,e,i,s){return p.turbulence2d(t,e,i,s)}:function(t,e,i,s){return p.I1OOI(t,e,i,s)},v=u=0,f=e-1;u<=f;v=u+=1)for(w=I=0,g=e-1;I<=g;w=I+=1)b=(v-.5*e)/e*2,x=(w-.5*e)/e*2,c=l(v/e*a,w/e*a,7,d)*Math.max(0,2*l(20+v/e*3,33+w/e*3,3,.6)-.5),s=Math.pow(Math.max(0,1-Math.sqrt(b*b+x*x)),2),i=o.getInt(c),h=4*(e*w+v),n[h]=255&i,n[h+1]=i>>8&255,n[h+2]=i>>16&255,n[h+3]=c*s*255;for(O=this.random.O1010(20),m=0,y=O;m<=y;m+=1)v=Math.floor(this.random.next()*e),w=Math.floor(this.random.next()*e),b=(v-.5*e)/e*2,x=(w-.5*e)/e*2,s=this.random.next(),h=4*(e*w+v),n[h]=255,n[h+1]=255,n[h+2]=255,n[h+3]=255*s},t.prototype.addNoise=function(e,i,s){var n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;if(null==i&&(i=2),null==s&&(s=12),null==t.noise_canvas||null==t.noise_canvas[s]){for(null==t.noise_canvas&&(t.noise_canvas=[]),n=document.createElement("canvas"),n.width=128,n.height=128,a=n.getContext("2d"),r=a.getImageData(0,0,n.width,n.height),o=r.data,h=d=0,p=o.length-1;d<=p;h=d+=4)o[h+3]=Math.random()*s,l=Math.random()<.5?0:255,o[h]=l,o[h+1]=l,o[h+2]=l;a.putImageData(r,0,0),t.noise_canvas[s]=n}for(1!==i?(n=document.createElement("canvas"),n.width=e.width*i,n.height=e.height*i,a=n.getContext("2d"),a.drawImage(e,0,0,n.width,n.height)):(n=e,a=n.getContext("2d")),a.globalCompositeOperation="source-atop",h=I=0,O=n.width-1,m=t.noise_canvas[s].width;m>0?I<=O:I>=O;h=I+=m)for(u=c=0,f=n.height-1,g=t.noise_canvas[s].height;g>0?c<=f:c>=f;u=c+=g)a.drawImage(t.noise_canvas[s],h,u);return n},t.prototype.createStar=function(t){var e,i,s;return s=new OOI10(this.I110I,this.random),i=1.5*(40+60*this.random.next()),this.I110I.mode.aow&&(i=200),s.l1OI0.scale.set(i,i,i),s.scale=i,this.suns.push(s),t>1?(e=new THREE.Group,e.add(s.l1OI0),e.add(this.createStar(t-1)),e.orbit_ex=14*this.random.next()*1.5,e.orbit_ey=14*this.random.next()*1.5,e.orbit_inclination=this.random.next()*Math.PI*2,e.orbit_phase=this.random.next()*Math.PI*2,i=.6+.2*this.random.next(),e.children[1]instanceof THREE.Group&&e.children[1].scale.set(i,i,i),e):s.l1OI0},t.prototype.createRepulsor=function(){var t;return t=new Repulsor(this.suns[0]),this.repulsors.push(t),t.l1OI0},t.prototype.IOOOO=function(){if(null!=this.I110I.display&&(this.I110I.display.width!==this.width||this.I110I.display.height!==this.height))return this.width=this.I110I.display.width,this.height=this.I110I.display.height,this.IOO11=new THREE.PerspectiveCamera(45,this.width/this.height,1,1e3),this.IOO11.position.z=70,this.IO0IO.II0lI(this.width,this.height)},t.prototype.mod=function(t,e){return t-e*Math.floor(t/e)},t.prototype.initOffsets=function(){return this.Ill1O=-this.I110I.IOO1I.IO010.status.x,this.llIIO=-this.I110I.IOO1I.IO010.status.y},t.prototype.ll111=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G;if(null!=this.IOO1I&&(this.IOOOO(),null!=this.IOO11)){if(null!=this.deepspace_ready&&null!=this.nebulae_ready&&(!this.I110I.is_app||null!=this.app_planet&&this.app_planet.done)&&(null==this.I110I.O1IO0.welcomeScreenLoaded||this.loaded_notified||(this.loaded_notified=!0,this.I110I.O1IO0.welcomeScreenLoaded()),B=Math.max(this.deepspace_ready,this.nebulae_ready),B=Date.now()-B,B>2e3&&(this.deepspace_ready=null,this.nebulae_ready=null),l=Math.min(128,Math.floor(B/2e3*128)),l=(l<<16)+(l<<8)+l,this.deepspace_material.color.set(l),l=Math.min(128,Math.floor(B/2e3*128)),l=(l<<16)+(l<<8)+l,this.nebulae_material.color.set(l)),this.I110I.IOO1I.ll0lO.survival)for(null==this.valuenoise&&(this.valuenoise=new llllO),I=Math.min(1,(this.I110I.IOO1I.ll0lO.ll01O-this.I110I.IOO1I.ll0lO.survival_start)/CONSTANTS.RADIATION_TIME),a=Date.now()%1e7,k=Math.min(255,Math.floor(1024*Math.pow(this.valuenoise.I1OOI(.002*a,1,2),1.5))),r=Math.min(255,Math.floor(512*Math.pow(this.valuenoise.I1OOI(.0013*a,7,2),1.5))),s=Math.min(255,Math.floor(512*Math.pow(this.valuenoise.I1OOI(9e-4*a,13,2),1.5))),k=Math.floor(k*I+128*(1-I)),r=Math.floor(r*I+128*(1-I)),s=Math.floor(s*I+128*(1-I)),n=(k<<16)+(r<<8)+s,this.l0O00.material.color.setHex(n),_=this.suns,c=0,p=_.length;c<p;c++)R=_[c],C=(1+I*(2+.4*Math.sin(Date.now()%4e3/4e3*2*Math.PI+R.phase)))*R.scale,R.l1OI0.scale.set(C,C,C);for(this.l0O00.visible=this.I110I.settings.check("background"),z=this.planets,v=0,O=z.length;v<O;v++)w=z[v],w.updateVisibility(this.I110I.settings.check("moons"),this.I110I.settings.check("planets"));for(this.IOO11.position.x=this.I110I.IOO1I.ll0lO.IOO11.x+this.I110I.IOO1I.shake.x,this.IOO11.position.y=this.I110I.IOO1I.ll0lO.IOO11.y+this.I110I.IOO1I.shake.y,this.l0O00.position.x=this.IOO11.position.x,this.l0O00.position.y=this.IOO11.position.y,F=this.IOO11.position.x/this.I110I.Ill01,F=Math.abs(F)<.5?0:F<-.5?2*F+1:2*F-1,N=this.IOO11.position.y/this.I110I.Ill01,N=Math.abs(N)<.5?0:N<-.5?2*N+1:2*N-1,null!=this.IlOl1&&this.IlOl1.position.set(F*this.I110I.Ill01,N*this.I110I.Ill01,-50),M=this.planets,x=0,m=M.length;x<m;x++)w=M[x],w.III10(e,this.I110I.IOO1I.ll0lO.IOO11.x,this.I110I.IOO1I.ll0lO.IOO11.y);if(null!=this.IO0IO&&(o=60*this.I110I.IOO1I.ll0lO.l100I/1e3,this.I110I.IOO1I.IO010.status.alive&&(this.Ill1O-=(this.I110I.IOO1I.IO010.status.OI10I+this.I110I.IOO1I.shake.OI10I)*o,this.llIIO-=(this.I110I.IOO1I.IO010.status.OI0O1+this.I110I.IOO1I.shake.OI0O1)*o),this.welcome&&(this.I110I.is_app?this.Ill1O+=.02*o:this.Ill1O+=.1*o),this.IO0IO.III10(.02*this.Ill1O,.02*this.llIIO,this.I110I.IOO1I.ll0lO.ll01O/60),this.IO0IO.I1Oll.position.x=this.IOO11.position.x,this.IO0IO.I1Oll.position.y=this.IOO11.position.y,this.texture.offset.x=5e-4*-this.Ill1O,this.texture.offset.y=5e-4*-this.llIIO,null!=this.nebula_group&&(this.nebula_group.visible=this.I110I.settings.check("nebulae"),this.nebula_group.position.x=this.IOO11.position.x+.15*this.Ill1O,this.nebula_group.position.y=this.IOO11.position.y+.15*this.llIIO),null!=this.galaxy_group))for(this.galaxy_group.visible=this.I110I.settings.check("galaxies"),this.galaxy_group.position.x=this.IOO11.position.x+.15*this.Ill1O,this.galaxy_group.position.y=this.IOO11.position.y+.15*this.llIIO,E=this.galaxies,H=0,f=E.length;H<f;H++)h=E[H],h.III10(this.I110I.IOO1I.ll0lO.ll01O,this.width,this.height);for(u=this.sun_group,A=1;null!=u&&null!=u.orbit_ex;)i=e/60*Math.PI*2*.01*A+u.orbit_phase,F=Math.cos(i)*u.orbit_ex,N=Math.sin(i)*u.orbit_ey,V=F*Math.cos(u.orbit_inclination)+N*Math.sin(u.orbit_inclination),G=F*Math.sin(u.orbit_inclination)-N*Math.cos(u.orbit_inclination),u.children[0].position.x=V,u.children[0].position.y=G,u.children[1].position.x=-V,u.children[1].position.y=-G,u=u.children[1],A*=1.41;for(S=this.suns,D=0,g=S.length;D<g;D++)j=S[D],j.III10();if(null!=this.repulsors&&null!=this.sun_group)for(b=this.sun_group.children.length>0?this.sun_group.children[0]:this.sun_group,F=this.IOO11.position.x<0?-this.I110I.size:0,N=this.IOO11.position.y<0?-this.I110I.size:0,F+=b.position.x,N+=b.position.y,T=this.repulsors,d=L=0,y=T.length;L<y;d=++L)P=T[d],P.l1OI0.position.x=F+d%2*this.I110I.size,P.l1OI0.position.y=N+Math.floor(d/2)*this.I110I.size,P.l1OI0.visible=this.I110I.settings.check("gravity_field");return null!=this.app_planet&&(this.app_planet.l1OI0.rotation.y=-Date.now()%6e5/6e5*Math.PI*2,this.app_planet.rings.rotation.x=-Date.now()%18e5/18e5*Math.PI*2,this.stop_app_planet_zoom||(C=this.app_planet.I0llI.scale.x,C=.045+.999*C,this.app_planet.I0llI.scale.set(C,C,C))),t.render(this.IOO1I,this.IOO11),t.clearDepth()}},t.prototype.dispose=function(){if(null!=this.app_planet)return this.app_planet.dispose()},t}(),this.DeepSpace=function(){function t(t){var e,i,s,n,l;this.backgroundscene=t,s=new THREE.PlaneGeometry(1,1),i=document.createElement("canvas"),"2"===localStorage.getItem("ds_detail")?this.details_level=2:this.details_level=1,this.backgroundscene.I110I.is_mobile_app&&(this.details_level=.5),i.width=512*this.details_level,i.height=512*this.details_level,this.texture=new THREE.Texture(i),this.material=new THREE.MeshBasicMaterial({color:10526880,map:this.texture}),this.l0O00=new THREE.Mesh(s,this.material),this.backgroundscene.welcome?this.l0O00.scale.set(1600,800,800):this.l0O00.scale.set(800,800,800),this.l0O00.position.set(0,0,-400),this.backgroundscene.IOO1I.add(this.l0O00),this.backgroundscene.l0O00=this.l0O00,this.backgroundscene.texture=this.texture,this.backgroundscene.deepspace_material=this.material,e=new Blob([deepspaceworker],{type:"text/javascript"}),l=new Worker(window.URL.createObjectURL(e)),n=Date.now(),l.onmessage=function(t){return function(e){var s,l,a,o,r,h,u,d,I,c,p,O;for(n=Date.now()-n,n<1e3?localStorage.setItem("ds_detail","2"):n>4e3&&localStorage.setItem("ds_detail","1"),n=Date.now(),c=e.data.result,s=i.getContext("2d"),a=s.getImageData(0,0,i.width,i.height),l=a.data,O=o=0,d=i.height-1;o<=d;O=o+=1)for(p=h=0,I=i.width-1;h<=I;p=h+=1)r=4*(p+O*i.width),u=c[p+O*i.width],l[r]=u>>16,l[r+1]=u>>8&255,l[r+2]=255&u,l[r+3]=255;return s.putImageData(a,0,0),t.backgroundscene.I110I.is_mobile_app||(i=t.backgroundscene.addNoise(i,2048/i.width)),t.texture=new THREE.Texture(i),t.texture.wrapS=t.texture.wrapT=THREE.RepeatWrapping,t.texture.minFilter=THREE.LinearFilter,t.texture.magFilter=THREE.LinearFilter,t.backgroundscene.welcome&&(t.texture.repeat.x=2),t.texture.needsUpdate=!0,t.material.map=t.texture,t.backgroundscene.texture=t.texture,t.backgroundscene.deepspace_ready=Date.now()}}(this),l.postMessage({seed:this.backgroundscene.random.next(),width:i.width,height:i.height,welcome:this.backgroundscene.welcome})}return t}(),workerfunk=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K,W,Y,J,Z,X,Q,$,tt,et,it,st,nt;for(Q=t.data.width,x=t.data.height,G=new l000I(t.data.seed),B=new llllO(G.next()),P=new llllO(G.next()),R=new llllO(G.next()),C=new llllO(G.next()),A=new llllO(G.next()),j=new llllO(G.next()),H=new llllO(G.next()),r=4,W=[],o=Oll0O.I00Il(G.next(),1,1),p=1.5+o[0]/255*1.5,c=1.5+o[1]/255*1.5,d=1+1.5*Math.pow(o[2]/255,2),p*=.75,c*=.75,d*=.75,t.data.welcome&&(d>c&&(u=d,d=c,c=u),d>p&&(u=d,d=p,p=u)),h=6,G.next()<.5?(_=160,I=11,h=4,O=function(t,e){return B.periodicTurbulence2d(t/Q*8,e/x*8,8,I,.8)}):(_=255,I=10,h=4,O=function(t,e){return B.O00lI(t/Q*10,e/x*10,10,I,.8)}),J=[],w=[],a=[],Z=[],X=[],i=[],et=k=0;k<=10;et=k+=1)for(st=E=0;E<=10;st=E+=1)J[et+11*st]=p+P.O00lI(100+et/10*r,200+st/10*r,r,4,.6)*h,w[et+11*st]=c+R.O00lI(100+et/10*r,200+st/10*r,r,4,.6)*h,a[et+11*st]=d+C.O00lI(100+et/10*r,200+st/10*r,r,4,.6)*h,
Z[et+11*st]=A.O00lI(100+et/10*4,200+st/10*4,4,4,.6)*Q/5,X[et+11*st]=j.O00lI(100+et/10*4,200+st/10*4,4,4,.6)*x/5,i[et+11*st]=Math.max(0,Math.min(1,2*H.O00lI(100+et/10*6,200+st/10*6,6,5,.6)));for(st=S=0,q=x-1;S<=q;st=S+=1)for(nt=st/Q*10,M=Math.floor(nt),f=nt-M,f=f*f*(3-2*f),et=T=0,K=Q-1;T<=K;et=T+=1)it=et/Q*10,z=Math.floor(it),m=it-z,m=m*m*(3-2*m),D=z+11*M,L=z+1+11*M,F=z+11*(M+1),V=z+1+11*(M+1),N=(1-f)*(J[D]*(1-m)+J[L]*m)+f*(J[F]*(1-m)+J[V]*m),g=(1-f)*(w[D]*(1-m)+w[L]*m)+f*(w[F]*(1-m)+w[V]*m),s=(1-f)*(a[D]*(1-m)+a[L]*m)+f*(a[F]*(1-m)+a[V]*m),$=(1-f)*(Z[D]*(1-m)+Z[L]*m)+f*(Z[F]*(1-m)+Z[V]*m),tt=(1-f)*(X[D]*(1-m)+X[L]*m)+f*(X[F]*(1-m)+X[V]*m),e=(1-f)*(i[D]*(1-m)+i[L]*m)+f*(i[F]*(1-m)+i[V]*m),u=O(et+$,st+tt)*e,4*et,Y=Math.pow(u,N)*_,y=Math.pow(u,g)*_,n=Math.pow(u,s)*_,v=(Y+y+n)/3,U=Math.max(0,Math.min(255,Math.floor(v+2*(Y-v)))),b=Math.max(0,Math.min(255,Math.floor(v+2*(y-v)))),l=Math.max(0,Math.min(255,Math.floor(v+2*(n-v)))),W.push(U<<16|b<<8|l);return self.postMessage({result:W})},deepspaceworker="self.onmessage = "+workerfunk+";",deepspaceworker+="var Oll0O = (function() {\n  function Oll0O() {}\n\n  Oll0O.I00Il = function(h, s, v, OlIOI) {\n    var b, f, g, i, p, q, r, t;\n    if (OlIOI == null) {\n      OlIOI = [];\n    }\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n    }\n    OlIOI[0] = (r * 255) | 0;\n    OlIOI[1] = (g * 255) | 0;\n    OlIOI[2] = (b * 255) | 0;\n    return OlIOI;\n  };\n\n  Oll0O.hsvToRgbHex = function(h, s, v) {\n    var b, f, g, i, p, q, r, t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n    }\n    return (((r * 255) | 0) << 16) | (((g * 255) | 0) << 8) | ((b * 255) | 0);\n  };\n\n  return Oll0O;\n\n})();\n\nvar l000I = (function() {\n  function l000I(seed) {\n    this.seed = seed != null ? seed : Math.random();\n    if (this.seed < 1) {\n      this.seed *= 1 << 30;\n    }\n    this.a = 13971;\n    this.b = 12345;\n    this.size = 1 << 30;\n    this.lIOlO = this.size - 1;\n    this.O01II = 1 / this.size;\n    this.OO1O0();\n    this.OO1O0();\n    this.OO1O0();\n  }\n\n  l000I.prototype.next = function() {\n    this.seed = (this.seed * this.a + this.b) & this.lIOlO;\n    return this.seed * this.O01II;\n  };\n\n  l000I.prototype.O1010 = function(O1O10, pow) {\n    if (pow != null) {\n      return Math.floor(Math.pow(this.next(), pow) * O1O10);\n    } else {\n      return Math.floor(this.next() * O1O10);\n    }\n  };\n\n  l000I.prototype.OO1O0 = function() {\n    return this.seed = (this.seed * this.a + this.b) & this.lIOlO;\n  };\n\n  l000I.prototype.feed = function(number) {\n    return this.seed = (this.seed * this.a * number + this.b) & this.lIOlO;\n  };\n\n  return l000I;\n\n})();\n\nvar llllO = (function() {\n  function llllO(l0llI) {\n    var i, l, len, ref;\n    this.seed = l0llI;\n    this.table = [670, 243, 963, 607, 432, 29, 624, 809, 254, 752, 691, 904, 275, 984, 586, 94, 1014, 614, 252, 178, 488, 954, 55, 836, 186, 858, 719, 562, 685, 898, 167, 844, 639, 505, 85, 386, 520, 988, 561, 889, 91, 329, 900, 847, 334, 531, 168, 57, 789, 529, 259, 323, 313, 72, 153, 606, 694, 442, 547, 922, 242, 983, 965, 876, 39, 728, 383, 109, 343, 810, 815, 144, 457, 434, 221, 279, 328, 136, 674, 556, 502, 896, 582, 250, 665, 370, 926, 912, 118, 543, 365, 467, 311, 700, 15, 297, 609, 731, 476, 634, 715, 777, 62, 1007, 525, 942, 310, 627, 630, 448, 437, 822, 300, 339, 924, 583, 92, 800, 698, 312, 542, 740, 271, 778, 895, 447, 175, 957, 17, 481, 347, 283, 366, 277, 843, 966, 927, 535, 503, 234, 746, 712, 1010, 544, 671, 295, 978, 729, 997, 287, 621, 782, 160, 433, 537, 121, 413, 304, 98, 657, 498, 946, 319, 595, 191, 341, 554, 523, 274, 209, 435, 644, 947, 979, 397, 261, 681, 786, 1006, 565, 472, 180, 318, 126, 874, 693, 526, 276, 340, 808, 884, 409, 486, 962, 960, 772, 901, 690, 359, 837, 129, 363, 509, 616, 88, 382, 730, 513, 623, 999, 504, 48, 4, 384, 281, 560, 417, 99, 773, 956, 943, 496, 558, 218, 170, 471, 536, 138, 19, 266, 6, 868, 845, 16, 985, 866, 601, 445, 458, 894, 950, 349, 1017, 125, 495, 723, 446, 647, 834, 880, 272, 475, 483, 227, 357, 750, 851, 139, 406, 336, 158, 284, 482, 324, 991, 632, 587, 663, 74, 256, 541, 120, 801, 831, 46, 522, 589, 1, 571, 368, 137, 761, 885, 968, 982, 948, 785, 391, 840, 932, 829, 117, 641, 466, 367, 688, 733, 229, 735, 14, 205, 31, 316, 333, 183, 521, 795, 58, 1021, 282, 794, 939, 40, 394, 793, 1002, 763, 212, 484, 133, 260, 465, 396, 769, 518, 955, 497, 377, 145, 508, 514, 224, 196, 454, 176, 975, 865, 1005, 1023, 986, 596, 426, 893, 551, 90, 130, 873, 22, 709, 686, 436, 236, 661, 579, 764, 362, 141, 112, 970, 987, 12, 317, 369, 26, 344, 66, 803, 493, 716, 9, 637, 945, 225, 703, 78, 346, 751, 123, 1009, 1016, 27, 52, 864, 902, 921, 292, 314, 599, 799, 263, 626, 338, 953, 491, 892, 353, 692, 917, 540, 882, 677, 744, 633, 821, 327, 60, 1020, 928, 788, 360, 414, 430, 462, 824, 820, 727, 398, 342, 273, 726, 981, 84, 82, 206, 388, 720, 806, 652, 550, 238, 159, 134, 732, 897, 500, 881, 805, 814, 701, 717, 566, 7, 211, 604, 816, 56, 658, 107, 61, 374, 320, 501, 13, 642, 863, 791, 438, 348, 97, 214, 86, 305, 875, 656, 24, 364, 767, 156, 879, 590, 734, 920, 655, 577, 83, 584, 660, 38, 100, 299, 580, 990, 636, 944, 463, 766, 996, 714, 8, 515, 87, 198, 280, 444, 131, 404, 108, 278, 487, 223, 598, 410, 395, 199, 268, 989, 75, 195, 760, 916, 977, 421, 11, 1000, 813, 216, 817, 823, 164, 668, 739, 572, 30, 707, 798, 291, 564, 77, 456, 478, 68, 643, 615, 172, 841, 672, 919, 1012, 613, 385, 980, 711, 771, 682, 232, 765, 143, 620, 631, 861, 468, 622, 201, 325, 424, 189, 608, 403, 775, 646, 673, 1013, 400, 859, 838, 345, 210, 860, 65, 63, 34, 755, 161, 479, 235, 783, 460, 826, 507, 854, 839, 666, 802, 441, 114, 443, 738, 770, 929, 857, 907, 741, 935, 949, 322, 995, 217, 667, 269, 184, 650, 1018, 506, 290, 787, 459, 721, 828, 567, 222, 494, 142, 743, 405, 76, 722, 588, 147, 899, 270, 695, 597, 337, 155, 569, 679, 853, 450, 21, 517, 197, 371, 257, 380, 244, 553, 952, 381, 827, 524, 877, 702, 306, 600, 1011, 431, 781, 594, 387, 1019, 411, 533, 659, 177, 725, 930, 933, 832, 41, 2, 687, 1008, 439, 307, 891, 871, 415, 651, 308, 298, 811, 0, 194, 592, 241, 918, 18, 973, 110, 654, 967, 490, 683, 914, 128, 992, 964, 122, 230, 149, 289, 392, 416, 852, 936, 262, 102, 938, 511, 255, 510, 165, 105, 419, 958, 294, 379, 49, 699, 330, 593, 539, 710, 106, 79, 440, 200, 704, 961, 326, 321, 759, 193, 890, 44, 549, 913, 776, 909, 552, 972, 132, 429, 748, 532, 115, 888, 635, 842, 649, 747, 807, 887, 856, 784, 148, 530, 116, 157, 372, 754, 28, 581, 67, 187, 202, 818, 181, 45, 959, 146, 124, 994, 872, 675, 706, 253, 247, 625, 570, 152, 423, 185, 361, 849, 971, 546, 412, 830, 1022, 188, 850, 140, 220, 451, 219, 768, 1015, 455, 780, 976, 449, 969, 848, 293, 249, 59, 390, 512, 538, 578, 906, 819, 862, 974, 33, 911, 135, 908, 248, 401, 951, 527, 169, 676, 640, 1003, 591, 103, 37, 285, 684, 104, 163, 753, 1004, 934, 645, 470, 774, 20, 489, 228, 461, 492, 469, 998, 296, 233, 869, 605, 315, 36, 5, 425, 878, 617, 886, 23, 355, 993, 93, 473, 555, 474, 464, 937, 925, 1001, 611, 35, 812, 174, 53, 286, 680, 267, 428, 335, 883, 653, 69, 718, 585, 749, 150, 408, 393, 915, 576, 664, 629, 756, 402, 638, 602, 245, 43, 545, 213, 303, 192, 70, 453, 910, 407, 742, 111, 548, 835, 452, 575, 903, 619, 376, 154, 302, 151, 804, 867, 574, 563, 239, 648, 179, 855, 378, 618, 264, 669, 427, 354, 399, 265, 50, 796, 166, 923, 825, 697, 534, 54, 173, 870, 792, 162, 713, 246, 89, 51, 350, 705, 251, 557, 237, 240, 736, 689, 203, 519, 73, 81, 628, 288, 331, 204, 528, 480, 389, 32, 418, 573, 757, 358, 215, 226, 42, 779, 231, 171, 190, 612, 301, 762, 708, 420, 846, 208, 485, 351, 790, 737, 10, 258, 309, 797, 127, 516, 559, 499, 352, 71, 758, 25, 568, 113, 3, 610, 101, 375, 96, 603, 745, 64, 80, 477, 332, 833, 940, 373, 905, 422, 182, 356, 941, 47, 119, 662, 931, 696, 95, 724, 678, 207];\n    len = this.table.length;\n    for (i = l = 0, ref = len - 1; 0 <= ref ? l <= ref : l >= ref; i = 0 <= ref ? ++l : --l) {\n      this.table.push(this.table[i]);\n    }\n    if (this.seed < 1) {\n      this.seed *= 1 << 30;\n    }\n    this.size = 1024;\n    this.normalize = 1 / 1023;\n    this.lIOlO = 1023;\n    this.llO11 = this.seed & this.lIOlO;\n    this.OlI0O = (this.seed >> 10) & this.lIOlO;\n    this.II0Il = (this.seed >> 20) & this.lIOlO;\n    this.c2d = [];\n    this.O0lIO = Math.cos(.3);\n    this.I0OOI = Math.sin(.3);\n  }\n\n  llllO.prototype.lO010 = function(x, y, a) {\n    var c;\n    c = (-2 * a + 3) * a * a;\n    return x * (1 - c) + y * c;\n  };\n\n  llllO.prototype.O0l1O = function(x, y, a) {\n    return x * (1 - a) + y * a;\n  };\n\n  llllO.prototype.lOI10 = function(x, y) {\n    var IO0Ol, OIIO0, III0I, v2, O11OI, OIllI, l1OOl, l0l1I;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.OlI0O]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.OlI0O]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.OlI0O]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.OlI0O]]];\n    return this.lO010(this.lO010(III0I, v2, IO0Ol), this.lO010(O11OI, OIllI, IO0Ol), OIIO0) * this.normalize;\n  };\n\n  llllO.prototype.O0100 = function(x, y, z) {\n    var IO0Ol, OIIO0, az, III0I, v2, O11OI, OIllI, IOll0, ll11I, OI01l, l0II0, O1IlO, I0O11, l1OOl, l0l1I, lI11l;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    lI11l = lI11l & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    IOll0 = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    ll11I = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    OI01l = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    l0II0 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    O1IlO = this.lO010(this.lO010(III0I, v2, IO0Ol), this.lO010(O11OI, OIllI, IO0Ol), OIIO0);\n    I0O11 = this.lO010(this.lO010(IOll0, ll11I, IO0Ol), this.lO010(OI01l, l0II0, IO0Ol), OIIO0);\n    return this.lO010(O1IlO, I0O11, az) * this.normalize;\n  };\n\n  llllO.prototype.IlOOI = function(x, y, z) {\n    var IO0Ol, OIIO0, az, III0I, v2, O11OI, OIllI, IOll0, ll11I, OI01l, l0II0, O1IlO, I0O11, l1OOl, l0l1I, lI11l;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    lI11l = lI11l & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    IOll0 = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    ll11I = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    OI01l = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    l0II0 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    O1IlO = this.O0l1O(this.O0l1O(III0I, v2, IO0Ol), this.O0l1O(O11OI, OIllI, IO0Ol), OIIO0);\n    I0O11 = this.O0l1O(this.O0l1O(IOll0, ll11I, IO0Ol), this.O0l1O(OI01l, l0II0, IO0Ol), OIIO0);\n    return this.O0l1O(O1IlO, I0O11, az) * this.normalize;\n  };\n\n  llllO.prototype.IO110 = function(OOll1, II101, iz) {};\n\n  llllO.prototype.I1OOI = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += this.lOI10(x, y) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.O01Il = function(x, y, z, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += this.O0100(x, y, z) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n      z = Ol111 * z;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.O00lI = function(x, y, l0l11, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var IO0Ol, OIIO0, OOll1, II101, III0I, v2, O11OI, OIllI;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOll1 = Math.floor(x / l0l11);\n    II101 = Math.floor(y / l0l11);\n    IO0Ol = x / l0l11 - OOll1;\n    OIIO0 = y / l0l11 - II101;\n    III0I = this.I1OOI(IO0Ol * l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    v2 = this.I1OOI(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    O11OI = this.I1OOI(IO0Ol * l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    OIllI = this.I1OOI(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    return this.lO010(this.lO010(III0I, v2, 1 - IO0Ol), this.lO010(O11OI, OIllI, 1 - IO0Ol), 1 - OIIO0);\n  };\n\n  llllO.prototype.turbulence2d = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += 2 * (.5 - Math.abs(.5 - this.lOI10(x, y))) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.periodicTurbulence2d = function(x, y, l0l11, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var IO0Ol, OIIO0, OOll1, II101, III0I, v2, O11OI, OIllI;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOll1 = Math.floor(x / l0l11);\n    II101 = Math.floor(y / l0l11);\n    IO0Ol = x / l0l11 - OOll1;\n    OIIO0 = y / l0l11 - II101;\n    III0I = this.turbulence2d(IO0Ol * l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    v2 = this.turbulence2d(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    O11OI = this.turbulence2d(IO0Ol * l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    OIllI = this.turbulence2d(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    return this.lO010(this.lO010(III0I, v2, 1 - IO0Ol), this.lO010(O11OI, OIllI, 1 - IO0Ol), 1 - OIIO0);\n  };\n\n  llllO.prototype.IIll0 = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var llI1I, d, i, l, O01II, lII0l, Ol11l, ref, OOI1O, v;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    llI1I = 1;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      v = this.lOI10(x, y) * 2;\n      if (v > 1) {\n        v = 2 - v;\n      }\n      v = Math.pow(v, 2);\n      OOI1O += llI1I * d * v;\n      llI1I = v;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.I100O = function(x, y, z, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var llI1I, d, i, l, l1ll0, O01II, lII0l, Ol11l, OIIlI, ref, OOI1O, v;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    llI1I = 1;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      v = this.O0100(x, y, z) * 2;\n      if (v > 1) {\n        v = 2 - v;\n      }\n      v = Math.pow(v, 2);\n      OOI1O += llI1I * d * v;\n      llI1I = v;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = x * IIlII + y * ts;\n      Ol11l = y * IIlII - x * ts;\n      l1ll0 = Ol11l * IIlII + z * ts;\n      OIIlI = z * IIlII - Ol11l * ts;\n      x = Ol111 * lII0l;\n      y = Ol111 * l1ll0;\n      z = Ol111 * OIIlI;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.OOIIl = function(x, y, l0l11) {\n    var IO0Ol, OIIO0, OIOlO, lI01I, I1OlO, I1101, II10I, l011I, d, d1, d2, IO00I, OIl10, O0O1I, l100O, I0111, I1lOI, i, j, l, m, px, OO000, l1OOl, O0I01, l0l1I, O1l00;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    I1101 = 100;\n    II10I = 0;\n    l011I = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        O0I01 = (l1OOl - 1 + i) % l0l11;\n        O1l00 = (l0l1I - 1 + j) % l0l11;\n        px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + O1l00]]] * this.normalize * .8 + .1;\n        OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 1]]]] * this.normalize * .8 + .1;\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        d = IO00I * IO00I + l100O * l100O;\n        if (d < OIOlO) {\n          I1101 = OIOlO;\n          II10I = lI01I;\n          l011I = I1OlO;\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n        } else if (d < I1101) {\n          I1101 = d;\n          II10I = px;\n          l011I = OO000;\n        }\n      }\n    }\n    OIl10 = IO0Ol - lI01I;\n    I0111 = OIIO0 - I1OlO;\n    d1 = Math.sqrt(OIl10 * OIl10 + I0111 * I0111);\n    O0O1I = IO0Ol - II10I;\n    I1lOI = OIIO0 - l011I;\n    d2 = Math.sqrt(O0O1I * O0O1I + I1lOI * I1lOI);\n    return Math.min(d1, d2) / Math.max(d1, d2);\n  };\n\n  llllO.prototype.OO1Ol = function(x, y, l0l11) {\n    var IO0Ol, OIIO0, OIOlO, lI01I, I1OlO, lO0lO, d, IO00I, l100O, i, j, l, m, px, OO000, seed, l1OOl, O0I01, l0l1I, O1l00;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    lO0lO = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        O0I01 = (l1OOl - 1 + i) % l0l11;\n        O1l00 = (l0l1I - 1 + j) % l0l11;\n        px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + O1l00]]] * this.normalize * .8 + .1;\n        OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 1]]]] * this.normalize * .8 + .1;\n        seed = this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 17]]]];\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        d = IO00I * IO00I + l100O * l100O;\n        if (d < OIOlO) {\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n          lO0lO = seed;\n        }\n      }\n    }\n    return lO0lO * this.normalize;\n  };\n\n  llllO.prototype.Ol0I1 = function(x, y, z, l0l11) {\n    var IO0Ol, OIIO0, az, OIOlO, lI01I, I1OlO, OI100, I1101, II10I, l011I, OOI1I, d, d1, d2, IO00I, OIl10, O0O1I, l100O, I0111, I1lOI, lIO1I, l0IOI, I00I1, i, j, k, l, m, n, px, OO000, lIlIO, l1OOl, O0I01, l0l1I, O1l00, lI11l, I1OOl;\n    if (l0l11 == null) {\n      l0l11 = 100;\n    }\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    OI100 = 0;\n    I1101 = 100;\n    II10I = 0;\n    l011I = 0;\n    OOI1I = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        for (k = n = 0; n <= 2; k = n += 1) {\n          O0I01 = ((l1OOl - 1 + i) % l0l11) & this.lIOlO;\n          O1l00 = ((l0l1I - 1 + j) % l0l11) & this.lIOlO;\n          I1OOl = ((lI11l - 1 + k) % l0l11) & this.lIOlO;\n          px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[I1OOl + O1l00]]]] * this.normalize;\n          OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[this.table[O1l00 + I1OOl] + 1]]]] * this.normalize;\n          lIlIO = -1 + k + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[this.table[O1l00 + I1OOl] + 37]]]] * this.normalize;\n        }\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        lIO1I = az - lIlIO;\n        d = IO00I * IO00I + l100O * l100O + lIO1I * lIO1I;\n        if (d < OIOlO) {\n          I1101 = OIOlO;\n          II10I = lI01I;\n          l011I = I1OlO;\n          OOI1I = OI100;\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n          OI100 = lIlIO;\n        } else if (d < I1101) {\n          I1101 = d;\n          II10I = px;\n          l011I = OO000;\n          OOI1I = lIlIO;\n        }\n      }\n    }\n    OIl10 = IO0Ol - lI01I;\n    I0111 = OIIO0 - I1OlO;\n    l0IOI = az - OI100;\n    d1 = Math.sqrt(OIl10 * OIl10 + I0111 * I0111 + l0IOI * l0IOI);\n    O0O1I = IO0Ol - II10I;\n    I1lOI = OIIO0 - l011I;\n    I00I1 = az - OOI1I;\n    d2 = Math.sqrt(O0O1I * O0O1I + I1lOI * I1lOI + I00I1 * I00I1);\n    return Math.min(d1, d2) / Math.max(d1, d2);\n  };\n\n  llllO.I0O00 = function(size) {\n    var i, index, l, ref, t, v;\n    t = [];\n    for (i = l = 0, ref = size - 1; 0 <= ref ? l <= ref : l >= ref; i = 0 <= ref ? ++l : --l) {\n      t[i] = i;\n    }\n    v = [];\n    while (true) {\n      if (t.length === 0) {\n        break;\n      }\n      index = Math.floor(Math.random() * t.length);\n      v.push(t.splice(index, 1)[0]);\n    }\n    return v;\n  };\n\n  return llllO;\n\n})();",this.Nebulas=function(){function t(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x;for(this.backgroundscene=t,a=new THREE.Geometry,a.faceVertexUvs=[[]],f=128,this.backgroundscene.I110I.is_mobile_app&&(f=64),c=32,i=document.createElement("canvas"),i.width=f,i.height=f*c,s=i.getContext("2d"),g=new THREE.Texture(i),g.needsUpdate=!0,I=new THREE.MeshBasicMaterial({color:8421504,map:g,transparent:!0,depthWrite:!1}),l=s.getImageData(0,0,i.width,i.width),this.random=this.backgroundscene.random,r=u=0,O=c-1;u<=O;r=u+=1)f=.5*(30+20*this.random.next())*1.5,b=300*(this.random.next()-.5),w=300*(this.random.next()-.5),x=-150-50*this.random.next(),p=2*Math.PI*this.random.next(),h=a.vertices.length,a.vertices.push(new THREE.Vector3(b+f*Math.cos(p),w+f*Math.sin(p),x)),a.vertices.push(new THREE.Vector3(b+f*Math.cos(p+Math.PI/2),w+f*Math.sin(p+Math.PI/2),x)),a.vertices.push(new THREE.Vector3(b+f*Math.cos(p+Math.PI),w+f*Math.sin(p+Math.PI),x)),a.vertices.push(new THREE.Vector3(b+f*Math.cos(p+3*Math.PI/2),w+f*Math.sin(p+3*Math.PI/2),x)),a.faces.push(new THREE.Face3(h,h+1,h+2)),a.faces.push(new THREE.Face3(h+2,h+3,h)),o=1/c,a.faceVertexUvs[0].push([new THREE.Vector2(0,r*o),new THREE.Vector2(1,r*o),new THREE.Vector2(1,(r+1)*o)]),a.faceVertexUvs[0].push([new THREE.Vector2(1,(r+1)*o),new THREE.Vector2(0,(r+1)*o),new THREE.Vector2(0,r*o)]);for(g=new THREE.Texture(i),g.minFilter=THREE.LinearFilter,g.magFilter=THREE.LinearFilter,I=new THREE.MeshBasicMaterial({color:0,map:g,transparent:!0,depthWrite:!1}),this.backgroundscene.nebulae_material=I,this.l1OI0=new THREE.Mesh(a,I),e=new Blob([nebulasworker],{type:"text/javascript"}),v=new Worker(window.URL.createObjectURL(e)),y=Date.now(),n=0,v.onmessage=function(t){return function(e){var a,o,r,u,d,I;for(I=e.data.result,a=l.data,b=o=0,u=i.width-1;o<=u;b=o+=1)for(w=r=0,d=i.width-1;r<=d;w=r+=1)h=4*(b+w*i.width),p=I[b+w*i.width],a[h]=p>>16&255,a[h+1]=p>>8&255,a[h+2]=255&p,a[h+3]=p>>24&255;if(h=e.data.index,s.putImageData(l,0,h*i.width),++n===c)return y=Date.now()-y,g.needsUpdate=!0,t.backgroundscene.nebulae_ready=Date.now()}}(this),r=d=0,m=c-1;d<=m;r=d+=1)v.postMessage({seed:this.backgroundscene.random.next(),size:i.width,index:r,welcome:this.backgroundscene.welcome})}return t}(),workerfunk=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k;for(v=t.data.size,O=new l000I(t.data.seed),o=t.data.index,y=[],l=new Gradient,a=0;;){if(e=Oll0O.I00Il(O.next(),.75*O.next(),O.next()),l.add([a,e[0],e[1],e[2]]),a>=1)break;a+=.3*O.next()}for(c=new llllO(O.next()),n=2+3*O.next(),u=.5+.3*O.next(),s=O.next()<0?function(t,e,i,s){return c.turbulence2d(t,e,i,s)}:function(t,e,i,s){return c.I1OOI(t,e,i,s)},b=r=0,m=v-1;r<=m;b=r+=1)for(x=h=0,f=v-1;h<=f;x=h+=1)w=(b-.5*v)/v*2,k=(x-.5*v)/v*2,I=s(b/v*n,x/v*n,7,u)*Math.max(0,2*s(20+b/v*3,33+x/v*3,3,.6)-.5),i=Math.pow(Math.max(0,1-Math.sqrt(w*w+k*k)),2),e=l.getInt(I),e|=I*i*255<<24,y[b+x*v]=e;for(p=O.O1010(20),d=0,g=p;d<=g;d+=1)b=Math.floor(O.next()*v),x=Math.floor(O.next()*v),i=O.next(),e=16777215|Math.floor(255*i)<<24,y[b+x*v]=e;return self.postMessage({result:y,index:o})},nebulasworker="self.onmessage = "+workerfunk+";",
nebulasworker+="var Gradient = (function() {\n  function Gradient(l01l0) {\n    this.l01l0 = l01l0;\n    if (this.l01l0 == null) {\n      this.l01l0 = [];\n    }\n  }\n\n  Gradient.prototype.add = function(v) {\n    return this.l01l0.push(v);\n  };\n\n  Gradient.prototype.getInt = function(x) {\n    var a, b, index, III0I, v2;\n    if (this.l01l0.length === 0) {\n      return 0;\n    }\n    III0I = v2 = this.l01l0[0];\n    if (x <= III0I[0]) {\n      return (III0I[1] << 16) | (III0I[2] << 8) | III0I[3];\n    }\n    index = 1;\n    while (true) {\n      if (x < v2[0] || index >= this.l01l0.length - 1) {\n        break;\n      }\n      III0I = v2;\n      v2 = this.l01l0[index++];\n    }\n    if (x >= v2[0]) {\n      return (v2[1] << 16) | (v2[2] << 8) | v2[3];\n    } else {\n      b = (x - III0I[0]) / (v2[0] - III0I[0]);\n      a = (v2[0] - x) / (v2[0] - III0I[0]);\n      return ((a * III0I[1] + b * v2[1]) << 16) | ((a * III0I[2] + b * v2[2]) << 8) | ((a * III0I[3] + b * v2[3]) | 0);\n    }\n  };\n\n  Gradient.prototype.get = function(x) {\n    var a, b, index, III0I, v2;\n    if (this.l01l0.length === 0) {\n      return [0, 0, 0];\n    }\n    III0I = v2 = this.l01l0[0];\n    if (x <= III0I[0]) {\n      return [III0I[1], III0I[2], III0I[3]];\n    }\n    index = 1;\n    while (true) {\n      if (x < v2[0] || index >= this.l01l0.length - 1) {\n        break;\n      }\n      III0I = v2;\n      v2 = this.l01l0[index++];\n    }\n    if (x >= v2[0]) {\n      return [v2[1], v2[2], v2[3]];\n    } else {\n      b = (x - III0I[0]) / (v2[0] - III0I[0]);\n      a = (v2[0] - x) / (v2[0] - III0I[0]);\n      return [a * III0I[1] + b * v2[1], a * III0I[2] + b * v2[2], a * III0I[3] + b * v2[3]];\n    }\n  };\n\n  return Gradient;\n\n})();\n\nvar Oll0O = (function() {\n  function Oll0O() {}\n\n  Oll0O.I00Il = function(h, s, v, OlIOI) {\n    var b, f, g, i, p, q, r, t;\n    if (OlIOI == null) {\n      OlIOI = [];\n    }\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n    }\n    OlIOI[0] = (r * 255) | 0;\n    OlIOI[1] = (g * 255) | 0;\n    OlIOI[2] = (b * 255) | 0;\n    return OlIOI;\n  };\n\n  Oll0O.hsvToRgbHex = function(h, s, v) {\n    var b, f, g, i, p, q, r, t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n    }\n    return (((r * 255) | 0) << 16) | (((g * 255) | 0) << 8) | ((b * 255) | 0);\n  };\n\n  return Oll0O;\n\n})();\n\nvar l000I = (function() {\n  function l000I(seed) {\n    this.seed = seed != null ? seed : Math.random();\n    if (this.seed < 1) {\n      this.seed *= 1 << 30;\n    }\n    this.a = 13971;\n    this.b = 12345;\n    this.size = 1 << 30;\n    this.lIOlO = this.size - 1;\n    this.O01II = 1 / this.size;\n    this.OO1O0();\n    this.OO1O0();\n    this.OO1O0();\n  }\n\n  l000I.prototype.next = function() {\n    this.seed = (this.seed * this.a + this.b) & this.lIOlO;\n    return this.seed * this.O01II;\n  };\n\n  l000I.prototype.O1010 = function(O1O10, pow) {\n    if (pow != null) {\n      return Math.floor(Math.pow(this.next(), pow) * O1O10);\n    } else {\n      return Math.floor(this.next() * O1O10);\n    }\n  };\n\n  l000I.prototype.OO1O0 = function() {\n    return this.seed = (this.seed * this.a + this.b) & this.lIOlO;\n  };\n\n  l000I.prototype.feed = function(number) {\n    return this.seed = (this.seed * this.a * number + this.b) & this.lIOlO;\n  };\n\n  return l000I;\n\n})();\n\nvar llllO = (function() {\n  function llllO(l0llI) {\n    var i, l, len, ref;\n    this.seed = l0llI;\n    this.table = [670, 243, 963, 607, 432, 29, 624, 809, 254, 752, 691, 904, 275, 984, 586, 94, 1014, 614, 252, 178, 488, 954, 55, 836, 186, 858, 719, 562, 685, 898, 167, 844, 639, 505, 85, 386, 520, 988, 561, 889, 91, 329, 900, 847, 334, 531, 168, 57, 789, 529, 259, 323, 313, 72, 153, 606, 694, 442, 547, 922, 242, 983, 965, 876, 39, 728, 383, 109, 343, 810, 815, 144, 457, 434, 221, 279, 328, 136, 674, 556, 502, 896, 582, 250, 665, 370, 926, 912, 118, 543, 365, 467, 311, 700, 15, 297, 609, 731, 476, 634, 715, 777, 62, 1007, 525, 942, 310, 627, 630, 448, 437, 822, 300, 339, 924, 583, 92, 800, 698, 312, 542, 740, 271, 778, 895, 447, 175, 957, 17, 481, 347, 283, 366, 277, 843, 966, 927, 535, 503, 234, 746, 712, 1010, 544, 671, 295, 978, 729, 997, 287, 621, 782, 160, 433, 537, 121, 413, 304, 98, 657, 498, 946, 319, 595, 191, 341, 554, 523, 274, 209, 435, 644, 947, 979, 397, 261, 681, 786, 1006, 565, 472, 180, 318, 126, 874, 693, 526, 276, 340, 808, 884, 409, 486, 962, 960, 772, 901, 690, 359, 837, 129, 363, 509, 616, 88, 382, 730, 513, 623, 999, 504, 48, 4, 384, 281, 560, 417, 99, 773, 956, 943, 496, 558, 218, 170, 471, 536, 138, 19, 266, 6, 868, 845, 16, 985, 866, 601, 445, 458, 894, 950, 349, 1017, 125, 495, 723, 446, 647, 834, 880, 272, 475, 483, 227, 357, 750, 851, 139, 406, 336, 158, 284, 482, 324, 991, 632, 587, 663, 74, 256, 541, 120, 801, 831, 46, 522, 589, 1, 571, 368, 137, 761, 885, 968, 982, 948, 785, 391, 840, 932, 829, 117, 641, 466, 367, 688, 733, 229, 735, 14, 205, 31, 316, 333, 183, 521, 795, 58, 1021, 282, 794, 939, 40, 394, 793, 1002, 763, 212, 484, 133, 260, 465, 396, 769, 518, 955, 497, 377, 145, 508, 514, 224, 196, 454, 176, 975, 865, 1005, 1023, 986, 596, 426, 893, 551, 90, 130, 873, 22, 709, 686, 436, 236, 661, 579, 764, 362, 141, 112, 970, 987, 12, 317, 369, 26, 344, 66, 803, 493, 716, 9, 637, 945, 225, 703, 78, 346, 751, 123, 1009, 1016, 27, 52, 864, 902, 921, 292, 314, 599, 799, 263, 626, 338, 953, 491, 892, 353, 692, 917, 540, 882, 677, 744, 633, 821, 327, 60, 1020, 928, 788, 360, 414, 430, 462, 824, 820, 727, 398, 342, 273, 726, 981, 84, 82, 206, 388, 720, 806, 652, 550, 238, 159, 134, 732, 897, 500, 881, 805, 814, 701, 717, 566, 7, 211, 604, 816, 56, 658, 107, 61, 374, 320, 501, 13, 642, 863, 791, 438, 348, 97, 214, 86, 305, 875, 656, 24, 364, 767, 156, 879, 590, 734, 920, 655, 577, 83, 584, 660, 38, 100, 299, 580, 990, 636, 944, 463, 766, 996, 714, 8, 515, 87, 198, 280, 444, 131, 404, 108, 278, 487, 223, 598, 410, 395, 199, 268, 989, 75, 195, 760, 916, 977, 421, 11, 1000, 813, 216, 817, 823, 164, 668, 739, 572, 30, 707, 798, 291, 564, 77, 456, 478, 68, 643, 615, 172, 841, 672, 919, 1012, 613, 385, 980, 711, 771, 682, 232, 765, 143, 620, 631, 861, 468, 622, 201, 325, 424, 189, 608, 403, 775, 646, 673, 1013, 400, 859, 838, 345, 210, 860, 65, 63, 34, 755, 161, 479, 235, 783, 460, 826, 507, 854, 839, 666, 802, 441, 114, 443, 738, 770, 929, 857, 907, 741, 935, 949, 322, 995, 217, 667, 269, 184, 650, 1018, 506, 290, 787, 459, 721, 828, 567, 222, 494, 142, 743, 405, 76, 722, 588, 147, 899, 270, 695, 597, 337, 155, 569, 679, 853, 450, 21, 517, 197, 371, 257, 380, 244, 553, 952, 381, 827, 524, 877, 702, 306, 600, 1011, 431, 781, 594, 387, 1019, 411, 533, 659, 177, 725, 930, 933, 832, 41, 2, 687, 1008, 439, 307, 891, 871, 415, 651, 308, 298, 811, 0, 194, 592, 241, 918, 18, 973, 110, 654, 967, 490, 683, 914, 128, 992, 964, 122, 230, 149, 289, 392, 416, 852, 936, 262, 102, 938, 511, 255, 510, 165, 105, 419, 958, 294, 379, 49, 699, 330, 593, 539, 710, 106, 79, 440, 200, 704, 961, 326, 321, 759, 193, 890, 44, 549, 913, 776, 909, 552, 972, 132, 429, 748, 532, 115, 888, 635, 842, 649, 747, 807, 887, 856, 784, 148, 530, 116, 157, 372, 754, 28, 581, 67, 187, 202, 818, 181, 45, 959, 146, 124, 994, 872, 675, 706, 253, 247, 625, 570, 152, 423, 185, 361, 849, 971, 546, 412, 830, 1022, 188, 850, 140, 220, 451, 219, 768, 1015, 455, 780, 976, 449, 969, 848, 293, 249, 59, 390, 512, 538, 578, 906, 819, 862, 974, 33, 911, 135, 908, 248, 401, 951, 527, 169, 676, 640, 1003, 591, 103, 37, 285, 684, 104, 163, 753, 1004, 934, 645, 470, 774, 20, 489, 228, 461, 492, 469, 998, 296, 233, 869, 605, 315, 36, 5, 425, 878, 617, 886, 23, 355, 993, 93, 473, 555, 474, 464, 937, 925, 1001, 611, 35, 812, 174, 53, 286, 680, 267, 428, 335, 883, 653, 69, 718, 585, 749, 150, 408, 393, 915, 576, 664, 629, 756, 402, 638, 602, 245, 43, 545, 213, 303, 192, 70, 453, 910, 407, 742, 111, 548, 835, 452, 575, 903, 619, 376, 154, 302, 151, 804, 867, 574, 563, 239, 648, 179, 855, 378, 618, 264, 669, 427, 354, 399, 265, 50, 796, 166, 923, 825, 697, 534, 54, 173, 870, 792, 162, 713, 246, 89, 51, 350, 705, 251, 557, 237, 240, 736, 689, 203, 519, 73, 81, 628, 288, 331, 204, 528, 480, 389, 32, 418, 573, 757, 358, 215, 226, 42, 779, 231, 171, 190, 612, 301, 762, 708, 420, 846, 208, 485, 351, 790, 737, 10, 258, 309, 797, 127, 516, 559, 499, 352, 71, 758, 25, 568, 113, 3, 610, 101, 375, 96, 603, 745, 64, 80, 477, 332, 833, 940, 373, 905, 422, 182, 356, 941, 47, 119, 662, 931, 696, 95, 724, 678, 207];\n    len = this.table.length;\n    for (i = l = 0, ref = len - 1; 0 <= ref ? l <= ref : l >= ref; i = 0 <= ref ? ++l : --l) {\n      this.table.push(this.table[i]);\n    }\n    if (this.seed < 1) {\n      this.seed *= 1 << 30;\n    }\n    this.size = 1024;\n    this.normalize = 1 / 1023;\n    this.lIOlO = 1023;\n    this.llO11 = this.seed & this.lIOlO;\n    this.OlI0O = (this.seed >> 10) & this.lIOlO;\n    this.II0Il = (this.seed >> 20) & this.lIOlO;\n    this.c2d = [];\n    this.O0lIO = Math.cos(.3);\n    this.I0OOI = Math.sin(.3);\n  }\n\n  llllO.prototype.lO010 = function(x, y, a) {\n    var c;\n    c = (-2 * a + 3) * a * a;\n    return x * (1 - c) + y * c;\n  };\n\n  llllO.prototype.O0l1O = function(x, y, a) {\n    return x * (1 - a) + y * a;\n  };\n\n  llllO.prototype.lOI10 = function(x, y) {\n    var IO0Ol, OIIO0, III0I, v2, O11OI, OIllI, l1OOl, l0l1I;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.OlI0O]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.OlI0O]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.OlI0O]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.OlI0O]]];\n    return this.lO010(this.lO010(III0I, v2, IO0Ol), this.lO010(O11OI, OIllI, IO0Ol), OIIO0) * this.normalize;\n  };\n\n  llllO.prototype.O0100 = function(x, y, z) {\n    var IO0Ol, OIIO0, az, III0I, v2, O11OI, OIllI, IOll0, ll11I, OI01l, l0II0, O1IlO, I0O11, l1OOl, l0l1I, lI11l;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    lI11l = lI11l & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    IOll0 = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    ll11I = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    OI01l = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    l0II0 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    O1IlO = this.lO010(this.lO010(III0I, v2, IO0Ol), this.lO010(O11OI, OIllI, IO0Ol), OIIO0);\n    I0O11 = this.lO010(this.lO010(IOll0, ll11I, IO0Ol), this.lO010(OI01l, l0II0, IO0Ol), OIIO0);\n    return this.lO010(O1IlO, I0O11, az) * this.normalize;\n  };\n\n  llllO.prototype.IlOOI = function(x, y, z) {\n    var IO0Ol, OIIO0, az, III0I, v2, O11OI, OIllI, IOll0, ll11I, OI01l, l0II0, O1IlO, I0O11, l1OOl, l0l1I, lI11l;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    l1OOl = l1OOl & this.lIOlO;\n    l0l1I = l0l1I & this.lIOlO;\n    lI11l = lI11l & this.lIOlO;\n    III0I = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    v2 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    O11OI = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    OIllI = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + this.II0Il]]]]];\n    IOll0 = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    ll11I = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    OI01l = this.table[this.llO11 + this.table[l1OOl + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    l0II0 = this.table[this.llO11 + this.table[l1OOl + 1 + this.table[l0l1I + 1 + this.table[this.OlI0O + this.table[lI11l + 1 + this.II0Il]]]]];\n    O1IlO = this.O0l1O(this.O0l1O(III0I, v2, IO0Ol), this.O0l1O(O11OI, OIllI, IO0Ol), OIIO0);\n    I0O11 = this.O0l1O(this.O0l1O(IOll0, ll11I, IO0Ol), this.O0l1O(OI01l, l0II0, IO0Ol), OIIO0);\n    return this.O0l1O(O1IlO, I0O11, az) * this.normalize;\n  };\n\n  llllO.prototype.IO110 = function(OOll1, II101, iz) {};\n\n  llllO.prototype.I1OOI = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += this.lOI10(x, y) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.O01Il = function(x, y, z, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += this.O0100(x, y, z) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n      z = Ol111 * z;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.O00lI = function(x, y, l0l11, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var IO0Ol, OIIO0, OOll1, II101, III0I, v2, O11OI, OIllI;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOll1 = Math.floor(x / l0l11);\n    II101 = Math.floor(y / l0l11);\n    IO0Ol = x / l0l11 - OOll1;\n    OIIO0 = y / l0l11 - II101;\n    III0I = this.I1OOI(IO0Ol * l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    v2 = this.I1OOI(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    O11OI = this.I1OOI(IO0Ol * l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    OIllI = this.I1OOI(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    return this.lO010(this.lO010(III0I, v2, 1 - IO0Ol), this.lO010(O11OI, OIllI, 1 - IO0Ol), 1 - OIIO0);\n  };\n\n  llllO.prototype.turbulence2d = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var d, i, l, O01II, lII0l, Ol11l, ref, OOI1O;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      OOI1O += 2 * (.5 - Math.abs(.5 - this.lOI10(x, y))) * d;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.periodicTurbulence2d = function(x, y, l0l11, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var IO0Ol, OIIO0, OOll1, II101, III0I, v2, O11OI, OIllI;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOll1 = Math.floor(x / l0l11);\n    II101 = Math.floor(y / l0l11);\n    IO0Ol = x / l0l11 - OOll1;\n    OIIO0 = y / l0l11 - II101;\n    III0I = this.turbulence2d(IO0Ol * l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    v2 = this.turbulence2d(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    O11OI = this.turbulence2d(IO0Ol * l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    OIllI = this.turbulence2d(IO0Ol * l0l11 + l0l11, OIIO0 * l0l11 + l0l11, IO1lI, lO1OI, Ol111, IIlII, ts);\n    return this.lO010(this.lO010(III0I, v2, 1 - IO0Ol), this.lO010(O11OI, OIllI, 1 - IO0Ol), 1 - OIIO0);\n  };\n\n  llllO.prototype.IIll0 = function(x, y, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var llI1I, d, i, l, O01II, lII0l, Ol11l, ref, OOI1O, v;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    llI1I = 1;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      v = this.lOI10(x, y) * 2;\n      if (v > 1) {\n        v = 2 - v;\n      }\n      v = Math.pow(v, 2);\n      OOI1O += llI1I * d * v;\n      llI1I = v;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = Ol111 * (x * IIlII + y * ts);\n      Ol11l = Ol111 * (y * IIlII - x * ts);\n      x = lII0l;\n      y = Ol11l;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.I100O = function(x, y, z, IO1lI, lO1OI, Ol111, IIlII, ts) {\n    var llI1I, d, i, l, l1ll0, O01II, lII0l, Ol11l, OIIlI, ref, OOI1O, v;\n    if (IO1lI == null) {\n      IO1lI = 5;\n    }\n    if (lO1OI == null) {\n      lO1OI = .5;\n    }\n    if (Ol111 == null) {\n      Ol111 = 1.9;\n    }\n    if (IIlII == null) {\n      IIlII = this.O0lIO;\n    }\n    if (ts == null) {\n      ts = this.I0OOI;\n    }\n    OOI1O = 0;\n    llI1I = 1;\n    d = 1;\n    O01II = 0;\n    for (i = l = 1, ref = IO1lI; l <= ref; i = l += 1) {\n      v = this.O0100(x, y, z) * 2;\n      if (v > 1) {\n        v = 2 - v;\n      }\n      v = Math.pow(v, 2);\n      OOI1O += llI1I * d * v;\n      llI1I = v;\n      O01II += d;\n      d *= lO1OI;\n      lII0l = x * IIlII + y * ts;\n      Ol11l = y * IIlII - x * ts;\n      l1ll0 = Ol11l * IIlII + z * ts;\n      OIIlI = z * IIlII - Ol11l * ts;\n      x = Ol111 * lII0l;\n      y = Ol111 * l1ll0;\n      z = Ol111 * OIIlI;\n    }\n    return OOI1O / O01II;\n  };\n\n  llllO.prototype.OOIIl = function(x, y, l0l11) {\n    var IO0Ol, OIIO0, OIOlO, lI01I, I1OlO, I1101, II10I, l011I, d, d1, d2, IO00I, OIl10, O0O1I, l100O, I0111, I1lOI, i, j, l, m, px, OO000, l1OOl, O0I01, l0l1I, O1l00;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    I1101 = 100;\n    II10I = 0;\n    l011I = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        O0I01 = (l1OOl - 1 + i) % l0l11;\n        O1l00 = (l0l1I - 1 + j) % l0l11;\n        px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + O1l00]]] * this.normalize * .8 + .1;\n        OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 1]]]] * this.normalize * .8 + .1;\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        d = IO00I * IO00I + l100O * l100O;\n        if (d < OIOlO) {\n          I1101 = OIOlO;\n          II10I = lI01I;\n          l011I = I1OlO;\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n        } else if (d < I1101) {\n          I1101 = d;\n          II10I = px;\n          l011I = OO000;\n        }\n      }\n    }\n    OIl10 = IO0Ol - lI01I;\n    I0111 = OIIO0 - I1OlO;\n    d1 = Math.sqrt(OIl10 * OIl10 + I0111 * I0111);\n    O0O1I = IO0Ol - II10I;\n    I1lOI = OIIO0 - l011I;\n    d2 = Math.sqrt(O0O1I * O0O1I + I1lOI * I1lOI);\n    return Math.min(d1, d2) / Math.max(d1, d2);\n  };\n\n  llllO.prototype.OO1Ol = function(x, y, l0l11) {\n    var IO0Ol, OIIO0, OIOlO, lI01I, I1OlO, lO0lO, d, IO00I, l100O, i, j, l, m, px, OO000, seed, l1OOl, O0I01, l0l1I, O1l00;\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    lO0lO = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        O0I01 = (l1OOl - 1 + i) % l0l11;\n        O1l00 = (l0l1I - 1 + j) % l0l11;\n        px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + O1l00]]] * this.normalize * .8 + .1;\n        OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 1]]]] * this.normalize * .8 + .1;\n        seed = this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[O1l00 + 17]]]];\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        d = IO00I * IO00I + l100O * l100O;\n        if (d < OIOlO) {\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n          lO0lO = seed;\n        }\n      }\n    }\n    return lO0lO * this.normalize;\n  };\n\n  llllO.prototype.Ol0I1 = function(x, y, z, l0l11) {\n    var IO0Ol, OIIO0, az, OIOlO, lI01I, I1OlO, OI100, I1101, II10I, l011I, OOI1I, d, d1, d2, IO00I, OIl10, O0O1I, l100O, I0111, I1lOI, lIO1I, l0IOI, I00I1, i, j, k, l, m, n, px, OO000, lIlIO, l1OOl, O0I01, l0l1I, O1l00, lI11l, I1OOl;\n    if (l0l11 == null) {\n      l0l11 = 100;\n    }\n    l1OOl = Math.floor(x);\n    l0l1I = Math.floor(y);\n    lI11l = Math.floor(z);\n    IO0Ol = x - l1OOl;\n    OIIO0 = y - l0l1I;\n    az = z - lI11l;\n    OIOlO = 100;\n    lI01I = 0;\n    I1OlO = 0;\n    OI100 = 0;\n    I1101 = 100;\n    II10I = 0;\n    l011I = 0;\n    OOI1I = 0;\n    for (i = l = 0; l <= 2; i = l += 1) {\n      for (j = m = 0; m <= 2; j = m += 1) {\n        for (k = n = 0; n <= 2; k = n += 1) {\n          O0I01 = ((l1OOl - 1 + i) % l0l11) & this.lIOlO;\n          O1l00 = ((l0l1I - 1 + j) % l0l11) & this.lIOlO;\n          I1OOl = ((lI11l - 1 + k) % l0l11) & this.lIOlO;\n          px = -1 + i + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[I1OOl + O1l00]]]] * this.normalize;\n          OO000 = -1 + j + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[this.table[O1l00 + I1OOl] + 1]]]] * this.normalize;\n          lIlIO = -1 + k + this.table[this.llO11 + this.table[O0I01 + this.table[this.OlI0O + this.table[this.table[O1l00 + I1OOl] + 37]]]] * this.normalize;\n        }\n        IO00I = IO0Ol - px;\n        l100O = OIIO0 - OO000;\n        lIO1I = az - lIlIO;\n        d = IO00I * IO00I + l100O * l100O + lIO1I * lIO1I;\n        if (d < OIOlO) {\n          I1101 = OIOlO;\n          II10I = lI01I;\n          l011I = I1OlO;\n          OOI1I = OI100;\n          OIOlO = d;\n          lI01I = px;\n          I1OlO = OO000;\n          OI100 = lIlIO;\n        } else if (d < I1101) {\n          I1101 = d;\n          II10I = px;\n          l011I = OO000;\n          OOI1I = lIlIO;\n        }\n      }\n    }\n    OIl10 = IO0Ol - lI01I;\n    I0111 = OIIO0 - I1OlO;\n    l0IOI = az - OI100;\n    d1 = Math.sqrt(OIl10 * OIl10 + I0111 * I0111 + l0IOI * l0IOI);\n    O0O1I = IO0Ol - II10I;\n    I1lOI = OIIO0 - l011I;\n    I00I1 = az - OOI1I;\n    d2 = Math.sqrt(O0O1I * O0O1I + I1lOI * I1lOI + I00I1 * I00I1);\n    return Math.min(d1, d2) / Math.max(d1, d2);\n  };\n\n  llllO.I0O00 = function(size) {\n    var i, index, l, ref, t, v;\n    t = [];\n    for (i = l = 0, ref = size - 1; 0 <= ref ? l <= ref : l >= ref; i = 0 <= ref ? ++l : --l) {\n      t[i] = i;\n    }\n    v = [];\n    while (true) {\n      if (t.length === 0) {\n        break;\n      }\n      index = Math.floor(Math.random() * t.length);\n      v.push(t.splice(index, 1)[0]);\n    }\n    return v;\n  };\n\n  return llllO;\n\n})();",this.IllII=new THREE.MeshLambertMaterial({color:16777215,vertexColors:THREE.VertexColors}),this.OlI00=function(){function t(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q;for(this.I110I=t,this.OOl0O=new THREE.IcosahedronGeometry(1,3),M=new llllO,k=new llllO(100),_=new llllO(200),z=new llllO(300),o=this.OOl0O.vertices[0].x-this.OOl0O.vertices[1].x,r=this.OOl0O.vertices[0].y-this.OOl0O.vertices[1].y,h=this.OOl0O.vertices[0].z-this.OOl0O.vertices[1].z,N=7,V=.28,R=this.OOl0O.vertices,d=0,O=R.length;d<O;d++)F=R[d],G=k.O01Il(F.x*N,F.y*N,F.z*N)-.5,U=_.O01Il(F.x*N,F.y*N,F.z*N)-.5,q=z.O01Il(F.x*N,F.y*N,F.z*N)-.5,F.x+=G*V,F.y+=U*V,F.z+=q*V,x=1/Math.sqrt(F.x*F.x+F.y*F.y+F.z*F.z),F.x*=x,F.y*=x,F.z*=x;for(C=this.OOl0O.vertices,I=0,m=C.length;I<m;I++)F=C[I],T=.5*Math.pow(M.O01Il(3*F.x,3*F.y,3*F.z,3),2),T-=.25*Math.pow(M.O01Il(4*F.x+10,4*F.y,4*F.z,3),4),F.x*=1-T,F.y*=1-T,F.z*=1-T;for(this.OOl0O.computeFaceNormals(),A=this.OOl0O.faces,c=0,f=A.length;c<f;c++)u=A[c],u.vertexNormals[0]=u.normal,u.vertexNormals[1]=u.normal,u.vertexNormals[2]=u.normal;for(j=this.OOl0O.vertices,p=0,g=j.length;p<g;p++)F=j[p],F.segments=[],F.IlOl1=1;for(D={},L=[],P=function(t,e,i,s){var n,l;return n=Math.min(t,e)+"-"+Math.max(t,e),null==D[n]?(l={III0I:t,v2:e,f1:s,opp1:i},D[n]=l,L.push(l)):(D[n].f2=s,D[n].opp2=i)},H=this.OOl0O.faces,w=0,y=H.length;w<y;w++)u=H[w],P(u.a,u.b,u.c,u),P(u.a,u.c,u.b,u),P(u.b,u.c,u.a,u);for(E=0,v=L.length;E<v;E++)B=L[E],x=B.f1.normal,e=(this.OOl0O.vertices[B.f1.a].x+this.OOl0O.vertices[B.f1.b].x+this.OOl0O.vertices[B.f1.c].x)/3,i=(this.OOl0O.vertices[B.f1.a].y+this.OOl0O.vertices[B.f1.b].y+this.OOl0O.vertices[B.f1.c].y)/3,s=(this.OOl0O.vertices[B.f1.a].z+this.OOl0O.vertices[B.f1.b].z+this.OOl0O.vertices[B.f1.c].z)/3,n=(this.OOl0O.vertices[B.f2.a].x+this.OOl0O.vertices[B.f2.b].x+this.OOl0O.vertices[B.f2.c].x)/3,l=(this.OOl0O.vertices[B.f2.a].y+this.OOl0O.vertices[B.f2.b].y+this.OOl0O.vertices[B.f2.c].y)/3,a=(this.OOl0O.vertices[B.f2.a].z+this.OOl0O.vertices[B.f2.b].z+this.OOl0O.vertices[B.f2.c].z)/3,o=n-e,r=l-i,h=a-s,(S=x.x*o+x.y*r+x.z*h)>0&&(k=B.f1.normal,_=B.f2.normal,S=Math.max(-1,Math.min(1,k.x*_.x+k.y*_.y+k.z*_.z)),b=1-Math.acos(S)/Math.PI,this.OOl0O.vertices[B.III0I].IlOl1*=b,this.OOl0O.vertices[B.v2].IlOl1*=b)}return t.prototype.IOO0l=function(){return new THREE.Mesh(this.OOl0O,IllII)},t.prototype.darkenColor=function(t,e){var i,s,n,l;return s=Math.min(1,Math.max(0,1-e)),l=(t>>16&255)*s,n=(t>>8&255)*s,i=(255&t)*s,l<<16|n<<8|i},t.prototype.III10=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w;for(v=new l000I(t),t=v.next(),s=Oll0O.hsvToRgbHex(t,.1+.2*Math.pow(v.next(),2),1),l=Oll0O.hsvToRgbHex(t,.1+.2*Math.pow(v.next(),2),.8),n=Oll0O.hsvToRgbHex(t,.1+.2*Math.pow(v.next(),2),.6),a=Oll0O.hsvToRgbHex(t,.1+.2*Math.pow(v.next(),2),.4),y=new llllO(e.next()),c=.5+1.5*e.next(),p=.5+1.5*e.next(),O=.5+1.5*e.next(),I=function(t){var e;return e=y.O01Il(t.x*c,t.y*p,t.z*O,3),e<.3?s:e<.5?n:e<.6?l:a},w=this.OOl0O.faces,f=0,g=w.length;f<g;f++)d=w[f],r=I(this.OOl0O.vertices[d.a]),h=I(this.OOl0O.vertices[d.b]),u=I(this.OOl0O.vertices[d.c]),b=((r>>16&255)+(h>>16&255)+(u>>16&255))/3|0,m=((r>>8&255)+(h>>8&255)+(u>>8&255))/3|0,i=((255&r)+(255&h)+(255&u))/3|0,o=b<<16|m<<8|i,r=this.darkenColor(o,1-this.OOl0O.vertices[d.a].IlOl1),h=this.darkenColor(o,1-this.OOl0O.vertices[d.b].IlOl1),u=this.darkenColor(o,1-this.OOl0O.vertices[d.c].IlOl1),d.vertexColors=[],d.vertexColors[0]=new THREE.Color(r),d.vertexColors[1]=new THREE.Color(h),d.vertexColors[2]=new THREE.Color(u);return this.OOl0O},t}(),this.O00I0=function(){function t(t){var e,i,s,n;for(this.I110I=t,this.I0llI=new THREE.Group,this.scale=10,this.number=20,this.OIl0O=new O1IIl(4e3),this.seed=-1,this.models=[],i=0;i<=19;i+=1)this.models.push(new OlI00(this.I110I));for(s=0,n=this.number*this.number-1;s<=n;s+=1)e=this.models[Math.floor(Math.random()*this.models.length)].IOO0l(),e.position.x=80*(Math.random()-.5),e.position.y=80*(Math.random()-.5),e.rotation.x=Math.random()*Math.PI*2,e.rotation.y=Math.random()*Math.PI*2,this.I0llI.add(e);this.fadein=1}return t.prototype.rebuild=function(t){var e,i,s,n,l,a,o,r,h;for(this.I0llI.children=[],h=s=0,a=this.number-1;0<=a?s<=a:s>=a;h=0<=a?++s:--s)for(r=n=0,o=this.number-1;0<=o?n<=o:n>=o;r=0<=o?++n:--n)h*this.number+r,r>=10?(e=this.I0llI.children[r-10+h*this.number],i=this.models[e.model].IOO0l(),i.model=e.model,i.rotation.x=e.rotation.x,i.rotation.y=e.rotation.y,this.I0llI.add(i)):h>=10?(e=this.I0llI.children[(h-10)*this.number+r],i=this.models[e.model].IOO0l(),i.model=e.model,i.rotation.x=e.rotation.x,i.rotation.y=e.rotation.y,this.I0llI.add(i)):(l=t.O1010(this.models.length),i=this.models[l].IOO0l(),i.model=l,i.rotation.x=t.next()*Math.PI*2,i.rotation.y=t.next()*Math.PI*2,this.I0llI.add(i))},t.prototype.mod=function(t,e){return t-e*Math.floor(t/e)},t.prototype.Il11I=function(t){var e,i,s,n,l,a,o;if(t!==this.seed){if(this.seed=t,this.OIl0O=new O1IIl(this.seed,this.I110I.OlO0I,this.I110I.mode),a=new l000I(this.seed),i=a.next(),!this.models_updated){for(o=this.models,s=0,n=o.length;s<n;s++)l=o[s],e=i,l.III10(e,a);this.models_updated=!0}a=new l000I(this.seed),this.rebuild(a),this.fadein=0,this.fadeout=!1}},t.prototype.III10=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b;for(y=this.scale,
this.fadeout?this.fadein=Math.max(0,this.fadein-1/60):this.fadein=Math.min(1,this.fadein+1/60),p=e/y,O=i/y,I=Math.round(p-this.number/2),c=Math.round(O-this.number/2),g={},n=u=I,m=I+this.number-1;u<=m;n=u+=1)for(r=d=c,f=c+this.number-1;d<=f;r=d+=1)a=this.mod(n,this.number),o=this.mod(r,this.number),s=this.I0llI.children[a*this.number+o],l=this.mod(n+this.OIl0O.size,2*this.OIl0O.size)-this.OIl0O.size,h=this.mod(r+this.OIl0O.size,2*this.OIl0O.size)-this.OIl0O.size,g=this.OIl0O.I00IO(l,h),g.on?null!=g.respawn&&t<=60*g.respawn-60?s.visible=!1:(s.visible=!0,v=Math.max(.001,g.size*y*this.fadein),s.position.x=(g.x+n-l)*y,s.position.y=(g.y+r-h)*y,s.position.z=0,s.scale.set(v,v,v),s.rotation.z=Date.now()%2e4/2e4*Math.PI*2,null!=g.respawn&&t>60*g.respawn-60&&t<60*g.respawn?(b=(t-(60*g.respawn-60))/60,b=Math.pow(b,.5),v=Math.max(.001,v*b),s.scale.set(v,v,v)):g.respawn=0):s.visible=!1},t}(),Scene=function(){function t(t,e,i,s){var n;this.I110I=t,this.seed=e,this.lIOll=i,this.welcome=null!=s&&s,this.size=13,this.IOO1I=new THREE.Scene,this.ll1Ol=1,this.I1IOI=new O00I0(this.I110I),this.welcome||this.IOO1I.add(this.I1IOI.I0llI),this.OO1I0=new lOIl1(this.I110I),this.IOO1I.add(this.OO1I0.I0llI),this.collectibles=new Collectibles(this.I110I),this.IOO1I.add(this.collectibles.I0llI),this.IO010=this.I110I.IO010,n=this.I110I.mode.II1l1.ships_by_code[this.IO010.type.code],null==n&&(n=this.I110I.mode.II1l1.getDefaultShip()),this.ship=new l0Il0(n,this.I110I.hue/360),this.welcome||this.IOO1I.add(this.ship.I0llI),this.ll0lO=new l0I11(this.I110I),this.ll0lO.IO010=this.IO010,this.IOO1I.add(this.ll0lO.I0llI),this.IlI00=new Explosions(this),this.IOO1I.add(this.IlI00.I1Oll),this.IOO1I.add(this.IlI00.IlOl1),this.laserticles=new Laserticles(this),this.IOO1I.add(this.laserticles.I1Oll),this.IlOl1=new THREE.DirectionalLight(16777215),this.IlOl1.intensity=1.1,this.IlOl1.position.set(-1,1,1.5),this.IOO1I.add(this.IlOl1),this.welcome||(this.chat_bubble=new ChatBubble(this.I110I,this.I110I.hue,"OYDLQ"),this.IOO1I.add(this.chat_bubble.l1OI0)),this.fcount=0,this.background=new BackgroundScene(this.I110I,this.seed,this.lIOll,this.welcome),this.color=Oll0O.hsvToRgbHex((120*Math.random()+180)/360,.5,.05),this.welcome||this.lIOll.add(function(t){return function(){return t.I1IOI.Il11I(t.seed)}}(this)),this.lIOll.add(function(t){return function(){return t.Il11I(t.seed)}}(this)),this.welcome&&!this.I110I.is_app&&(this.demo=new Demo(this.I110I,this)),this.shake={x:0,y:0,OI10I:0,OI0O1:0,r:0,IOlOI:0}}return t.prototype.startControl=function(){return this.control=new l0Ill(this.I110I,this.IO010)},t.prototype.Il11I=function(t){return this.seed=t,this.color=Oll0O.hsvToRgbHex((120*new l000I(this.seed).next()+180)/360,.5,.1)},t.prototype.setHue=function(t){if(null!=this.chat_bubble)return this.chat_bubble.setHue(t)},t.prototype.IOOOO=function(){if(null!=this.I110I.display&&(this.I110I.display.width!==this.width||this.I110I.display.height!==this.height)&&(this.width=this.I110I.display.width,this.height=this.I110I.display.height,this.IOO11=new THREE.PerspectiveCamera(45,this.width/this.height,1,1e3),this.IOO11.position.z=70,this.welcome))return this.IOO11.position.z=140},t.prototype.mod=function(t,e){return t-e*Math.floor(t/e)},t.prototype.l10O0=function(){},t.prototype.say=function(t){return this.chat_bubble.l1O11(t)},t.prototype.shakeCamera=function(t,e,i){var s,n,l,a,o;if(this.I110I.settings.check("shake")&&(a=Math.abs(this.I110I.IO010.status.x-t),o=Math.abs(this.I110I.IO010.status.y-e),a=Math.min(a,this.I110I.size-a),o=Math.min(o,this.I110I.size-o),!((l=Math.sqrt(a*a+o*o))>25)))return s=Math.max(0,1-l/25)*i*.5,n=2*Math.random()*Math.PI,this.shake.OI10I+=Math.cos(n)*s,this.shake.OI0O1+=Math.sin(n)*s,this.shake.IOlOI+=.08*s*(Math.random()-.5)},t.prototype.ll111=function(t){var e,i,s,n,l,a,o,r,h;if(this.IOOOO(),null!=this.IOO11){for(null!=this.station&&this.station.III10(),null!=this.demo&&this.demo.III10(),o=this.ll0lO.O11ll(),this.ll0lO.O0llI(o),null!=this.control&&this.control.O11ll(o),n=1,a=o;n<=a;n+=1)this.shake.x+=this.shake.OI10I,this.shake.y+=this.shake.OI0O1,this.shake.r+=this.shake.IOlOI,l=.2,this.shake.OI10I-=this.shake.x*l,this.shake.OI0O1-=this.shake.y*l,this.shake.IOlOI-=this.shake.r*l,this.shake.OI10I*=.7,this.shake.OI0O1*=.7,this.shake.IOlOI*=.7;return this.IOO11.position.x=this.ll0lO.IOO11.x+this.shake.x,this.IOO11.position.y=this.ll0lO.IOO11.y+this.shake.y,this.IOO11.fov=45*this.ll0lO.IOO11.zoom,this.IOO11.updateProjectionMatrix(),this.IlI00.III10(),null!=this.snow&&(this.snow.I1Oll.position.x=this.IOO11.position.x,this.snow.I1Oll.position.y=this.IOO11.position.y,this.snow.II0lI(this.background.width,this.background.height)),(this.IO010.type.code!==this.IO010.status.type||Math.abs(this.IO010.status.hue/360-this.ship.hue)>.01||this.IO010.status.l10lI&&!this.ship.ecp_verified)&&(e=this.IO010.type.code!==this.IO010.status.type,this.IO010.setType(this.I110I.mode.O1Ill.types_by_code[this.IO010.status.type]),this.IOO1I.remove(this.ship.I0llI),this.ship.dispose(),this.ship=new l0Il0(this.I110I.mode.II1l1.ships_by_code[this.IO010.type.code],this.IO010.status.hue/360),this.IO010.status.l10lI&&(this.ship.ecp_verified=!0,this.ship.finish=this.I110I.l10lI.custom.finish),this.IOO1I.add(this.ship.I0llI),this.ship.bump(this.ll0lO.ll01O),e&&this.I110I.OlIl1.beep(.5)),r=this.ll0lO.IOO11.x,h=this.ll0lO.IOO11.y,i=Math.sqrt(r*r+h*h),r>this.I110I.Ill01/2?r=this.I110I.Ill01-r:r<-this.I110I.Ill01/2&&(r=-this.I110I.Ill01-r),h>this.I110I.Ill01/2?h=this.I110I.Ill01-h:h<-this.I110I.Ill01/2&&(h=-this.I110I.Ill01-h),s=Math.sqrt(r*r+h*h),i>this.I110I.Ill01/2?this.IlOl1.position.set(-r,-h,s):this.IlOl1.position.set(-r,-h,i-10),this.ship.I0llI.rotation.x=this.IO010.I0100,this.ship.I0llI.rotation.y=.4*this.IO010.O1001,this.ship.I0llI.rotation.z=this.IO010.l0l1O.r+Math.PI,this.ship.I0llI.position.x=this.IO010.status.x,this.ship.I0llI.position.y=this.IO010.status.y,this.ship.O1IlI.visible=this.IO010.l0l1O.up,this.ship.I0llI.visible=this.IO010.status.alive,null!=this.IO010.pods&&this.IO010.pods.updateModels(this.IO010.status.alive),this.ship.l10lI=this.IO010.status.l10lI,this.ship.propstep(this.IO010.l0l1O.up||this.IO010.status.dash),this.ship.invulnerable=this.IO010.status.invulnerable,this.ship.III10(this.ll0lO.ll01O),null!=this.chat_bubble&&(this.chat_bubble.l1OI0.position.x=this.IO010.status.x,this.chat_bubble.l1OI0.position.y=this.IO010.status.y+6,this.chat_bubble.IO0O1()),this.I1IOI.III10(this.ll0lO.ll01O,this.IOO11.position.x,this.IOO11.position.y),this.OO1I0.III10(this.ll0lO),this.collectibles.III10(this.ll0lO),this.IO010.O0lOI(),t.sortObjects=!1,this.background.ll111(t,this.ll0lO.ll01O),null!=this.snow&&this.snow.III10(.12*this.background.Ill1O,.12*this.background.llIIO,this.I110I.IOO1I.ll0lO.ll01O/60),t.render(this.IOO1I,this.IOO11)}},t.prototype.dispose=function(){return this.background.dispose()},t}(),this.ChatBubble=function(){function t(t,e,i){this.I110I=t,this.hue=null!=e?e:0,this.text=null!=i?i:" ",this.score=0,this.OO1I0=0,this.shield=0,this.rank=0,this.level=1,this.canvas=document.createElement("canvas"),this.size=64,this.I110I.is_mobile_app&&(this.size=128),this.canvas.width=this.size*this.text.length,this.canvas.height=this.size,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({color:16777215,map:this.texture,transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.base_size=this.I110I.is_mobile_app?5:3,this.l1OI0.scale.set(this.base_size,this.base_size,1),this.l1OI0.visible=!1,this.updateTexture(),this.fadeout=0}return t.prototype.setHue=function(t){this.hue=t},t.prototype.l1O11=function(t){return this.text=t,this.updateTexture(),this.fadeout=Date.now()+3e3},t.prototype.IO0O1=function(){var t,e;return Date.now()>this.fadeout?this.l1OI0.visible=!1:(this.l1OI0.visible=!0,e=Math.max(0,Math.min(1,(this.fadeout-Date.now())/500)),this.material.opacity=e,t=this.text.length,3===t&&(t=4),this.l1OI0.scale.set(this.base_size*e*t,this.base_size*e,1))},t.prototype.updateTexture=function(){var t,e,i,s,n,l,a,o,r,h,u,d;if(a=this.text.length,o=0,3===a&&(a=4,o=this.size/2),this.canvas.width=this.size*a,this.canvas.height=this.size,this.l1OI0.scale.set(a*this.base_size,this.base_size,1),this.background="hsla("+this.hue+",50%,30%,.5)",this.medium="hsla("+this.hue+",40%,50%,.5)",this.color="hsla("+this.hue+",40%,75%,1)",e=this.canvas.getContext("2d"),e.fillStyle=this.background,ChatButton.bubble(e,0,0,this.canvas.width,this.canvas.height,.1*this.canvas.height),e.fill(),e.lineWidth=2,e.strokeStyle=this.medium,e.stroke(),null!=this.I110I.vocabulary){for(e.font="24pt Glyphs",e.fillStyle=this.color,e.textBaseline="middle",e.textAlign="center",i=n=0,r=this.text.length-1;0<=r?n<=r:n>=r;i=0<=r?++n:--n)t=this.text.charAt(i),null!=(d=this.I110I.vocabulary[t])&&(s=d.icon,"GG"===s?(e.font=24*this.size/64+"pt Play",e.fillText(s,this.size/2+o+this.size*i,36*this.size/64)):(e.font=24*this.size/64+"pt SBGlyphs",e.fillText(s,this.size/2+o+this.size*i,36*this.size/64)));for(i=l=0,h=this.text.length-1;0<=h?l<=h:l>=h;i=0<=h?++l:--l)if(t=this.text.charAt(i),null!=(d=this.I110I.vocabulary[t])){for(u=12*this.size/64,e.font=u+"pt Play";u>6&&e.measureText(d.text).width>56*this.size/64;)u-=1,e.font=u+"pt Play";e.fillText(d.text,this.size/2+o+this.size*i,10*this.size/64)}}return this.texture.needsUpdate=!0},t}(),this.Demo=function(){function t(t,e){this.I110I=t,this.IOO1I=e,this.ll0lO=this.IOO1I.ll0lO}return t.prototype.createFormation=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p;for(l=1+Math.floor(5*Math.pow(Math.random(),1.5)),a=2*Math.random()*Math.PI,t=2*Math.random()*Math.PI,n=Math.floor(3*Math.pow(Math.random(),1))+1,u=Math.floor(Math.random()*n)+1,u+=100*n,d=0-110*Math.cos(t),c=-60-110*Math.sin(t),e=Math.floor(360*Math.random()),o=2.5*O1Ill.types_by_code[u].radius,h=[],i=s=1,r=l;1<=r?s<=r:s>=r;i=1<=r?++s:--s)I=d+Math.cos(a+i/l*Math.PI*2)*o,p=c+Math.sin(a+i/l*Math.PI*2)*o,h.push(this.Il0IO(I,p,u,t,e));return h},t.prototype.Il0IO=function(t,e,i,s,n){var l;return l=new l0I10,l.x=t,l.y=e,l.OI10I=0,l.OI0O1=0,l.r=s,l.IOlOI=0,l.alive=!0,l.up=!0,l.hue=n,l.angle=Math.round(360*s/2/Math.PI),l.type=i,l.lllll=this.IOO1I.ll0lO.ll01O,this.ll0lO.addDemoShip(l)},t.prototype.III10=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w;if(null!=this.station&&(this.station.III10(),t=Date.now()%1e6/1e6*Math.PI*2,b=300*Math.cos(t),w=300*Math.sin(t)-60,this.station.I0llI.position.x=b,this.station.I0llI.position.y=w),this.ll0lO.ships.length>0){if(g=this.ll0lO.ships[0],Math.random()<0)for(v=!g.OIIIl.status.up,p=this.ll0lO.ships,a=0,o=p.length;a<o;a++)y=p[a],y.OIIIl.status.up=v;if(n=g.OIIIl.status.x,l=g.OIIIl.status.y+60,s=Math.sqrt(n*n+l*l),Math.random()<.02&&s<40)for(i=Math.pow(Math.random(),16),i-=Math.pow(Math.random(),16),e=(g.OIIIl.status.angle+360+180*i)%360,O=this.ll0lO.ships,d=0,r=O.length;d<r;d++)y=O[d],y.OIIIl.status.angle=e}for(m=this.ll0lO.ships,I=0,h=m.length;I<h;I++)g=m[I],g.OIIIl.status.lllll=this.IOO1I.ll0lO.ll01O,Math.random()<.01&&(g.OIIIl.status.llOIl=!g.OIIIl.status.llOIl),g.OIIIl.status.llOIl&&this.shipShootingEval(g);for(f=this.ll0lO.ships,c=0,u=f.length;c<u;c++)if(g=f[c],n=g.OIIIl.status.x,l=g.OIIIl.status.y+60,(s=Math.sqrt(n*n+l*l))>110){this.ll0lO.removeShip(g);break}if(this.ll0lO.ships.length<1)return this.createFormation()},t.prototype.shipShootingEval=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(i=s=0,r=t.OIIIl.instance.lasers.length-1;s<=r;i=s+=1)if(l=t.OIIIl.instance.lasers[i],null==l.next_shot&&(l.next_shot=0),this.ll0lO.ll01O>=l.next_shot)for(void 0!==a&&null!==a||(a=[]),l.next_shot=this.ll0lO.ll01O+60/l.type.rate,I=Math.cos(t.OIIIl.status.r),c=Math.sin(t.OIIIl.status.r),u=c,d=-I,p=t.OIIIl.status.x-l.type.y*I+l.type.x*u,O=t.OIIIl.status.y-l.type.y*c+l.type.x*d,m=l.type.z,n=o=0,h=l.type.number-1;0<=h?o<=h:o>=h;n=0<=h?++o:--o)e=t.OIIIl.status.r+l.type.angle/180*Math.PI,l.type.number>1&&(e+=l.type.spread*(n/(l.type.number-1)-.5)/180*Math.PI),this.IOO1I.laserticles.llOIl({x:p,y:O,z:m,OI10I:t.OIIIl.status.OI10I,OI0O1:t.OIIIl.status.OI0O1,IlOlO:Oll0O.hsvToRgbHex(t.shipmodel.hue,.5,1),type:0,angle:e+(Math.random()-.5)*l.type.error/180*Math.PI,speed:l.speed,damage:l.damage/2,IOOOI:120,I0O0I:this.ll0lO.ll01O})},t}(),this.Splash=function(){function t(t,e,i,s){this.I110I=t,this.seed=e,this.lIOll=i,this.welcome=null!=s&&s,this.size=13,this.IOO1I=new THREE.Scene,this.ll1Ol=1,this.I1IOI=new O00I0(this.I110I),this.OO1I0=new lOIl1(this.I110I),this.IOO1I.add(this.OO1I0.I0llI),this.IO010=this.I110I.IO010,this.ship=new l0Il0(II1l1.ships_by_code[this.IO010.type.code],this.I110I.hue/360),this.welcome||this.IOO1I.add(this.ship.I0llI),this.ll0lO=new l0I11(this.I110I),this.ll0lO.IO010=this.IO010,this.IOO1I.add(this.ll0lO.I0llI),this.IlI00=new Explosions(this),this.IOO1I.add(this.IlI00.I1Oll),this.IOO1I.add(this.IlI00.IlOl1),this.laserticles=new Laserticles(this),this.IOO1I.add(this.laserticles.I1Oll),this.IlOl1=new THREE.DirectionalLight(16777215),this.IlOl1.position.set(-1,1,1.5),this.IOO1I.add(this.IlOl1),this.welcome||(this.chat_bubble=new ChatBubble(this.I110I,this.I110I.hue,"OYDLQ"),this.IOO1I.add(this.chat_bubble.l1OI0)),this.fcount=0,this.background=new BackgroundScene(this.I110I,this.seed,this.lIOll,this.welcome),this.color=Oll0O.hsvToRgbHex((120*Math.random()+180)/360,.5,.05),this.welcome||this.lIOll.add(function(t){return function(){return t.I1IOI.Il11I(t.seed)}}(this)),this.lIOll.add(function(t){return function(){return t.Il11I(t.seed)}}(this)),this.shake={x:0,y:0,OI10I:0,OI0O1:0},this.demo=new SplashDemo(this.I110I,this),setTimeout(function(t){return function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(document.getElementById("player").style.display="none",document.getElementById("logo").style["max-width"]="90%",d=document.getElementsByClassName("mobile-view"),e=0,l=d.length;e<l;e++)t=d[e],t.style.display="none";for(I=document.getElementsByClassName("social"),i=0,a=I.length;i<a;i++)t=I[i],t.style.display="none";for(c=document.getElementsByClassName("hT79D"),s=0,o=c.length;s<o;s++)t=c[s],t.style.display="none";for(p=document.getElementsByClassName("followtools"),n=0,r=p.length;n<r;n++)t=p[n],t.style.display="none";for(O=document.getElementsByClassName("changelog-new"),m=[],u=0,h=O.length;u<h;u++)t=O[u],m.push(t.style.display="none");return m}}(),5e3)}return t.prototype.startControl=function(){return this.control=new l0Ill(this.I110I,this.IO010)},t.prototype.Il11I=function(t){return this.seed=t,this.color=Oll0O.hsvToRgbHex((120*new l000I(this.seed).next()+180)/360,.5,.1)},t.prototype.IOOOO=function(){if(null!=this.I110I.display&&(this.I110I.display.width!==this.width||this.I110I.display.height!==this.height))return this.width=this.I110I.display.width,this.height=this.I110I.display.height,this.IOO11=new THREE.PerspectiveCamera(45,this.width/this.height,1,1e3),this.IOO11.position.z=70},t.prototype.mod=function(t,e){return t-e*Math.floor(t/e)},t.prototype.l10O0=function(){},t.prototype.say=function(t){return this.chat_bubble.l1O11(t)},t.prototype.ll111=function(t){var e,i,s,n,l,a,o,r,h,u;if(this.IOOOO(),null!=this.IOO11){for(document.getElementById("content").style["margin-top"]="50px",r=240,null!=this.demo&&this.demo.III10(),this.ll0lO.ll01O<r&&(a=this.ll0lO.O11ll()),this.ll0lO.IOO11.zoom=.4,l=this.ll0lO.ships,s=0,n=l.length;s<n;s++)o=l[s],o.shipmodel.propstep(!0);return Math.random()<.06&&this.ll0lO.ll01O<r&&this.IlI00.explode(10*Math.random()-5,10*Math.random()-5-60,360*Math.random(),1+1*Math.random()),this.ll0lO.O0llI(a),null!=this.control&&this.control.O11ll(a),this.IOO11.position.x=this.ll0lO.IOO11.x,this.IOO11.position.y=this.ll0lO.IOO11.y,this.IOO11.fov=45*this.ll0lO.IOO11.zoom,this.IOO11.updateProjectionMatrix(),this.ll0lO.ll01O<r&&this.IlI00.III10(),this.IO010.type.code!==this.IO010.status.type&&(this.IO010.setType(O1Ill.types_by_code[this.IO010.status.type]),this.IOO1I.remove(this.ship.I0llI),this.ship.dispose(),this.ship=new l0Il0(II1l1.ships_by_code[this.IO010.type.code],this.IO010.status.hue/360),this.IOO1I.add(this.ship.I0llI),this.ship.bump(this.ll0lO.ll01O),this.I110I.OlIl1.beep(.5)),h=this.IO010.status.x,u=this.IO010.status.y,e=Math.sqrt(h*h+u*u),h>this.I110I.Ill01/2?h=this.I110I.Ill01-h:h<-this.I110I.Ill01/2&&(h=-this.I110I.Ill01-h),u>this.I110I.Ill01/2?u=this.I110I.Ill01-u:u<-this.I110I.Ill01/2&&(u=-this.I110I.Ill01-u),i=Math.sqrt(h*h+u*u),e>this.I110I.Ill01/2?this.IlOl1.position.set(-h,-u,i):this.IlOl1.position.set(-h,-u,e-10),this.ship.I0llI.rotation.x=this.IO010.I0100,this.ship.I0llI.rotation.y=.4*this.IO010.O1001,this.ship.I0llI.rotation.z=this.IO010.l0l1O.r+Math.PI,this.ship.I0llI.position.x=this.IO010.status.x,this.ship.I0llI.position.y=this.IO010.status.y,this.ship.O1IlI.visible=this.IO010.l0l1O.up,this.ship.I0llI.visible=this.IO010.status.alive,this.ship.propstep(this.IO010.l0l1O.up),this.ship.III10(this.ll0lO.ll01O),null!=this.chat_bubble&&(this.chat_bubble.l1OI0.position.x=this.IO010.status.x,this.chat_bubble.l1OI0.position.y=this.IO010.status.y+6,this.chat_bubble.IO0O1()),this.I1IOI.III10(this.ll0lO.ll01O,this.IOO11.position.x,this.IOO11.position.y),this.OO1I0.III10(this.ll0lO),this.IO010.O0lOI(),t.sortObjects=!1,this.background.ll111(t,this.ll0lO.ll01O),t.render(this.IOO1I,this.IOO11)}},t}(),this.SplashDemo=function(){function t(t,e){this.I110I=t,this.IOO1I=e,this.ll0lO=this.IOO1I.ll0lO,this.Il0IO(4,-66,101,.9*Math.PI,0),this.Il0IO(7,-60,201,1.05*Math.PI,120),this.Il0IO(-115,-60,602,-.15*Math.PI,180),this.Il0IO(-5,-63,401,-.1*Math.PI,200)}return t.prototype.createFormation=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p;for(l=1+Math.floor(5*Math.pow(Math.random(),1.5)),a=2*Math.random()*Math.PI,t=2*Math.random()*Math.PI,n=Math.floor(6*Math.pow(Math.random(),1.5))+1,u=Math.floor(Math.random()*n)+1,u+=100*n,d=0-80*Math.cos(t),c=-60-80*Math.sin(t),e=Math.floor(360*Math.random()),o=2.5*O1Ill.types_by_code[u].radius,h=[],i=s=1,r=l;1<=r?s<=r:s>=r;i=1<=r?++s:--s)I=d+Math.cos(a+i/l*Math.PI*2)*o,p=c+Math.sin(a+i/l*Math.PI*2)*o,h.push(this.Il0IO(I,p,u,t,e));return h},t.prototype.Il0IO=function(t,e,i,s,n){var l;return l=new l0I10,l.x=t,l.y=e,l.OI10I=0,l.OI0O1=0,l.r=s,l.IOlOI=0,l.alive=!0,l.up=!1,l.llOIl=!0,l.hue=n,l.angle=Math.round(360*s/2/Math.PI),l.type=i,l.lllll=this.IOO1I.ll0lO.ll01O,this.ll0lO.addDemoShip(l)},t.prototype.III10=function(){var t,e,i,s,n,l,a,o,r;for(this.ll0lO.ships[3].OIIIl.I0100=.5,this.ll0lO.ships[0].OIIIl.I0100=.2,this.ll0lO.ships[1].OIIIl.I0100=-.4,a=this.ll0lO.ships,i=0,s=a.length;i<s;i++)r=a[i],r.OIIIl.status.lllll=this.IOO1I.ll0lO.ll01O,Math.random()<.01&&(r.OIIIl.status.llOIl=!r.OIIIl.status.llOIl),r.OIIIl.status.llOIl&&this.shipShootingEval(r);for(o=this.ll0lO.ships,l=0,n=o.length;l<n&&(r=o[l],t=r.OIIIl.status.x,e=r.OIIIl.status.y+60,!(Math.sqrt(t*t+e*e)>100));l++);if(this.ll0lO.ships.length<1)return this.createFormation()},t.prototype.shipShootingEval=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(i=s=0,r=t.OIIIl.instance.lasers.length-1;s<=r;i=s+=1)if(l=t.OIIIl.instance.lasers[i],null==l.next_shot&&(l.next_shot=0),this.ll0lO.ll01O>=l.next_shot)for(void 0!==a&&null!==a||(a=[]),l.next_shot=this.ll0lO.ll01O+60/l.type.rate,I=Math.cos(t.OIIIl.status.r),c=Math.sin(t.OIIIl.status.r),u=c,d=-I,p=t.OIIIl.status.x-l.type.y*I+l.type.x*u,O=t.OIIIl.status.y-l.type.y*c+l.type.x*d,m=l.type.z,n=o=0,h=l.type.number-1;0<=h?o<=h:o>=h;n=0<=h?++o:--o)e=t.OIIIl.status.r+l.type.angle/180*Math.PI,l.type.number>1&&(e+=l.type.spread*(n/(l.type.number-1)-.5)/180*Math.PI),this.IOO1I.laserticles.llOIl({x:p,y:O,z:m,OI10I:t.OIIIl.status.OI10I,OI0O1:t.OIIIl.status.OI0O1,IlOlO:Oll0O.hsvToRgbHex(t.shipmodel.hue,.5,1),type:0,angle:e+(Math.random()-.5)*l.type.error/180*Math.PI,speed:l.speed,damage:l.damage,IOOOI:120,I0O0I:this.ll0lO.ll01O})},t}(),this.RIPPlate=function(){function t(t,e){this.name=t,this.l10lI=e,this.I1llO=Date.now(),this.canvas=document.createElement("canvas"),this.canvas.width=256,this.canvas.height=256,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.l1IOO(),this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({color:16777215,map:this.texture,transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(12,12,1)}return t.prototype.III10=function(){var t,e;return e=Math.max(0,Math.min(1,(Date.now()-this.I1llO)/5e3)),1===e?this.remove=!0:(t=Math.max(.001,Math.pow(1-e,.25)),this.material.opacity=.5*t,this.l1OI0.scale.set(12*t,12*t,1*t))},t.prototype.dispose=function(){return this.OOl0O.dispose(),this.material.dispose(),this.texture.dispose()},t.prototype.l1IOO=function(t){var e,i,s,n;return e=this.canvas.getContext("2d"),e.fillStyle="#FFF",n=this.canvas.width,e.font=Math.round(.4*n)+"pt SBGlyphs",e.textBaseLine="middle",e.textAlign="center",e.fillText("[",.5*n,.45*n),e.globalCompositeOperation="source-in",e.fillRect(0,0,n,n),e.globalCompositeOperation="source-over",e.font=Math.round(.08*n)+"pt Play",e.fillText(this.name,n/2,.9*n),null!=this.l10lI?(i=.2*n,s=I1O00.I0II1(this.l10lI.badge,this.l10lI.laser,this.l10lI.finish,i,this.l10lI.hue),s.complete?e.drawImage(s,n/2-i,.7*n-i/2,2*i,i):e.fillText("R.I.P",n/2,.75*n),s.onload=function(e){return function(){return e.l1IOO(t)}}(this)):e.fillText("R.I.P",n/2,.75*n),this.texture.needsUpdate=!0},t}(),this.MobileAsteroid=function(){function t(t,e){this.I110I=t,this.size=e.getUint8(1),this.model_size=this.size,this.id=e.getUint16(2,!0),this.ll0lO=this.I110I.IOO1I.ll0lO,this.read(e),this.III10(e),this.createModel(),this.pop=0,this.killed=!1,this.I0O0I=this.I110I.IOO1I.ll0lO.ll01O}return t.prototype.III10=function(t){var e,i,s;if((s=t.getUint32(4,!0))>this.ll0lO.ll01O)this.O0II0=t;else if(s<this.ll0lO.ll01O){if(this.read(t),this.ll0lO.ll01O-s<30)for(e=s+1,i=this.ll0lO.ll01O;e<=i;e+=1)this.l1O00()}else this.read(t)},t.prototype.read=function(t){return this.model_size=t.getUint8(1),this.x=t.getFloat32(8,!0),this.y=t.getFloat32(12,!0),this.OI10I=t.getFloat32(16,!0),this.OI0O1=t.getFloat32(20,!0),this.last_update=this.ll0lO.ll01O},t.prototype.createModel=function(){var t;return this.l1OI0=this.I110I.IOO1I.I1IOI.models[this.id%this.I110I.IOO1I.I1IOI.models.length].IOO0l(),t=new l000I(this.id),this.l1OI0.rotation.x=t.next()*Math.PI*2,this.l1OI0.rotation.z=t.next()*Math.PI*2,this.rotation_period=200+Math.round(1800*t.next()),this.I110I.IOO1I.IOO1I.add(this.l1OI0)},t.prototype.l1O00=function(){if(null!=this.O0II0&&this.ll0lO.ll01O>=this.O0II0.getUint32(4,!0)&&(this.read(this.O0II0),this.O0II0=null),this.x+=this.OI10I,this.y+=this.OI0O1,this.ll0lO.ll01O>this.last_update+90)return this.killed=!0},t.prototype.dispose=function(){if(null!=this.l1OI0)return this.I110I.IOO1I.IOO1I.remove(this.l1OI0)},t.prototype.updateModel=function(){var t,e,i;if(null!=this.l1OI0)return i=this.model_size/100*10,null!=this.model_resize&&(i*=this.model_resize),this.pop<15?(this.pop++,e=Math.sqrt(this.pop/15)*i,this.l1OI0.scale.set(e,e,e)):this.l1OI0.scale.set(i,i,i),t=this.I110I.IOO1I.ll0lO.ll01O-this.I0O0I,this.l1OI0.rotation.y=t%this.rotation_period/this.rotation_period*2*Math.PI,this.l1OI0.position.x=this.x,this.l1OI0.position.y=this.y,this.l1OI0.position.z=0,this.l1OI0.visible=!0,this.ll0lO.I1I1O(this.l1OI0)},t}(),Math.fmod=function(t,e){return t-e*Math.floor(t/e)},Math.normAngle=function(t){return Math.fmod(t+Math.PI,2*Math.PI)-Math.PI},Math.normRange=function(t,e){return Math.fmod(t+.5*e,e)-.5*e},this.Gradient=function(){function t(t){this.l01l0=t,null==this.l01l0&&(this.l01l0=[])}return t.prototype.add=function(t){return this.l01l0.push(t)},t.prototype.getInt=function(t){var e,i,s,n,l;if(0===this.l01l0.length)return 0;if(n=l=this.l01l0[0],t<=n[0])return n[1]<<16|n[2]<<8|n[3];for(s=1;;){if(t<l[0]||s>=this.l01l0.length-1)break;n=l,l=this.l01l0[s++]}return t>=l[0]?l[1]<<16|l[2]<<8|l[3]:(i=(t-n[0])/(l[0]-n[0]),(e=(l[0]-t)/(l[0]-n[0]))*n[1]+i*l[1]<<16|e*n[2]+i*l[2]<<8|e*n[3]+i*l[3]|0)},t.prototype.get=function(t){var e,i,s,n,l;if(0===this.l01l0.length)return[0,0,0];if(n=l=this.l01l0[0],t<=n[0])return[n[1],n[2],n[3]];for(s=1;;){if(t<l[0]||s>=this.l01l0.length-1)break;n=l,l=this.l01l0[s++]}return t>=l[0]?[l[1],l[2],l[3]]:(i=(t-n[0])/(l[0]-n[0]),e=(l[0]-t)/(l[0]-n[0]),[e*n[1]+i*l[1],e*n[2]+i*l[2],e*n[3]+i*l[3]])},t}(),this.Oll0O=function(){function t(){}return t.I00Il=function(t,e,i,s){var n,l,a,o,r,h,u,d;switch(null==s&&(s=[]),o=Math.floor(6*t),l=6*t-o,r=i*(1-e),h=i*(1-l*e),d=i*(1-(1-l)*e),o%6){case 0:u=i,a=d,n=r;break;case 1:u=h,a=i,n=r;break;case 2:u=r,a=i,n=d;break;case 3:u=r,a=h,n=i;break;case 4:u=d,a=r,n=i;break;case 5:u=i,a=r,n=h}return s[0]=255*u|0,s[1]=255*a|0,s[2]=255*n|0,s},t.hsvToRgbHex=function(t,e,i){var s,n,l,a,o,r,h,u;switch(a=Math.floor(6*t),n=6*t-a,o=i*(1-e),r=i*(1-n*e),u=i*(1-(1-n)*e),a%6){case 0:h=i,l=u,s=o;break;case 1:h=r,l=i,s=o;break;case 2:h=o,l=i,s=u;break;case 3:h=o,l=r,s=i;break;case 4:h=u,l=o,s=i;break;case 5:h=i,l=o,s=r}return(255*h|0)<<16|(255*l|0)<<8|255*s|0},t}(),CONSTANTS={PROTOCOL_VERSION:81,RADIATION_TIME:36e3,RADIATION_SIZE:1.3,RADIATION_STRENGTH:.003},module.exports=CONSTANTS,llllO=function(){function t(t){var e,i,s,n;for(this.seed=t,this.table=[670,243,963,607,432,29,624,809,254,752,691,904,275,984,586,94,1014,614,252,178,488,954,55,836,186,858,719,562,685,898,167,844,639,505,85,386,520,988,561,889,91,329,900,847,334,531,168,57,789,529,259,323,313,72,153,606,694,442,547,922,242,983,965,876,39,728,383,109,343,810,815,144,457,434,221,279,328,136,674,556,502,896,582,250,665,370,926,912,118,543,365,467,311,700,15,297,609,731,476,634,715,777,62,1007,525,942,310,627,630,448,437,822,300,339,924,583,92,800,698,312,542,740,271,778,895,447,175,957,17,481,347,283,366,277,843,966,927,535,503,234,746,712,1010,544,671,295,978,729,997,287,621,782,160,433,537,121,413,304,98,657,498,946,319,595,191,341,554,523,274,209,435,644,947,979,397,261,681,786,1006,565,472,180,318,126,874,693,526,276,340,808,884,409,486,962,960,772,901,690,359,837,129,363,509,616,88,382,730,513,623,999,504,48,4,384,281,560,417,99,773,956,943,496,558,218,170,471,536,138,19,266,6,868,845,16,985,866,601,445,458,894,950,349,1017,125,495,723,446,647,834,880,272,475,483,227,357,750,851,139,406,336,158,284,482,324,991,632,587,663,74,256,541,120,801,831,46,522,589,1,571,368,137,761,885,968,982,948,785,391,840,932,829,117,641,466,367,688,733,229,735,14,205,31,316,333,183,521,795,58,1021,282,794,939,40,394,793,1002,763,212,484,133,260,465,396,769,518,955,497,377,145,508,514,224,196,454,176,975,865,1005,1023,986,596,426,893,551,90,130,873,22,709,686,436,236,661,579,764,362,141,112,970,987,12,317,369,26,344,66,803,493,716,9,637,945,225,703,78,346,751,123,1009,1016,27,52,864,902,921,292,314,599,799,263,626,338,953,491,892,353,692,917,540,882,677,744,633,821,327,60,1020,928,788,360,414,430,462,824,820,727,398,342,273,726,981,84,82,206,388,720,806,652,550,238,159,134,732,897,500,881,805,814,701,717,566,7,211,604,816,56,658,107,61,374,320,501,13,642,863,791,438,348,97,214,86,305,875,656,24,364,767,156,879,590,734,920,655,577,83,584,660,38,100,299,580,990,636,944,463,766,996,714,8,515,87,198,280,444,131,404,108,278,487,223,598,410,395,199,268,989,75,195,760,916,977,421,11,1e3,813,216,817,823,164,668,739,572,30,707,798,291,564,77,456,478,68,643,615,172,841,672,919,1012,613,385,980,711,771,682,232,765,143,620,631,861,468,622,201,325,424,189,608,403,775,646,673,1013,400,859,838,345,210,860,65,63,34,755,161,479,235,783,460,826,507,854,839,666,802,441,114,443,738,770,929,857,907,741,935,949,322,995,217,667,269,184,650,1018,506,290,787,459,721,828,567,222,494,142,743,405,76,722,588,147,899,270,695,597,337,155,569,679,853,450,21,517,197,371,257,380,244,553,952,381,827,524,877,702,306,600,1011,431,781,594,387,1019,411,533,659,177,725,930,933,832,41,2,687,1008,439,307,891,871,415,651,308,298,811,0,194,592,241,918,18,973,110,654,967,490,683,914,128,992,964,122,230,149,289,392,416,852,936,262,102,938,511,255,510,165,105,419,958,294,379,49,699,330,593,539,710,106,79,440,200,704,961,326,321,759,193,890,44,549,913,776,909,552,972,132,429,748,532,115,888,635,842,649,747,807,887,856,784,148,530,116,157,372,754,28,581,67,187,202,818,181,45,959,146,124,994,872,675,706,253,247,625,570,152,423,185,361,849,971,546,412,830,1022,188,850,140,220,451,219,768,1015,455,780,976,449,969,848,293,249,59,390,512,538,578,906,819,862,974,33,911,135,908,248,401,951,527,169,676,640,1003,591,103,37,285,684,104,163,753,1004,934,645,470,774,20,489,228,461,492,469,998,296,233,869,605,315,36,5,425,878,617,886,23,355,993,93,473,555,474,464,937,925,1001,611,35,812,174,53,286,680,267,428,335,883,653,69,718,585,749,150,408,393,915,576,664,629,756,402,638,602,245,43,545,213,303,192,70,453,910,407,742,111,548,835,452,575,903,619,376,154,302,151,804,867,574,563,239,648,179,855,378,618,264,669,427,354,399,265,50,796,166,923,825,697,534,54,173,870,792,162,713,246,89,51,350,705,251,557,237,240,736,689,203,519,73,81,628,288,331,204,528,480,389,32,418,573,757,358,215,226,42,779,231,171,190,612,301,762,708,420,846,208,485,351,790,737,10,258,309,797,127,516,559,499,352,71,758,25,568,113,3,610,101,375,96,603,745,64,80,477,332,833,940,373,905,422,182,356,941,47,119,662,931,696,95,724,678,207],s=this.table.length,e=i=0,n=s-1;0<=n?i<=n:i>=n;e=0<=n?++i:--i)this.table.push(this.table[e]);this.seed<1&&(this.seed*=1<<30),this.size=1024,this.normalize=1/1023,this.lIOlO=1023,this.llO11=this.seed&this.lIOlO,this.OlI0O=this.seed>>10&this.lIOlO,this.II0Il=this.seed>>20&this.lIOlO,this.c2d=[],this.O0lIO=Math.cos(.3),this.I0OOI=Math.sin(.3)}return t.prototype.lO010=function(t,e,i){var s;return s=(-2*i+3)*i*i,t*(1-s)+e*s},t.prototype.O0l1O=function(t,e,i){return t*(1-i)+e*i},t.prototype.noise1d=function(t){var e,i,s,n;return n=Math.floor(t),e=t-n,n&=this.lIOlO,i=this.table[this.llO11+this.table[n]],s=this.table[this.llO11+this.table[n+1]],this.lO010(i,s,e)*this.normalize},t.prototype.lOI10=function(t,e){var i,s,n,l,a,o,r,h;return r=Math.floor(t),h=Math.floor(e),i=t-r,s=e-h,r&=this.lIOlO,h&=this.lIOlO,n=this.table[this.llO11+this.table[r+this.table[h+this.OlI0O]]],l=this.table[this.llO11+this.table[r+1+this.table[h+this.OlI0O]]],a=this.table[this.llO11+this.table[r+this.table[h+1+this.OlI0O]]],o=this.table[this.llO11+this.table[r+1+this.table[h+1+this.OlI0O]]],this.lO010(this.lO010(n,l,i),this.lO010(a,o,i),s)*this.normalize},t.prototype.O0100=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;return m=Math.floor(t),f=Math.floor(e),g=Math.floor(i),s=t-m,n=e-f,l=i-g,m&=this.lIOlO,f&=this.lIOlO,g&=this.lIOlO,a=this.table[this.llO11+this.table[m+this.table[f+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],o=this.table[this.llO11+this.table[m+1+this.table[f+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],r=this.table[this.llO11+this.table[m+this.table[f+1+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],h=this.table[this.llO11+this.table[m+1+this.table[f+1+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],u=this.table[this.llO11+this.table[m+this.table[f+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],d=this.table[this.llO11+this.table[m+1+this.table[f+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],I=this.table[this.llO11+this.table[m+this.table[f+1+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],c=this.table[this.llO11+this.table[m+1+this.table[f+1+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],p=this.lO010(this.lO010(a,o,s),this.lO010(r,h,s),n),O=this.lO010(this.lO010(u,d,s),this.lO010(I,c,s),n),this.lO010(p,O,l)*this.normalize},t.prototype.IlOOI=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;return m=Math.floor(t),f=Math.floor(e),g=Math.floor(i),s=t-m,n=e-f,l=i-g,m&=this.lIOlO,f&=this.lIOlO,g&=this.lIOlO,a=this.table[this.llO11+this.table[m+this.table[f+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],o=this.table[this.llO11+this.table[m+1+this.table[f+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],
r=this.table[this.llO11+this.table[m+this.table[f+1+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],h=this.table[this.llO11+this.table[m+1+this.table[f+1+this.table[this.OlI0O+this.table[g+this.II0Il]]]]],u=this.table[this.llO11+this.table[m+this.table[f+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],d=this.table[this.llO11+this.table[m+1+this.table[f+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],I=this.table[this.llO11+this.table[m+this.table[f+1+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],c=this.table[this.llO11+this.table[m+1+this.table[f+1+this.table[this.OlI0O+this.table[g+1+this.II0Il]]]]],p=this.O0l1O(this.O0l1O(a,o,s),this.O0l1O(r,h,s),n),O=this.O0l1O(this.O0l1O(u,d,s),this.O0l1O(I,c,s),n),this.O0l1O(p,O,l)*this.normalize},t.prototype.IO110=function(t,e,i){},t.prototype.basic1d=function(t,e,i,s){var n,l,a,o,r;for(null==e&&(e=5),null==i&&(i=.5),null==s&&(s=1.9),r=0,n=1,a=0,l=1,o=e;l<=o;l+=1)r+=this.noise1d(t)*n,a+=n,n*=i,t*=s;return r/a},t.prototype.I1OOI=function(t,e,i,s,n,l,a){var o,r,h,u,d,I,c;for(null==i&&(i=5),null==s&&(s=.5),null==n&&(n=1.9),null==l&&(l=this.O0lIO),null==a&&(a=this.I0OOI),c=0,o=1,h=0,r=1,I=i;r<=I;r+=1)c+=this.lOI10(t,e)*o,h+=o,o*=s,u=n*(t*l+e*a),d=n*(e*l-t*a),t=u,e=d;return c/h},t.prototype.O01Il=function(t,e,i,s,n,l,a,o){var r,h,u,d,I,c,p;for(null==s&&(s=5),null==n&&(n=.5),null==l&&(l=1.9),null==a&&(a=this.O0lIO),null==o&&(o=this.I0OOI),p=0,r=1,u=0,h=1,c=s;h<=c;h+=1)p+=this.O0100(t,e,i)*r,u+=r,r*=n,d=l*(t*a+e*o),I=l*(e*a-t*o),t=d,e=I,i*=l;return p/u},t.prototype.periodicBasic1d=function(t,e,i,s,n){var l,a,o,r;return null==i&&(i=5),null==s&&(s=.5),null==n&&(n=1.9),a=Math.floor(t/e),l=t/e-a,o=this.basic1d(l*e,i,s,n),r=this.basic1d(l*e+e,i,s,n),this.lO010(o,r,1-l)},t.prototype.O00lI=function(t,e,i,s,n,l,a,o){var r,h,u,d,I,c,p,O;return null==s&&(s=5),null==n&&(n=.5),null==l&&(l=1.9),null==a&&(a=this.O0lIO),null==o&&(o=this.I0OOI),u=Math.floor(t/i),d=Math.floor(e/i),r=t/i-u,h=e/i-d,I=this.I1OOI(r*i,h*i,s,n,l,a,o),c=this.I1OOI(r*i+i,h*i,s,n,l,a,o),p=this.I1OOI(r*i,h*i+i,s,n,l,a,o),O=this.I1OOI(r*i+i,h*i+i,s,n,l,a,o),this.lO010(this.lO010(I,c,1-r),this.lO010(p,O,1-r),1-h)},t.prototype.turbulence2d=function(t,e,i,s,n,l,a){var o,r,h,u,d,I,c;for(null==i&&(i=5),null==s&&(s=.5),null==n&&(n=1.9),null==l&&(l=this.O0lIO),null==a&&(a=this.I0OOI),c=0,o=1,h=0,r=1,I=i;r<=I;r+=1)c+=2*(.5-Math.abs(.5-this.lOI10(t,e)))*o,h+=o,o*=s,u=n*(t*l+e*a),d=n*(e*l-t*a),t=u,e=d;return c/h},t.prototype.turbulence3d=function(t,e,i,s,n,l,a,o){var r,h,u,d,I,c,p,O;for(null==s&&(s=5),null==n&&(n=.5),null==l&&(l=1.9),null==a&&(a=this.O0lIO),null==o&&(o=this.I0OOI),O=0,r=1,u=0,h=1,p=s;h<=p;h+=1)O+=2*(.5-Math.abs(.5-this.lOI10(t,e,i)))*r,u+=r,r*=n,d=l*(t*a+e*o),I=l*(e*a-t*o),c=l*i,t=d,e=I,i=c;return O/u},t.prototype.periodicTurbulence2d=function(t,e,i,s,n,l,a,o){var r,h,u,d,I,c,p,O;return null==s&&(s=5),null==n&&(n=.5),null==l&&(l=1.9),null==a&&(a=this.O0lIO),null==o&&(o=this.I0OOI),u=Math.floor(t/i),d=Math.floor(e/i),r=t/i-u,h=e/i-d,I=this.turbulence2d(r*i,h*i,s,n,l,a,o),c=this.turbulence2d(r*i+i,h*i,s,n,l,a,o),p=this.turbulence2d(r*i,h*i+i,s,n,l,a,o),O=this.turbulence2d(r*i+i,h*i+i,s,n,l,a,o),this.lO010(this.lO010(I,c,1-r),this.lO010(p,O,1-r),1-h)},t.prototype.IIll0=function(t,e,i,s,n,l,a){var o,r,h,u,d,I,c,p,O;for(null==i&&(i=5),null==s&&(s=.5),null==n&&(n=1.9),null==l&&(l=this.O0lIO),null==a&&(a=this.I0OOI),p=0,o=1,r=1,u=0,h=1,c=i;h<=c;h+=1)O=2*this.lOI10(t,e),O>1&&(O=2-O),O=Math.pow(O,2),p+=o*r*O,o=O,u+=r,r*=s,d=n*(t*l+e*a),I=n*(e*l-t*a),t=d,e=I;return p/u},t.prototype.I100O=function(t,e,i,s,n,l,a,o){var r,h,u,d,I,c,p,O,m,f,g;for(null==s&&(s=5),null==n&&(n=.5),null==l&&(l=1.9),null==a&&(a=this.O0lIO),null==o&&(o=this.I0OOI),f=0,r=1,h=1,I=0,u=1,m=s;u<=m;u+=1)g=2*this.O0100(t,e,i),g>1&&(g=2-g),g=Math.pow(g,2),f+=r*h*g,r=g,I+=h,h*=n,c=t*a+e*o,p=e*a-t*o,d=p*a+i*o,O=i*a-p*o,t=l*c,e=l*d,i=l*O;return f/I},t.prototype.OOIIl=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S;for(z=Math.floor(t),E=Math.floor(e),s=t-z,n=e-E,l=100,a=0,o=0,r=100,h=0,u=0,v=w=0;w<=2;v=w+=1)for(b=x=0;x<=2;b=x+=1)M=(z-1+v)%i,S=(E-1+b)%i,k=-1+v+this.table[this.llO11+this.table[M+this.table[this.OlI0O+S]]]*this.normalize*.8+.1,_=-1+b+this.table[this.llO11+this.table[M+this.table[this.OlI0O+this.table[S+1]]]]*this.normalize*.8+.1,p=s-k,f=n-_,d=p*p+f*f,d<l?(r=l,h=a,u=o,l=d,a=k,o=_):d<r&&(r=d,h=k,u=_);return O=s-a,g=n-o,I=Math.sqrt(O*O+g*g),m=s-h,y=n-u,c=Math.sqrt(m*m+y*y),Math.min(I,c)/Math.max(I,c)},t.prototype.OO1Ol=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;for(f=Math.floor(t),y=Math.floor(e),s=t-f,n=e-y,l=100,0,0,a=0,u=I=0;I<=2;u=I+=1)for(d=c=0;c<=2;d=c+=1)g=(f-1+u)%i,v=(y-1+d)%i,p=-1+u+this.table[this.llO11+this.table[g+this.table[this.OlI0O+v]]]*this.normalize*.8+.1,O=-1+d+this.table[this.llO11+this.table[g+this.table[this.OlI0O+this.table[v+1]]]]*this.normalize*.8+.1,m=this.table[this.llO11+this.table[g+this.table[this.OlI0O+this.table[v+17]]]],r=s-p,h=n-O,(o=r*r+h*h)<l&&(l=o,p,O,a=m);return a*this.normalize},t.prototype.Ol0I1=function(t,e,i,s){var n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V;for(null==s&&(s=100),H=Math.floor(t),D=Math.floor(e),F=Math.floor(i),n=t-H,l=e-D,a=i-F,o=100,r=0,h=0,u=0,d=100,I=0,c=0,p=0,M=T=0;T<=2;M=T+=1)for(E=P=0;P<=2;E=P+=1){for(S=R=0;R<=2;S=R+=1)B=(H-1+M)%s&this.lIOlO,L=(D-1+E)%s&this.lIOlO,V=(F-1+S)%s&this.lIOlO,C=-1+M+this.table[this.llO11+this.table[B+this.table[this.OlI0O+this.table[V+L]]]]*this.normalize,A=-1+E+this.table[this.llO11+this.table[B+this.table[this.OlI0O+this.table[this.table[L+V]+1]]]]*this.normalize,j=-1+S+this.table[this.llO11+this.table[B+this.table[this.OlI0O+this.table[this.table[L+V]+37]]]]*this.normalize;g=n-C,b=l-A,k=a-j,O=g*g+b*b+k*k,O<o?(d=o,I=r,c=h,p=u,o=O,r=C,h=A,u=j):O<d&&(d=O,I=C,c=A,p=j)}return y=n-r,w=l-h,_=a-u,m=Math.sqrt(y*y+w*w+_*_),v=n-I,x=l-c,z=a-p,f=Math.sqrt(v*v+x*x+z*z),Math.min(m,f)/Math.max(m,f)},t.I0O00=function(t){var e,i,s,n,l,a;for(l=[],e=s=0,n=t-1;0<=n?s<=n:s>=n;e=0<=n?++s:--s)l[e]=e;for(a=[];;){if(0===l.length)break;i=Math.floor(Math.random()*l.length),a.push(l.splice(i,1)[0])}return a},t}(),module.exports=llllO,l000I=require("./random.js",l000I),llllO=require("./valuenoise.js",llllO),this.O1IIl=function(){function t(t,e,i){var s,n,l,a,o,r;for(this.seed=null!=t?t:Math.random(),this.size=null!=e?e:20,this.mode=i,this.random=new l000I(this.seed),this.l0llI=1e5*this.random.next(),this.Oll1O=1e5*this.random.next(),this.a=13971,this.c=12345,this.mod=1<<30,this.inv=1/this.mod,this.lIOlO=this.mod-1,this.IO10l=.5,this.Oll0l=.5,this.O11O1=5,this.l0l11=1+this.random.O1010(8),this.fx=this.l0l11/this.size,this.fy=this.l0l11/this.size,this.fx=(2+8*this.random.next())/(2*this.size),this.fy=(2+8*this.random.next())/(2*this.size),this.OO0l1=new llllO(this.random.next()),this.l10OI=2*this.size,this.buffer=[],this.custom_map=null,s=l=0,o=this.l10OI-1;l<=o;s=l+=1)for(n=a=0,r=this.l10OI-1;a<=r;n=a+=1)this.buffer[s+n*this.l10OI]=this.get(s-.5*this.l10OI,n-.5*this.l10OI)}return t.prototype.I00IO=function(t,e){return t=(t+3*this.l10OI/2)%this.l10OI,e=(e+3*this.l10OI/2)%this.l10OI,this.buffer[t+this.l10OI*e]},t.prototype.getCustomMap=function(t,e){var i,s,n,l;return e=-e-1,null==this.custom_map&&(this.custom_map=[],null!=this.mode.options.custom_map&&"string"==typeof this.mode.options.custom_map&&(this.custom_map=this.mode.options.custom_map.split("\n"))),i=this.custom_map.length,i>0&&(n=Math.floor(-i/2),e>=n&&e<n+i&&(s=this.custom_map[e-n],i=s.length,n=Math.floor(-i/2),t>=n&&t<n+i&&(l=s.charCodeAt(t-n)-48)>=0&&l<=9))?l/9:0},t.prototype.get=function(t,e,i){var s,n,l,a,o,r;return null==i&&(i={}),i.bx=t,i.by=e,o=t*this.l0llI+e*this.Oll1O,o=this.a*o+this.c&this.lIOlO,o=this.a*o+this.c&this.lIOlO,o=this.a*o+this.c&this.lIOlO,a=Math.sqrt((t*t+e*e)/(this.size*this.size)),r=1,s=a>1?.5:.5*Math.pow(a,this.O11O1),s=s*this.Oll0l+(1-this.Oll0l)*(this.OO0l1.O00lI((t+this.size)*this.fx,(e+this.size)*this.fy,this.l0l11,3)-.5),s=Math.max(4/this.l10OI,s),null!=this.mode&&(s*=this.mode.asteroidsDensityModifier(2*t/this.l10OI,2*e/this.l10OI),null!=this.mode.options.custom_map)?(i.size=.5*this.getCustomMap(t,e),i.on=i.size>0,o=this.a*o+this.c&this.lIOlO,n=o*this.inv,o=this.a*o+this.c&this.lIOlO,l=o*this.inv,n=n>.5?.5*Math.pow(2*(n-.5),.1)+.5:.5-.5*Math.pow(2*(.5-n),.1),l=l>.5?.5*Math.pow(2*(l-.5),.1)+.5:.5-.5*Math.pow(2*(.5-l),.1),i.x=t+i.size+n*(1-2*i.size),i.y=e+i.size+l*(1-2*i.size),i):(o=this.a*o+this.c&this.lIOlO,o*this.inv<s?(i.on=!0,o=this.a*o+this.c&this.lIOlO,i.size=(.1+this.IO10l*o*this.inv)*r,o=this.a*o+this.c&this.lIOlO,n=o*this.inv,o=this.a*o+this.c&this.lIOlO,l=o*this.inv,n=n>.5?.5*Math.pow(2*(n-.5),.1)+.5:.5-.5*Math.pow(2*(.5-n),.1),l=l>.5?.5*Math.pow(2*(l-.5),.1)+.5:.5-.5*Math.pow(2*(.5-l),.1),i.x=t+i.size+n*(1-2*i.size),i.y=e+i.size+l*(1-2*i.size)):i.on=!1,i)},t}(),module.exports=this.O1IIl,this.OIIl1=function(){function t(){this.types=[],this.types_by_code=[],this.types_by_name=[],this.levels=[]}return t.prototype.clear=function(){return this.types=[],this.types_by_code=[],this.types_by_name=[],this.levels=[]},t.prototype.O00II=function(){return this.types[Math.floor(Math.random()*this.types.length)]},t.prototype.add=function(t){var e,i,s,n,l;for(this.types.push(t),this.types_by_code[t.code]=t,this.types_by_name[t.name]=t,null==this.levels[t.level]&&(this.levels[t.level]=[]),n=this.levels[t.level],e=i=0,s=n.length;i<s;e=++i){if(l=n[e],t.model<l.model)return void this.levels[t.level].splice(e,0,t);if(t.model===l.model)return void(this.levels[t.level][e]=t)}return this.levels[t.level].push(t)},t.prototype.getDefaultShip=function(){return this.types[0]},t.prototype.next=function(t){var e,i,s,n,l,a,o,r,h;if(n=t.level,l=t.model,null!=t.next){for(o=[],a=t.next,i=0,s=a.length;i<s;i++)e=a[i],null!=(r=this.types_by_code[e])&&o.push(r);return o}return null==this.levels[n+1]?[]:(h=(l-1)/Math.max(1,this.levels[n].length-1),h=Math.max(0,Math.round(h*(this.levels[n+1].length-2))),o=[this.levels[n+1][h]],h<this.levels[n+1].length-1&&o.push(this.levels[n+1][h+1]),o)},t.prototype.levelUpgrades=function(t){return t<7},t.prototype.shipUpgrades=function(t,e){return null==e&&(e=!1),e?t<6:null!=this.levels[t+1]},t.prototype.makePairs=function(){var t,e,i,s,n,l,a,o,r,h;for(h=[],l=i=2;i<=6;l=i+=1)for(n=this.levels[l].length,t=s=0,o=n-1;s<=o;t=s+=1)for(e=a=t+1,r=n-1;a<=r;e=a+=1)h.push([""+this.levels[l][t].name,""+this.levels[l][e].name])},t}(),O1Ill=new this.OIIl1,module.exports=O1Ill,O1Ill=require("./shiptypes.js",O1Ill),O1Ill.add({name:"Fly",level:1,model:1,code:101,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},shape:[1.368,1.368,1.093,.965,.883,.827,.791,.767,.758,.777,.847,.951,1.092,1.667,1.707,1.776,1.856,1.827,1.744,1.687,1.525,1.415,1.335,1.606,1.603,1.578,1.603,1.606,1.335,1.415,1.525,1.687,1.744,1.827,1.856,1.776,1.707,1.667,1.654,.951,.847,.777,.758,.767,.791,.827,.883,.965,1.093,1.368],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-1.365",z:-.21,angle:0,damage:[5,6],rate:4,type:1,speed:[160,180],number:1,spread:0,error:2.5,recoil:0}],radius:1.856}),O1Ill.add({name:"Delta-Fighter",level:2,model:1,code:201,specs:{shield:{capacity:[100,150],reload:[3,4]},generator:{capacity:[50,80],reload:[15,25]},ship:{mass:80,speed:[110,135],rotation:[80,100],acceleration:[110,120]}},shape:[2.081,1.969,1.501,1.455,1.403,1.368,1.263,1.192,1.095,1.063,1.128,1.209,1.352,1.545,1.85,2.348,2.965,3.211,3.33,2.93,2.496,2.442,2.441,1.866,1.967,1.954,1.967,1.866,2.441,2.442,2.496,2.93,3.33,3.211,2.965,2.348,1.85,1.545,1.352,1.209,1.128,1.063,1.095,1.192,1.263,1.368,1.403,1.455,1.501,1.969],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-2.080",z:-.39,angle:0,damage:[3,5],rate:3,type:1,speed:[100,120],number:3,spread:15,error:0,recoil:0}],radius:3.33}),O1Ill.add({name:"Trident",level:2,model:2,code:202,specs:{shield:{capacity:[125,175],reload:[3,5]},generator:{capacity:[50,80],reload:[15,20]},ship:{mass:100,speed:[110,135],rotation:[70,85],acceleration:[90,110]}},shape:[2.4,2.164,1.784,1.529,1.366,.981,.736,.601,.516,.457,.415,2.683,2.66,2.66,2.724,2.804,2.763,2.605,2.502,2.401,2.596,2.589,2.426,2.448,2.443,2.52,2.443,2.448,2.426,2.589,2.596,2.401,2.502,2.605,2.763,2.804,2.724,2.66,2.66,2.683,.415,.457,.516,.601,.736,.981,1.366,1.529,1.784,2.164],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.200",y:"-0.240",z:0,angle:0,damage:[4,8],rate:2.5,type:1,speed:[100,120],number:1,spread:0,error:0,recoil:0},{x:"-1.200",y:"-0.240",z:0,angle:0,damage:[4,8],rate:2.5,type:1,speed:[100,120],number:1,spread:0,error:0,recoil:0}],radius:2.804}),O1Ill.add({name:"Side-Fighter",level:3,model:2,next:[403,404],code:302,specs:{shield:{capacity:[125,175],reload:[2,4]},generator:{capacity:[75,125],reload:[20,35]},ship:{mass:90,speed:[100,120],rotation:[50,70],acceleration:[100,130]}},shape:[.902,.912,.888,.892,.731,.749,.779,2.343,2.255,2.136,2.061,2.022,2.038,2.04,2.022,2.061,2.136,2.255,2.343,.836,.924,1.106,1.282,1.262,1.222,1.202,1.222,1.262,1.282,1.106,.924,.836,2.343,2.255,2.136,2.061,2.022,2.038,2.04,2.022,2.061,2.136,2.255,2.343,.779,.749,.731,.892,.888,.912],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-0.900",z:0,angle:0,damage:[4,6],rate:10,type:1,speed:[150,240],number:1,spread:0,error:20,recoil:0}],radius:2.343}),O1Ill.add({name:"Pulse-Fighter",level:3,model:1,code:301,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[60,90],reload:[20,30]},ship:{mass:120,speed:[105,120],rotation:[60,80],acceleration:[80,100]}},shape:[2.343,2.204,1.998,1.955,2.088,1.91,1.085,.974,.895,.842,.829,.95,1.429,2.556,2.618,2.726,2.851,2.837,2.825,2.828,2.667,2.742,2.553,2.766,2.779,2.735,2.779,2.766,2.553,2.742,2.667,2.828,2.825,2.837,2.851,2.726,2.618,2.556,1.43,.95,.829,.842,.895,.974,1.085,1.91,2.088,1.955,1.998,2.204],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-2.340",z:-.26,angle:0,damage:[15,30],rate:1,type:2,speed:[150,175],number:1,spread:0,error:0,recoil:0},{x:"1.300",y:"-0.052",z:-.26,angle:0,damage:[3,6],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0},{x:"-1.300",y:"-0.052",z:-.26,angle:0,damage:[3,6],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0}],radius:2.851}),O1Ill.add({name:"Shadow X-1",level:3,model:3,code:303,specs:{shield:{capacity:[90,130],reload:[3,6]},generator:{capacity:[50,80],reload:[12,16]},ship:{mass:70,speed:[120,155],rotation:[35,60],acceleration:[130,150]}},shape:[1.6,1.582,1.552,1.313,1.138,1.009,.919,.75,.688,.708,.733,1.157,1.297,1.359,1.392,1.431,1.696,1.975,2.192,2.258,1.661,1.429,1.58,1.628,1.705,1.835,1.705,1.628,1.58,1.429,1.661,2.258,2.192,1.975,1.696,1.431,1.392,1.359,1.297,1.157,.733,.708,.688,.75,.919,1.009,1.138,1.313,1.552,1.582],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.120",y:"-0.160",z:-.32,angle:0,damage:[3,4],rate:6,type:1,speed:[180,210],number:1,spread:0,error:0,recoil:0},{x:"-1.120",y:"-0.160",z:-.32,angle:0,damage:[3,4],rate:6,type:1,speed:[180,210],number:1,spread:0,error:0,recoil:0}],radius:2.258}),O1Ill.add({name:"Y-Defender",level:3,model:4,code:304,specs:{shield:{capacity:[175,225],reload:[4,6]},generator:{capacity:[50,80],reload:[18,25]},ship:{mass:200,speed:[80,100],rotation:[40,60],acceleration:[70,80]}},shape:[3,2.959,2.915,2.203,1.734,.652,.639,1.358,1.816,2.118,2.23,2.139,2.06,2.016,2.023,2.04,2.551,2.584,2.67,3.055,3.578,3.552,3.315,3.834,2.269,2.104,2.269,3.834,3.315,3.552,3.578,3.055,2.67,2.584,2.551,2.04,2.023,2.016,2.06,2.139,2.23,2.118,1.816,1.358,.639,.652,1.734,2.203,2.915,2.959],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.000",z:0,angle:0,damage:[20,40],rate:2,type:1,speed:[130,170],number:1,spread:0,error:0,recoil:75}],radius:3.834}),O1Ill.add({name:"Vanguard",level:4,model:1,code:401,specs:{shield:{capacity:[140,190],reload:[3,4]},generator:{capacity:[80,140],reload:[25,35]},ship:{mass:200,speed:[75,90],rotation:[90,120],acceleration:[60,80]}},shape:[1.128,4.427,4.643,4.646,4.01,3.568,3.144,2.81,2.808,3.088,3.087,3.077,3.045,2.998,2.935,2.552,2.417,2.317,1.954,1.88,1.891,2.158,2.148,2.228,2.236,2.256,2.236,2.228,2.148,2.158,1.891,1.88,1.954,2.317,2.417,2.552,2.935,2.998,3.045,3.077,3.087,3.088,2.808,2.81,3.144,3.568,4.01,4.646,4.643,4.427],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.432",y:"-4.392",z:.192,angle:0,damage:[18,25],rate:3,type:2,speed:[170,200],number:1,spread:0,error:0,recoil:70},{x:"-0.432",y:"-4.392",z:.192,angle:0,damage:[18,25],rate:3,type:2,speed:[170,200],number:1,spread:0,error:0,recoil:70}],radius:4.646}),O1Ill.add({name:"X-Warrior",level:4,model:3,code:403,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[90,150],reload:[35,55]},ship:{mass:250,speed:[75,100],rotation:[50,90],acceleration:[90,110]}},shape:[3.2,3.096,3.365,3.37,2.625,2.149,2.266,2.325,2.329,1.208,1.156,3.483,3.455,3.472,3.565,3.811,4.087,4.351,4.352,3.594,3.502,3.848,3.867,3.701,3.258,3.206,3.258,3.701,3.867,3.848,3.502,3.594,4.352,4.351,4.087,3.811,3.565,3.472,3.455,3.483,1.156,1.208,2.329,2.325,2.266,2.149,2.625,3.37,3.365,3.096],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.960",y:"-3.200",z:0,angle:0,damage:[5,8],rate:3,type:1,speed:[120,180],number:1,spread:0,error:0,recoil:0},{x:"-0.960",y:"-3.200",z:0,angle:0,damage:[5,8],rate:3,type:1,speed:[120,180],number:1,spread:0,error:0,recoil:0},{x:"3.360",y:"-0.640",z:-1.28,angle:0,damage:[3,5],rate:2.5,type:1,speed:[100,160],number:1,spread:0,error:0,recoil:0},{x:"-3.360",y:"-0.640",z:-1.28,angle:0,damage:[3,5],rate:2.5,type:1,speed:[100,160],number:1,spread:0,error:0,recoil:0}],radius:4.352}),O1Ill.add({name:"Mercury",level:4,model:2,code:402,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[100,150],reload:[30,50]},ship:{mass:200,speed:[85,105],rotation:[60,90],acceleration:[60,80]}},shape:[1.303,1.306,1.221,1.135,3.514,3.457,3.283,3.008,2.819,2.69,2.614,2.461,2.233,3.14,3.312,3.323,3.182,2.865,2.958,3.267,3.33,3.079,2.187,2.651,2.647,2.605,2.647,2.651,2.187,3.079,3.33,3.267,2.958,2.865,3.182,3.323,3.312,3.14,2.233,2.461,2.614,2.69,2.819,3.008,3.283,3.457,3.514,1.135,1.221,1.306],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-1.300",z:.26,angle:0,damage:[20,40],rate:1,type:2,speed:[170,200],number:1,spread:0,error:0,recoil:0},{x:"2.972",y:"0.130",z:-.13,angle:2,damage:[3,5],rate:4,type:1,speed:[150,180],number:1,spread:0,error:0,recoil:0},{x:"-2.972",y:"0.130",z:-.13,angle:-2,damage:[3,5],rate:4,type:1,speed:[150,180],number:1,spread:0,error:0,recoil:0}],radius:3.514}),O1Ill.add({name:"Side-Interceptor",level:4,model:4,code:404,specs:{shield:{capacity:[175,225],reload:[3,6]},generator:{capacity:[100,150],reload:[30,40]},ship:{mass:120,speed:[80,110],rotation:[50,100],acceleration:[110,140]}},shape:[.962,.973,.948,.951,3.427,3.044,2.657,2.383,2.207,2.233,2.2,2.147,2.096,2.096,2.147,2.2,2.233,2.37,2.4,1.63,1.451,1.323,1.061,1.009,.977,.962,.977,1.009,1.061,1.323,1.451,1.63,2.4,2.37,2.233,2.2,2.147,2.096,2.096,2.147,2.2,2.233,2.207,2.383,2.657,3.044,3.427,.951,.948,.973],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.920",y:"-0.960",z:0,angle:0,damage:[5,7],rate:5,type:1,speed:[100,200],number:1,spread:0,error:5,recoil:0},{x:"-1.920",y:"-0.960",z:0,angle:0,damage:[5,7],rate:5,type:1,speed:[100,200],number:1,spread:0,error:5,recoil:0}],radius:3.427}),O1Ill.add({name:"Pioneer",level:4,model:5,code:405,specs:{shield:{capacity:[175,230],reload:[4,7]},generator:{capacity:[50,100],reload:[25,30]},ship:{mass:250,speed:[90,120],rotation:[40,80],acceleration:[50,100]}},shape:[3.204,3.168,3.365,3.37,2.625,2.907,3.057,3.073,2.942,2.664,2.548,2.441,1.29,1.032,1.136,1.287,2.732,2.911,3.245,3.523,3.553,3.411,3.132,3.263,3.258,3.206,3.258,3.263,3.132,3.411,3.553,3.523,3.245,2.911,2.732,1.287,1.136,1.032,1.29,2.441,2.548,2.664,2.942,3.073,3.057,2.907,2.625,3.37,3.365,3.168],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.960",y:"-3.200",z:0,angle:0,damage:[6,11],rate:3,type:1,speed:[100,140],number:1,spread:0,error:0,recoil:0},{x:"-0.960",y:"-3.200",z:0,angle:0,damage:[6,11],rate:3,type:1,speed:[100,140],number:1,spread:0,error:0,recoil:0}],radius:3.553});for(O1Ill.add({name:"Crusader",level:4,model:6,code:406,specs:{shield:{capacity:[250,300],reload:[5,7]},generator:{capacity:[50,90],reload:[20,35]},ship:{mass:250,speed:[75,100],rotation:[40,70],acceleration:[80,100]}},shape:[3.2,3.14,2.815,2.366,2.084,2.4,2.332,2.322,2.128,1.994,1.918,2.067,2.304,2.644,3.134,4.525,4.797,4.922,4.238,3.554,3.649,3.411,2.88,3.263,3.258,3.206,3.258,3.263,2.88,3.411,3.649,3.554,4.238,4.922,4.797,4.525,3.134,2.644,2.304,2.067,1.918,1.994,2.128,2.322,2.332,2.4,2.084,2.366,2.815,3.14],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.440",y:"-1.920",z:-.16,angle:0,damage:[6,9],rate:3,type:1,speed:[130,160],number:1,spread:0,error:0,recoil:0},{x:"-1.440",y:"-1.920",z:-.16,angle:0,damage:[6,9],rate:3,type:1,speed:[130,160],number:1,spread:0,error:0,recoil:0}],radius:4.922}),O1Ill.add({name:"U-Sniper",level:5,model:1,code:501,specs:{shield:{capacity:[200,300],reload:[4,6]},generator:{capacity:[80,160],reload:[40,60]},ship:{mass:200,speed:[70,90],rotation:[50,70],acceleration:[60,110]}},shape:[.361,.366,.378,4.774,4.83,4.17,3.608,3.248,3.245,3.083,2.915,2.807,2.751,2.829,2.976,3.22,3.412,3.521,3.693,3.681,3.138,2.937,3.473,3.407,3.618,3.607,3.618,3.407,3.473,2.937,3.138,3.681,3.693,3.521,3.412,3.22,2.976,2.829,2.751,2.807,2.915,3.083,3.245,3.248,3.608,4.17,4.83,4.774,.378,.366],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"2.520",y:"-1.800",z:0,angle:0,damage:[40,60],rate:2,type:2,speed:[190,240],number:1,spread:0,error:0,recoil:200},{x:"-2.520",y:"-1.800",z:0,angle:0,damage:[40,60],rate:2,type:2,speed:[190,240],number:1,spread:0,error:0,recoil:200}],radius:4.83}),O1Ill.add({name:"T-Warrior",level:5,model:3,code:503,specs:{shield:{capacity:[225,325],reload:[4,7]},generator:{capacity:[80,140],reload:[35,50]},ship:{mass:250,speed:[80,90],rotation:[50,80],acceleration:[90,120]}},shape:[3.204,3.125,2.591,2.145,1.713,1.46,1.282,1.155,1.073,1.009,.977,.955,.957,2.594,3.217,3.408,3.55,3.898,4.204,4.633,5.051,4.926,2.67,2.95,4.171,4.168,4.171,2.95,2.67,4.926,5.051,4.633,4.204,3.898,3.55,3.408,3.217,2.594,.96,.955,.977,1.009,1.073,1.155,1.282,1.46,1.713,2.145,2.591,3.125],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.040",z:-.48,angle:0,damage:[4,6],rate:3,type:1,speed:[130,160],number:5,spread:30,error:0,recoil:0}],radius:5.051}),O1Ill.add({name:"Aetos",level:5,model:4,code:504,specs:{shield:{capacity:[200,300],reload:[5,7]},generator:{capacity:[80,140],reload:[35,45]},ship:{mass:175,speed:[90,100],rotation:[70,90],acceleration:[110,130]}},shape:[3,2.917,2.069,1.61,1.343,1.158,1.037,.95,.895,.853,.83,.824,3.271,3.283,3.312,3.232,3.135,3.283,3.38,3.09,2.882,2.75,2.726,3.059,3.054,3.006,3.054,3.059,2.726,2.75,2.882,3.09,3.38,3.283,3.135,3.232,3.312,3.283,3.271,.824,.83,.853,.895,.95,1.037,1.158,1.343,1.61,2.069,2.917],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"2.440",y:"-0.150",z:-.9,angle:2,damage:[5,8],rate:5,type:1,speed:[120,180],number:1,spread:0,error:0,recoil:0},{x:"-2.440",y:"-0.150",z:-.9,angle:-2,damage:[5,8],rate:5,type:1,speed:[120,180],number:1,spread:0,error:0,recoil:0}],radius:3.38}),O1Ill.add({name:"Shadow X-2",level:5,model:5,code:505,specs:{shield:{capacity:[150,220],reload:[5,7]},generator:{capacity:[80,145],reload:[19,29]},ship:{mass:125,speed:[110,140],rotation:[35,48],acceleration:[140,160]}},shape:[2.2,2.141,1.787,1.481,1.272,1.135,1.076,1.035,1.016,1.188,1.343,1.35,1.371,1.416,1.46,1.564,1.887,2.17,2.405,2.753,3.16,2.084,2.79,3.199,2.656,2.315,2.656,3.199,2.79,2.084,3.16,2.753,2.405,2.17,1.887,1.564,1.46,1.416,1.372,1.35,1.343,1.188,1.016,1.035,1.076,1.135,1.272,1.481,1.787,2.141],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.100",y:"-0.440",z:-.286,angle:0,damage:[5,7],rate:5,type:1,speed:[160,190],number:1,spread:0,error:0,recoil:0},{x:"-1.100",y:"-0.440",z:-.286,angle:0,damage:[5,7],rate:5,type:1,speed:[160,190],number:1,spread:0,error:0,recoil:0}],radius:3.199}),O1Ill.add({name:"FuryStar",level:5,model:2,code:502,specs:{shield:{capacity:[200,275],reload:[6,7]},generator:{capacity:[100,150],reload:[30,40]},ship:{mass:200,speed:[70,100],rotation:[120,180],acceleration:[150,180]}},shape:[1.59,1.832,1.891,1.874,1.458,1.479,1.524,1.571,1.645,1.757,1.925,3.322,3.427,3.455,3.48,3.666,3.822,4.057,4.521,4.774,5.039,5.299,1.577,1.71,1.679,1.653,1.679,1.71,1.577,5.299,5.039,4.774,4.521,4.057,3.822,3.666,3.48,3.455,3.428,3.322,1.925,1.757,1.645,1.571,1.524,1.479,1.458,1.874,1.891,1.832],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.050",y:"-1.050",z:.3,angle:0,damage:[1,2],rate:4,type:1,speed:[100,125],number:1,spread:0,error:0,recoil:0},{x:"-1.050",y:"-1.050",z:.3,angle:0,damage:[1,2],rate:4,type:1,speed:[100,125],number:1,spread:0,error:0,recoil:0},{x:"0.450",y:"-1.800",z:-.45,angle:0,damage:[12,18],rate:2,type:1,speed:[200,250],number:1,spread:0,error:0,recoil:0},{x:"-0.450",y:"-1.800",z:-.45,angle:0,damage:[12,18],rate:2,type:1,speed:[200,250],number:1,spread:0,error:0,recoil:0}],radius:5.299}),O1Ill.add({name:"Howler",level:5,model:6,code:506,specs:{shield:{capacity:[275,340],reload:[5,7]},generator:{capacity:[80,110],reload:[35,50]},ship:{mass:225,speed:[85,98],rotation:[70,95],acceleration:[90,120]}},shape:[3.96,3.579,3.36,2.703,2.264,1.914,1.655,1.622,1.629,1.67,2.637,2.622,2.666,2.756,2.878,3.003,3.196,3.358,3.496,3.55,2.322,2.273,2.121,2.457,2.443,2.405,2.443,2.457,2.121,2.273,2.322,3.55,3.496,3.358,3.196,3.003,2.878,2.756,2.666,2.622,2.637,1.67,1.629,1.622,1.655,1.914,2.264,2.703,3.36,3.579],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.960",z:0,angle:0,damage:[2.5,4],rate:6,type:1,speed:[160,210],number:2,spread:0,error:0,recoil:0},{x:"0.528",y:"-3.540",z:0,angle:0,damage:[9,15],rate:1,type:2,speed:[150,200],number:1,spread:0,error:0,recoil:25},{x:"-0.528",y:"-3.540",z:0,angle:0,damage:[9,15],rate:1,type:2,speed:[150,200],number:1,spread:0,error:0,recoil:25}],radius:3.96}),O1Ill.add({name:"Bat-Defender",level:5,model:7,code:507,specs:{shield:{capacity:[300,400],reload:[7,10]},generator:{capacity:[70,100],reload:[25,35]},ship:{mass:350,speed:[70,90],rotation:[40,70],acceleration:[90,100]}},shape:[3.604,3.424,2.813,2.415,2.149,1.968,1.913,1.973,2.073,2.759,3.932,3.974,4.081,4.084,4.04,4.116,4.187,3.661,2.16,2.365,2.719,3.22,3.183,3.028,2.016,1.984,2.016,3.028,3.183,3.22,2.719,2.365,2.16,3.661,4.187,4.116,4.04,4.081,4.084,3.974,3.932,2.759,2.073,1.973,1.913,1.968,2.149,2.415,2.813,3.424],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"2.539",y:"-1.080",z:.36,angle:3,damage:[10,15],rate:2.5,type:1,speed:[150,200],number:1,spread:0,error:0,recoil:0},{x:"-2.539",y:"-1.080",z:.36,angle:-3,damage:[10,15],rate:2.5,type:1,speed:[150,200],number:1,spread:0,error:0,recoil:0}],radius:4.187}),O1Ill.add({name:"Advanced-Fighter",level:6,model:1,code:601,specs:{shield:{capacity:[200,350],reload:[4,6]},generator:{capacity:[120,200],reload:[50,60]},ship:{mass:400,speed:[70,80],rotation:[30,50],acceleration:[70,100]}},shape:[4,3.65,3.454,3.504,3.567,2.938,1.831,1.707,1.659,1.943,1.92,1.882,1.896,3.96,5.654,5.891,6.064,5.681,5.436,5.573,5.122,4.855,4.675,4.626,4.479,4.008,4.479,4.626,4.675,4.855,5.122,5.573,5.436,5.681,6.064,5.891,5.654,3.96,3.88,1.882,1.92,1.943,1.659,1.707,1.831,2.938,3.567,3.504,3.454,3.65],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-4.000",z:.4,angle:0,damage:[90,150],rate:1,type:2,speed:[180,240],number:1,spread:0,error:0,recoil:150},{x:"2.800",y:"0.000",z:-1.2,angle:0,damage:[6,12],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0},{x:"-2.800",y:"0.000",z:-1.2,angle:0,damage:[6,12],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0},{x:"3.800",y:"0.000",z:-1.6,angle:0,damage:[4,10],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0},{x:"-3.800",y:"0.000",z:-1.6,angle:0,damage:[4,10],rate:3,type:1,speed:[100,150],number:1,spread:0,error:0,recoil:0}],radius:6.064}),O1Ill.add({name:"Scorpion",level:6,model:2,code:602,specs:{shield:{capacity:[225,400],reload:[5,7]},generator:{capacity:[80,175],reload:[38,50]},ship:{mass:450,speed:[75,90],rotation:[50,70],acceleration:[80,100]}},shape:[3.6,2.846,2.313,2.192,5.406,5.318,5.843,5.858,5.621,4.134,3.477,3.601,3.622,3.464,3.351,3.217,1.458,1.391,1.368,1.37,1.635,2.973,3.47,3.911,4.481,4.804,4.481,3.911,3.47,2.973,1.635,1.37,1.368,1.391,1.458,3.217,3.351,3.464,3.622,3.601,3.477,4.134,5.621,5.858,5.843,5.318,5.406,2.192,2.313,2.846],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"0.000",z:2,angle:0,damage:[50,100],rate:.9,type:2,speed:[170,230],number:1,spread:0,error:0,recoil:100},{x:"2.800",y:"-4.600",z:-.4,angle:0,damage:[2,3],rate:1.8,type:1,speed:[130,170],number:2,spread:5,error:0,recoil:0},{x:"-2.800",y:"-4.600",z:-.4,angle:0,damage:[2,3],rate:1.8,type:1,speed:[130,170],number:2,spread:5,error:0,recoil:0}],radius:5.858}),O1Ill.add({name:"Marauder",level:6,model:3,code:603,specs:{shield:{capacity:[210,350],reload:[8,11]},generator:{capacity:[85,160],reload:[25,40]},ship:{mass:250,speed:[70,110],rotation:[60,80],acceleration:[80,120]}},shape:[2.665,3.563,3.573,2.856,2.359,2.03,2.85,2.741,2.228,1.71,1.404,1.199,1.11,3.408,3.491,3.521,3.44,3.385,3.439,3.481,3.181,2.932,2.962,2.944,2.85,2.244,2.85,2.944,2.962,2.932,3.181,3.481,3.439,3.385,3.44,3.521,3.491,3.408,1.11,1.199,1.404,1.71,2.228,2.741,2.85,2.03,2.359,2.856,3.573,3.563],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-2.660",z:.28,angle:0,damage:[10,16],rate:10,type:1,speed:[170,200],number:1,spread:0,error:0,recoil:0},{x:"0.560",y:"-3.500",z:-.28,angle:0,damage:[4,8],rate:3,type:1,speed:[110,140],number:1,spread:0,error:0,recoil:0},{x:"-0.560",y:"-3.500",z:-.28,angle:0,damage:[4,8],rate:3,type:1,speed:[110,140],number:1,spread:0,error:0,recoil:0}],radius:3.573}),O1Ill.add({name:"Condor",level:6,model:4,code:604,specs:{shield:{capacity:[225,400],reload:[7,10]},generator:{capacity:[70,130],reload:[30,48]},ship:{mass:200,speed:[75,105],rotation:[50,70],acceleration:[80,120]}},shape:[3.3,3.015,2.45,1.959,1.658,1.477,1.268,1.11,1.148,1.237,2.34,2.448,2.489,3.283,3.363,3.501,3.586,3.333,3.496,3.502,3.154,2.52,3.016,3.132,3.054,3.006,3.054,3.132,3.016,2.52,3.154,3.502,3.496,3.333,3.586,3.501,3.363,3.283,2.49,2.448,2.34,1.237,1.148,1.11,1.268,1.477,1.658,1.959,2.45,3.015],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.300",z:0,angle:0,damage:[30,60],rate:2,type:2,speed:[150,200],number:1,spread:0,error:0,recoil:0},{x:"2.250",y:"-0.600",z:-.75,angle:0,damage:[3,6],rate:4,type:1,speed:[100,130],number:1,spread:0,error:0,recoil:0},{x:"-2.250",y:"-0.600",z:-.75,angle:0,damage:[3,6],rate:4,type:1,speed:[100,130],number:1,spread:0,error:0,recoil:0}],radius:3.586}),O1Ill.add({name:"A-Speedster",level:6,model:5,code:605,specs:{shield:{capacity:[200,300],reload:[6,8]},generator:{capacity:[80,140],reload:[30,45]},ship:{mass:175,speed:[90,115],rotation:[60,80],acceleration:[90,140]}},shape:[3,2.914,2.408,1.952,1.675,1.49,1.349,1.263,1.198,1.163,1.146,1.254,1.286,1.689,2.06,2.227,2.362,2.472,2.832,3.082,3.436,3.621,3.481,2.48,2.138,2.104,2.138,2.48,3.481,3.621,3.436,3.082,2.832,2.472,2.362,2.227,2.06,1.689,1.286,1.254,1.146,1.163,1.198,1.263,1.349,1.49,1.675,1.952,2.408,2.914],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.000",z:0,angle:0,damage:[38,84],rate:1,type:2,speed:[175,230],number:1,spread:0,error:0,recoil:50},{x:"1.160",y:"-0.277",z:1.35,angle:-10,damage:[8,12],rate:2,type:1,speed:[100,130],number:1,spread:-10,error:0,recoil:0},{x:"-1.160",y:"-0.277",z:1.35,angle:10,damage:[8,12],rate:2,type:1,speed:[100,130],number:1,spread:-10,error:0,recoil:0}],radius:3.621}),O1Ill.add({name:"Rock-Tower",level:6,model:6,code:606,specs:{shield:{capacity:[300,500],reload:[8,11]},generator:{capacity:[75,115],reload:[35,45]},ship:{mass:450,speed:[75,90],rotation:[50,70],acceleration:[80,90]}},
shape:[3.78,3.758,3.974,3.976,3.946,3.508,1.532,1.64,1.556,1.426,1.347,1.298,1.269,1.764,1.894,2.075,3.269,3.539,3.933,3.989,4.058,4.127,4.524,4.416,3.634,3.577,3.634,4.416,4.524,4.127,4.058,3.989,3.933,3.539,3.269,2.075,1.894,1.764,1.68,1.298,1.347,1.426,1.556,1.64,1.532,3.508,3.946,3.976,3.974,3.758],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.050",y:"-3.780",z:-.42,angle:0,damage:[4,6],rate:8,type:1,speed:[150,230],number:1,spread:0,error:5,recoil:0},{x:"-1.050",y:"-3.780",z:-.42,angle:0,damage:[4,6],rate:8,type:1,speed:[150,230],number:1,spread:0,error:5,recoil:0}],radius:4.524}),O1Ill.add({name:"Barracuda",level:6,model:7,code:607,specs:{shield:{capacity:[300,400],reload:[8,12]},generator:{capacity:[100,150],reload:[8,14]},ship:{mass:675,speed:[70,90],rotation:[30,45],acceleration:[130,150],dash:{rate:2,burst_speed:[160,200],speed:[120,150],acceleration:[70,70],initial_energy:[50,75],energy:[20,30]}}},shape:[5.28,5.25,5.332,5.393,4.944,1.997,1.745,1.556,1.435,3.587,3.81,3.779,3.838,3.84,3.779,3.81,3.587,3.205,3.571,3.9,5.132,5.888,5.835,5.551,4.886,5.808,4.886,5.551,5.835,5.888,5.132,3.9,3.571,3.205,3.587,3.81,3.779,3.838,3.84,3.779,3.81,3.587,1.435,1.556,1.745,1.997,4.944,5.393,5.332,5.25],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[],radius:5.888}),O1Ill.add({name:"O-Defender",level:6,model:8,code:608,specs:{shield:{capacity:[400,550],reload:[10,13]},generator:{capacity:[70,100],reload:[25,40]},ship:{mass:500,speed:[70,80],rotation:[30,40],acceleration:[60,80]}},shape:[4.409,4.448,4.372,4.204,4.119,4.136,4.174,4.107,4.066,4.094,4.073,4.141,4.16,4.062,4.015,3.966,3.83,3.76,3.742,3.591,3.502,3.494,3.575,4.291,4.422,4.409,4.422,4.291,3.575,3.494,3.502,3.591,3.742,3.76,3.83,3.966,4.015,4.062,4.16,4.141,4.073,4.094,4.066,4.107,4.174,4.136,4.119,4.204,4.372,4.448],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-3.960",z:0,angle:0,damage:[35,60],rate:2,type:2,speed:[130,180],number:1,spread:0,error:0,recoil:0}],radius:4.448}),O1Ill.add({name:"Odyssey",level:7,model:1,code:701,specs:{shield:{capacity:[750,750],reload:[15,15]},generator:{capacity:[330,330],reload:[150,150]},ship:{mass:700,speed:[45,45],rotation:[20,20],acceleration:[150,150]}},shape:[11.623,11.646,10.525,8.979,7.873,3.633,3.688,8.551,8.989,8.821,9.353,9.348,9.272,9.272,9.348,9.353,8.977,9.064,9.121,4.686,5.299,6.216,7.781,8.276,8.144,7.775,8.144,8.276,7.781,6.216,5.299,4.686,9.121,9.064,8.977,9.353,9.348,9.272,9.272,9.348,9.353,8.821,8.989,8.551,3.688,3.633,7.873,8.979,10.525,11.646],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"8.800",y:"-2.400",z:0,angle:0,damage:[20,20],rate:3,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"-8.800",y:"-2.400",z:0,angle:0,damage:[20,20],rate:3,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"8.800",y:"2.400",z:0,angle:180,damage:[20,20],rate:3,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"-8.800",y:"2.400",z:0,angle:-180,damage:[20,20],rate:3,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"0.000",y:"-11.600",z:0,angle:0,damage:[250,250],rate:1,type:1,speed:[100,100],number:1,spread:0,error:0,recoil:300}],radius:11.646}),O1Ill.add({name:"Shadow X-3",level:7,model:2,code:702,specs:{shield:{capacity:[400,400],reload:[10,10]},generator:{capacity:[250,250],reload:[45,45]},ship:{mass:350,speed:[140,140],rotation:[35,35],acceleration:[35,35]}},shape:[7.8,7.281,5.239,4.765,3.913,3.347,4.285,4.477,4.43,4.217,7.087,7.031,6.866,6.852,6.779,6.51,7.063,7.453,7.661,7.011,3.892,3.21,5.711,6.424,6.413,6.312,6.413,6.424,5.711,3.21,3.892,7.011,7.661,7.453,7.063,6.51,6.779,6.852,6.866,7.031,7.087,4.217,4.43,4.477,4.285,3.347,3.913,4.765,5.239,7.281],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-7.800",z:0,angle:0,damage:[225,225],rate:1,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:500},{x:"5.400",y:"-1.200",z:-1.14,angle:0,damage:[4,4],rate:3,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:0},{x:"-5.400",y:"-1.200",z:-1.14,angle:0,damage:[4,4],rate:3,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:0},{x:"3.000",y:"-3.000",z:-1.2,angle:0,damage:[4,4],rate:4,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:0},{x:"-3.000",y:"-3.000",z:-1.2,angle:0,damage:[4,4],rate:4,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:0}],radius:7.8}),O1Ill.add({name:"Bastion",level:7,model:3,code:703,specs:{shield:{capacity:[400,400],reload:[20,20]},generator:{capacity:[500,500],reload:[100,100]},ship:{mass:350,speed:[80,80],rotation:[15,15],acceleration:[125,125]}},shape:[4.056,7.244,11.603,11.152,9.19,10.943,9.896,9.163,8.149,7.735,7.473,7.332,7.401,7.615,7.85,8.175,8.679,8.889,9.155,9.588,9.692,7.67,7.338,6.661,7.299,7.214,7.299,6.661,7.338,7.67,9.692,9.588,9.155,8.889,8.679,8.175,7.85,7.615,7.401,7.332,7.473,7.735,8.149,9.163,9.896,10.943,9.19,11.152,11.603,7.244],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.800",y:"-7.200",z:.08,angle:0,damage:[6,6],rate:5,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"-0.800",y:"-7.200",z:.08,angle:0,damage:[6,6],rate:5,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"3.318",y:"-11.119",z:.64,angle:3,damage:[8,8],rate:4,type:1,speed:[180,180],number:1,spread:0,error:0,recoil:0},{x:"-3.318",y:"-11.119",z:.64,angle:-3,damage:[8,8],rate:4,type:1,speed:[180,180],number:1,spread:0,error:0,recoil:0},{x:"5.930",y:"-9.197",z:-.64,angle:5,damage:[20,20],rate:1.5,type:1,speed:[160,160],number:1,spread:0,error:0,recoil:0},{x:"-5.930",y:"-9.197",z:-.64,angle:-5,damage:[20,20],rate:1.5,type:1,speed:[160,160],number:1,spread:0,error:0,recoil:0}],radius:11.603}),O1Ill.add({name:"Aries",level:7,model:4,code:704,specs:{shield:{capacity:[800,800],reload:[17,17]},generator:{capacity:[350,350],reload:[175,175]},ship:{mass:800,speed:[40,40],rotation:[20,20],acceleration:[150,150]}},shape:[8.386,8.406,7.816,4.278,7.535,7.919,8.431,8.279,7.842,6.772,7.119,7.875,8.096,8.1,7.875,7.119,6.772,7.842,8.279,8.431,7.919,7.535,3.408,7.88,8.184,8.116,8.184,7.88,3.408,7.535,7.919,8.431,8.279,7.842,6.772,7.119,7.875,8.096,8.1,7.875,7.119,6.772,7.842,8.279,8.431,7.919,7.535,4.278,7.816,8.406],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-8.370",z:0,angle:0,damage:[150,150],rate:.7,type:1,speed:[110,110],number:1,spread:0,error:0,recoil:0},{x:"5.959",y:"-5.959",z:.63,angle:-45,damage:[15,15],rate:4,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"-5.959",y:"-5.959",z:.63,angle:45,damage:[15,15],rate:4,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"5.959",y:"5.959",z:.63,angle:225,damage:[15,15],rate:4,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0},{x:"-5.959",y:"5.959",z:.63,angle:-225,damage:[15,15],rate:4,type:1,speed:[200,200],number:1,spread:0,error:0,recoil:0}],radius:8.431}),module.exports=O1Ill,this.BattleShipTypes=function(){function t(){this.types=[],this.types_by_code=[],this.types_by_name=[],this.levels=[]}return t.prototype.O00II=function(){return this.types[Math.floor(Math.random()*this.types.length)]},t.prototype.add=function(t){var e,i,s,n,l;for(this.types.push(t),this.types_by_code[t.code]=t,this.types_by_name[t.name]=t,null==this.levels[t.level]&&(this.levels[t.level]=[]),n=this.levels[t.level],e=i=0,s=n.length;i<s;e=++i)if(l=n[e],t.model<l.model)return void this.levels[t.level].splice(e,0,t);return this.levels[t.level].push(t)},t.prototype.getDefaultShip=function(){return this.types[0]},t.prototype.next=function(t){var e,i,s,n;return e=t.level,i=t.model,null==this.levels[e+1]?[]:(n=(i-1)/Math.max(1,this.levels[e].length-1),n=Math.round(n*(this.levels[e+1].length-2)),s=[this.levels[e+1][n]],n<this.levels[e+1].length-1&&s.push(this.levels[e+1][n+1]),s)},t.prototype.levelUpgrades=function(t){return t<7},t.prototype.shipUpgrades=function(t,e){return null==e&&(e=!1),e?t<6:null!=this.levels[t+1]},t.prototype.makePairs=function(){var t,e,i,s,n,l,a,o,r,h;for(h=[],l=i=2;i<=6;l=i+=1)for(n=this.levels[l].length,t=s=0,o=n-1;s<=o;t=s+=1)for(e=a=t+1,r=n-1;a<=r;e=a+=1)h.push([""+this.levels[l][t].name,""+this.levels[l][e].name])},t}(),BATTLE_SHIP_TYPES=new this.BattleShipTypes,module.exports=BATTLE_SHIP_TYPES,BATTLE_SHIP_TYPES=require("./battleshiptypes.js",BATTLE_SHIP_TYPES),BATTLE_SHIP_TYPES.add({name:"Renegade",level:3,model:1,code:301,specs:{shield:{capacity:[350,350],reload:[0,0]},generator:{capacity:[450,450],reload:[0,0]},ship:{mass:200,speed:[120,120],rotation:[80,80],acceleration:[120,120]}},shape:[2.736,2.713,4.12,4.122,3.698,3.386,3.008,2.848,2.745,3.602,3.567,3.426,3.35,3.348,3.428,3.554,3.608,1.822,1.71,1.637,1.292,1.052,1.26,1.619,1.774,1.751,1.774,1.619,1.26,1.052,1.292,1.637,1.71,1.822,3.608,3.554,3.428,3.348,3.35,3.426,3.567,3.602,2.745,2.848,3.008,3.386,3.698,4.122,4.12,2.713],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.000",y:"-2.736",z:0,angle:0,damage:[55,55],rate:1,type:1,speed:[110,110],number:1,spread:0,error:0,recoil:0}],radius:4.122}),BATTLE_SHIP_TYPES.add({name:"Stingray",level:3,model:2,code:302,specs:{shield:{capacity:[440,440],reload:[0,0]},generator:{capacity:[400,400],reload:[0,0]},ship:{mass:250,speed:[100,100],rotation:[90,90],acceleration:[110,110]}},shape:[2.7,3.359,3.421,3.066,2.548,2.582,2.553,2.551,2.547,2.464,3.05,3.006,2.936,2.936,3.006,3.05,2.758,2.676,2.798,2.627,2.482,2.804,2.811,2.761,3.174,3.156,3.174,2.761,2.811,2.804,2.482,2.627,2.798,2.676,2.758,3.05,3.006,2.936,2.936,3.006,3.05,2.464,2.547,2.551,2.553,2.582,2.548,3.066,3.421,3.359],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.690",y:"-3.300",z:-1.05,angle:0,damage:[20,20],rate:2,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:40},{x:"-0.690",y:"-3.300",z:-1.05,angle:0,damage:[20,20],rate:2,type:1,speed:[150,150],number:1,spread:0,error:0,recoil:40}],radius:3.421}),BATTLE_SHIP_TYPES.add({name:"Intrepid",level:3,model:3,code:303,specs:{shield:{capacity:[320,320],reload:[0,0]},generator:{capacity:[320,320],reload:[0,0]},ship:{mass:180,speed:[130,130],rotation:[110,110],acceleration:[80,80]}},shape:[4.16,4.111,3.886,3.506,3.001,2.581,2.254,1.974,1.69,1.479,1.282,1.132,1.028,.958,.909,.877,2.005,2.173,2.422,2.791,3.326,3.652,3.537,3.177,3.283,3.36,3.283,3.177,3.537,3.652,3.326,2.791,2.422,2.173,2.005,.877,.909,.958,1.028,1.132,1.282,1.479,1.69,1.974,2.254,2.581,3.001,3.506,3.886,4.111],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"0.783",y:"-3.200",z:.544,angle:3,damage:[4,4],rate:5,type:1,speed:[170,170],number:1,spread:0,error:0,recoil:0},{x:"-0.783",y:"-3.200",z:.544,angle:-3,damage:[4,4],rate:5,type:1,speed:[170,170],number:1,spread:0,error:0,recoil:0}],radius:4.16}),BATTLE_SHIP_TYPES.add({name:"Hammer",level:3,model:4,code:304,specs:{shield:{capacity:[500,500],reload:[0,0]},generator:{capacity:[350,350],reload:[0,0]},ship:{mass:280,speed:[130,130],rotation:[80,80],acceleration:[60,60],dash:{rate:2,burst_speed:[240,240],speed:[150,150],acceleration:[130,130],initial_energy:[60,60],energy:[30,30]}}},shape:[3.44,3.451,3.433,3.473,3.493,3.518,3.286,2.026,1.9,1.818,1.768,1.754,1.785,1.85,1.952,2.058,2.097,2.271,2.53,2.762,3.589,4.112,4.128,3.932,3.438,3.407,3.438,3.932,4.128,4.112,3.589,2.762,2.53,2.271,2.097,2.058,1.952,1.85,1.788,1.754,1.768,1.818,1.9,2.026,3.286,3.518,3.493,3.473,3.433,3.451],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[],radius:4.128}),BATTLE_SHIP_TYPES.add({name:"Cronus",level:3,model:5,code:305,specs:{shield:{capacity:[300,300],reload:[0,0]},generator:{capacity:[500,500],reload:[0,0]},ship:{mass:130,speed:[140,140],rotation:[100,100],acceleration:[140,140]}},shape:[2.976,2.926,2.734,2.757,3.249,3.239,3.176,3.248,4.092,3.943,3.773,3.593,3.519,3.535,.516,.552,.601,.673,.776,.937,1.154,1.137,1.061,1.009,.977,.962,.977,1.009,1.061,1.137,1.154,.937,.776,.673,.601,.552,.516,3.535,3.52,3.593,3.773,3.943,4.092,3.248,3.176,3.239,3.249,2.757,2.734,2.926],IllO1:.15,I0I1l:.4,OlOOO:.98,lasers:[{x:"1.920",y:"-2.560",z:0,angle:0,damage:[3,3],rate:4,type:1,speed:[120,120],number:1,spread:0,error:0,recoil:0},{x:"-1.920",y:"-2.560",z:0,angle:0,damage:[3,3],rate:4,type:1,speed:[120,120],number:1,spread:0,error:0,recoil:0},{x:"0.960",y:"-2.560",z:0,angle:0,damage:[5,5],rate:3,type:1,speed:[140,140],number:1,spread:0,error:0,recoil:0},{x:"-0.960",y:"-2.560",z:0,angle:0,damage:[5,5],rate:3,type:1,speed:[140,140],number:1,spread:0,error:0,recoil:0}],radius:4.092}),module.exports=BATTLE_SHIP_TYPES,this.WeaponTypes=function(){function t(){this.types=[],this.types_by_code=[]}return t.prototype.add=function(t){return t.id=this.types.length,this.types.push(t),this.types_by_code[t.code]=t},t}(),WEAPON_TYPES=new this.WeaponTypes,WEAPON_TYPES.add({code:10,name:"Rockets",type:"rocket",model:"ROCKET_MODEL",ammo:4,damage:50,damage_area:20,price:100,shape:[1.2,1.127,1.017,.934,.8,.71,.584,.484,.42,.377,.347,.326,.312,.317,.335,.363,.402,.46,.52,.592,.92,1.116,1.225,1.429,1.425,1.403,1.425,1.429,1.225,1.116,.92,.592,.52,.46,.402,.363,.335,.317,.312,.326,.347,.377,.42,.484,.584,.71,.8,.934,1.017,1.127],speed:250,OlOOO:250,shield:20,mass:50,llOIl:!0,rate:.5,armed_delay:0,glyph:"l"}),WEAPON_TYPES.add({code:11,name:"Missiles",type:"rocket",model:"MISSILE_MODEL",ammo:2,damage:150,damage_area:30,price:250,shape:[2,1.908,1.768,1.53,1.332,.841,.693,.597,.53,.485,.452,.455,.494,.495,.484,.487,.501,.523,.557,.606,.703,1.657,2.027,2.03,2.036,2.004,2.036,2.03,2.027,1.657,.703,.606,.557,.523,.501,.487,.484,.493,.495,.455,.452,.485,.53,.597,.693,.841,1.332,1.53,1.768,1.908],speed:160,OlOOO:200,shield:75,mass:100,llOIl:!0,rate:.2,armed_delay:60,glyph:"k"}),WEAPON_TYPES.add({code:12,name:"Torpedo",type:"rocket",model:"TORPEDO_MODEL",ammo:1,damage:500,damage_area:35,price:500,shape:[3,2.877,2.614,1.831,1.34,1.064,.89,.78,.704,.648,.613,.588,.575,.575,.589,.61,.648,.705,.773,.891,1.05,1.334,1.837,3.245,3.312,3.306,3.312,3.245,1.837,1.334,1.05,.891,.773,.705,.648,.61,.589,.575,.575,.588,.613,.648,.704,.78,.89,1.064,1.34,1.831,2.614,2.877],speed:140,OlOOO:20,shield:300,mass:200,llOIl:!0,icon_scale:1.2,rate:1,armed_delay:120,glyph:"j"}),WEAPON_TYPES.add({code:20,name:"Space Mines",type:"mine",model:"MINE_MODEL",ammo:8,damage:50,damage_area:15,shield:30,price:100,OlOOO:200,mass:100,radius:1.5,icon_scale:.75,llOIl:!0,shape:[1.12,1.1,1.16,1.448,1.61,1.573,1.306,1.005,1.01,.981,.963,1.353,1.609,1.61,1.353,.963,.981,1.01,1.005,1.306,1.573,1.61,1.448,1.16,1.1,1.12,1.1,1.16,1.448,1.61,1.573,1.306,1.005,1.01,.981,.963,1.353,1.609,1.61,1.353,.963,.981,1.01,1.005,1.306,1.573,1.61,1.448,1.16,1.1],rate:4,armed_delay:120,glyph:"m"}),WEAPON_TYPES.add({code:21,name:"Heavy Mines",type:"mine",model:"MINE2_MODEL",ammo:4,damage:200,damage_area:30,shield:100,price:200,OlOOO:150,mass:200,radius:2.5,llOIl:!0,shape:[2.415,2.335,1.926,1.68,1.666,2.091,2.415,2.373,1.976,1.68,1.674,2.03,2.414,2.415,2.03,1.674,1.68,1.976,2.373,2.415,2.091,1.666,1.68,1.926,2.335,2.415,2.335,1.926,1.68,1.666,2.091,2.415,2.373,1.976,1.68,1.674,2.03,2.414,2.415,2.03,1.674,1.68,1.976,2.373,2.415,2.091,1.666,1.68,1.926,2.335],rate:1,armed_delay:240,glyph:"n"}),WEAPON_TYPES.add({code:40,name:"Mining Pod",type:"pod",model:"MINING_POD_MODEL",damage:10,price:120,shield:50,ammo:1,icon_scale:1.2,rate:1,glyph:"o"}),WEAPON_TYPES.add({code:41,name:"Attack Pod",type:"pod",model:"ATTACK_POD_MODEL",damage:5,price:120,shield:70,ammo:1,icon_scale:1.2,rate:2,glyph:"p"}),WEAPON_TYPES.add({code:42,name:"Defense Pod",type:"pod",model:"DEFENCE_POD_MODEL",shield:150,regen:0,price:120,ammo:1,icon_scale:1.2,rate:1,glyph:"q"}),WEAPON_TYPES.add({code:90,name:"Power Cells",type:"pod",shield:100,regen:100,price:0,ammo:2,icon_scale:1.2,rate:1,llOIl:!0,glyph:"»"}),WEAPON_TYPES.add({code:91,name:"Shield Cells",type:"pod",shield:100,regen:100,price:0,ammo:2,icon_scale:1.2,rate:1,llOIl:!0,glyph:"¹"}),module.exports=WEAPON_TYPES,this.AlienTypes=function(){function t(){this.types=[],this.types_by_code=[]}return t.prototype.add=function(t){return t.id=this.types.length,this.types.push(t),this.types_by_code[t.code]=t},t}(),ALIEN_TYPES=new this.AlienTypes,ALIEN_TYPES.add({code:10,name:"Chicken",damage:[8,10,15,30],rate:[1,2,3,2],laser_speed:[90,100,100,90],shape:[2.646,2.688,6.507,6.482,6.292,6.209,6.046,5.763,5.583,5.493,5.576,5.752,5.928,5.84,5.711,5.724,5.866,6.006,4.858,5.097,5.447,5.938,6.19,6.149,6.164,6.209,6.159,6.139,6.176,5.901,5.409,5.06,4.822,6.006,5.866,5.724,5.711,5.84,5.928,5.752,5.576,5.493,5.583,5.763,6.046,6.209,6.292,6.482,6.507,2.689],speed:[60,50,40,20],OlOOO:[200,150,130,80],shield:[10,20,50,1e3],regen:[0,1,2],mass:[50,100,200,600],scale:[.25,.4,.6,2],hue:[120,60,0,300],facing:!0,IOII1:[4,6,8,15],move:0,llOIl:0}),ALIEN_TYPES.add({code:11,name:"Crab",damage:[8,10,15],rate:[5,5,5],laser_speed:[80,90,100],shape:[6.087,6.215,5.513,8.082,7.584,7.148,6.465,7.437,7.223,7.063,7.078,7.172,7.07,6.92,6.953,7.137,7.445,7.504,7.487,7.652,7.728,7.601,7.587,7.593,9.273,9.319,7.503,7.371,7.204,7.208,7.175,6.899,6.752,6.721,6.467,6.189,6.027,5.999,6.122,6.267,6.218,6.2,6.344,6.59,6.772,5.987,6.755,7.306,7.83,5.303],speed:[80,80,70],OlOOO:[180,200,230],shield:[30,60,120],regen:[1,2,3],mass:[50,80,150],scale:[.25,.35,.4],hue:[120,60,0],facing:!1,IOII1:[4,6,8],move:1,llOIl:1}),ALIEN_TYPES.add({code:12,name:"Fortress",damage:[15,50],rate:[3,2],laser_speed:[110,130],shape:[13.842,15.193,15.57,14.421,13.336,12.623,12.152,11.917,11.891,11.419,11.8,13.151,14.854,16.13,16.083,14.982,14.019,11.944,11.74,11.565,11.379,11.773,12.587,13.769,14.664,15.208,14.688,13.895,12.599,11.814,11.394,11.587,11.76,11.971,14.019,14.982,16.083,16.13,14.854,13.151,11.8,11.419,11.891,11.917,12.152,12.623,13.336,14.421,15.57,15.193],speed:[55,50],OlOOO:200,shield:[1200,2500],regen:[2,6],mass:[500,1e3],scale:[.7,1.3],facing:!0,IOII1:[8,10],hue:[60,0],move:2,llOIl:0}),ALIEN_TYPES.add({code:13,name:"Caterpillar",damage:1,rate:1,laser_speed:100,shape:[1.293,1.312,1.355,1.424,1.522,3.471,3.382,3.327,3.371,3.474,3.648,3.901,4.032,4.089,4.215,4.256,4.162,4.107,4.112,3.761,3.458,3.223,3.049,2.942,2.881,2.88,2.881,2.942,3.049,3.223,3.458,3.761,4.112,4.107,4.162,4.256,4.215,4.089,4.032,3.901,3.648,3.474,3.371,3.327,3.382,3.471,1.522,1.424,1.355,1.312],speed:60,OlOOO:200,shield:50,regen:0,mass:50,scale:.5,facing:!0,IOII1:4,hue:[180],move:0,llOIl:1}),ALIEN_TYPES.add({code:14,name:"Candlestick",damage:[4,5,5],rate:[2,3,4],laser_speed:[120,130,140],laser_x:[-2.5,-1.5,0,1.5,2.5],laser_y:[0,0,0,0,0],shape:[3.318,3.209,2.697,1.948,4.143,3.803,5.34,5.082,6.274,5.865,5.48,5.094,4.727,4.469,4.153,3.929,3.791,3.642,3.537,3.493,3.514,3.485,3.529,3.636,3.813,3.902,3.736,3.563,3.455,3.414,3.429,3.397,3.442,3.551,3.691,3.835,4.061,4.377,4.647,5.027,5.447,5.837,6.305,4.917,5.265,3.637,4.052,4.09,2.412,3.119],speed:[120,130,140],OlOOO:[200,210,220],shield:[80,80,80],regen:[1,2,3],mass:[70,60,50],scale:[.7,.6,.5],facing:!1,IOII1:[4,3,2],hue:[120,60,0],move:1,llOIl:1}),ALIEN_TYPES.add({code:15,name:"Hirsute",damage:[50,80],rate:[2,1.7],laser_speed:[130,110],shape:[7.852,7.246,6.376,5.831,5.408,5.129,5.217,5.318,4.56,4.365,4.265,4.23,4.059,3.915,3.91,4.05,6.25,5.593,7.855,6.987,9.754,8.492,7.691,7.592,7.722,7.852,7.742,7.611,7.709,8.509,9.77,7.018,7.868,5.617,6.258,4.118,3.981,3.989,4.132,4.302,4.336,4.442,4.807,5.431,5.271,5.205,5.465,5.884,6.464,7.334],speed:[60,40],OlOOO:[100,80],shield:[1500,2500],regen:[10,20],mass:[400,800],scale:[1.2,1.5],facing:!1,IOII1:[8,13],hue:[60,0],move:1,llOIl:1}),ALIEN_TYPES.add({code:16,name:"Piranha",damage:[1],rate:[.25,.5,.75,1],laser_speed:[240,275,300,300],shape:[6.588,6.545,6.457,6.348,5.9,6.953,6.772,6.246,4.55,3.797,3.087,2.964,2.852,3.536,3.548,2.87,2.711,2.612,2.591,2.78,2.798,2.873,3.451,3.964,5.243,6.588,5.243,3.964,3.451,2.873,2.798,2.78,2.591,2.612,2.711,2.87,3.548,3.536,2.852,2.964,3.087,3.797,4.55,6.246,6.772,6.953,5.9,6.348,6.457,6.545],speed:[60,70,80,40],OlOOO:[250,280,320,225],shield:[40,75,120,1750],regen:[5],mass:[150,200,250,1e3],scale:[.4,.55,.7,1.6],facing:!1,IOII1:[4,4.5,5,10],hue:[120,60,0,300],move:0,llOIl:2}),ALIEN_TYPES.add({code:17,name:"Pointu",damage:[5,6,7],rate:[6,7,8],laser_speed:[120,130,150],shape:[10.24,9.158,5.586,4.245,3.446,7.026,6.974,6.804,6.787,6.94,6.998,6.057,5.238,4.667,4.279,4.017,3.822,4.011,6.12,7.485,9.399,8.378,9.998,8.776,10.443,8.969,10.443,8.776,9.998,8.378,9.399,7.485,6.12,4.011,3.822,4.017,4.279,4.667,5.238,6.057,6.998,6.94,6.787,6.804,6.974,7.026,3.446,4.245,5.586,9.158],speed:[100,110,120],OlOOO:[200,220,240],shield:[80,100,150],regen:[3,3,4],mass:[50,60,70],scale:[.25,.3,.35],facing:!1,IOII1:[4],hue:[120,60,300],move:1,llOIl:1}),ALIEN_TYPES.add({code:18,name:"Fork",damage:[15,15,15],rate:[.8,1.3,2],laser_speed:[100,120,140],laser_x:[-2.5,-1.5,1.5,2.5],laser_y:[0,1,1,0],shape:[.272,.268,.264,.267,3.182,3.551,3.378,3.092,2.889,2.738,2.641,2.588,2.554,2.554,2.563,2.497,2.352,2.261,2.268,2.391,2.499,2.197,2.09,2.197,2.555,2.859,2.555,2.197,2.09,2.197,2.499,2.391,2.268,2.261,2.352,2.497,2.563,2.554,2.554,2.588,2.641,2.738,2.889,3.092,3.378,3.542,3.172,.267,.264,.268],speed:[100,90,80],OlOOO:[200,180,160],shield:[100,200,300],regen:[2,4,6],mass:[80,100,120],scale:[.6,.7,.8],facing:!1,IOII1:[4,5,6],hue:[100,40,340],move:1,llOIl:1,I0100:-1}),ALIEN_TYPES.add({code:19,name:"Saucer",damage:[120,150,200],rate:[.3,.4,.5],laser_speed:[120,120,120],shape:[7.148,7.253,7.488,7.871,8.437,9.212,9.96,10.033,10.097,10.107,9.718,8.984,8.281,8.281,8.984,9.838,10.051,10.029,9.961,9.877,9.114,8.789,8.794,8.719,8.608,8.528,8.604,8.719,8.776,8.766,9.081,9.885,9.953,10.042,10.057,9.775,8.931,8.221,8.221,8.931,9.664,10.104,10.1,10.027,9.97,9.224,8.438,7.894,7.49,7.251],speed:[60,50,40],OlOOO:[120,100,80],shield:[1e3,2500,4e3],regen:[5,10,15],mass:[300,600,900],scale:[.4,.8,1.2],facing:!0,IOII1:[4,8,12],hue:[50,0,300],move:2,llOIl:0,rotative:!0}),ALIEN_TYPES.add({code:20,name:"Boss",damage:[200,300],rate:[1,1.2],laser_speed:[100,90],shape:[23.71,23.783,23.966,22.65,26.18,25.944,37.153,39.341,40.226,39.571,39.445,39.45,36.49,34.512,32.393,28.147,25.152,24.169,24.107,24.657,30.595,30.564,24.99,24.908,22.941,22.579,22.941,24.908,24.99,30.564,30.595,24.657,24.107,24.169,25.152,28.147,32.393,34.512,36.49,39.45,39.445,39.571,40.225,39.341,37.153,25.944,26.227,22.65,23.966,23.783],speed:[30,20],OlOOO:[75,50],shield:[5e3,1e4],regen:[20,30],mass:[500,1e3],scale:[.5,.7],facing:!1,IOII1:[15,25],hue:[0,300],move:0,llOIl:0}),module.exports=ALIEN_TYPES,"undefined"!=typeof require&&null!==require&&require("../util/math.js"),this.lIlOI=function(){function t(t){this.I110I=t}return t.prototype.lI1IO=function(t,e){var i,s,n;if(i=e.angle/180*Math.PI,i<0&&(i+=2*Math.PI),e.r<i-Math.PI&&(i-=2*Math.PI),e.r>i+Math.PI&&(i+=2*Math.PI),Math.abs(i-e.r)<5*t.IllO1&&0===e.O0lO0){if(s=e.r,e.r=.8*e.r+.2*i,e.IOlOI=e.r-s,e.r<0&&(e.r+=2*Math.PI),e.r>2*Math.PI)return e.r-=2*Math.PI}else if(i<e.r?n=-1:i>e.r&&(n=1),0===e.O0lO0&&(e.IOlOI=.8*e.IOlOI+.2*t.IllO1*n),e.r+=e.IOlOI,e.r<0&&(e.r+=2*Math.PI),e.r>2*Math.PI)return e.r-=2*Math.PI},t.prototype.l1O00=function(t,e){var i,s,n,l,a;this.lI1IO(t,e),e.alive&&(s=t.speed,e.dash&&null!=t.dash_speed&&(s=t.dash_speed),s*=this.I110I.mode.options.speed_mod,e.up||e.dash?(l=s*Math.cos(e.r),a=s*Math.sin(e.r)):e.OlOI1?(l=-s*Math.cos(e.r),a=-s*Math.sin(e.r)):(l=0,a=0),this.I110I.mode.options.strafe>0&&(e.strafe_left&&(l-=s*Math.sin(e.r)*this.I110I.mode.options.strafe,a+=s*Math.cos(e.r)*this.I110I.mode.options.strafe,(n=Math.sqrt(l*l+a*a))>s&&(l=l/n*s,a=a/n*s)),e.strafe_right&&(l+=s*Math.sin(e.r)*this.I110I.mode.options.strafe,a-=s*Math.cos(e.r)*this.I110I.mode.options.strafe,(n=Math.sqrt(l*l+a*a))>s&&(l=l/n*s,a=a/n*s))),i=t.OlOOO,e.dash&&null!=t.dash_inertia&&(i=t.dash_inertia),null==this.I110I.mode||null==this.I110I.mode.options.friction_ratio||e.up||e.dash||(i=Math.pow(i,this.I110I.mode.options.friction_ratio)),0!==e.O0lO0||e.guided||!(e.up||e.strafe_left||e.strafe_right||e.dash)&&e.glide?(0===e.O0lO0&&Math.sqrt(e.OI10I*e.OI10I+e.OI0O1*e.OI0O1)>t.speed*this.I110I.mode.options.speed_mod&&(e.OI10I=e.OI10I*i,e.OI0O1=e.OI0O1*i),e.O0lO0=Math.max(0,e.O0lO0-1)):(e.OI10I=e.OI10I*i+l*(1-i),e.OI0O1=e.OI0O1*i+a*(1-i)),e.x+=e.OI10I,e.y+=e.OI0O1,e.x=Math.fmod(e.x+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01,e.y=Math.fmod(e.y+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01,e.dash&&null!=t.dash_energy&&(e.generator=Math.max(0,e.generator-t.dash_energy/60),0===e.generator&&(e.dash=!1)))},t}(),module.exports=this.lIlOI,"undefined"!=typeof require&&null!==require&&require("../util/math.js"),this.WeaponPhysics=function(){function t(t){this.I110I=t,this.miningpod_k=.01,this.miningpod_f=.2,this.miningpod_ak=.05,this.miningpod_af=.3,this.attackpod_k=.02,this.attackpod_f=.2,this.attackpod_ak=.1,this.attackpod_af=.3,this.defencepod_k=.05,this.defencepod_f=.3,this.defencepod_ak=.05,this.defencepod_af=.3}return t.prototype.miningPodStep=function(t,e,i,s,n){var l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;return I=t.ship.status.r,l=t.ship.status.x+Math.cos(I)*(s+4)-t.x,a=t.ship.status.y+Math.sin(I)*(s+4)-t.y,l<-this.I110I.Ill01&&(l+=this.I110I.size),l>this.I110I.Ill01&&(l-=this.I110I.size),a<-this.I110I.Ill01&&(a+=this.I110I.size),a>this.I110I.Ill01&&(a-=this.I110I.size),I=Math.atan2(a,l),I<t.r-Math.PI&&(I+=2*Math.PI),I>t.r+Math.PI&&(I-=2*Math.PI),t.IOlOI+=(I-t.r)*this.miningpod_ak,t.IOlOI*=1-this.miningpod_af,t.r+=t.IOlOI,o=e/i,d=n%2400/600+o,c=Math.cos(t.ship.status.r),p=Math.sin(t.ship.status.r),O=p,m=-c,v=0===s?0:1,f=Math.sin(2*d*Math.PI*3.25)*s*.5-s-4,g=Math.cos(2*d*Math.PI)*s,y=(Math.sin(2*d*Math.PI)+4)*v,r=t.ship.status.x+c*f+O*g,h=t.ship.status.y+p*f+m*g,u=y,t.OI10I+=(r-t.x)*this.miningpod_k,t.OI0O1+=(h-t.y)*this.miningpod_k,t.IIl1O+=(u-t.z)*this.miningpod_k,t.OI10I*=1-this.miningpod_f,t.OI0O1*=1-this.miningpod_f,t.IIl1O*=1-this.miningpod_f,t.x+=t.OI10I,t.y+=t.OI0O1,t.z+=t.IIl1O},t.prototype.attackPodStep=function(t,e,i,s,n,l){var a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b;return c=t.ship.status.r,null!=l&&(a=l.x-t.x,o=l.y-t.y,a<-this.I110I.Ill01&&(a+=this.I110I.size),a>this.I110I.Ill01&&(a-=this.I110I.size),o<-this.I110I.Ill01&&(o+=this.I110I.size),o>this.I110I.Ill01&&(o-=this.I110I.size),c=Math.atan2(o,a)),c<t.r-Math.PI&&(c+=2*Math.PI),c>t.r+Math.PI&&(c-=2*Math.PI),t.IOlOI+=(c-t.r)*this.attackpod_ak,t.IOlOI*=1-this.attackpod_af,t.r+=t.IOlOI,r=e/i+.3,I=n%2400/600+r,p=Math.cos(t.ship.status.r),O=Math.sin(t.ship.status.r),m=O,f=-p,b=0===s?0:1,g=Math.sin(2*I*Math.PI*3.25)*s*.5-s-2,y=Math.cos(2*I*Math.PI)*s,v=(Math.sin(2*I*Math.PI)+4)*b,h=t.ship.status.x+p*g+m*y,u=t.ship.status.y+O*g+f*y,d=v,t.OI10I+=(h-t.x)*this.attackpod_k,t.OI0O1+=(u-t.y)*this.attackpod_k,t.IIl1O+=(d-t.z)*this.attackpod_k,t.OI10I*=1-this.attackpod_f,t.OI0O1*=1-this.attackpod_f,t.IIl1O*=1-this.attackpod_f,t.x+=t.OI10I,t.y+=t.OI0O1,t.z+=t.IIl1O},t.prototype.defencePodStep=function(t,e,i,s,n,l){var a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w;return a=t.x-t.ship.status.x,o=t.y-t.ship.status.y,a<-this.I110I.Ill01&&(a+=this.I110I.size),a>this.I110I.Ill01&&(a-=this.I110I.size),o<-this.I110I.Ill01&&(o+=this.I110I.size),o>this.I110I.Ill01&&(o-=this.I110I.size),p=Math.atan2(o,a),p<t.r-Math.PI&&(p+=2*Math.PI),p>t.r+Math.PI&&(p-=2*Math.PI),t.IOlOI+=(p-t.r)*this.defencepod_ak,t.IOlOI*=1-this.defencepod_af,t.r+=t.IOlOI,h=e/i+.6,c=n%4800/1200+h,O=Math.cos(t.ship.status.r),m=Math.sin(t.ship.status.r),f=m,g=-O,w=0===s?0:1,y=Math.sin(2*c*Math.PI*3.25)*(s+1),v=Math.cos(2*c*Math.PI)*(s+1),b=(Math.sin(2*c*Math.PI)+4)*w,null!=l?(a=l.x-t.ship.status.x,o=l.y-t.ship.status.y,a<-this.I110I.Ill01&&(a+=this.I110I.size),a>this.I110I.Ill01&&(a-=this.I110I.size),o<-this.I110I.Ill01&&(o+=this.I110I.size),o>this.I110I.Ill01&&(o-=this.I110I.size),p=Math.atan2(o,a)+Math.sin(2*c*Math.PI)*Math.PI*.125,r=1.2+.2*Math.cos(2*c*Math.PI),u=t.ship.status.x+Math.cos(p)*(s+r),d=t.ship.status.y+Math.sin(p)*(s+r)):(u=t.ship.status.x+O*y+f*v,d=t.ship.status.y+m*y+g*v),I=b,t.OI10I+=(u-t.x)*this.defencepod_k,t.OI0O1+=(d-t.y)*this.defencepod_k,t.IIl1O+=(I-t.z)*this.defencepod_k,t.OI10I*=1-this.defencepod_f,t.OI0O1*=1-this.defencepod_f,t.IIl1O*=1-this.defencepod_f,t.x+=t.OI10I,t.y+=t.OI0O1,t.z+=t.IIl1O},t.prototype.rocketStep=function(t){for(var e,i;t.r<t.target_r-Math.PI;)t.r+=2*Math.PI;for(;t.r>t.target_r+Math.PI;)t.r-=2*Math.PI;return t.r=.94*t.r+.06*t.target_r,e=t.speed*Math.cos(t.r),i=t.speed*Math.sin(t.r),t.OI10I=t.OI10I*t.OlOOO+e*(1-t.OlOOO),t.OI0O1=t.OI0O1*t.OlOOO+i*(1-t.OlOOO),t.x+=t.OI10I,t.y+=t.OI0O1,t.x=Math.fmod(t.x+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01,t.y=Math.fmod(t.y+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01},t.prototype.mineStep=function(t){var e,i,s,n,l,a;return this.I110I.mode.rotate_mines?(l=-t.y,a=t.x,n=Math.sqrt(l*l+a*a),n>0&&(l/=n,a/=n),e=n*Math.PI*2,i=l*e/216e3,s=a*e/216e3):(i=0,s=0),t.OI10I=t.OI10I*t.OlOOO+i*(1-t.OlOOO),t.OI0O1=t.OI0O1*t.OlOOO+s*(1-t.OlOOO),t.x+=t.OI10I,t.y+=t.OI0O1,t.x=Math.fmod(t.x+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01,t.y=Math.fmod(t.y+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01},t}(),module.exports=this.WeaponPhysics,"undefined"!=typeof require&&null!==require&&require("../util/math.js"),this.AlienPhysics=function(){function t(t){this.I110I=t,this.kr=.05,this.fr=.3}return t.prototype.alienStep=function(t){for(var e,i,s,n;t.r<t.target_r-Math.PI;)t.r+=2*Math.PI;for(;t.r>t.target_r+Math.PI;)t.r-=2*Math.PI;return e=t.target_r-t.r,t.IOlOI=e*this.kr,t.IOlOI*=1-this.fr,t.r+=t.IOlOI,i=t.speed,t.dashing&&(i=t.dash_speed),s=i*Math.cos(t.r),n=i*Math.sin(t.r),t.OI10I=t.OI10I*t.OlOOO+s*(1-t.OlOOO),t.OI0O1=t.OI0O1*t.OlOOO+n*(1-t.OlOOO),t.x+=t.OI10I,t.y+=t.OI0O1,t.x=Math.fmod(t.x+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01,t.y=Math.fmod(t.y+this.I110I.Ill01,this.I110I.size)-this.I110I.Ill01},t}(),module.exports=this.AlienPhysics,this.ShipInstance=function(){function t(t){this.type=t,this.levels=[0,0,0,0,0,0,0,0],this.buildLasers(),this.updateParameters(),this.next_dash=0}return t.prototype.buildLasers=function(){var t,e,i,s,n;for(this.lasers=[],s=this.type.lasers,n=[],t=0,i=s.length;t<i;t++)e=s[t],n.push(this.lasers.push({type:e,next_shot:0}));return n},t.prototype.clone=function(){var e,i,s,n;for(n=new t(this.type),e=i=0,s=this.levels.length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i)n.levels[e]=this.levels[e];return n},t.prototype.lllO0=function(){},t.prototype.read=function(t){var e,i;for(e=i=0;i<=7;e=i+=1)this.levels[e]=15&t,t>>=4},t.prototype.IlOII=function(){var t,e,i;for(i=0,t=e=0;e<=7;t=e+=1)i+=this.levels[t]<<4*t;return i},t.prototype.countUpgrades=function(){var t,e,i;for(i=0,t=e=0;e<=7;t=e+=1)i+=this.levels[t];return i},t.prototype.lO010=function(t,e){var i;return"number"==typeof t?t:(i=e/this.type.level,t[0]*(1-i)+t[1]*i)},t.prototype.allMaxed=function(){var t,e,i;for(i=this.levels,t=0,e=i.length;t<e;t++)if(i[t]<this.type.level)return!1;return!0},t.prototype.OI11I=function(){return this.read(0)},t.prototype.set=function(t,e){var i,s,n;for(null==e&&(e=1),i=s=0;s<=7;i=s+=1)n=Math.pow(10,7-i),this.levels[i]=Math.floor(Math.max(0,Math.min(e,t/n%10)))},t.prototype.isUpgraded=function(){var t,e,i,s,n;for(n=0,s=this.levels,t=0,i=s.length;t<i;t++)e=s[t],n+=e;return n>=8},t.prototype.updateParameters=function(){var t,e,i,s,n;for(this.shield_capacity=this.lO010(this.type.specs.shield.capacity,this.levels[0]),this.shield_reload=this.lO010(this.type.specs.shield.reload,this.levels[1]),this.generator_capacity=this.lO010(this.type.specs.generator.capacity,this.levels[2]),this.generator_reload=this.lO010(this.type.specs.generator.reload,this.levels[3]),n=this.lasers,t=0,i=n.length;t<i;t++)e=n[t],e.damage=this.lO010(e.type.damage,this.levels[4]),e.speed=this.lO010(e.type.speed,this.levels[5]);if(this.speed=.004*this.lO010(this.type.specs.ship.speed,this.levels[6]),s=this.lO010(this.type.specs.ship.acceleration,this.levels[7]),this.OlOOO=Math.exp(Math.log(.5)/(3e3/s)),this.IllO1=.15*this.lO010(this.type.specs.ship.rotation,this.levels[7])/100,this.crystals_capacity=this.type.level*this.type.level*20,null!=this.type.specs.ship.dash)return this.dash_speed=.004*this.lO010(this.type.specs.ship.dash.speed,this.levels[5]),this.dash_burst_speed=.004*this.lO010(this.type.specs.ship.dash.burst_speed,this.levels[4]),s=this.lO010(this.type.specs.ship.dash.acceleration,this.levels[4]),this.dash_inertia=Math.exp(Math.log(.5)/(3e3/s)),
this.dash_initial_energy=this.lO010(this.type.specs.ship.dash.initial_energy,this.levels[4]),this.dash_energy=this.lO010(this.type.specs.ship.dash.energy,this.levels[5])},t}(),module.exports=this.ShipInstance,l000I=function(){function t(t){this.seed=null!=t?t:Math.random(),this.seed<1&&(this.seed*=1<<30),this.a=13971,this.b=12345,this.size=1<<30,this.lIOlO=this.size-1,this.O01II=1/this.size,this.OO1O0(),this.OO1O0(),this.OO1O0()}return t.prototype.next=function(){return this.seed=this.seed*this.a+this.b&this.lIOlO,this.seed*this.O01II},t.prototype.O1010=function(t,e){return null!=e?Math.floor(Math.pow(this.next(),e)*t):Math.floor(this.next()*t)},t.prototype.OO1O0=function(){return this.seed=this.seed*this.a+this.b&this.lIOlO},t.prototype.feed=function(t){return this.seed=this.seed*this.a*t+this.b&this.lIOlO},t}(),module.exports=l000I,this.I0l11=function(){function t(t,e,i,s,n,l,a,o){var r;this.parent=t,this.x=e,this.y=i,this.OI10I=s,this.OI0O1=n,this.points=l,this.I0O0I=a,this.id=o,r=new l000I(this.id),this.l1OI0=this.parent.getModelInstance(this.id),this.l1OI0.position.set(this.x,this.y,0),this.l1OI0.rotation.x=r.next()*Math.PI*2,this.l1OI0.rotation.y=r.next()*Math.PI*2,this.size=.4*Math.pow(this.points,.4),this.l1OI0.scale.set(this.size,this.size,this.size),this.eat_time=0}return t.prototype.check=function(t){var e;if(e=t.ll01O,this.eat_time>0){if(e-this.eat_time>30)return this.parent.remove(this)}else if(e-this.I0O0I>540&&e-this.I0O0I>600)return this.parent.remove(this)},t.prototype.dispose=function(){},t.prototype.III10=function(t){var e,i,s,n;return i=Date.now()%1e4/1e4*Math.PI*2,this.l1OI0.rotation.z=i,n=t.ll01O,s=(n-this.I0O0I)/60,s=1-Math.exp(-s),this.l1OI0.position.x=this.x+this.OI10I*s,this.l1OI0.position.y=this.y+this.OI0O1*s,t.I1I1O(this.l1OI0),null!=this.eater?(s=n-this.eat_time,e=Math.pow(Math.max(0,Math.min(1,s/30)),1),t.fixPositionXY(this.eater),this.l1OI0.position.x*=1-e,this.l1OI0.position.y*=1-e,this.l1OI0.position.x+=e*this.eater.x,this.l1OI0.position.y+=e*this.eater.y):n-this.I0O0I>540?(e=Math.max(0,Math.min(1,(n-this.I0O0I-540)/60)),e=Math.max(.001,Math.pow(1-e,.5)*this.size),this.l1OI0.scale.set(e,e,e)):void 0},t}(),this.CrystalModel=function(){function t(t){var e,i,s,n,l,a;for(this.id=t,this.geometry=new THREE.IcosahedronGeometry(1,0),s=new llllO(this.id),new l000I(this.id),l=this.geometry.vertices,e=0,i=l.length;e<i;e++)a=l[e],n=Math.pow(s.O01Il(a.x,a.y,a.z,2),2),a.x*=1+n,a.y*=1+n,a.z*=1+n;this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals()}return t}(),this.lOIl1=function(){function t(t){var e,i;for(this.I110I=t,this.I0llI=new THREE.Group,this.I0llI.position.set(0,0,-1),this.crystals_by_id=[],this.OO1I0=[],this.models=[],e=i=1;i<=10;e=i+=1)this.models.push(this.createModel(e));this.material=new THREE.MeshPhongMaterial({color:16711680,opacity:.7,specular:16744576,shininess:30,transparent:!0,side:THREE.DoubleSide,shading:THREE.FlatShading,depthWrite:!1})}return t.prototype.add=function(t,e,i,s,n,l,a){var o;return o=new I0l11(this,t,e,i,s,n,l,a),this.crystals_by_id[a]=o,this.OO1I0.push(o),this.I0llI.add(o.l1OI0)},t.prototype.eat=function(t,e){var i,s;if(e===this.I110I.IO010.status.id?(s=this.I110I.IO010.status,1):(s=this.I110I.IOO1I.ll0lO.l1l0O[e],null!=s&&(s=s.OIIIl.status,this.I110I.IOO1I.ll0lO.ll01O>=s.lllll+60&&(s=null)),.5),null!=(i=this.crystals_by_id[t])&&(i.eater=s,i.eat_time=this.I110I.IOO1I.ll0lO.ll01O,null!=s&&this.I110I.OlIl1.collect(s.x,s.y,i.points),null!=this.I110I.display.screen.O0lll.figures))return this.I110I.display.screen.O0lll.figures.bonus(i.points,i.l1OI0.position.x,i.l1OI0.position.y,16744576,11)},t.prototype.remove=function(t){var e;return this.I0llI.remove(t.l1OI0),delete this.crystals_by_id[t.id],e=this.OO1I0.indexOf(t),e>=0&&this.OO1I0.splice(e,1),t.dispose()},t.prototype.III10=function(t){var e,i,s,n,l,a;for(a=this.OO1I0,s=0,l=a.length;s<l;s++)e=a[s],e.III10(t);for(i=n=this.OO1I0.length-1;n>=0;i=n+=-1)e=this.OO1I0[i],e.check(t)},t.prototype.createModel=function(){return new CrystalModel},t.prototype.getModelInstance=function(t){var e,i;return i=t%this.models.length,e=this.I110I.settings.check("colorblind")?16752704:16711680,this.material.color.set(e),new THREE.Mesh(this.models[i].geometry,this.material)},t}(),this.Collectible=function(){function t(t,e,i,s,n,l,a,o){this.parent=t,this.x=e,this.y=i,this.OI10I=s,this.OI0O1=n,this.I0O0I=l,this.id=a,this.type=o,this.l1OI0=this.getModelInstance(),this.sun=new CollectibleGlow(new l000I(0)),this.I0llI=new THREE.Group,this.I0llI.add(this.sun.l1OI0),this.I0llI.add(this.l1OI0),this.sun.l1OI0.scale.set(8,8,8),this.I0llI.position.set(this.x,this.y,0),this.eat_time=0}return t.prototype.getModelInstance=function(){var e,i;return this.type>=90?(i=""+this.type,null==t.models[i]&&(t.models[i]=new AlienModel(this.type)),this.l1OI0=new THREE.Group,t.models[i].IOO0l(function(t){return function(e){return t.size=.6,e.scale.x=t.size,e.scale.y=t.size,e.scale.z=t.size,e.rotation.x=Math.PI/2,t.l1OI0.add(e),e.material.emissive.setHex(16777215)}}(this)),this.l1OI0):(i=WEAPON_TYPES.types_by_code[this.type].model,null==t.models[i]&&(t.models[i]=new WeaponModel(WeaponModel[i],0)),e=t.models[i].getCollectibleInstance(),this.size=.6*t.models[i].data.size*2,e.scale.x=this.size,e.scale.y=this.size,e.scale.z=this.size,e)},t.prototype.check=function(t){var e;if(e=t.ll01O,this.eat_time>0){if(e-this.eat_time>30)return this.parent.remove(this)}else if(e-this.I0O0I>540&&e-this.I0O0I>600)return this.parent.remove(this)},t.prototype.dispose=function(){return null!=this.l1OI0.geometry&&this.l1OI0.geometry.dispose(),null!=this.l1OI0.material&&this.l1OI0.material.dispose(),this.sun.dispose()},t.prototype.III10=function(t){var e,i,s,n;return Date.now()%1e4/1e4*Math.PI*2,this.l1OI0.rotation.z=.5*Math.sin(Date.now()%2e3/2e3*Math.PI*2),this.l1OI0.rotation.x=.5*Math.sin(Date.now()%2190/2190*Math.PI*2),this.l1OI0.rotation.y=.5*Math.sin(Date.now()%2410/2410*Math.PI*2),i=this.size*(1+.1*Math.sin(Date.now()%1790/1790*Math.PI*2)),this.l1OI0.scale.set(i,i,i),n=t.ll01O,s=(n-this.I0O0I)/60,s=1-Math.exp(-s),this.I0llI.position.x=this.x+this.OI10I*s,this.I0llI.position.y=this.y+this.OI0O1*s,t.I1I1O(this.I0llI),this.sun.III10(),null!=this.eater?(s=n-this.eat_time,e=Math.pow(Math.max(0,Math.min(1,s/30)),1),t.fixPositionXY(this.eater),this.I0llI.position.x*=1-e,this.I0llI.position.y*=1-e,this.I0llI.position.x+=e*this.eater.x,this.I0llI.position.y+=e*this.eater.y):n-this.I0O0I>540?(e=Math.max(0,Math.min(1,(n-this.I0O0I-540)/60)),e=Math.max(.001,Math.pow(1-e,.5)),this.I0llI.scale.set(e,e,e)):n-this.I0O0I<60?(e=Math.pow(Math.max(.001,(n-this.I0O0I)/60),.75),this.I0llI.scale.set(e,e,e)):void 0},t}(),Collectible.models={},this.CollectibleGlow=function(){function t(t){this.random=t,this.OOl0O=new THREE.PlaneGeometry(1,1),this.time_offset=this.random.O1010(3e4),this.phase=this.random.next()*Math.PI*2,this.fragmentshader="  uniform float itime ;\n  uniform sampler2D tex ;\n  varying vec2 vUv ;\n\nvoid main()\n{\nvec2 d = (vUv-.5) ;\nfloat lg = length(d);\nfloat fade = 1.0-lg*2.0;\nfloat a = atan(d.y,d.x);\nlg *= .7;\nfloat n = texture2D(tex,vec2(a/(3.14159265*2.0),itime)).x;\nfloat li = 1.0-lg;\nli = (pow(li,2.0)*.1+li*.5*pow(n,lg*16.0))*fade;\n\ngl_FragColor = vec4(li,li*.9,li*.85,1.0);\n}",this.vertexshader="varying vec2 vUv;\n\nvoid main()\n{\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n}",this.uniforms={itime:{type:"f",value:1},tex:{value:OOI10.texture}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexshader,fragmentShader:this.fragmentshader,transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material)}return t.prototype.dispose=function(){return this.OOl0O.dispose(),this.material.dispose()},t.prototype.III10=function(){return this.uniforms.itime.value=(Date.now()+this.time_offset)%3e4/3e4},t}(),this.Collectibles=function(){function t(t){this.I110I=t,this.I0llI=new THREE.Group,this.I0llI.position.set(0,0,-1),this.collectibles_by_id=[],this.collectibles=[]}return t.prototype.add=function(t,e,i,s,n,l,a){var o;return o=new Collectible(this,t,e,i,s,n,l,a),this.collectibles_by_id[l]=o,this.collectibles.push(o),this.I0llI.add(o.I0llI)},t.prototype.eat=function(t,e){var i,s;if(e===this.I110I.IO010.status.id?(s=this.I110I.IO010.status,1):(s=this.I110I.IOO1I.ll0lO.l1l0O[e],null!=s&&(s=s.OIIIl.status,this.I110I.IOO1I.ll0lO.ll01O>=s.lllll+60&&(s=null)),.5),null!=(i=this.collectibles_by_id[t])&&(i.eater=s,i.eat_time=this.I110I.IOO1I.ll0lO.ll01O,null!=s))return this.I110I.OlIl1.collect(s.x,s.y,1)},t.prototype.remove=function(t){var e;return this.I0llI.remove(t.I0llI),delete this.collectibles_by_id[t.id],e=this.collectibles.indexOf(t),e>=0&&this.collectibles.splice(e,1),t.dispose()},t.prototype.III10=function(t){var e,i,s,n,l,a;for(a=this.collectibles,s=0,l=a.length;s<l;s++)e=a[s],e.III10(t);for(i=n=this.collectibles.length-1;n>=0;i=n+=-1)e=this.collectibles[i],e.check(t)},t}(),this.IIIl1=function(){function t(){var t,e,i;this.I0llI=new THREE.Group,this.I0llI.rotation.order="ZYX",t=new THREE.BoxGeometry(1,1,1),e=this.I1I00(),this.l1OI0=new THREE.Mesh(t,e),this.l1OI0.scale.set(4,1,1),this.I0llI.add(this.l1OI0),t=new THREE.BoxGeometry(1,1,1),i=new THREE.Mesh(t,e),i.scale.set(2,5,.2),i.position.x=.8,this.I0llI.add(i)}return t.prototype.I1I00=function(){var t,e,i,s,n,l,a,o,r,h;for(t=document.createElement("canvas"),t.width=256,t.height=256,e=t.getContext("2d"),e.fillStyle="#FFF",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#AAA",s=0;s<=9;++s)e.beginPath(),l=Math.random()*t.width,e.moveTo(l,0),e.lineTo(l,t.height),e.stroke(),l=Math.random()*t.height,e.moveTo(0,l),e.lineTo(t.width,l),e.stroke();for(n=0;n<=29;++n)e.fillStyle="#AAA",r=Math.random()*t.width,h=Math.random()*t.height,o=Math.random()*t.width*.2,i=Math.random()*t.height*.2,e.fillRect(r,h,o,i);return a=new THREE.Texture(t),a.needsUpdate=!0,this.material=new THREE.MeshPhongMaterial({map:a,bumpMap:a,bumpScale:-.1,specular:0})},t}(),this.ShipTexture=function(){function t(t){var e,i,s,n,l,a,o,r;for(this.size=null!=t?t:1024,this.canvas=document.createElement("canvas"),this.canvas.width=this.size,this.canvas.height=this.size/2,this.IIl0O=8,this.blocksize=this.size/this.IIl0O,i=this.canvas.getContext("2d"),i.fillStyle="#FFF",i.fillRect(0,0,this.size,this.size),this.index=0,o=["#FFF","#CCC","#999","#666","#333","#000","#FDA","#456"],n=0,l=o.length;n<l;n++)e=o[n],this.createTexture(function(t){return t.fillStyle=e,t.fillRect(-.2,-.2,1.4,1.4)});for(this.createTexture(function(t){return t.fillStyle="#666",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#CCC",t.fillRect(.1,.1,.3,.8),t.fillRect(.6,.1,.3,.8),t.fillStyle="#333",t.fillRect(.15,.15,.2,.7),t.fillRect(.65,.15,.2,.7)}),this.createTexture(function(t){var e,i;for(t.fillStyle="#DDD",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#000",t.fillRect(.05,.05,.4,.9),t.fillRect(.55,.05,.4,.9),t.fillStyle="#345",t.fillRect(.06,.06,.38,.88),t.fillRect(.56,.06,.38,.88),e=i=0;i<=10;e=i+=1)t.beginPath(),t.fillStyle="#333",t.arc(1,.1*e,.0125,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(.5,.1*e,.0125,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(0,.1*e,.0125,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(.1*e,0,.0125,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(.1*e,1,.0125,0,2*Math.PI,!0),t.fill()}),this.createTexture(function(t){t.fillStyle="#CCC",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#111",t.fillRect(.1,.1,.2,.76),t.fillRect(.7,.1,.2,.76)}),this.createTexture(function(t){var e,i;for(t.fillStyle="#CCC",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#222",t.fillRect(0,0,1,.1),t.fillRect(0,.9,1,.1),t.fillStyle="#FFF",t.fillRect(0,0,1,.08),t.fillRect(0,.92,1,.08),t.fillStyle="#222",e=i=.2;i<=.8;e=i+=.3)t.fillRect(e-.01,0,.02,.1),t.fillRect(e-.01,.9,.02,.1);return t.strokeStyle="#333",t.lineWidth=.05,t.strokeRect(.1,.25,.8,.5),t.fillStyle="#222",t.fillRect(.4,0,.2,.1),t.fillRect(.8,0,.2,.1),t.fillRect(0,0,.2,.1),t.fillRect(.4,.8,.2,.1),t.fillRect(.8,.8,.2,.1),t.fillRect(0,.8,.2,.1)}),this.createTexture(function(t){var e,i,s;for(t.fillStyle="#CCC",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#222",t.fillRect(0,-.1,1,.15),s=[],e=i=0;i<=1;e=i+=.1)s.push(t.fillRect(e-.025,-.1,.05,1.2));return s}),this.createTexture(function(t){var e,i,s;for(t.fillStyle="#333",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#FFF",s=[],e=i=0;i<=1;e=i+=.1)s.push(t.fillRect(e-.01,-.1,.02,1.2));return s}),this.createTexture(function(t){var e,i,s,n,l,a,o,r,h,u,d;for(t.fillStyle="#051245",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#93C5D8",t.save(),u=s=.25;s<=.75;u=s+=.5)for(d=n=.25;n<=.75;d=n+=.5)e=t.createRadialGradient(u,d,0,u,d,.5),e.addColorStop(0,"rgba(47,89,158,1)"),e.addColorStop(.75,"rgba(47,89,158,0)"),t.fillStyle=e,t.fillRect(-.2,-.2,1.4,1.4);for(t.restore(),i=l=0;l<=1;i=l+=.2)t.fillRect(i-.01,-.1,.01,1.2);for(i=a=-.2;a<=1.4;i=a+=.05)t.fillRect(-.1,i-.1,1.2,.001);for(t.fillStyle="rgba(60,60,70,.8)",u=o=0;o<=1;u=o+=.5)t.fillRect(-.2,u-.02,1.4,.04),t.fillRect(u-.02,-.2,.04,1.4);for(t.globalCompositeOperation="xor",t.fillStyle="#333",h=[],u=r=0;r<=1;u=r+=.5)h.push(function(){var e,i;for(e=[],d=i=0;i<=1;d=i+=.5)t.beginPath(),t.moveTo(u-.1,d),t.lineTo(u,d-.1),t.lineTo(u+.1,d),t.lineTo(u,d+.1),t.closePath(),e.push(t.fill());return e}());return h}),this.createTexture(function(t){var e,i,s,n,l;for(t.save(),t.fillStyle="#000",t.fillRect(-.2,-.2,1.4,1.4),t.rotate(Math.PI/4),t.fillStyle="#333",t.fillRect(-.2,-.2,2,.4),t.fillStyle="#444",t.fillRect(-.2,-.6,2,.4),t.fillRect(-.2,.2,2,.4),t.fillStyle="#333",t.fillRect(-.2,-1,2,.4),t.fillRect(-.2,.6,2,.4),t.rotate(Math.PI/2),t.fillStyle="rgba(0,0,30,.3)",t.fillRect(-.9,-.9,2,.4),t.fillStyle="rgba(0,0,30,.2)",t.fillRect(-.9,-.5,2,.4),t.fillRect(-.9,-1.3,2,.4),t.fillStyle="rgba(0,0,30,.3)",t.fillRect(-.9,-.1,2,.4),t.fillRect(-.9,-1.7,2,.4),t.restore(),s=[],n=e=-.2;e<=1.4;n=e+=.01)s.push(function(){var e,s;for(s=[],l=e=-.2;e<=1.4;l=e+=.01)i=Math.floor(80*Math.random()),t.fillStyle="rgba("+i+","+i+","+i+",.1)",s.push(t.fillRect(n,l,.01,.01));return s}());return s}),this.createTexture(function(t){var e,i,s,n;for(t.fillStyle="#AAA",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#000",i=[],s=e=0;e<=1;s=e+=.1)i.push(function(){var e,i;for(i=[],n=e=0;e<=1;n=e+=.1)i.push(t.fillRect(s-.05,n-.05,.07,.07));return i}());return i}),this.createTexture(function(t){return t.fillStyle="#111",t.fillRect(-.2,-.2,1.4,1.4)}),this.createTexture(function(t){var e,i;for(t.fillStyle="#333",t.fillRect(-.2,-.2,1.4,1.4),t.fillStyle="#CCC",t.fillRect(0,0,1,.1),t.fillRect(0,.9,1,.1),t.fillStyle="#000",t.fillRect(0,0,1,.08),t.fillRect(0,.92,1,.08),t.fillStyle="#CCC",e=i=.2;i<=.8;e=i+=.3)t.fillRect(e-.01,0,.02,.1),t.fillRect(e-.01,.9,.02,.1);return t.strokeStyle="#BBB",t.lineWidth=.05,t.strokeRect(.1,.25,.8,.5),t.fillStyle="#CCC",t.fillRect(.4,0,.2,.1),t.fillRect(.8,0,.2,.1),t.fillRect(0,0,.2,.1),t.fillRect(.4,.8,.2,.1),t.fillRect(.8,.8,.2,.1),t.fillRect(0,.8,.2,.1)}),i=this.canvas.getContext("2d"),i.fillStyle="hsl(0,70%,50%)",i.fillRect(this.size-2*this.blocksize,3*this.blocksize,this.blocksize,this.blocksize),s=a=0,r=this.blocksize-1;a<=r;s=a+=1)i.fillStyle="hsl("+Math.floor(s/this.blocksize*360)+",70%,50%)",i.fillRect(this.size-this.blocksize+s,3*this.blocksize,1,this.blocksize)}return t.prototype.createTexture=function(t){var e,i,s;return e=this.canvas.getContext("2d"),e.save(),i=this.index%this.IIl0O,s=Math.floor(this.index/this.IIl0O),e.translate(i*this.blocksize,s*this.blocksize),e.scale(this.blocksize,this.blocksize),e.beginPath(),e.rect(0,0,1,1),e.clip(),e.translate(.1,.1),e.scale(.8,.8),t(e),e.restore(),this.index++},t}(),this.ShipEmissiveTexture=function(){function t(t,e){var i,s,n,l,a;for(this.size=null!=t?t:1024,null==e&&(e=!1),this.canvas=document.createElement("canvas"),this.canvas.width=this.size,this.canvas.height=this.size/2,this.IIl0O=8,this.blocksize=this.size/this.IIl0O,s=this.canvas.getContext("2d"),s.fillStyle="#000",s.fillRect(0,0,this.size,this.size),this.index=0,a=["#000","#000","#000","#000","#000","#000","#000","000"],n=0,l=a.length;n<l;n++)i=a[n],this.createTexture(function(t){var e,s,n,l,a,o;for(t.fillStyle=i,a=[.4,.55],o=[],l=0,n=a.length;l<n;l+=.05)e=a[l],o.push(function(){var i,n,l,a;for(l=[.4,.55],a=[],n=0,i=l.length;n<i;n+=.05)s=l[n],a.push(t.fillRect(e+.0125,s+.0125,.025,.025));return a}());return o});this.createTexture(function(t){}),this.createTexture(function(t){}),this.createTexture(function(t){return function(e){var i,s,n,l;for(n=new l000I(0),l=[],i=s=0;s<=8;i=s+=1)t.createLight(e,.16,.16+.08*i,.04,.04,n.next()>.1),t.createLight(e,.24,.16+.08*i,.04,.04,n.next()>.1),t.createLight(e,.76,.16+.08*i,.04,.04,n.next()>.1),l.push(t.createLight(e,.84,.16+.08*i,.04,.04,n.next()>.1));return l}}(this)),this.createTexture(function(t){return function(e){e.fillStyle="#FFF",t.createLight(e,.5,.05,.1,.05),t.createLight(e,.9,.05,.1,.05),t.createLight(e,.1,.05,.1,.05),t.createLight(e,.5,.85,.1,.05),t.createLight(e,.9,.85,.1,.05),t.createLight(e,.1,.85,.1,.05)}}(this)),this.createTexture(function(t){}),this.createTexture(function(t){}),this.createTexture(function(t){}),this.createTexture(function(t){}),this.createTexture(function(t){return function(e){var i,s,n,l;for(e.fillStyle="#FFF",s=[],n=i=0;i<=1;n=i+=.1)s.push(function(){var t,i;for(i=[],l=t=0;t<=1;l=t+=.1)Math.random()<.4?i.push(this.createLight(e,n-.025,l-.025,.06,.06,Math.random()>.3)):i.push(void 0);return i}.call(t));return s}}(this)),this.createTexture(function(t){return function(t){var e,i,s,n;for(e=t.createLinearGradient(0,0,0,1),e.addColorStop(0,"#000"),e.addColorStop(.6,"#FFF"),t.fillStyle=e,t.fillRect(-.1,-.1,1.2,1.2),t.fillStyle="#FFF",n=[],i=s=0;s<=1;i=s+=.2)t.fillRect(i-.05,.15,.1,.1),n.push(t.fillRect(i-.05,.35,.1,.1));return n}}()),this.createTexture(function(t){return function(e){e.fillStyle="#FFF",t.createLight(e,.3,.05,.1,.05),t.createLight(e,.7,.05,.1,.05),t.createLight(e,.1,.05,.1,.05),t.createLight(e,.7,.85,.1,.05),t.createLight(e,.9,.85,.1,.05),t.createLight(e,.1,.85,.1,.05)}}(this)),e&&(s=this.canvas.getContext("2d"),s.fillStyle="#888",s.fillRect(this.size-this.blocksize,3*this.blocksize,this.blocksize,this.blocksize))}return t.prototype.createLight=function(t,e,i,s,n,l){var a,o;return null==l&&(l=!0),t.fillStyle=l?"#FFF":"#444",t.fillRect(e-s/2,i-n/2,s,n),a=t.createRadialGradient(e,i,0,e,i,Math.max(s,n)),a.addColorStop(0,l?"rgba(255,255,255,.7)":"rgba(255,255,255,.3)"),a.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=a,o=Math.max(s,n),t.fillRect(e-o,i-o,2*o,2*o)},t.prototype.createTexture=function(t,e){var i,s,n;return null!=e&&(this.index=e),i=this.canvas.getContext("2d"),i.save(),s=this.index%this.IIl0O,n=Math.floor(this.index/this.IIl0O),i.translate(s*this.blocksize,n*this.blocksize),i.scale(this.blocksize,this.blocksize),i.beginPath(),i.rect(0,0,1,1),i.clip(),i.translate(.1,.1),i.scale(.8,.8),t(i),i.restore(),this.index++},t}(),this.ShipShieldTexture=function(){function t(t){var e;for(this.size=null!=t?t:1024,this.canvas=document.createElement("canvas"),this.canvas.width=this.size,this.canvas.height=this.size/2,this.IIl0O=8,this.blocksize=this.size/this.IIl0O,this.index=0,e=0;e<=29;e+=1)this.createTexture(function(t){var e,i,s,n,l;for(t.fillStyle="#FFF",t.fillRect(-.2,-.2,1.4,1.4),l=[],s=n=0;n<=1;s=n+=1)l.push(function(){var n,l;for(l=[],i=n=0;n<=1;i=n+=1)e=t.createRadialGradient(.25+.5*s,.25+.5*i,0,.25+.5*s,.25+.5*i,.5),e.addColorStop(0,"#000"),e.addColorStop(.1,"#000"),e.addColorStop(1,"#FFF"),t.fillStyle=e,l.push(t.fillRect(.25+.5*s-.225,.25+.5*i-.225,.45,.45));return l}());return l});this.createTexture(function(t){return t.fillStyle="#888",t.fillRect(-.2,-.2,1.4,1.4)}),this.createTexture(function(t){return t.fillStyle="#888",t.fillRect(-.2,-.2,1.4,1.4)})}return t.prototype.createTexture=function(t,e){var i,s,n;return null!=e&&(this.index=e),i=this.canvas.getContext("2d"),i.save(),s=this.index%this.IIl0O,n=Math.floor(this.index/this.IIl0O),i.translate(s*this.blocksize,n*this.blocksize),i.scale(this.blocksize,this.blocksize),i.beginPath(),i.rect(0,0,1,1),i.clip(),i.translate(.1,.1),i.scale(.8,.8),t(i),i.restore(),this.index++},t}(),lO1lI=new THREE.Texture((new this.ShipTexture).canvas),lO1lI.needsUpdate=!0,lIOIO=new THREE.Texture((new this.ShipEmissiveTexture).canvas),lIOIO.wrapS=lIOIO.wrapT=THREE.RepeatWrapping,lIOIO.needsUpdate=!0,O1I10=new THREE.Texture(new this.ShipEmissiveTexture(null,!0).canvas),O1I10.wrapS=O1I10.wrapT=THREE.RepeatWrapping,O1I10.needsUpdate=!0,OIOIO=new THREE.Texture((new ShipShieldTexture).canvas),OIOIO.minFilter=THREE.LinearFilter,OIOIO.needsUpdate=!0,hasProp={}.hasOwnProperty,this.l0Il0=function(){function t(t,e,i,s){var n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K;if(this.data=t,this.hue=null!=e?e:0,this.finish=null!=i?i:"zinc",this.options=s,null==this.options&&(this.options={shield:!0,propulsion:!0,lIOI0:!0}),this.hue=Math.max(.01,Math.min(.99,this.hue)),this.geometry=new THREE.Geometry,this.geometry.faceVertexUvs[0]=[],this.quads=[],this.l10lI=!1,null!=this.data.bodies){S=this.data.bodies;for(m in S)hasProp.call(S,m)&&(l=S[m],this.IIII0(l))}if(null!=this.data.tori){T=this.data.tori;for(m in T)hasProp.call(T,m)&&(l=T[m],this.buildTorus(l))}if(this.data.wings){R=this.data.wings;for(m in R)hasProp.call(R,m)&&(G=R[m],this.ll0Ol(G))}if(null!=this.data.scale&&1!==this.data.scale)for(F=this.data.scale,C=this.geometry.vertices,p=0,f=C.length;p<f;p++)N=C[p],N.x*=F,N.y*=F,N.z*=F;for(this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox(),this.geometry.computeFaceNormals(),A=this.quads,O=0,g=A.length;O<g;O++)E=A[O],r=E[0],h=E[1],r.normal.lengthSq()>0&&h.normal.lengthSq()>0&&(r.normal.add(h.normal),r.normal.normalize(),h.normal=r.normal);for(j=this.geometry.faces,w=0,y=j.length;w<y;w++)o=j[w],o.vertexNormals[0]=o.normal,o.vertexNormals[1]=o.normal,o.vertexNormals[2]=o.normal;if(this.I0llI=new THREE.Group,this.I0llI.rotation.order="ZYX",this.lllOl=this.I1I00(),this.l1OI0=new THREE.Mesh(this.geometry,this.lllOl),this.IIl0I=0,this.options.propulsion){M=new THREE.Geometry,a=Oll0O.I00Il(this.hue,.5,1),this.lO01l=new THREE.MeshBasicMaterial({color:new THREE.Color(a[0]/255,a[1]/255,a[2]/255),opacity:1,map:l1IO1,transparent:!0,depthWrite:!1,side:THREE.DoubleSide,blending:THREE.AdditiveBlending}),H=this.data.bodies;for(m in H)if(hasProp.call(H,m)&&(l=H[m],l.propeller)){for(z=0,K=-200,d=x=0,B=l.width.length-1;x<=B;d=x+=1)l.position.y[d]>K&&(K=l.position.y[d],z=d);for(U=.01*l.width[z]*2,u=.01*l.height[z]*2,b=5*U,K=.01*(l.position.y[z]+l.offset.y)+b/4,q=.01*(l.position.x[z]+l.offset.x),k=6,d=_=0,D=k-1;_<=D;d=_+=1)n=(d+.5)/k*Math.PI,c=M.vertices.length,M.vertices.push(new THREE.Vector3(K-b/2,q-U/2*Math.cos(n),.01*l.offset.z-u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K+b/2,q-U/2*Math.cos(n),.01*l.offset.z-u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K+b/2,q+U/2*Math.cos(n),.01*l.offset.z+u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K-b/2,q+U/2*Math.cos(n),.01*l.offset.z+u/2*Math.sin(n))),M.faces.push(new THREE.Face3(c,c+1,c+2)),M.faces.push(new THREE.Face3(c+2,c+3,c)),M.faceVertexUvs[0].push([new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1)]),M.faceVertexUvs[0].push([new THREE.Vector2(1,1),new THREE.Vector2(1,0),new THREE.Vector2(0,0)]);if(0!==l.offset.x)for(q=-q,d=V=0,L=k-1;V<=L;d=V+=1)n=(d+.5)/k*Math.PI,c=M.vertices.length,M.vertices.push(new THREE.Vector3(K-b/2,q-U/2*Math.cos(n),.01*l.offset.z-u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K+b/2,q-U/2*Math.cos(n),.01*l.offset.z-u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K+b/2,q+U/2*Math.cos(n),.01*l.offset.z+u/2*Math.sin(n))),M.vertices.push(new THREE.Vector3(K-b/2,q+U/2*Math.cos(n),.01*l.offset.z+u/2*Math.sin(n))),M.faces.push(new THREE.Face3(c,c+1,c+2)),M.faces.push(new THREE.Face3(c+2,c+3,c)),M.faceVertexUvs[0].push([new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1)]),M.faceVertexUvs[0].push([new THREE.Vector2(1,1),new THREE.Vector2(1,0),new THREE.Vector2(0,0)])}if(null!=this.data.scale&&1!==this.data.scale)for(F=this.data.scale,P=M.vertices,I=0,v=P.length;I<v;I++)N=P[I],N.x*=F,N.y*=F,N.z*=F;M.verticesNeedUpdate=!0,M.IlI1O=!0,M.computeBoundingSphere(),this.Ol1OI=M,this.O1IlI=new THREE.Mesh(M,this.lO01l)}this.I0llI.add(this.l1OI0),this.options.propulsion&&this.I0llI.add(this.O1IlI),this.I0llI.scale.set(2*this.data.size,2*this.data.size,2*this.data.size),this.options.shield&&(this.shield_mat=new THREE.MeshBasicMaterial({map:OIOIO,color:0,blending:THREE.AdditiveBlending,transparent:!0,side:THREE.DoubleSide}),this.shield_mesh=new THREE.Mesh(this.geometry,this.shield_mat),this.shield_mesh.scale.set(1.2,1.2,1.2),this.I0llI.add(this.shield_mesh),this.shield_mesh.visible=!1),this.options.lIOI0&&"undefined"!=typeof OlII1&&null!==OlII1&&(this.lIOI0=new OlII1(Math.floor(360*this.hue))),this.IOlOO=0,this.O1I1O=0,this.OO0l1=new llllO}return t.prototype.dispose=function(){if(this.geometry.dispose(),this.quads=[],this.lllOl.dispose(),this.options.propulsion&&this.lO01l.dispose(),this.options.propulsion)return this.Ol1OI.dispose()},t.prototype.bump=function(t){return this.bumpframe=t,this.bumping=!0},t.prototype.propstep=function(t){if(this.options.propulsion)return this.IIl0I=t?Math.max(.02,Math.min(1,1.1*this.IIl0I)):.94*this.IIl0I,this.O1IlI.visible=this.IIl0I>.01,this.lO01l.opacity=(.5+.5*Math.random())*this.IIl0I},t.prototype.I1I00=function(t){var e,i,s;switch(null==t&&(t=10),this.built_material=this.finish,this.finish){case"alloy":this.buildAlloyMaterial();break;case"gold":this.buildGoldMaterial();break;case"titanium":this.buildTitaniumMaterial();break;case"carbon":this.buildCarbonMaterial();break;default:this.buildDefaultMaterial()}return this.base_color=this.material.color.getHex(),s=this.base_color>>16&255,i=this.base_color>>8&255,e=255&this.base_color,this.dark_color=Math.floor(s/2)<<16|Math.floor(i/2)<<8|Math.floor(e/2),this.material},t.prototype.buildDefaultMaterial=function(t){return null==t&&(t=10),this.material=new THREE.MeshLambertMaterial({map:lO1lI,color:16777215,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildX27Material=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:4243711,shininess:30,bumpScale:.1,color:5275808,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildAlloyMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:8413264,shininess:30,bumpScale:.1,color:10531008,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildTitaniumMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:6316128,shininess:20,bumpScale:.1,color:6316128,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildCarbonMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specular:6316128,shininess:5,bumpScale:.1,color:1052688,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:O1I10})},t.prototype.buildFullColorMaterial=function(){var t;return t=Oll0O.hsvToRgbHex(this.hue,1,1),this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:12632256,shininess:50,bumpScale:.1,color:t,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildGoldMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:10506256,shininess:50,bumpScale:.1,color:8413232,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildCopperMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:11554864,shininess:15,bumpScale:.1,color:10514512,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildDiamondMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specular:16777215,opacity:.5,shininess:50,side:THREE.DoubleSide,bumpScale:.1,transparent:!0,color:8421504,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.III10=function(t){var e,i;if(this.built_material!==this.finish&&(this.I1I00(this.hue),this.l1OI0.material=this.material),this.options.shield&&(this.shield_mesh.visible=!1),this.material.color.setHex(this.base_color),this.invulnerable?Date.now()%500<250?(this.material.emissive.setHex(Oll0O.hsvToRgbHex(this.hue,.5,.5)),this.material.color.setHex(this.dark_color),this.options.shield&&(this.shield_mat.color.setHex(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.shield_mesh.visible=!0)):(this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.material.color.setHex(this.base_color),this.options.shield&&this.shield_mat.color.setHex(0)):this.IOlOO>0&&(this.O1I1O=Math.random()<this.IOlOO?1:0,this.options.shield&&(this.shield_mesh.visible=!0),1===this.O1I1O?(this.material.emissive.setHex(Oll0O.hsvToRgbHex(this.hue,.5,.5)),this.material.color.setHex(this.dark_color),this.options.shield&&this.shield_mat.color.setHex(Oll0O.hsvToRgbHex(this.hue,.5,1))):(this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.material.color.setHex(this.base_color),this.options.shield&&this.shield_mat.color.setHex(0)),this.IOlOO*=.95,this.IOlOO<.1&&(this.IOlOO=0,this.options.shield&&(this.shield_mesh.visible=!1),this.material.color.setHex(this.base_color),this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)))),this.bumping&&(t>this.bumpframe+30?(this.bumping=!1,this.I0llI.scale.set(2*this.data.size,2*this.data.size,2*this.data.size)):(i=Math.max(0,t-this.bumpframe)/30,e=1.5-Math.cos(Math.pow(i,.5)*Math.PI*2),this.I0llI.scale.set(2*this.data.size*e,2*this.data.size*e,2*this.data.size*e))),this.last_frame=t,this.bump_shield&&this.options.shield)return t>this.bump_shield_frame+30?(this.bump_shield=!1,this.shield_mesh.scale.set(1.2,1.2,1.2)):(i=Math.max(0,t-this.bump_shield_frame)/30,e=1.2-.1*Math.cos(Math.pow(i,.5)*Math.PI*2),this.shield_mesh.scale.set(e,e,e),this.shield_mat.color.setHex(Oll0O.hsvToRgbHex(this.hue,.5,Math.pow(1-i,.25))),this.shield_mesh.visible=!0)},t.prototype.bumpShield=function(){if(null!=this.last_frame&&!this.bump_shield)return this.bump_shield_frame=this.last_frame,this.bump_shield=!0},t.prototype.getTextureIndex=function(t,e){return null==t?0:"number"==typeof t?t:t[e]||t[t.length-1]},t.prototype.addQuad=function(t,e,i,s,n,l,a,o,r,h,u,d){return this.geometry.faces.push(new THREE.Face3(t,e,i)),this.geometry.faces.push(new THREE.Face3(s,t,i)),this.quads.push([this.geometry.faces[this.geometry.faces.length-2],this.geometry.faces[this.geometry.faces.length-1]]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(n,l),new THREE.Vector2(a,o),new THREE.Vector2(r,h)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(u,d),new THREE.Vector2(n,l),new THREE.Vector2(r,h)])},t.prototype.IIII0=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D;if(null==e&&(e=0),0===e)return this.IIII0(t,1),void(0!==t.offset.x&&this.IIII0(t,-1));for(i=t.angle||0,o=Math.cos(i/180*Math.PI*e),z=Math.sin(i/180*Math.PI*e),C=this.geometry.vertices.length,I=Math.min(t.position.x.length,t.position.y.length,t.width.length,t.height.length)-1,p=8,c=O=0,v=p-1;0<=v?O<=v:O>=v;c=0<=v?++O:--O)n=c/p*Math.PI*2;if(null!=t.section_segments&&("number"==typeof t.section_segments?(p=t.section_segments,n=function(){var t,e,i;for(i=[],c=t=0,e=p-1;0<=e?t<=e:t>=e;c=0<=e?++t:--t)i.push(c/p*Math.PI*2);return i}()):(p=t.section_segments.length,n=function(){var e,i,s;for(s=[],c=e=0,i=p-1;0<=i?e<=i:e>=i;c=0<=i?++e:--e)s.push(t.section_segments[c]/180*Math.PI);return s}())),null==t.position.z)for(t.position.z=[],c=m=1,b=t.position.y.length;1<=b?m<=b:m>=b;c=1<=b?++m:--m)t.position.z.push(0);for(d=f=0,w=I;f<=w;d=f+=1)for(H=.01*t.position.y[d],c=g=0,
x=p-1;g<=x;c=g+=1)s=n[c]+Math.PI/2,A=(.01*t.position.x[d]+Math.cos(s)*t.width[d]*.01)*e,D=Math.sin(s)*t.height[d]*.01*e+.01*t.offset.z+.01*t.position.z[d],j=o*A+z*H,B=o*H-z*A,B+=.01*t.offset.y,j+=.01*t.offset.x*e,t.vertical?this.geometry.vertices.push(new THREE.Vector3(-D,j,B)):this.geometry.vertices.push(new THREE.Vector3(B,j,D));for(d=y=0,k=I-1;y<=k;d=y+=1)for(a=.25*(t.width[d]+t.width[d+1]+t.height[d]+t.height[d+1])*6.28,l=Math.abs(t.position.y[d]-t.position.y[d+1]),E=1,l>0&&a/l>4&&p%8==0?E=4:l>0&&a/l>2&&p%4==0&&(E=2),c=R=0,_=p-1;R<=_;c=R+=1)c<p/2?(this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+c,C+d*p+c,C+d*p+(c+1)%p)),this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+(c+1)%p,C+(d+1)*p+c,C+d*p+(c+1)%p)),this.quads.push([this.geometry.faces[this.geometry.faces.length-2],this.geometry.faces[this.geometry.faces.length-1]])):(this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+c,C+d*p+c,C+(d+1)*p+(c+1)%p)),this.geometry.faces.push(new THREE.Face3(C+d*p+c,C+d*p+(c+1)%p,C+(d+1)*p+(c+1)%p)),this.quads.push([this.geometry.faces[this.geometry.faces.length-2],this.geometry.faces[this.geometry.faces.length-1]])),r=(n[c]-n[0]+Math.PI/2)/Math.PI*E%1,u=n[(c+1)%n.length]-n[c],u<0&&(u+=2*Math.PI),h=r+u/Math.PI*E,M=this.getTextureIndex(t.texture,d),15===M&&(M=13),63===M&&(M=31),S=M%8*.125,T=.25*(3-Math.floor(M/8)+.1),r=S+.125*(.1+.8*r),h=S+.125*(.1+.8*h),P=T+.2,31===M&&(S+=.125*this.hue,r=S,h=S),c<p/2?(this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,T),new THREE.Vector2(r,P),new THREE.Vector2(h,P)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(h,T),new THREE.Vector2(r,T),new THREE.Vector2(h,P)])):(this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,T),new THREE.Vector2(r,P),new THREE.Vector2(h,T)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,P),new THREE.Vector2(h,P),new THREE.Vector2(h,T)]))},t.prototype.buildTorus=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D;if("number"==typeof(x=t.segments))O=x,k=function(){var t,e,i;for(i=[],h=t=0,e=O;0<=e?t<=e:t>=e;h=0<=e?++t:--t)i.push(h/O*Math.PI*2);return i}();else for(k=[],h=d=0,f=x.length-1;0<=f?d<=f:d>=f;h=0<=f?++d:--d)k[h]=x[h]/180*Math.PI;for(T=this.geometry.vertices.length,r=k.length-1,u=8,h=I=0,g=u-1;0<=g?I<=g:I>=g;h=0<=g?++I:--I)s=h/u*Math.PI*2;for(null!=t.section_segments&&("number"==typeof t.section_segments?(u=t.section_segments,s=function(){var t,e,i;for(i=[],h=t=0,e=u-1;0<=e?t<=e:t>=e;h=0<=e?++t:--t)i.push(h/u*Math.PI*2);return i}()):(u=t.section_segments.length,s=function(){var e,i,s;for(s=[],h=e=0,i=u-1;0<=i?e<=i:e>=i;h=0<=i?++e:--e)s.push(t.section_segments[h]/180*Math.PI);return s}()));t.position.x.length<r+1;)t.position.x.push(t.position.x[t.position.x.length-1]);for(;t.position.y.length<r+1;)t.position.y.push(t.position.y[t.position.y.length-1]);for(;t.position.z.length<r+1;)t.position.z.push(t.position.z[t.position.z.length-1]);for(;t.width.length<r+1;)t.width.push(t.width[t.width.length-1]);for(;t.height.length<r+1;)t.height.push(t.height[t.height.length-1]);for(o=c=0,y=r;c<=y;o=c+=1)for(e=k[o],P=Math.cos(e),R=Math.sin(e),h=p=0,v=u-1;p<=v;h=p+=1)i=s[h],C=.01*(t.offset.x+t.position.x[o]+Math.cos(i)*t.height[o]+t.radius),j=.01*(t.offset.y+t.position.y[o]+Math.sin(i)*t.width[o]),B=0,A=P*C+R*B,D=P*B-R*C+.01*t.offset.z,H=j,this.geometry.vertices.push(new THREE.Vector3(H,A,D));for(o=m=0,b=r-1;m<=b;o=m+=1)for(h=S=0,w=u-1;S<=w;h=S+=1)this.geometry.faces.push(new THREE.Face3(T+(o+1)*u+h,T+o*u+h,T+o*u+(h+1)%u)),this.geometry.faces.push(new THREE.Face3(T+(o+1)*u+(h+1)%u,T+(o+1)*u+h,T+o*u+(h+1)%u)),this.quads.push([this.geometry.faces[this.geometry.faces.length-2],this.geometry.faces[this.geometry.faces.length-1]]),n=(s[h]-s[0])/Math.PI%1,a=s[(h+1)%s.length]-s[h],a<0&&(a+=2*Math.PI),l=n+a/Math.PI,_=this.getTextureIndex(t.texture,o),15===_&&(_=13),63===_&&(_=31),z=_%8*.125,M=.25*(3-Math.floor(_/8)+.1),n=z+.125*(n+.1)*.8,l=z+.125*(l+.1)*.8,E=M+.2,31===_&&(z+=.125*this.hue,n=z,l=z),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(n,M),new THREE.Vector2(n,E),new THREE.Vector2(l,E)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(l,M),new THREE.Vector2(n,M),new THREE.Vector2(l,E)])},t.prototype.ll0Ol=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M;for(_=this.geometry.vertices.length,u=Math.min(t.length.length,t.width.length-1,t.angle.length,t.position.length-1),null==t.offset&&(t.offset={x:0,y:0,z:0}),z=0,M=0,n=l=0,I=u;l<=I;n=l+=1)d=.01*t.position[n],f=.01*t.width[n],this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d-f/2,.01*t.offset.x+z,.01*t.offset.z+M)),n<u&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),0===n&&(e=1,m=0),s=.01*t.bump.size*f*e,i=.01*-t.bump.size*f*m,this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*t.offset.x+z+i,.01*t.offset.z+M+s)),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*t.offset.x+z-i,.01*t.offset.z+M-s))),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f/2,.01*t.offset.x+z,.01*t.offset.z+M)),null!=t.length[n]&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),o=.01*t.length[n],z+=o*e,M+=o*m);for(n=a=0,c=u-1;a<=c;n=a+=1)g=this.getTextureIndex(t.texture,n),15===g&&(g=13),63===g&&(g=31),y=g%8*.125,v=y+.0125,b=v+.1,w=.25*(3-Math.floor(g/8)+.1),x=w+.2,k=w+(x-w)*(.5+.01*t.bump.position),31===g&&(v=y+.125*this.hue,b=v),n<u-1?(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+1,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+3,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+5,_+4*n+3,_+4*n+7)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(v,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(v,k),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,x),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,k),new THREE.Vector2(v,x),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+4,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+6,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+6,_+4*n+3)),this.geometry.faces.push(new THREE.Face3(_+4*n+6,_+4*n+7,_+4*n+3)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(b,w),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(b,k),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,k),new THREE.Vector2(v,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,k),new THREE.Vector2(b,x),new THREE.Vector2(v,x)]))):(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+1,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+3,_+4*n+5)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(v,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(v,k),new THREE.Vector2(b,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,x),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+4,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+5,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+5,_+4*n+3)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(b,w),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(b,x),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,x),new THREE.Vector2(v,x)])));for(_=this.geometry.vertices.length,z=0,M=0,n=r=0,p=u;r<=p;n=r+=1)d=.01*t.position[n],f=.01*t.width[n],this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d-f/2,.01*-t.offset.x+z,.01*t.offset.z+M)),n<u&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),0===n&&(e=1,m=0),s=.01*t.bump.size*f*e,i=.01*t.bump.size*f*m,this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*-t.offset.x+z+i,.01*t.offset.z+M+s)),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*-t.offset.x+z-i,.01*t.offset.z+M-s))),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f/2,.01*-t.offset.x+z,.01*t.offset.z+M)),null!=t.length[n]&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),o=.01*t.length[n],z-=o*e,M+=o*m);for(n=h=0,O=u-1;h<=O;n=h+=1)g=this.getTextureIndex(t.texture,n),15===g&&(g=13),63===g&&(g=31),y=g%8*.125,v=y+.0125,b=v+.1,w=.25*(3-Math.floor(g/8)+.1),x=w+.2,k=w+(x-w)*(.5+.01*t.bump.position),31===g&&(v=y+.125*this.hue,b=v),n<u-1?(this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+4,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+5,_+4*n+7)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,w),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(v,k),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,k),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+4,_+4*n)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+6,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+6,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+7,_+4*n+6)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(v,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,k),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,x),new THREE.Vector2(b,k)]))):(this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+4,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+1,_+4*n+5)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,w),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(b,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(v,k),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+4,_+4*n)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+5,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+5,_+4*n+2)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(v,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,x),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,x),new THREE.Vector2(v,k)])))},t.prototype.computeBounds=function(){var t,e,i,s,n,l,a,o;for(n=0,i=0,l=0,s=0,a=this.geometry.vertices,t=0,e=a.length;t<e;t++)o=a[t],n=Math.min(n,o.x),l=Math.min(l,o.y),i=Math.max(i,o.x),s=Math.max(s,o.y);return this.bounds={minx:n,maxx:i,miny:l,maxy:s,width:i-n,height:s-l,cx:(n+i)/2,cy:(l+s)/2}},t.prototype.shapePoint=function(t,e,i){var s,n,l;return l=i.length,s=Math.atan2(e,-t),s=Math.round((s+2*Math.PI)/(2*Math.PI)*l)%l,n=Math.sqrt(t*t+e*e),i[s]=Math.max(i[s],n)},t.prototype.l1l00=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;for(null==t&&(t=50),c=[],s=l=0,u=t-1;0<=u?l<=u:l>=u;s=0<=u?++l:--l)c[s]=0;for(d=this.geometry.faces,a=0,o=d.length;a<o;a++)for(i=d[a],p=this.geometry.vertices[i.a],O=this.geometry.vertices[i.b],m=this.geometry.vertices[i.c],s=r=0;r<=99;s=r+=1)e=s/100,f=p.x*e+O.x*(1-e),g=p.y*e+O.y*(1-e),this.shapePoint(f,g,c),f=m.x*e+O.x*(1-e),g=m.y*e+O.y*(1-e),this.shapePoint(f,g,c),f=m.x*e+p.x*(1-e),g=m.y*e+p.y*(1-e),this.shapePoint(f,g,c);for(s=h=0,I=c.length-1;h<=I;s=h+=1)c[s]*=2*this.data.size;for(n in c)c[n]=parseFloat(c[n].toFixed(3));return c},t.prototype.I0II1=function(e){var i,s,n,l,a,o,r;return null==e&&(e=128),r=new THREE.Scene,i=new THREE.OrthographicCamera(0,e,0,e,1,3e3),this.material.emissive.setHex(16777215),this.material.emissiveMap=OIOIO,this.material.side=THREE.DoubleSide,this.material.color.setHex(0),this.lO01l.opacity=0,r.add(this.I0llI),this.I0llI.position.set(e/2,e/2,-1e3),this.computeBounds(),o=.9*Math.min(e/this.bounds.width,e/this.bounds.height),n=o*this.bounds.cy,l=o*this.bounds.cx,this.I0llI.position.set(e/2-n,e/2-l,-1e3),a=o,this.I0llI.scale.set(a,a,a),this.I0llI.rotation.z=Math.PI/2,t.O1OOO||(t.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),t.O1OOO.setSize(e,e),t.O1OOO.render(r,i),s=document.createElement("canvas"),s.width=e,s.height=e,s.getContext("2d").drawImage(t.O1OOO.domElement,0,0),s},t.prototype.get3DImage=function(e,i){var s,n,l,a,o;return null==e&&(e=128),null==i&&(i=0),o=new THREE.Scene,s=new THREE.OrthographicCamera(0,e,0,e,1,3e3),this.lO01l.opacity=1,this.finish="alloy",this.I1I00(),this.l1OI0.material=this.material,o.add(this.I0llI),l=new THREE.DirectionalLight,l.position.set(2,-1,1),o.add(l),this.I0llI.position.set(e/2,e/2,-1e3),a=.25*e,this.I0llI.scale.set(-a,a,a),this.I0llI.rotation.z=Math.PI/2+i,this.I0llI.rotation.x=Math.PI/4,this.I0llI.rotation.order="XYZ",t.O1OOO||(t.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),t.O1OOO.setSize(e,e),t.O1OOO.render(o,s),n=document.createElement("canvas"),n.width=e,n.height=e,n.getContext("2d").drawImage(t.O1OOO.domElement,0,0),n},t.prototype.getIcon=function(e){var i,s,n,l,a,o,r;return null==e&&(e=64),r=new THREE.Scene,i=new THREE.OrthographicCamera(0,e,0,e,1,3e3),this.material=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide}),this.l1OI0.material=this.material,this.lO01l.opacity=0,r.add(this.I0llI),this.computeBounds(),o=.9*Math.min(e/this.bounds.width,e/this.bounds.height),n=o*this.bounds.cy,l=o*this.bounds.cx,this.I0llI.position.set(e/2-n,e/2-l,-1e3),a=o,this.I0llI.scale.set(a,a,a),this.I0llI.rotation.z=Math.PI/2,t.O1OOO||(t.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),t.O1OOO.setSize(e,e),t.O1OOO.render(r,i),s=document.createElement("canvas"),s.width=e,s.height=e,s.getContext("2d").drawImage(t.O1OOO.domElement,0,0),s},t.prototype.getHorizontalThumbnail=function(e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(null==e&&(e=128),null==i&&(i=0),p=new THREE.Scene,s=new THREE.OrthographicCamera(0,2*e,0,e,1,3e3),this.lO01l.opacity=.5,p.add(this.I0llI),this.I0llI.position.set(e,e/2,-1e3),c=.4*e,this.I0llI.scale.set(c,-c,c),d=new THREE.DirectionalLight(16777215),d.position.set(1,-.5,3),p.add(d),this.I0llI.rotation.z=Math.PI,t.O1OOO||(t.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),t.O1OOO.setSize(2*e,e),t.O1OOO.render(p,s),n=document.createElement("canvas"),n.width=2*e,n.height=e,n.getContext("2d").drawImage(t.O1OOO.domElement,0,0),l=n.getContext("2d"),l.translate(e,e/2),l.rotate(-Math.PI/2),l.translate(0,e/2),l.scale(e/15,e/15),m=I101O.getShape(parseInt(i)),o=0,h=m.length;o<h;o++){for(O=m[o],l.beginPath(),a=l.createRadialGradient(0,0,0,0,0,2),a.addColorStop(0,"hsl("+Math.floor(360*this.hue)+",100%,100%)"),a.addColorStop(1,"hsl("+Math.floor(360*this.hue)+",80%,40%)"),l.fillStyle=a,r=0,u=O.length;r<u;r++)I=O[r],l.lineTo(I[1],I[0]);l.closePath(),l.fill()}return n},t.prototype.getThumbnail=function(e,i){var s,n,l,a,o,r,h,u,d,I,c,p,O,m;for(null==e&&(e=128),null==i&&(i=0),p=new THREE.Scene,s=new THREE.OrthographicCamera(0,e,0,e,1,3e3),this.lO01l.opacity=.5,p.add(this.I0llI),this.I0llI.position.set(e/2,e/2,-1e3),c=.4*e,this.I0llI.scale.set(c,-c,c),d=new THREE.PointLight(16777215,1,0),d.position.set(.3*e,.3*e,e-1e3),p.add(d),this.I0llI.rotation.z=Math.PI/2,t.O1OOO||(t.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),t.O1OOO.setSize(e,e),t.O1OOO.render(p,s),n=document.createElement("canvas"),n.width=e,n.height=e,n.getContext("2d").drawImage(t.O1OOO.domElement,0,0),l=n.getContext("2d"),l.translate(e/2,e/8),l.scale(e/20,e/20),m=I101O.getShape(parseInt(i)),o=0,h=m.length;o<h;o++){for(O=m[o],l.beginPath(),a=l.createRadialGradient(0,0,0,0,0,2),a.addColorStop(0,"hsl("+Math.floor(360*this.hue)+",100%,100%)"),a.addColorStop(1,"hsl("+Math.floor(360*this.hue)+",80%,40%)"),l.fillStyle=a,r=0,u=O.length;r<u;r++)I=O[r],l.lineTo(I[1],I[0]);l.closePath(),l.fill()}return n},t.exportThumbnail=function(e,i,s,n,l){var a;return null==e&&(e=101),null==i&&(i=0),null==s&&(s="zinc"),null==n&&(n=0),null==l&&(l=128),a=new t(II1l1.ships_by_code[e],i/360,s),a.getThumbnail(l,n)},t.exportHorizontalThumbnail=function(e,i,s,n,l){var a;return null==e&&(e=101),null==i&&(i=0),null==s&&(s="zinc"),null==n&&(n=0),null==l&&(l=128),a=new t(II1l1.ships_by_code[e],i/360,s),a.getHorizontalThumbnail(l,n)},t.icons_buffer=[],t.getShipIcon=function(e){var i;return null==t.icons_buffer[e]&&(i=new t(II1l1.ships_by_code[e],0),t.icons_buffer[e]=i.getIcon(),i.dispose()),t.icons_buffer[e]},t}(),this.createPropTexture=function(){var t,e,i,s;return t=document.createElement("canvas"),t.width=64,t.height=64,e=t.getContext("2d"),e.clearRect(0,0,t.width,t.height),e.save(),e.translate(t.width/2,.75*t.height),e.scale(t.width/2,.75*-t.height),i=e.createRadialGradient(0,0,0,0,0,1),i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=i,e.fillRect(-1,-1,2,2),i=e.createLinearGradient(0,-1,0,1),i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=i,e.globalCompositeOperation="destination-in",e.fillRect(-1,-1,2,2),e.restore(),s=new THREE.Texture(t),s.needsUpdate=!0,s},l1IO1=this.createPropTexture(),this.OlII1=function(){function t(t){this.hue=null!=t?t:0,this.name="",this.shield=0,this.OO1I0=8,this.canvas=document.createElement("canvas"),this.canvas.width=256,this.canvas.height=64,this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.score=0,this.OO1I0=0,this.shield=0,this.healing=!1,this.rank=0,this.level=1,this.l10lI=!1,this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({color:16777215,map:this.texture,transparent:!0,depthWrite:!1,depthTest:!1}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(10,2.5,1),this.anonymous=!1,this.target=!1,this.l1IOO()}return t.computeHue=function(t){var e,i,s,n;for(n=0,e=i=0,s=t.length-1;i<=s;e=i+=1)n+=111*t.charCodeAt(e);return n%360},t.prototype.III10=function(t,e,i,s){var n,l,a,o,r;if(this.anonymous=t.mode.anonymous_ships,this.anonymous&&(this.hue=(t.hue+180)%360),o=Math.min(100,Math.round(100*i.shield/s.shield_capacity)),n=Math.min(100,Math.round(100*i.OO1I0/s.crystals_capacity)),a=Math.floor(i.type/100),this.l10lI=i.l10lI,l=i.healing&&i.hue===t.IOO1I.IO010.status.hue,this.shipid=i.id,this.friendly=i.friendly,r=t.mode.isTarget(i.id),this.target===r&&this.name===e&&i.score===this.score&&o===this.shield&&n===this.OO1I0&&i.rank===this.rank&&a===this.level&&this.healing===l||(this.name=e,this.OO1I0=n,this.score=i.score,this.rank=i.rank,this.shield=o,this.healing=l,this.level=a,this.target=r,this.l1IOO(t)),t.is_mobile_app&&null!=this.l1OI0)return this.l1OI0.scale.set(1.5*(l?12.5:10),3.75,1)},t.prototype.l1IOO=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O;return this.background="hsla("+this.hue+",50%,30%,.25)",this.medium="hsla("+this.hue+",40%,50%,.5)",this.color="hsla("+this.hue+",40%,75%,1)",n=this.canvas.getContext("2d"),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.save(),s=!1,e=!1,i=!1,null!=t&&null!=t.names&&null!=t.mode&&null!=t.mode.team_stats&&null!=(a=t.names.getData(this.shipid))&&a.friendly&&(s=null!=t.mode.team_stats[a.friendly]&&t.mode.team_stats[a.friendly].killer.id===this.shipid,e=null!=t.mode.team_stats[a.friendly]&&t.mode.team_stats[a.friendly].contributor.id===this.shipid,i=null!=t.mode.team_stats[a.friendly]&&t.mode.team_stats[a.friendly].healer.id===this.shipid),p=10,r=2.5,this.healing&&(p=12.5),(s||e||i)&&(r=3.75),n.scale(10/p,2.5/r),this.l1OI0.scale.set(p,r,1),n.fillStyle=this.background,I=this.canvas.width,c=I/32,I/64,o=this.canvas.height,n.fillStyle="hsl("+this.hue+",50%,80%)",d=Math.round(this.canvas.width/512*32),n.font=d+"pt Play",n.textAlign="left",n.textBaseline="middle",this.anonymous||(n.fillText(this.name,2*c,o/6),n.fillText(""+this.score,2*c,3*o/6),n.textAlign="right",n.fillText("Lv"+this.level,I-2*c,o/6),n.fillText("#"+this.rank,I-2*c,3*o/6)),O=I-2*c,n.fillStyle="rgba(0,0,0,.5)",n.fillRect(2*c-1,.65*o-1,O+2,.15*o+2),n.fillRect(2*c-1,.85*o-1,O+2,.15*o+2),n.fillStyle="hsla(180,100%,75%,.75)",n.fillRect(2*c,.65*o,O*this.shield/100,.15*o),n.fillStyle="hsla(0,100%,75%,.75)",n.fillRect(2*c,.85*o,O*this.OO1I0/100,.15*o),null==this.shipid||null==t||this.anonymous||null!=(l=t.names.getCustom(this.shipid))&&(r=Math.round(.7*o),h=I1O00.I0II1(l.badge,l.laser,l.finish,r,l.hue),h.complete&&n.drawImage(h,I/2-r,.6*o-r/2,2*r,r)),this.target&&(n.fillStyle="#F66",n.strokeStyle="#000",n.lineWidth=6,n.font=Math.round(.9*this.canvas.height)+"pt FontAwesome",n.textAlign="center",n.textBaseline="middle",n.strokeText("",this.canvas.width/2,this.canvas.height/2),n.fillText("",this.canvas.width/2,this.canvas.height/2)),this.healing&&(n.font=Math.round(.6*this.canvas.height)+"pt FontAwesome",n.fillStyle="hsla(180,100%,75%,.75)",n.textAlign="center",n.textBaseline="middle",n.fillText("",9*this.canvas.width/8,this.canvas.height/2)),u=2*c,n.textAlign="left",n.textBaseline="middle",n.fillStyle="#FFF",n.font=Math.round(.35*this.canvas.height)+"pt SBGlyphs",s&&(n.fillText("[",u,1.25*this.canvas.height),u+=.8*this.canvas.height),e&&(n.fillText("D",u,1.25*this.canvas.height),u+=.8*this.canvas.height),i&&(n.fillText("",u,1.25*this.canvas.height),u+=.8*this.canvas.height),n.restore(),this.texture.needsUpdate=!0},t}(),this.l01ll=function(){function t(t,e,i){this.I110I=t,this.type=null!=e?e:O1Ill.types_by_code[101],this.Ollll=null!=i&&i,this.status=new l0I10,this.status.type=this.type.code,this.l1I00=new lIlOI(this.I110I),this.instance=new ShipInstance(this.type),this.levels_mem=0,this.l0l1O={llOIl:!1,left:!1,right:!1,strafe_left:!1,strafe_right:!1,release_crystal:!1,up:!1,OlOI1:!1,O0lO0:0,guided:!1,glide:!1,angle:0,r:0,IOlOI:0},this.I0100=0,this.Ol1l0=0,this.O1001=0,this.l00O1=0,this.I1llO=Date.now(),this.l1l1I=.02,this.I11I0=.2,this.IIOO0=0,this.l00II=0,this.lI0O0=3,this.l01I1=0,this.O101l=0,this.last_pulse_shot=0,this.pods=new Pods(this.I110I,this)}return t.prototype.setType=function(t){return this.type=t,this.instance=new ShipInstance(this.type),this.levels_mem=-1},t.prototype.l1O00=function(){var t,e,i,s,n,l;if(this.status.levels!==this.levels_mem&&(this.instance.read(this.status.levels),this.instance.updateParameters(),this.levels_mem=this.status.levels,this.I110I.IO010===this&&this.I110I.OlIl1.beep()),this.l0l1O.O0lO0=this.status.O0lO0,this.l0l1O.guided=this.status.guided,this.status.guided&&(this.l0l1O.angle=this.status.angle),this.l1I00.l1O00(this.instance,this.status),this.status.O0lO0>0&&(this.l0l1O.IOlOI=this.status.IOlOI),this.l1I00.lI1IO(this.instance,this.l0l1O),this.Ollll&&(this.l0l1O.IOlOI=this.status.IOlOI,this.l0l1O.strafe_left=this.status.strafe_left,this.l0l1O.strafe_right=this.status.strafe_right),s=10*this.l0l1O.IOlOI,this.l0l1O.strafe_left?s+=Math.PI/6:this.l0l1O.strafe_right&&(s-=Math.PI/6),this.Ol1l0+=(s-this.I0100)*this.l1l1I,this.Ol1l0*=1-this.I11I0,this.I0100+=this.Ol1l0,n=Math.cos(this.status.r),l=Math.sin(this.status.r),t=this.status.OI10I-this.l01I1,e=this.status.OI0O1-this.O101l,i=n*t+l*e,this.l01I1=this.status.OI10I,this.O101l=this.status.OI0O1,this.l00O1+=(100*-i-this.O1001)*this.l1l1I,this.l00O1*=1-this.I11I0,this.O1001+=this.l00O1,null!=this.pods)return this.pods.l1O00(this.I110I.IOO1I.ll0lO.ll01O)},t.prototype.OO111=function(){return this.send=!0},t.prototype.O0lOI=function(){var t;return this.l00II++,this.send?this.l00II>=this.lI0O0?(this.l00II===this.lI0O0&&(this.lI0O0=Math.min(12,this.lI0O0+1)),this.l00II=0,this.send=!1,t=(this.l0l1O.angle+360)%360,this.l0l1O.up&&(t+=4096),this.l0l1O.llOIl&&(t+=8192),this.l0l1O.glide&&(t+=16384),this.l0l1O.strafe_left&&(t+=32768),this.l0l1O.strafe_right&&(t+=65536),this.l0l1O.release_crystal&&(t+=131072),null!=this.I110I.lIllI&&this.I110I.lIllI.OO111(t),this.log()):void 0:this.lI0O0=Math.max(1,this.lI0O0-1)},t.prototype.log=function(){return this.IIOO0++},t.prototype.isPulseType=function(){var t,e,i,s,n,l,a,o;if(null==this.instance.pulse_type){for(t=null,a=this.instance.lasers,e=0,n=a.length;e<n;e++)s=a[e],s.damage>=15&&(null==t||s.damage>t.damage)&&(t=s);if(null!=t)for(this.instance.pulse_type=!0,this.instance.pulse_laser=t,o=this.instance.lasers,i=0,l=o.length;i<l;i++)(s=o[i])!==t&&s.damage>t.damage/2&&(this.instance.pulse_type=!1);else null!=this.type.specs.ship.dash?this.instance.pulse_type=!0:this.instance.pulse_type=!1}return this.instance.pulse_type},t.prototype.pulsePower=function(){return null!=this.instance.pulse_laser?this.instance.pulse_laser.damage:null!=this.instance.dash_initial_energy?this.instance.dash_initial_energy:0},t.prototype.pulseRate=function(){return null!=this.instance.pulse_laser?this.instance.pulse_laser.type.rate:1},t}(),this.Gamepad=function(){function t(t,e){var i;this.OIl1l=t,this.index=null!=e?e:0,null!=navigator.getGamepads&&(i=navigator.getGamepads(),this.index<i.length&&null!=i[this.index]&&(this.pad=i[this.index]),this.interval=setInterval(function(t){return function(){return t.check()}}(this),16))}return t.prototype.stop=function(){if(null!=this.interval&&clearInterval(this.interval),null!=this.next)return this.next.stop()},t.prototype.check=function(){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;if(u=navigator.getGamepads(),this.index<u.length&&(this.pad=u[this.index]),this.index+1<u.length&&null==this.next&&(this.next=new t(this.OIl1l,this.index+1)),null!=this.pad){if(null==this.status){for(this.status={buttons:[],joysticks:[]},d=this.pad.buttons,s=n=0,o=d.length;n<o;s=++n)i=d[s],this.status.buttons.push(!1);for(s=l=0,I=this.pad.axes.length-2;l<=I;s=l+=2)this.status.joysticks.push(-1)}for(c=this.pad.buttons,s=a=0,r=c.length;a<r;s=++a)i=c[s],i.pressed!==this.status.buttons[s]&&(this.status.buttons[s]=i.pressed,this.OIl1l.gamepadButtonStatus(s,i.pressed));for(s=h=0,p=this.pad.axes.length-2;h<=p&&!(s/2>=this.status.joysticks.length);s=h+=2){if(e=-1,O=this.pad.axes[s],m=this.pad.axes[s+1],Math.sqrt(O*O+m*m)>=.5)for(e=-Math.atan2(m,O),e=Math.round(e/Math.PI*180);e<0;)e+=360;e!==this.status.joysticks[s/2]&&(this.status.joysticks[s/2]=e,this.OIl1l.gamepadJoystickStatus(s/2,e))}}},t.drawButton=function(t,e,i,s,n,l,a){var o,r,h,u,d;switch(null==a&&(a=!1),o="hsl("+l+",20%,20%)",r="hsla("+l+",50%,80%,1)",t){case"menu":h="Fontawesome",u=1,n=Math.round(n),t="";break;default:h="Play",u=t.length,n=Math.round(n),1===u&&(d=1.2*n)}switch(d=null!=d?d:n,e.font=d+"pt "+h,e.fillStyle=a?r:o,u){case 1:e.beginPath(),e.arc(i,s,1.1*n,0,2*Math.PI,!0),e.closePath(),e.fill();break;default:OpenChatButton.roundRect(e,i-2*n,s-n,4*n,2*n,.5*n),e.fill()}return e.textBaseline="middle",e.textAlign="center",e.fillStyle=a?"#000":r,e.fillText(t,i,s)},t.drawDPad=function(t,e,i,s,n,l,a){switch(null==l&&(l=null),null==a&&(a="#444"),t.fillStyle="#888",t.beginPath(),OpenChatButton.roundRect(t,e-s/2,i-1*s/6,s,s/3,s/16),t.fill(),t.beginPath(),OpenChatButton.roundRect(t,e-s/6,i-s/2,s/3,s,s/16),t.fill(),t.fillStyle="#FFF",n){case"bottom":return t.save(),t.beginPath(),t.rect(e-s/2,i+s/6,s,s/3),t.clip(),OpenChatButton.roundRect(t,e-s/6,i-s/2,s/3,s,s/16),t.fill(),t.fillStyle=a,t.font=Math.round(s/6)+"pt FontAwesome",t.textAlign="center",t.textBaseline="middle",l=l||"",t.fillText(l,e,i+2*s/6),t.restore();case"top":return t.save(),t.beginPath(),t.rect(e-s/2,i-s/2,s,s/3),t.clip(),OpenChatButton.roundRect(t,e-s/6,i-s/2,s/3,s,s/16),t.fill(),t.fillStyle=a,t.font=Math.round(s/6)+"pt FontAwesome",t.textAlign="center",t.textBaseline="middle",l=l||"",t.fillText(l,e,i-2*s/6),t.restore();case"leftright":return t.save(),OpenChatButton.roundRect(t,e-s/2,i-s/6,s,s/3,s/16),t.fill(),t.fillStyle="#444",t.font=Math.round(s/6)+"pt FontAwesome",t.textAlign="center",t.textBaseline="middle",t.fillText("",e-2*s/6,i),t.fillText("",e+2*s/6,i),t.restore()}},t}(),this.l0Ill=function(){function t(t,e){this.I110I=t,this.ship=e,this.map={38:"up",40:"OlOI1",37:"left",39:"right",40:"OlOI1",32:"llOIl"},this.left=!1,this.right=!1,this.endup=0,this.control_pressed=!1,this.inc=1,this.last_keyboard_action=0,this.last_gamepad_action=0,this.pad_status={up:!1,llOIl:!1,angle:0,rcs:!1,lb:!1},this.element=this.I110I.display.O1OOO.domElement,this.next_wheel_action=0,document.addEventListener("mousewheel",function(t){return function(e){return t.mouseWheel(e)}}(this),!1),document.addEventListener("DOMMouseScroll",function(t){return function(e){return t.mouseWheel(e)}}(this),!1),document.onkeydown=function(t){return function(e){var i,s,n;if(e=e||window.event,i=e.keyCode,null!=t.navigation_listener)switch(i){case 13:return e.preventDefault(),t.navigation_listener.gamepadNavigation("ok");case 27:return e.preventDefault(),t.navigation_listener.gamepadNavigation("cancel");case 38:return e.preventDefault(),t.navigation_listener.gamepadNavigation("up");case 40:return e.preventDefault(),t.navigation_listener.gamepadNavigation("OlOI1");case 37:return e.preventDefault(),t.navigation_listener.gamepadNavigation("left");case 39:return e.preventDefault(),t.navigation_listener.gamepadNavigation("right")}if(16===i&&null!=t.I110I.display.screen.O0lll.weapons_bar&&t.I110I.display.screen.O0lll.weapons_bar.shiftSelection(),18===i&&(t.alt_pressed=!0),87===i&&null!=t.I110I.display.screen.O0lll.weapons_bar&&(t.I110I.display.screen.O0lll.weapons_bar.toggleStore(),e.preventDefault()),"KeyA"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.strafe>0&&(t.ship.l0l1O.strafe_left||(t.ship.l0l1O.strafe_left=!0,t.ship.OO111())),"KeyD"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.strafe>0&&(t.ship.l0l1O.strafe_right||(t.ship.l0l1O.strafe_right=!0,t.ship.OO111())),"KeyV"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.release_crystal&&(t.ship.l0l1O.release_crystal||(t.ship.l0l1O.release_crystal=!0,t.ship.OO111())),122===i&&(t.I110I.is_app||(t.I110I.O1IO0.toggleFullScreen(),e.preventDefault())),null!=t.map[i]){if("left"!==t.map[i]&&"right"!==t.map[i]||(t.last_keyboard_action=Date.now()),e.preventDefault(),"left"!==t.map[i]&&"right"!==t.map[i]||t[t.map[i]]||(t[t.map[i]]=!0,t.I110I.using_keyboard=.2+.8*t.I110I.using_keyboard,t.IO0O1()),38!==i&&32!==i||t.ship.l0l1O[t.map[i]]||(t.ship.l0l1O[t.map[i]]=!0,t.ship.OO111()),"OlOI1"===t.map[i]&&!t[t.map[i]])return t[t.map[i]]=!0,t.ship.l0l1O.angle=(t.ship.l0l1O.angle+180)%360,t.ship.OO111(),s=.5*t.I110I.display.width+.25*t.I110I.display.height*Math.cos(-t.ship.l0l1O.angle/180*Math.PI),n=t.I110I.display.height*(.5+.25*Math.sin(-t.ship.l0l1O.angle/180*Math.PI)),t.I110I.display.screen.O0lll.cursor.set(s,n)}else{if(17===i&&null!=t.I110I.mode&&t.I110I.mode.options.rcs_toggle&&!t.control_pressed)return t.control_pressed=!0,t.ship.l0l1O.glide?(t.ship.l0l1O.glide=!1,t.ship.OO111()):(t.ship.l0l1O.glide=!0,t.ship.OO111(),t.glide_pressed_time=Date.now());if(9===i&&(t.alt_pressed=!1),9===i&&e.shiftKey)return;if(13===i&&e.altKey&&t.I110I.is_app)return t.I110I.O1IO0.toggleFullScreen(),void e.preventDefault();if(!e.altKey&&t.I110I.keyPressed(i))return e.preventDefault()}}}(this),document.onkeyup=function(t){return function(e){var i;if(e=e||window.event,e.preventDefault(),i=e.keyCode,
18===i&&t.alt_pressed&&null!=t.I110I.display.screen.O0lll.weapons_bar&&(t.I110I.display.screen.O0lll.weapons_bar.llOIl(),e.preventDefault()),"KeyA"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.strafe>0&&t.ship.l0l1O.strafe_left&&(t.ship.l0l1O.strafe_left=!1,t.ship.OO111()),"KeyD"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.strafe>0&&t.ship.l0l1O.strafe_right&&(t.ship.l0l1O.strafe_right=!1,t.ship.OO111()),"KeyV"===e.code&&null!=t.I110I.mode&&t.I110I.mode.options.release_crystal&&t.ship.l0l1O.release_crystal&&(t.ship.l0l1O.release_crystal=!1,t.ship.OO111()),null!=t.map[i]){if(t[t.map[i]]=!1,t.ship.l0l1O[t.map[i]])return t.ship.l0l1O[t.map[i]]=!1,t.ship.OO111()}else if(17===e.keyCode){if(t.control_pressed=!1,Date.now()>t.glide_pressed_time+300&&t.ship.l0l1O.glide)return t.ship.l0l1O.glide=!1,t.ship.OO111()}else if(t.I110I.keyReleased(i))return e.preventDefault()}}(this),this.I110I.display.screen.control_listener=this,this.element.addEventListener("mouseout",function(t){return function(e){return t.doMouseOut(e)}}(this)),this.element.addEventListener("oncontextmenu",function(t){return function(t){return!1}}()),this.lO1O1=null,this.IlO0O=0,this.Ol0Il=0,this.OIlOI=0,this.first=!1,this.touchmoved=!1,this.nextauto=0}return t.prototype.setNavigationListener=function(t){var e;return e=this.navigation_listener,this.navigation_listener=null,null!=e&&e.gamepadNavigation("interrupted"),this.navigation_listener=t},t.prototype.O11ll=function(t){var e,i;for(e=1,i=t;e<=i;e+=1)this.IO0O1();0!==this.endup&&this.I110I.IOO1I.ll0lO.ll01O>=this.endup&&(this.endup=0,null===this.lO1O1&&this.ship.l0l1O.up&&(this.ship.l0l1O.up=!1,this.ship.OO111()))},t.prototype.IO0O1=function(){var t,e;if(this.I110I.settings.check("gamepad_control")&&null==this.gamepad&&(this.gamepad=new Gamepad(this)),this.autoPilot(),this.left?(this.inc=Math.min(6,this.inc+.3),this.ship.l0l1O.angle=Math.round((this.ship.l0l1O.angle+this.inc)%360),this.ship.OO111(),t=.5*this.I110I.display.width+.25*this.I110I.display.height*Math.cos(-this.ship.l0l1O.angle/180*Math.PI),e=this.I110I.display.height*(.5+.25*Math.sin(-this.ship.l0l1O.angle/180*Math.PI)),this.I110I.display.screen.O0lll.cursor.set(t,e)):this.right?(this.inc=Math.min(6,this.inc+.3),this.ship.l0l1O.angle=Math.round((this.ship.l0l1O.angle+360-this.inc)%360),this.ship.OO111(),t=.5*this.I110I.display.width+.25*this.I110I.display.height*Math.cos(-this.ship.l0l1O.angle/180*Math.PI),e=this.I110I.display.height*(.5+.25*Math.sin(-this.ship.l0l1O.angle/180*Math.PI)),this.I110I.display.screen.O0lll.cursor.set(t,e)):this.inc=Math.max(1,this.inc-1),null!=this.aim_id&&Date.now()>this.aim_time+200)return this.aim_x<this.I110I.display.width/2?(this.startJoystick(this.aim_x,this.aim_y,this.aim_id),this.aim_id=null):(this.OIlOI=this.aim_id,this.aim_id=null,this.ship.l0l1O.llOIl=!0,this.ship.OO111()),this.I110I.display.screen.O0lll.cursor.set(-1e4,-1e4)},t.prototype.gamepadButtonStatus=function(t,e){if(this.I110I.is_app&&(this.I110I.using_gamepad=!0),null!=this.navigation_listener&&e)switch(t){case 0:if(this.navigation_listener.gamepadNavigation("ok"))return;break;case 1:if(this.navigation_listener.gamepadNavigation("cancel"))return;break;case 12:if(this.navigation_listener.gamepadNavigation("up"))return;break;case 13:if(this.navigation_listener.gamepadNavigation("OlOI1"))return;break;case 14:if(this.navigation_listener.gamepadNavigation("left"))return;break;case 15:if(this.navigation_listener.gamepadNavigation("right"))return}switch(t){case 0:return this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.llOIl=e,this.ship.OO111();case 1:if(e&&(this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),null!=this.I110I.display.screen.O0lll.weapons_bar))return this.I110I.display.screen.O0lll.weapons_bar.llOIl();break;case 2:if(e&&(this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),null!=this.I110I.display.screen.O0lll.weapons_bar))return this.I110I.display.screen.O0lll.weapons_bar.toggleStore();break;case 3:if(e&&(this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),null!=this.I110I.display.screen.O0lll.weapons_bar))return this.I110I.display.screen.O0lll.weapons_bar.shiftSelection();break;case 7:return this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.up=e,this.ship.OO111();case 6:return this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.glide=e,this.ship.OO111();case 4:if(null!=this.I110I.mode&&this.I110I.mode.options.strafe>0)return this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.strafe_left=e,this.ship.OO111();if(null!=this.I110I.mode&&this.I110I.mode.options.release_crystal&&!this.ship.l0l1O.release_crystal===e)return this.ship.l0l1O.release_crystal=e,this.ship.OO111();break;case 5:if(null!=this.I110I.mode&&this.I110I.mode.options.strafe>0)return this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.strafe_right=e,this.ship.OO111();if(e)return this.I110I.keyPressed(9);break;case 8:if(e)return this.I110I.keyPressed("Z".charCodeAt(0));break;case 9:if(this.I110I.is_app&&e&&!this.I110I.display.screen.O0lll.hidden)return this.I110I.display.screen.O0lll.toggleOptions();break;case 11:if(this.I110I.is_app&&e)return this.I110I.display.screen.O0lll.chatpanel.gamepadChatClick();break;case 12:if(e)return this.I110I.display.screen.O0lll.shipUpgradesNavigation();break;case 13:if(e)return this.I110I.display.screen.O0lll.statsUpgradesNavigation()}},t.prototype.gamepadJoystickStatus=function(t,e){var i,s;switch(this.I110I.is_app&&(this.I110I.using_gamepad=!0),t){case 0:if(e>=0)return this.angle=e,this.last_keyboard_action=Date.now(),this.last_gamepad_action=Date.now(),this.ship.l0l1O.angle=this.angle,this.ship.OO111(),i=.5*this.I110I.display.width+.35*this.I110I.display.height*Math.cos(-this.ship.l0l1O.angle/180*Math.PI),s=this.I110I.display.height*(.5+.35*Math.sin(-this.ship.l0l1O.angle/180*Math.PI)),this.I110I.display.screen.O0lll.cursor.set(i,s);break;case 1:if(this.I110I.is_app)return this.I110I.display.screen.O0lll.chatpanel.gamepadChat(e>=0,e)}},t.prototype.mouseDown=function(t,e,i){if(null==this.navigation_listener||!this.navigation_listener.block_ship_control)return this.mousepressed=!0,1===i.which&&(this.ship.l0l1O.llOIl=!0,this.ship.OO111()),2===i.which&&null!=this.I110I.display.screen.O0lll.weapons_bar&&this.I110I.display.screen.O0lll.weapons_bar.llOIl(),3===i.which&&(this.ship.l0l1O.up=!0,this.ship.OO111()),!0},t.prototype.mouseMove=function(t,e,i){if(!(Date.now()<this.last_keyboard_action+1e3||Date.now()<this.last_gamepad_action+1e3||(this.I110I.display.screen.O0lll.cursor.set(t,e),null!=this.navigation_listener&&this.navigation_listener.block_ship_control))){for(t-=this.I110I.display.width/2,e-=this.I110I.display.height/2,this.angle=-Math.atan2(e,t),this.angle=Math.round(this.angle/Math.PI*180);this.angle<0;)this.angle+=360;return this.angle!==this.ship.l0l1O.angle&&(this.I110I.using_keyboard*=.9,this.ship.l0l1O.angle=this.angle,this.ship.OO111()),!0}},t.prototype.doMouseOut=function(t){return this.I110I.display.screen.O0lll.figures.hideMouse()},t.prototype.mouseUp=function(t,e,i){return 1===i.which&&(this.ship.l0l1O.llOIl=!1,this.ship.OO111()),3===i.which&&(this.ship.l0l1O.up=!1,this.ship.OO111()),!0},t.prototype.joystickRatio=function(){return 667/Math.max(screen.width,screen.height)*.8},t.prototype.joystickRadius=function(){return this.I110I.display.height/8*this.joystickRatio()},t.prototype.l11Il=function(t,e,i){return this.touchmoved=!1,this.I110I.display.height,this.joystickRadius(),null===this.lO1O1?(this.aim_time=Date.now(),this.aim_x=t,this.aim_y=e,this.aim_id=i,this.I110I.display.screen.O0lll.cursor.set(this.aim_x,this.aim_y)):t<this.I110I.display.width/2?this.startJoystick(t,e,i):(this.OIlOI=i,this.ship.l0l1O.llOIl=!0,this.ship.OO111()),!0},t.prototype.startJoystick=function(t,e,i){var s,n,l,a;return this.auto=!1,a=this.joystickRadius(),l=this.I110I.display.height,s=this.ship.l0l1O.angle,s=-s*Math.PI/180,n=a/2,this.lO1O1=i,this.IlO0O=t-Math.cos(s)*n,this.Ol0Il=e-Math.sin(s)*n,this.ship.l0l1O.up=!1,this.ship.OO111(),this.I110I.display.screen.O0lll.arrow.set(s,0),this.I110I.display.screen.O0lll.joystick.set(this.IlO0O/l,this.Ol0Il/l,t/l,e/l),this.I110I.display.screen.O0lll.cursor.set(-1e4,-1e4)},t.prototype.O101O=function(t,e,i){var s,n,l,a,o,r,h,u;if(this.touchmoved=!0,n=this.I110I.display.height,l=this.joystickRadius(),this.lO1O1===i){for(t-=this.IlO0O,e-=this.Ol0Il,s=Math.sqrt(t*t+e*e),o=t/s,r=e/s,h=this.IlO0O+Math.min(1.5*l,s)*o,u=this.Ol0Il+Math.min(1.5*l,s)*r,this.I110I.display.screen.O0lll.joystick.set(this.IlO0O/n,this.Ol0Il/n,h/n,u/n),a=s>this.joystickRadius(),this.angle=-Math.atan2(e,t),this.angle=Math.round(this.angle/Math.PI*180);this.angle<0;)this.angle+=360;this.I110I.display.screen.O0lll.arrow.set(-this.angle/360*Math.PI*2,s/(n/8)),this.angle===this.ship.l0l1O.angle&&a===this.ship.l0l1O.up||(this.ship.l0l1O.angle=this.angle,this.ship.l0l1O.up=a,this.ship.OO111())}return!0},t.prototype.autoPilot=function(){var t,e,i,s;if(this.nextauto=Math.max(this.nextauto-1,0),this.auto&&0===this.nextauto){if(this.nextauto=10,e=this.l1I11-this.I110I.IOO1I.IO010.status.x,i=this.lOOO0-this.I110I.IOO1I.IO010.status.y,e<-this.I110I.Ill01&&(e+=this.I110I.size),e>this.I110I.Ill01&&(e-=this.I110I.size),i<-this.I110I.Ill01&&(i+=this.I110I.size),i>this.I110I.Ill01&&(i-=this.I110I.size),Math.sqrt(e*e+i*i)<8)return this.auto=!1,this.ship.l0l1O.up=!1,this.ship.OO111();for(this.angle=Math.atan2(i,e),this.angle=Math.round(this.angle/Math.PI*180);this.angle<0;)this.angle+=360;t=(this.angle-this.ship.status.angle+360)%360,t=Math.min(t,360-t),s=t<10||this.ship.l0l1O.up,this.angle===this.ship.l0l1O.angle&&s===this.ship.l0l1O.up||(this.ship.l0l1O.angle=this.angle,this.ship.l0l1O.up=s,this.ship.OO111())}},t.prototype.I11IO=function(t,e,i){if(this.aim_id===i){for(this.aim_id=null,this.I110I.display.screen.O0lll.cursor.set(this.aim_x,this.aim_y),t=this.aim_x-this.I110I.display.width/2,e=this.aim_y-this.I110I.display.height/2,this.angle=-Math.atan2(e,t),this.angle=Math.round(this.angle/Math.PI*180);this.angle<0;)this.angle+=360;if(this.angle!==this.ship.l0l1O.angle)return this.ship.l0l1O.angle=this.angle,this.ship.OO111()}else{if(this.lO1O1===i)return this.lO1O1=null,this.ship.l0l1O.up=!1,this.ship.OO111(),this.I110I.display.screen.O0lll.joystick.pressed=!1;if(this.OIlOI===i)return this.OIlOI=null,this.ship.l0l1O.llOIl=!1,this.ship.OO111()}},t.prototype.mouseWheel=function(t){if(null!=this.I110I.display.screen.O0lll.weapons_bar&&!(Date.now()<this.next_wheel_action))return this.next_wheel_action=Date.now()+200,t.wheelDelta<0||t.detail>0?this.I110I.display.screen.O0lll.weapons_bar.selectDown():this.I110I.display.screen.O0lll.weapons_bar.selectUp()},t}(),this.StationModules=function(){function t(){this.modules=[],this.structures=[],this.structures_n=[],this.structures_ns=[],this.structures_ne=[],this.structures_nes=[],this.structures_nesw=[],this.deposits=[],this.spawnings=[],this.types_by_id={}}return t.prototype.add=function(t){switch(this.modules.push(t),this.types_by_id[t.id]=t,t.type){case"structure":switch(this.structures.push(t),t.hook){case"N":return this.structures_n.push(t);case"NE":return this.structures_ne.push(t);case"NS":return this.structures_ns.push(t);case"NES":return this.structures_nes.push(t);case"NESW":return this.structures_nesw.push(t);default:return this.structures_ns.push(t)}break;case"deposit":return this.deposits.push(t);case"spawning":return this.spawnings.push(t)}},t.prototype.O00II=function(){return this.modules[Math.floor(Math.random()*this.modules.length)]},t.prototype.getDeposit=function(){return this.deposits[Math.floor(Math.random()*this.deposits.length)]},t.prototype.getSpawning=function(){return this.spawnings[Math.floor(Math.random()*this.spawnings.length)]},t.prototype.getStructure=function(t){switch(t){case"N":return this.structures_n[Math.floor(Math.random()*this.structures_n.length)];case"NS":return this.structures_ns[Math.floor(Math.random()*this.structures_ns.length)];case"NE":return this.structures_ne[Math.floor(Math.random()*this.structures_ne.length)];case"NES":return this.structures_nes[Math.floor(Math.random()*this.structures_nes.length)];default:return this.structures_nesw[Math.floor(Math.random()*this.structures_nesw.length)]}},t}(),STATION_MODULES=new this.StationModules,STATION_MODULES.add({type:"deposit",id:"d1",generate:function(t){return{type:"deposit",size:.5,tori:{main:{radius:60,segments:16,section_segments:8,offset:{x:0,y:-40,z:0},position:{x:[0],y:[0],z:[0]},width:[10],height:[10],texture:[2,2,2,2,2,2,2,2,2,2,2,63,63,2]},main2:{radius:60,segments:16,section_segments:8,offset:{x:0,y:-70,z:0},position:{x:[0],y:[0],z:[0]},width:[10],height:[10],texture:[2,2,2,2,2,2,2,2,2,2,63,2,2,63,2]}},bodies:{hook:{section_segments:16,offset:{x:0,y:0,z:0},position:{x:[0,0,0],y:[-130,-120,-55]},width:[0,10,12],height:[0,10,12],texture:[6,12]},deposit:{section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[-90,-100,-90,70,85,85,0,-10]},width:[0,95,100,100,100,90,90,0],height:[0,45,50,50,50,40,30,0],texture:[1,4,2,4,63,10,12]},sidewalls:{section_segments:12,offset:{x:80,y:-20,z:0},position:{x:[0,0,0,0,0,0,0],y:[-55,-50,-20,0,20,45,50]},width:[0,15,15,10,10,5,0],height:[0,15,15,10,10,5,0],angle:0,propeller:!1,texture:[4,4,10,4,63,4]},antenna:{vertical:!0,section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:0,y:90,z:-20},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-50,-45,-20,-19,20,21,30,60]},width:[50,30,30,12,12,3,3,0],height:[50,30,30,12,12,3,3,0],texture:[3,[15],4,16,63,6,10]}}}}}),STATION_MODULES.add({type:"deposit",id:"d2",generate:function(t){var e,i,s,n,l,a;for(a=new l000I(t),1+a.O1010(4),e={type:"deposit",size:.5,bodies:{hook:{section_segments:16,offset:{x:0,y:0,z:0},position:{x:[0,0,0],y:[-130,-120,-55]},width:[0,10,12],height:[0,10,12],texture:[6,12]},deposit:{section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[-90,-100,-90,70,85,85,0,-10]},width:[0,95,100,100,100,90,90,0],height:[0,45,50,50,50,40,30,0],texture:[1,4,1,4,63,1,12]},antenna:{vertical:!0,section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:0,y:90,z:10},position:{x:[0,0,0,0,0,0,0,0],y:[-50,-45,-20,-19,20,21,30,60]},width:[20,10,10,8,8,3,3,0],height:[20,10,10,8,8,3,3,0],texture:[3,10,1,12,63,6,10]},sidewalls:{section_segments:12,offset:{x:80,y:10,z:0},position:{x:[0,0,0,0,0,0,0],y:[-55,-50,-20,0,20,45,50]},width:[0,15,15,10,10,5,0],height:[0,15,15,10,10,5,0],angle:0,propeller:!1,texture:[4,4,10,4,63,4]}}},i=n=0;n<=40;i=n+=20)for(s=l=-40;l<=40;s=l+=20)a.O1010(50),e.bodies["body"+i+s]={section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:1.2*i,y:1.6*s-12,z:38},position:{x:[0,0,0,0,0],y:[-7,-5,10,12]},width:[0,8,8,0],height:[0,8,8,0],texture:[12,a.next()<.3?63:1+a.O1010(4),12]};return e}}),STATION_MODULES.add({type:"spawning",id:"sp1",generate:function(t){var e,i,s,n,l;for(n=new l000I(t),e=1+n.O1010(3),l={type:"spawn",rotate:!0,size:.5,tori:[],bodies:{sphere:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-160,-150,-100,-85,-70,-50,-20,20,50,70,-50,-50]},width:[0,20,20,40,70,90,100,100,90,60,30,0],height:[0,20,20,40,70,90,100,100,90,60,30,0],texture:[6,1,e,e,e,e,e,e,1,11,12]}},wings:{sidejoin:{offset:{x:65,y:0,z:65},doubleside:!0,length:[100],width:[50,20],angle:[45],position:[0,0],texture:[63],bump:{position:0,size:30}},sidejoin2:{offset:{x:65,y:0,z:-65},doubleside:!0,length:[100],width:[50,20],angle:[-45],position:[0,0],texture:[63],bump:{position:0,size:30}},sidejoin3:{offset:{x:90,y:0,z:0},doubleside:!0,length:[100],width:[50,20],angle:[0],position:[0,0],texture:[63],bump:{position:10,size:30}},topjoin:{offset:{x:0,y:0,z:95},doubleside:!0,length:[100],width:[50,20],angle:[90],position:[0,0],texture:[63],bump:{position:10,size:30}},bottomjoin:{offset:{x:0,y:0,z:-95},doubleside:!0,length:[100],width:[50,20],angle:[-90],position:[0,0],texture:[63],bump:{position:10,size:30}}}},i=s=-4;s<=0;i=++s)l.tori["circle"+i]={radius:200+20*i,segments:16,section_segments:8,offset:{x:0,y:25*i,z:0},position:{x:[0],y:[0],z:[0]},width:[15],height:[10],texture:function(){var t,e;for(e=[],i=t=0;t<=16;i=++t)e.push([n.next()<.3?8:3]);return e}()};return l}}),STATION_MODULES.add({type:"spawning",id:"sp2",generate:function(t){var e,i,s;return s=new l000I(t),e=1+s.O1010(3),{type:"spawning",rotate:!0,size:.5,tori:{main:{radius:200,segments:42,section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[30],height:[15],texture:function(){var t,e;for(e=[],i=t=0;t<=42;i=++t)e.push([i%7==0?10:1]);return e}()}},bodies:{sphere:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-160,-150,-100,-85,-70,-50,-20,20,50,70,-50,-50]},width:[0,20,20,40,70,90,100,100,90,60,30,0],height:[0,20,20,40,70,90,100,100,90,60,30,0],texture:[6,1,e,e,e,e,e,e,1,11,12]}},wings:{topjoin:{offset:{x:45,y:0,z:80},doubleside:!0,length:[100],width:[50,20],angle:[60],position:[0,0],texture:[63],bump:{position:0,size:30}},sidejoin:{offset:{x:90,y:0,z:0},doubleside:!0,length:[100],width:[50,20],angle:[0],position:[0,0],texture:[63],bump:{position:10,size:30}},bottomjoin:{offset:{x:45,y:0,z:-80},doubleside:!0,length:[100],width:[50,20],angle:[-60],position:[0,0],texture:[63],bump:{position:0,size:30}}}}}}),STATION_MODULES.add({type:"spawning",id:"sp3",generate:function(t){var e,i,s;return s=new l000I(t),e=1+s.O1010(4),{type:"spawning",rotate:!0,size:.5,tori:{main:{radius:100,segments:12,section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[30],height:[15],texture:function(){var t,s;for(s=[],i=t=0;t<=20;i=++t)s.push(i%2==0?10:e);return s}()}},bodies:{sphere:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-160,-150,-100,-85,-70,-50,-20,20,50,70,-50,-50]},width:[0,30,30,40,70,90,100,100,90,60,30,0],height:[0,30,30,40,70,90,100,100,90,60,30,0],texture:[6,12,e,e,e,e,e,e,1,11,12]}}}}}),STATION_MODULES.add({type:"structure",hook:"NESW",id:"st1",generate:function(t){var e,i,s,n,l,a;for(l=new l000I(t),i=1+l.O1010(4),e={type:"structure",size:.5,tori:{main:{radius:80,segments:20,section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[20],height:[10],texture:function(){var t,e;for(e=[],s=t=0;t<=20;s=++t)e.push([(s-2)%5==0?10:i]);return e}()}},bodies:[]},s=n=0;n<=90;s=n+=90)a=l.O1010(40),e.bodies["body"+s]={angle:s,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55-a,-40-a,40+a,55+a,120,130]},width:[0,15,16,40+i,40+i,12,10,0],height:[0,15,16,40+i,40+i,12,10,0],texture:[6,12,10,i,10,4,6]};return e}}),STATION_MODULES.add({type:"structure",hook:"NS",id:"st2",generate:function(t){var e,i,s,n,l,a,o;for(l=new l000I(t),a=l.O1010(20),i=1+l.O1010(4),o=l.O1010(20),e={type:"structure",rotate:!0,size:.5,tori:[],bodies:{main:{section_segments:16,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55-o,-40-o,40+o,55+o,120,130]},width:[0,15,16,40,40,12,10,0],height:[0,15,16,40,40,12,10,0],texture:[6,12,10,11,1,4,6]}}},s=n=-4;n<=4;s=n+=2)e.tori["circle"+s]={segments:4+o,radius:100-Math.abs(s*a),section_segments:8,offset:{x:0,y:20*s,z:0},position:{x:[0],y:[0],z:[0]},width:[10],height:[o+3],texture:function(){var t,e;for(e=[],s=t=0;t<=40;s=++t)e.push([(s-2)%5==0?10:i]);return e}()};return e}}),STATION_MODULES.add({type:"structure",hook:"NS",id:"st3",generate:function(t){return{type:"structure",rotate:2*(new l000I(t).next()-.5),size:.5,bodies:{main:{section_segments:16,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-75,-60,60,75,120,130]},width:[0,15,16,40,40,12,10,0],height:[0,15,16,40,40,12,10,0],texture:[6,12,10,11,1,4,6]}}}}}),STATION_MODULES.add({type:"structure",hook:"NS",id:"st4",generate:function(t){var e;return{type:"structure",size:.5,tori:{main:{radius:100,segments:20,section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[20],height:[10],texture:function(){var t,i;for(i=[],e=t=0;t<=20;e=++t)i.push([(e-2)%5==0?10:1]);return i}()}},bodies:{bumpers:{section_segments:[40,45,50,130,135,140,220,225,230,310,315,320],offset:{x:97,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[-100,-55,-30,-20,20,30,90,100]},width:[0,12,2,20,20,2,2,0],height:[0,12,5,30,30,5,2,0],texture:[4,4,1,10,1,1,1]},main:{section_segments:15,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-110,-100,-55,-40,40,55,110,120]},width:[0,20,20,50,50,12,10,0],height:[0,20,20,30,30,12,10,0],texture:[6,15,10,11,10,4,6]}},wings:{topjoin:{offset:{x:0,y:-3,z:0},doubleside:!0,length:[100],width:[20,20],angle:[45],position:[0,0,0,50],texture:[1],bump:{position:10,size:30}},bottomjoin:{offset:{x:0,y:-3,z:0},doubleside:!0,length:[100],width:[20,20],angle:[-45],position:[0,0,0,50],texture:[1],bump:{position:-10,size:30}}}}}}),STATION_MODULES.add({type:"structure",hook:"N",id:"st5",generate:function(t){var e,i,s;return s=new l000I(t),e=1+s.O1010(4),{type:"structure",size:.5,tori:{main:{radius:70,segments:20,section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[20],height:[10],texture:function(){var t,s;for(s=[],i=t=0;t<=20;i=++t)s.push([(i-2)%5==0?10:e]);return s}()}},bodies:{main:{angle:0,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55,-40,40,55]},width:[0,15,16,40+e,40+e,0],height:[0,15,16,40+e,40+e,0],texture:[6,12,10,e,10,4,6]}}}}}),STATION_MODULES.add({type:"structure",hook:"NE",id:"st6",generate:function(t){var e,i;return i=new l000I(t),e=1+i.O1010(4),{type:"structure",size:.5,bodies:{main:{angle:0,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-100,-40,20,30]},width:[0,15,16,40,20,0],height:[0,15,16,40,20,0],texture:[6,12,8,e,10,4,6]},angle:{angle:-90,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55,-40,40,55]},width:[0,15,16,40,40,0],height:[0,15,16,40,40,0],texture:[6,12,10,e,10,4,6]}}}}}),STATION_MODULES.add({type:"structure",hook:"NES",id:"st7",generate:function(t){var e,i;return i=new l000I(t),e=1+i.O1010(4),{type:"structure",size:.5,bodies:{main:{angle:0,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-130,-120,-100,-40,0,40,100,120,130]},width:[0,15,16,40,20,40,12,10,0],height:[0,15,16,40,20,40,12,10,0],texture:[6,12,8,e,e,8,12,6]},angle:{angle:-90,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55,-40,40,55]},width:[0,15,16,40,40,0],height:[0,15,16,40,40,0],texture:[6,12,10,e,10,4,6]}}}}}),STATION_MODULES.add({type:"structure",hook:"N",id:"st8",generate:function(t){var e,i;return i=new l000I(t),e=1+i.O1010(4),{type:"structure",rotate:30*(new l000I(t).next()-.5),transparent:!0,size:.5,bodies:{main:{angle:0,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-55,-40,40,55]},width:[0,15,16,40+e,40+e,0],height:[0,15,16,40+e,40+e,0],texture:[6,12,10,e,10,4,6]}},wings:{topsolarpanel:{noshape:!0,doubleside:!0,offset:{x:0,y:0,z:0},length:[60,60,60,60],width:[70,70,65,60,55],angle:[90,90,90,90,90],position:[0,0,0,0,0],texture:[14],bump:{position:0,size:5}},solarpanels:{noshape:!0,doubleside:!0,offset:{x:0,y:0,z:0},length:[60,60,60,60],width:[70,70,65,60,55],angle:[-30,-30,-30,-30,-30],position:[0,0,0,0,0],texture:[14],bump:{position:0,size:5}}}}}}),STATION_MODULES.add({type:"structure",hook:"NS",id:"st9",generate:function(t){return{type:"structure",rotate:2*(new l000I(t).next()-.5),size:.5,bodies:{main:{section_segments:16,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-130,-120,-75,-70,70,75,120,130]},width:[0,15,16,40,40,12,10,0],height:[0,15,16,40,40,12,10,0],texture:[6,12,10,11,1,4,6]}},wings:{topsolarpanel:{noshape:!0,doubleside:!0,offset:{x:0,y:0,z:0},length:[60,60,60,60],width:[70,70,65,60,55],angle:[90,90,90,90,90],position:[0,0,0,0,0],texture:[14],bump:{position:0,size:5}},solarpanels:{noshape:!0,doubleside:!0,offset:{x:0,y:0,z:0},length:[60,60,60,60],width:[70,70,65,60,55],angle:[-30,-30,-30,-30,-30],position:[0,0,0,0,0],texture:[14],bump:{position:0,size:5}}}}}}),this.StationModel=function(){function e(t,e){var i,s,n,l,a,o;for(this.team=e,this.phase=t.phase,this.hue=t.hue,this.open=!1,this.OO1I0=0,this.crystals_max=10,this.level=0,this.modules=[],this.I0llI=new THREE.Group,this.last_station_message=0,this.alive=!0,o=t.modules,i=0,s=o.length;i<s;i++)n=o[i],l=STATION_MODULES.types_by_id[n.type],a=new StationModuleModel(l.generate(n.id+this.hue),this.hue/360,"alloy",this),a.id=n.id,a.type=n.type,a.dir=n.dir,this.modules.push(a),a.I0llI.rotation.z=-Math.PI*n.dir*.5,a.I0llI.position.y=20*n.y,a.I0llI.position.x=20*n.x,a.I0llI.scale.set(10,10,10),this.I0llI.add(a.I0llI),"deposit"===l.type?a.createCarpet("deposit"):"spawning"===l.type&&a.createCarpet("spawning");this.I0llI.scale.set(.5,.5,.5),this.bar=new ShieldBar,this.I0llI.add(this.bar.l1OI0),this.last_bar_module_change=0,this.bar_module=null}return e.prototype.setLevel=function(e,i){if(e>this.level&&(this.level=e,i.mode.team===this.team))return this.last_station_message=Date.now(),i.message(t("Station upgraded"),"#8FF")},e.prototype.hasDestroyedModule=function(){var t,e,i,s;for(s=this.modules,t=0,e=s.length;t<e;t++)if(i=s[t],!i.alive)return!0;return!1},e.prototype.setModuleShield=function(t,e,i){if(t!==this.bar_module){if(!(Date.now()>this.last_bar_module_change+1e3))return;this.last_bar_module_change=Date.now(),this.bar_module=t}return this.bar.l1OI0.position.x=t.I0llI.position.x,this.bar.l1OI0.position.y=t.I0llI.position.y,this.bar.set(e,i)},e.prototype.III10=function(t){var e,i,s,n,l,a,o;for(o=.5*(10+2.5*this.level)/10,this.I0llI.scale.set(o,o,o),e=!1,a=this.modules,s=0,n=a.length;s<n;s++)l=a[s],l.I0llI.visible=l.alive,l.data.rotate&&(l.I0llI.rotation.x+=.001),l.III10(t),l.updateCarpet(this.level),l.alive&&(e=!0);return this.alive=e,i=-t/60/1200%1*Math.PI*2,this.I0llI.rotation.z=i,this.bar.III10(),this.bar.l1OI0.rotation.z=-i},e}(),this.Carpet=function(){function e(t){this.type=t,this.level=0,this.canvas=document.createElement("canvas"),this.canvas.width=256,this.canvas.height=256,this.texture=new THREE.Texture(this.canvas),this.l1IOO(),this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({color:16777215,map:this.texture,transparent:!0,depthWrite:!1,depthTest:!0,blending:THREE.AdditiveBlending}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(2,2,2),this.l1OI0.rotation.z=Math.PI/2,this.I0llI=new THREE.Group,this.I0llI.add(this.l1OI0)}return e.prototype.setLevel=function(t){if(t!==this.level)return this.level=t,this.l1IOO()},e.prototype.l1IOO=function(){var e,i,s,n,l,a,o;if(e=this.canvas.getContext("2d"),e.clearRect(0,0,this.canvas.width,this.canvas.height),"deposit"===this.type){for(i=e.createLinearGradient(0,0,0,this.canvas.height),i.addColorStop(0,"hsla(0,60%,60%,0)"),i.addColorStop(.1,"hsla(0,60%,60%,.2)"),i.addColorStop(1,"hsla(0,60%,60%,0)"),e.fillStyle=i,e.beginPath(),e.moveTo(.2*this.canvas.width,0),e.lineTo(.8*this.canvas.width,0),e.lineTo(this.canvas.width,this.canvas.height),e.lineTo(0,this.canvas.height),e.closePath(),e.fill(),e.fillStyle="hsla(0,60%,60%,1)",e.font="30pt Play",e.textAlign="center",e.textBaseline="middle",e.fillText("Lv"+(this.level+3),this.canvas.width/2,this.canvas.height/2),e.font="14pt Play",e.fillText(t("DEPOT"),this.canvas.width/2,this.canvas.height/8),e.fillRect(.25*this.canvas.width,this.canvas.height/6,.5*this.canvas.width,4),e.font="20pt FontAwesome",e.fillText("",this.canvas.width/4,this.canvas.height/2),e.fillText("",.75*this.canvas.width,this.canvas.height/2),e.fillText("",.35*this.canvas.width,this.canvas.height/4),e.fillText("",.5*this.canvas.width,this.canvas.height/4),e.fillText("",.65*this.canvas.width,this.canvas.height/4),e.fillStyle="rgba(0,0,0,.5)",s=n=0,a=this.canvas.height-1;n<=a;s=n+=2)e.fillRect(0,s,this.canvas.width,1);return this.texture.needsUpdate=!0}for(i=e.createLinearGradient(0,0,0,this.canvas.height),i.addColorStop(0,"hsla(180,60%,60%,0)"),i.addColorStop(.1,"hsla(180,60%,60%,.2)"),i.addColorStop(1,"hsla(180,60%,60%,0)"),e.fillStyle=i,e.beginPath(),e.moveTo(.2*this.canvas.width,0),e.lineTo(.8*this.canvas.width,0),e.lineTo(this.canvas.width,this.canvas.height),e.lineTo(0,this.canvas.height),e.closePath(),e.fill(),e.fillStyle="hsla(180,60%,60%,1)",e.font="30pt Play",e.textAlign="center",e.textBaseline="middle",e.fillText("Lv"+(this.level+3),this.canvas.width/2,this.canvas.height/2),e.font="14pt Play",e.fillText(t("TAKE OFF"),this.canvas.width/2,this.canvas.height/8),e.fillRect(.25*this.canvas.width,this.canvas.height/6,.5*this.canvas.width,4),e.fillText(t("KEEP CLEAR"),this.canvas.width/2,.875*this.canvas.height),e.font="20pt FontAwesome",e.fillText("",this.canvas.width/4,this.canvas.height/2),e.fillText("",.75*this.canvas.width,this.canvas.height/2),e.fillText("",.35*this.canvas.width,this.canvas.height/4),e.fillText("",.5*this.canvas.width,this.canvas.height/4),e.fillText("",.65*this.canvas.width,this.canvas.height/4),e.fillStyle="rgba(0,0,0,.5)",s=l=0,o=this.canvas.height-1;l<=o;s=l+=2)e.fillRect(0,s,this.canvas.width,1);return this.texture.needsUpdate=!0},e}(),this.ShieldBar=function(){function t(){this.name="",this.shield=0,this.shield_max=1,this.canvas=document.createElement("canvas"),this.canvas.width=256,this.canvas.height=64,this.texture=new THREE.Texture(this.canvas),this.OOl0O=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({color:16777215,map:this.texture,transparent:!0,depthWrite:!1,depthTest:!1}),this.l1OI0=new THREE.Mesh(this.OOl0O,this.material),this.l1OI0.scale.set(24,6,3),this.l1OI0.position.set(0,0,2),this.last_update=0,this.l1OI0.visible=!1}return t.prototype.III10=function(){if(this.l1OI0.visible&&Date.now()>this.last_update+5e3)return this.l1OI0.visible=!1},t.prototype.set=function(t,e){if(this.shield=t,this.shield_max=e,Date.now()>this.last_update+500)return this.last_update=Date.now(),this.l1IOO(),this.l1OI0.visible=!0},t.prototype.l1IOO=function(t){var e,i,s,n,l,a;return e=this.shield/this.shield_max,this.color=e>.5?"hsl(180,"+Math.round(2*(e-.5)*100)+"%,75%)":"hsl(0,"+Math.round(2*(.5-e)*100)+"%,75%)",i=this.canvas.getContext("2d"),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.fillStyle="rgba(0,0,0,.5)",i.fillRect(0,0,this.canvas.width,this.canvas.height),a=this.canvas.width,s=this.canvas.height,l=this.canvas.height/8,i.strokeStyle=this.color,i.fillStyle=this.color,i.strokeRect(l,s/2+l,a-2*l,s/2-2*l),n=a-2*l-4,i.fillRect(l+2,s/2+l+2,n*e,s/2-2*l-4),i.textAlign="left",i.textBaseline="middle",i.font="16pt Play",i.fillText(this.shield,l,s/4),i.textAlign="right",i.fillText(this.shield_max,a-l,s/4),this.texture.needsUpdate=!0},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.StationModuleModel=function(e){function i(t,e,s,n){this.station=n,i.I0Il1.constructor.call(this,t,e,s),this.alive=!0,this.shield=1}return extend(i,e),i.prototype.setAlive=function(e,i){if(this.alive!==e&&(this.alive=e,i.mode.team===this.station.team))return this.station.last_station_message=Date.now(),this.alive?i.message(t("Station module repaired"),"#8FF"):i.message(t("Station module destroyed"),"#F88")},i.prototype.createCarpet=function(t){if(null==this.carpet)return this.carpet=new Carpet(t),this.I0llI.add(this.carpet.I0llI),this.carpet.l1OI0.position.set(2,0,-1)},i.prototype.III10=function(t){var e,s,n,l;if(i.I0Il1.III10.call(this,t),null!=this.material)return s=Math.floor(255*Math.max(.15,this.shield)),this.material.color.set((s<<16)+(s<<8)+s),l=Math.floor(128*s/255),n=Math.floor(96*s/255),e=Math.floor(80*s/255),
this.material.specular.set((l<<16)+(n<<8)+e)},i.prototype.updateCarpet=function(t){if(null!=this.carpet)return this.carpet.material.opacity=Math.pow(Math.random(),.2),this.carpet.setLevel(t),this.carpet.I0llI.rotation.x=-this.I0llI.rotation.x},i.prototype.setShield=function(e,i){if(this.shield!==e){if(!(e<.99*this.shield&&i.mode.team===this.station.team))return this.shield=e;if(this.shield=e,i.mode.attackWarning(),Date.now()>this.station.last_station_message+1e4)return this.station.last_station_message=Date.now(),i.message(t("Station is under attack"),"#F88")}},i.prototype.I0II1=function(t,e){var i,s,n,l;return null==t&&(t=128),null==e&&(e=16777215),l=new THREE.Scene,i=new THREE.OrthographicCamera(0,t,0,t,1,3e3),this.material.emissive.setHex(e),this.material.map=OIOIO,this.material.emissiveMap=OIOIO,this.material.side=THREE.DoubleSide,this.material.color.setHex(0),this.lO01l.opacity=0,l.add(this.I0llI),this.I0llI.position.set(t/2,t/2,-1e3),n=.5*t/3,this.I0llI.scale.set(n,-n,n),this.I0llI.rotation.z=Math.PI/2,l0Il0.O1OOO||(l0Il0.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),l0Il0.O1OOO.setSize(t,t),l0Il0.O1OOO.render(l,i),s=document.createElement("canvas"),s.width=t,s.height=t,s.getContext("2d").drawImage(l0Il0.O1OOO.domElement,0,0),s},i.images_buffer=[],i.getModuleImage=function(t){return null==i.images_buffer[t.id]&&(i.images_buffer[t.id]=new i(t.generate(0)).I0II1()),i.images_buffer[t.id]},i.getModuleImageColorized=function(t,e){var s;return null==i.images_buffer[t.id+e]&&(s=new i(t.generate(0)).I0II1(128,e),i.images_buffer[t.id+e]=s),i.images_buffer[t.id+e]},i}(this.l0Il0),this.StationGrid=function(){function t(t,e,i){this.ends=t,this.modules=e,this.size=null!=i?i:2*Math.floor(Math.sqrt(this.modules)),this.types=[],this.types[0]={type:"NS",dir:0},this.types[1]={type:"N",dir:0},this.types[2]={type:"N",dir:1},this.types[3]={type:"NE",dir:0},this.types[4]={type:"N",dir:2},this.types[5]={type:"NS",dir:0},this.types[6]={type:"NE",dir:1},this.types[7]={type:"NES",dir:0},this.types[8]={type:"N",dir:3},this.types[9]={type:"NE",dir:3},this.types[10]={type:"NS",dir:1},this.types[11]={type:"NES",dir:3},this.types[12]={type:"NE",dir:2},this.types[13]={type:"NES",dir:2},this.types[14]={type:"NES",dir:1},this.types[15]={type:"NESW",dir:0}}return t.prototype.O010I=function(){var t,e,i,s,n;for(this.ends=Math.max(2,this.ends),this.grid=function(){var i,s,n;for(n=[],t=i=0,s=this.size-1;i<=s;t=i+=1)n.push(function(){var t,i,s;for(s=[],e=t=0,i=this.size-1;t<=i;e=t+=1)s.push(0);return s}.call(this));return n}.call(this),this.points=[],0,this.x=Math.floor(this.size/2),this.y=Math.floor(this.size/2),this.dir=Math.floor(4*Math.random()),this.O1O10=0,this.mark(this.x,this.y),this.l1O00(),i=2;;){if(this.O1O10>=this.modules||0===this.points.length)break;s=this.points[Math.floor(this.points.length*Math.random())],n=this.type(s.x,s.y).type,"N"===n&&this.O1O10<this.modules-(this.ends-i)?(this.x=s.x,this.y=s.y,this.l1O00()||this.points.splice(this.points.indexOf(s),1)):("NS"===n||"NE"===n)&&i<this.ends?(this.x=s.x,this.y=s.y,this.l1O00()?i++:this.points.splice(this.points.indexOf(s),1)):this.points.splice(this.points.indexOf(s),1)}return i===this.ends&&this.O1O10===this.modules},t.prototype.OI11I=function(){},t.prototype.isClear=function(t,e){return t<0||e<0||t>=this.size||e>=this.size||0===this.grid[e][t]},t.prototype.get=function(t,e){return t<0||e<0||t>=this.size||e>=this.size?0:this.grid[e][t]},t.prototype.type=function(t,e){var i;return i=0,this.isClear(t,e-1)||(i|=1),this.isClear(t,e+1)||(i|=4),this.isClear(t-1,e)||(i|=8),this.isClear(t+1,e)||(i|=2),this.types[i]},t.prototype.isDirClear=function(t,e,i){switch(i){case 0:return e>0&&this.isClear(t,e-1)&&this.isClear(t-1,e-1)&&this.isClear(t+1,e-1)&&this.isClear(t,e-2)&&this.isClear(t-1,e-2)&&this.isClear(t+1,e-2);case 2:return e<this.size-1&&this.isClear(t,e+1)&&this.isClear(t-1,e+1)&&this.isClear(t+1,e+1)&&this.isClear(t,e+2)&&this.isClear(t-1,e+2)&&this.isClear(t+1,e+2);case 1:return t<this.size-1&&this.isClear(t+1,e)&&this.isClear(t+1,e-1)&&this.isClear(t+1,e+1)&&this.isClear(t+2,e)&&this.isClear(t+2,e-1)&&this.isClear(t+2,e+1);default:return t>0&&this.isClear(t-1,e)&&this.isClear(t-1,e-1)&&this.isClear(t-1,e+1)&&this.isClear(t-2,e)&&this.isClear(t-2,e-1)&&this.isClear(t-2,e+1)}},t.prototype.mark=function(t,e){return this.grid[e][t]=1,this.points.push({x:t,y:e}),this.O1O10++},t.prototype.l1O00=function(){var t,e,i;if(i=Math.random(),!this.isDirClear(this.x,this.y,this.dir)){for(t=i<.5?1:3,e=0;e<=2&&(this.dir=(this.dir+t)%4,!this.isDirClear(this.x,this.y,this.dir));e+=1);i=1}if(i<.2&&this.isDirClear(this.x,this.y,(this.dir+1)%4)?this.dir=(this.dir+1)%4:i<.4&&this.isDirClear(this.x,this.y,(this.dir+3)%4)&&(this.dir=(this.dir+3)%4),this.isDirClear(this.x,this.y,this.dir)){switch(this.dir){case 2:this.y+=1,this.mark(this.x,this.y);break;case 0:this.y-=1,this.mark(this.x,this.y);break;case 1:this.x+=1,this.mark(this.x,this.y);break;case 3:this.x-=1,this.mark(this.x,this.y)}return!0}return!1},t.prototype.ll111=function(){var t,e,i,s,n,l,a,o;for(t=document.createElement("canvas"),t.width=1024,t.height=1024,e=t.getContext("2d"),e.scale(1024/this.size,1024/this.size),i=n=0,a=this.size-1;0<=a?n<=a:n>=a;i=0<=a?++n:--n)for(s=l=0,o=this.size-1;0<=o?l<=o:l>=o;s=0<=o?++l:--l)0!==this.grid[s][i]&&(e.fillStyle="#000",e.fillRect(i,s,1,1));return t},t}(),this.Weapons=function(){function t(t){this.I110I=t,this.weapons=[],this.next_shot_time=[0,0,0,0,0,0,0,0,0,0,0,0,0],this.credits=0}return t.prototype.read=function(t){var e,i,s,n,l,a,o,r,h;for(o=this.weapons.length,this.weapons=[],this.credits=t.getUint32(1,!0),n=5;n<t.byteLength;)i=t.getUint8(n++),e=t.getUint8(n++),a=t.getUint8(n++),this.weapons.push({code:i,type:WEAPON_TYPES.types_by_code[i],ammo:e,next_shot:this.I110I.IOO1I.ll0lO.ll01O+a});for(this.signature="",r=this.weapons,s=0,l=r.length;s<l;s++)h=r[s],this.signature+=h.code+"-"+h.ammo+":";this.weapons.length>o&&this.I110I.OlIl1.beep()},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Pod=function(){function t(t,e,i,s){this.I110I=t,this.ship=e,this.pods=i,this.pod_type_id=s,this.x=this.ship.status.x,this.y=this.ship.status.y,this.z=0,this.r=this.ship.status.r,this.IOlOI=0,this.OI10I=0,this.OI0O1=0,this.IIl1O=0,this.last_visible=!0}return t.prototype.l1O00=function(t,e,i){return this.x<this.ship.status.x-this.I110I.Ill01?this.x+=this.I110I.size:this.x>this.ship.status.x+this.I110I.Ill01&&(this.x-=this.I110I.size),this.y<this.ship.status.y-this.I110I.Ill01?this.y+=this.I110I.size:this.y>this.ship.status.y+this.I110I.Ill01&&(this.y-=this.I110I.size),this.physicsStep(t,e,i)},t.prototype.dispose=function(){if(this.added)return this.I110I.IOO1I.IOO1I.remove(this.l1OI0),this.l1OI0.geometry.dispose(),this.l1OI0.material.dispose()},t.prototype.updateModel=function(t){return this.added||(this.added=!0,this.I110I.IOO1I.IOO1I.add(this.l1OI0)),t&&!this.last_visible&&(this.x=this.ship.status.x,this.y=this.ship.status.y,this.z=0,this.OI10I=0,this.OI0O1=0,this.IIl1O=0),this.l1OI0.rotation.x=this.ship.I0100,this.l1OI0.rotation.y=.4*this.ship.O1001,this.l1OI0.rotation.z=this.r+Math.PI,this.l1OI0.position.x=this.x,this.l1OI0.position.y=this.y,this.l1OI0.position.z=this.z,this.l1OI0.visible=t,this.last_visible=t},t.prototype.I1I1O=function(){return this.I110I.IOO1I.ll0lO.I1I1O(this.l1OI0)},t}(),this.MiningPod=function(t){function e(t,i,s){e.I0Il1.constructor.call(this,t,i,s,0),this.l1OI0=this.ship.pods.getModelInstance("MINING_POD_MODEL")}return extend(e,t),e.prototype.physicsStep=function(t,e,i){var s;return s=this.ship.type.radius,this.ship.status.guided&&(s=0),this.I110I.IOO1I.ll0lO.weapon_physics.miningPodStep(this,e,this.pods.mining_pods.length,s,t,i)},e}(Pod),this.AttackPod=function(t){function e(t,i,s){e.I0Il1.constructor.call(this,t,i,s,1),this.l1OI0=this.ship.pods.getModelInstance("ATTACK_POD_MODEL")}return extend(e,t),e.prototype.physicsStep=function(t,e,i){var s;return s=this.ship.type.radius,this.ship.status.guided&&(s=0),this.I110I.IOO1I.ll0lO.weapon_physics.attackPodStep(this,e,this.pods.attack_pods.length,s,t,i)},e}(Pod),this.DefencePod=function(t){function e(t,i,s){e.I0Il1.constructor.call(this,t,i,s,2),this.l1OI0=this.ship.pods.getModelInstance("DEFENCE_POD_MODEL")}return extend(e,t),e.prototype.physicsStep=function(t,e,i){var s;return s=this.ship.type.radius,this.ship.status.guided&&(s=0),this.I110I.IOO1I.ll0lO.weapon_physics.defencePodStep(this,e,this.pods.defence_pods.length,s,t,i)},e}(Pod),this.Pods=function(){function t(t,e){this.I110I=t,this.IO010=e,this.mining_pods=[],this.attack_pods=[],this.defence_pods=[],this.target=null,this.models={}}return t.prototype.getModelInstance=function(t){var e,i,s;return null==this.models[t]&&(i="zinc",this.IO010===this.I110I.IO010?this.I110I.l10lI.OO11I()&&(i=this.I110I.l10lI.custom.finish):null!=(e=this.I110I.names.getCustom(this.IO010.status.id))&&null!=e.finish&&(i=e.finish),this.models[t]=new WeaponModel(WeaponModel[t],this.IO010.status.hue/360,i)),s=this.models[t].IOO0l(),s.scale.x=.6*this.models[t].data.size*2,s.scale.y=.6*this.models[t].data.size*2,s.scale.z=.6*this.models[t].data.size*2,s},t.prototype.setMiningNum=function(t){for(;this.mining_pods.length>t;)this.mining_pods[0].dispose(),this.mining_pods.splice(0,1);for(;this.mining_pods.length<t;)this.mining_pods.push(new MiningPod(this.I110I,this.IO010,this))},t.prototype.setAttackNum=function(t){for(;this.attack_pods.length>t;)this.attack_pods[0].dispose(),this.attack_pods.splice(0,1);for(;this.attack_pods.length<t;)this.attack_pods.push(new AttackPod(this.I110I,this.IO010,this))},t.prototype.setDefenceNum=function(t){for(;this.defence_pods.length>t;)this.defence_pods[0].dispose(),this.defence_pods.splice(0,1);for(;this.defence_pods.length<t;)this.defence_pods.push(new DefencePod(this.I110I,this.IO010,this))},t.prototype.l1O00=function(t){var e,i,s,n,l,a,o,r,h,u,d;for(h=this.mining_pods,e=i=0,l=h.length;i<l;e=++i)r=h[e],r.l1O00(t,e,this.target);for(u=this.attack_pods,e=s=0,a=u.length;s<a;e=++s)r=u[e],r.l1O00(t,e,this.target);for(d=this.defence_pods,e=n=0,o=d.length;n<o;e=++n)r=d[e],r.l1O00(t,e,this.target)},t.prototype.remove=function(t,e){switch(t){case 0:return this.removeMiningPod(e);case 1:return this.removeAttackPod(e);case 2:return this.removeDefencePod(e)}},t.prototype.removeMiningPod=function(t){if(t<this.mining_pods.length)return this.mining_pods[t].dispose(),this.mining_pods.splice(t,1)},t.prototype.removeAttackPod=function(t){if(t<this.attack_pods.length)return this.attack_pods[t].dispose(),this.attack_pods.splice(t,1)},t.prototype.removeDefencePod=function(t){if(t<this.defence_pods.length)return this.defence_pods[t].dispose(),this.defence_pods.splice(t,1)},t.prototype.updateModels=function(t){var e,i,s,n,l,a,o,r,h,u,d;for(h=this.mining_pods,e=i=0,l=h.length;i<l;e=++i)r=h[e],r.updateModel(t);for(u=this.attack_pods,e=s=0,a=u.length;s<a;e=++s)r=u[e],r.updateModel(t);for(d=this.defence_pods,e=n=0,o=d.length;n<o;e=++n)r=d[e],r.updateModel(t)},t.prototype.fixPositions=function(){var t,e,i,s,n,l,a,o,r,h,u;for(r=this.mining_pods,t=e=0,n=r.length;e<n;t=++e)o=r[t],o.I1I1O();for(h=this.attack_pods,t=i=0,l=h.length;i<l;t=++i)o=h[t],o.I1I1O();for(u=this.defence_pods,t=s=0,a=u.length;s<a;t=++s)o=u[t],o.I1I1O()},t}(),this.Mine=function(){function t(t,e){this.I110I=t,this.typeid=e.getUint8(1),this.id=e.getUint16(2,!0),this.shipid=e.getUint16(4,!0),this.ll0lO=this.I110I.IOO1I.ll0lO,this.type=WEAPON_TYPES.types_by_code[this.typeid],this.speed=.004*this.type.speed,this.OlOOO=Math.exp(Math.log(.5)*this.type.OlOOO/3e3),this.read(e),this.III10(e),this.createModel(),this.pop=0,this.killed=!1}return t.prototype.III10=function(t){var e,i,s;if((s=t.getUint32(6,!0))>this.ll0lO.ll01O)this.O0II0=t;else if(s<this.ll0lO.ll01O){if(this.read(t),this.ll0lO.ll01O-s<30)for(e=s+1,i=this.ll0lO.ll01O;e<=i;e+=1)this.l1O00()}else this.read(t)},t.prototype.read=function(t){return this.x=t.getFloat32(10,!0),this.y=t.getFloat32(14,!0),this.OI10I=t.getFloat32(18,!0),this.OI0O1=t.getFloat32(22,!0),this.hue=Math.floor(360*t.getUint8(26)/256),this.I110I.mode.anonymous_ships&&this.shipid!==this.I110I.IOO1I.IO010.status.id&&(this.hue=(this.I110I.hue+180)%360),this.last_update=this.ll0lO.ll01O},t.prototype.createModel=function(){var t,e,i;return e="zinc",this.shipid===this.I110I.IO010.status.id?this.I110I.l10lI.OO11I()&&(e=this.I110I.l10lI.custom.finish):null!=(t=this.I110I.names.getCustom(this.shipid))&&null!=t.finish&&(e=t.finish),i=this.type.model,this.model=new l0Il0(WeaponModel[i],this.hue/360,e),this.model.IIl0I=0,this.I110I.IOO1I.IOO1I.add(this.model.I0llI),this.I0llI=this.model.I0llI},t.prototype.l1O00=function(){if(null!=this.O0II0&&this.ll0lO.ll01O>=this.O0II0.getUint32(6,!0)&&(this.read(this.O0II0),this.O0II0=null),this.I110I.IOO1I.ll0lO.weapon_physics.mineStep(this),this.ll0lO.ll01O>this.last_update+90)return this.killed=!0},t.prototype.dispose=function(){if(null!=this.model)return this.I110I.IOO1I.IOO1I.remove(this.model.I0llI),this.model.dispose()},t.prototype.updateModel=function(){var t,e,i,s,n,l;return n=2*this.model.data.size,this.pop<30?(this.pop++,s=Math.sqrt(this.pop/30)*n,this.I0llI.scale.set(s,s,s)):this.I0llI.scale.set(n,n,n),this.ll0lO.ll01O%30<15?this.model.material.emissive.set(Oll0O.hsvToRgbHex(this.model.hue,.5,1)):this.model.material.emissive.set(0),l=this.ll0lO.ll01O/60*1e3,t=4*(137*this.id%100+2e3),e=4*(this.id%100+2190),i=4*(993*this.id%100+2410),this.I0llI.rotation.z=.25*Math.sin(l%t/t*Math.PI*2),this.I0llI.rotation.x=.25*Math.sin(l%e/e*Math.PI*2),this.I0llI.rotation.y=.25*Math.sin(l%i/i*Math.PI*2),this.I0llI.position.x=this.x,this.I0llI.position.y=this.y,this.I0llI.position.z=-this.type.radius,this.I0llI.visible=!0,this.ll0lO.I1I1O(this.I0llI)},t}(),this.Rocket=function(){function t(t,e){this.I110I=t,this.typeid=e.getUint8(1),this.id=e.getUint16(2,!0),this.shipid=e.getUint16(4,!0),this.ll0lO=this.I110I.IOO1I.ll0lO,this.type=WEAPON_TYPES.types_by_code[this.typeid],this.speed=.004*this.type.speed,null!=this.I110I.mode.options.projectile_speed&&(this.speed*=this.I110I.mode.options.projectile_speed),this.OlOOO=Math.exp(Math.log(.5)*this.type.OlOOO/3e3),this.read(e),this.III10(e),this.createModel(),this.pop=0,this.killed=!1}return t.prototype.III10=function(t){var e,i,s;if((s=t.getUint32(6,!0))>this.ll0lO.ll01O)this.O0II0=t;else if(s<this.ll0lO.ll01O){if(this.read(t),this.ll0lO.ll01O-s<30)for(e=s+1,i=this.ll0lO.ll01O;e<=i;e+=1)this.l1O00()}else this.read(t)},t.prototype.read=function(t){return this.x=t.getFloat32(10,!0),this.y=t.getFloat32(14,!0),this.OI10I=t.getFloat32(18,!0),this.OI0O1=t.getFloat32(22,!0),this.r=t.getFloat32(26,!0),this.target_r=t.getFloat32(30,!0),this.hue=Math.floor(360*t.getUint8(34)/256),this.I110I.mode.anonymous_ships&&this.shipid!==this.I110I.IOO1I.IO010.status.id&&(this.hue=(this.I110I.hue+180)%360),this.last_update=this.ll0lO.ll01O},t.prototype.createModel=function(){var t,e,i;return e="zinc",this.shipid===this.I110I.IO010.status.id?this.I110I.l10lI.OO11I()&&(e=this.I110I.l10lI.custom.finish):null!=(t=this.I110I.names.getCustom(this.shipid))&&null!=t.finish&&(e=t.finish),i=this.type.model,this.model=new l0Il0(WeaponModel[i],this.hue/360,e),this.model.IIl0I=0,this.I110I.IOO1I.IOO1I.add(this.model.I0llI),this.I0llI=this.model.I0llI},t.prototype.l1O00=function(){if(null!=this.O0II0&&this.ll0lO.ll01O>=this.O0II0.getUint32(6,!0)&&(this.read(this.O0II0),this.O0II0=null),this.I110I.IOO1I.ll0lO.weapon_physics.rocketStep(this),this.ll0lO.ll01O>this.last_update+90)return this.killed=!0},t.prototype.dispose=function(){if(null!=this.model)return this.I110I.IOO1I.IOO1I.remove(this.model.I0llI),this.model.dispose()},t.prototype.updateModel=function(){var t,e;return e=2*this.model.data.size,this.pop<30?(this.pop++,t=Math.sqrt(this.pop/30)*e,this.I0llI.scale.set(t,t,t)):this.I0llI.scale.set(e,e,e),this.I0llI.rotation.z=this.r+Math.PI,this.I0llI.rotation.x=this.ll0lO.ll01O/180%1*Math.PI*2,this.I0llI.position.x=this.x,this.I0llI.position.y=this.y,this.I0llI.position.z=-1,this.I0llI.visible=!0,this.model.propstep(!0),this.ll0lO.I1I1O(this.I0llI)},t}(),hasProp={}.hasOwnProperty,this.WeaponModel=function(){function t(t,e,i){var s,n,l,a,o,r,h,u,d,I;if(this.data=t,this.hue=null!=e?e:0,this.finish=null!=i?i:"zinc",this.hue=Math.max(.01,Math.min(.99,this.hue)),this.geometry=new THREE.Geometry,this.geometry.faceVertexUvs[0]=[],this.l10lI=!1,null!=this.data.bodies){r=this.data.bodies;for(a in r)hasProp.call(r,a)&&(s=r[a],this.IIII0(s))}if(null!=this.data.tori){h=this.data.tori;for(a in h)hasProp.call(h,a)&&(s=h[a],this.buildTorus(s))}if(this.data.wings){u=this.data.wings;for(a in u)hasProp.call(u,a)&&(I=u[a],this.ll0Ol(I))}for(this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox(),this.geometry.computeFaceNormals(),d=this.geometry.faces,l=0,o=d.length;l<o;l++)n=d[l],n.vertexNormals[0]=n.normal,n.vertexNormals[1]=n.normal,n.vertexNormals[2]=n.normal;this.I0llI=new THREE.Group,this.I0llI.rotation.order="ZYX",this.lllOl=this.I1I00(),this.shield_mat=new THREE.MeshBasicMaterial({map:OIOIO,color:16756800,blending:THREE.AdditiveBlending,transparent:!0,side:THREE.DoubleSide})}return t.prototype.IOO0l=function(){return this.l1OI0=new THREE.Mesh(this.geometry,this.lllOl),this.l1OI0.scale.set(2*this.data.size,2*this.data.size,2*this.data.size),this.l1OI0},t.prototype.getCollectibleInstance=function(){return this.l1OI0=new THREE.Mesh(this.geometry,this.shield_mat),this.l1OI0.scale.set(2*this.data.size,2*this.data.size,2*this.data.size),this.l1OI0},t.prototype.dispose=function(){return this.geometry.dispose(),this.lllOl.dispose()},t.prototype.bump=function(t){return this.bumpframe=t,this.bumping=!0},t.prototype.I1I00=function(t){var e,i,s;switch(null==t&&(t=10),this.built_material=this.finish,this.finish){case"alloy":this.buildAlloyMaterial();break;case"gold":this.buildGoldMaterial();break;case"titanium":this.buildTitaniumMaterial();break;case"carbon":this.buildCarbonMaterial();break;case"copper":this.buildCopperMaterial();break;case"diamond":this.buildDiamondMaterial();break;default:this.buildDefaultMaterial()}return this.base_color=this.material.color.getHex(),s=this.base_color>>16&255,i=this.base_color>>8&255,e=255&this.base_color,this.dark_color=Math.floor(s/2)<<16|Math.floor(i/2)<<8|Math.floor(e/2),this.material},t.prototype.buildDefaultMaterial=function(t){return null==t&&(t=10),this.material=new THREE.MeshLambertMaterial({map:lO1lI,color:16777215,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildAlloyMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:8413264,shininess:30,bumpScale:.1,color:10531008,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildTitaniumMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:6316128,shininess:20,bumpScale:.1,color:6316128,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildCarbonMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specular:6316128,shininess:5,bumpScale:.1,color:1052688,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:O1I10})},t.prototype.buildFullColorMaterial=function(){var t;return t=Oll0O.hsvToRgbHex(this.hue,1,1),this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:12632256,shininess:50,bumpScale:.1,color:t,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildGoldMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:10506256,shininess:50,bumpScale:.1,color:8413232,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildCopperMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specularMap:lO1lI,specular:11554864,shininess:15,bumpScale:.1,color:10514512,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.buildDiamondMaterial=function(){return this.material=new THREE.MeshPhongMaterial({map:lO1lI,bumpMap:lO1lI,specular:16777215,opacity:.5,shininess:50,side:THREE.DoubleSide,bumpScale:.1,transparent:!0,color:8421504,emissive:Oll0O.hsvToRgbHex(this.hue,.5,1),emissiveMap:lIOIO})},t.prototype.III10=function(t){var e,i;if(this.built_material!==this.finish&&(this.I1I00(this.hue),this.l1OI0.material=this.material),this.shield_mesh.visible=!1,this.material.color.setHex(this.base_color),this.invulnerable?Date.now()%500<250?(this.material.emissive.setHex(Oll0O.hsvToRgbHex(this.hue,.5,.5)),this.material.color.setHex(this.dark_color),this.shield_mat.color.setHex(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.shield_mesh.visible=!0):(this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.material.color.setHex(this.base_color),this.shield_mat.color.setHex(0)):this.IOlOO>0&&(this.O1I1O=Math.random()<this.IOlOO?1:0,this.shield_mesh.visible=!0,1===this.O1I1O?(this.material.emissive.setHex(Oll0O.hsvToRgbHex(this.hue,.5,.5)),this.material.color.setHex(this.dark_color),this.shield_mat.color.setHex(Oll0O.hsvToRgbHex(this.hue,.5,1))):(this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)),this.material.color.setHex(this.base_color),this.shield_mat.color.setHex(0)),this.IOlOO*=.95,this.IOlOO<.1&&(this.IOlOO=0,this.shield_mesh.visible=!1,this.material.color.setHex(this.base_color),this.material.emissive.set(Oll0O.hsvToRgbHex(this.hue,.5,1)))),this.bumping)return t>this.bumpframe+30?(this.bumping=!1,this.I0llI.scale.set(2*this.data.size,2*this.data.size,2*this.data.size)):(i=Math.max(0,t-this.bumpframe)/30,e=1.5-Math.cos(Math.pow(i,.5)*Math.PI*2),this.I0llI.scale.set(2*this.data.size*e,2*this.data.size*e,2*this.data.size*e))},t.prototype.getTextureIndex=function(t,e){return null==t?0:"number"==typeof t?t:t[e]||t[t.length-1]},t.prototype.IIII0=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D;if(null==e&&(e=0),0===e)return this.IIII0(t,1),void(0!==t.offset.x&&this.IIII0(t,-1));for(i=t.angle||0,o=Math.cos(i/180*Math.PI*e),M=Math.sin(i/180*Math.PI*e),C=this.geometry.vertices.length,I=Math.min(t.position.x.length,t.position.y.length,t.width.length,t.height.length)-1,p=8,c=O=0,b=p-1;0<=b?O<=b:O>=b;c=0<=b?++O:--O)n=c/p*Math.PI*2;if(null!=t.section_segments&&("number"==typeof t.section_segments?(p=t.section_segments,n=function(){var t,e,i;for(i=[],c=t=0,e=p-1;0<=e?t<=e:t>=e;c=0<=e?++t:--t)i.push(c/p*Math.PI*2);return i}()):(p=t.section_segments.length,n=function(){var e,i,s;for(s=[],c=e=0,i=p-1;0<=i?e<=i:e>=i;c=0<=i?++e:--e)s.push(t.section_segments[c]/180*Math.PI);return s}())),null==t.position.z)for(t.position.z=[],c=m=1,w=t.position.y.length;1<=w?m<=w:m>=w;c=1<=w?++m:--m)t.position.z.push(0);for(d=f=0,x=I;f<=x;d=f+=1)for(H=.01*t.position.y[d],c=g=0,k=p-1;g<=k;c=g+=1)s=n[c]+Math.PI/2,A=(.01*t.position.x[d]+Math.cos(s)*t.width[d]*.01)*e,D=Math.sin(s)*t.height[d]*.01*e+.01*t.offset.z+.01*t.position.z[d],j=o*A+M*H,B=o*H-M*A,B+=.01*t.offset.y,j+=.01*t.offset.x*e,t.vertical?this.geometry.vertices.push(new THREE.Vector3(-D,j,B)):this.geometry.vertices.push(new THREE.Vector3(B,j,D));for(d=y=0,_=I-1;y<=_;d=y+=1)for(a=.25*(t.width[d]+t.width[d+1]+t.height[d]+t.height[d+1])*6.28,l=Math.abs(t.position.y[d]-t.position.y[d+1]),S=1,l>0&&a/l>4&&p%8==0?S=4:l>0&&a/l>2&&p%4==0&&(S=2),c=v=0,z=p-1;v<=z;c=v+=1)c<p/2?(this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+c,C+d*p+c,C+d*p+(c+1)%p)),this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+(c+1)%p,C+(d+1)*p+c,C+d*p+(c+1)%p))):(this.geometry.faces.push(new THREE.Face3(C+(d+1)*p+c,C+d*p+c,C+(d+1)*p+(c+1)%p)),this.geometry.faces.push(new THREE.Face3(C+d*p+c,C+d*p+(c+1)%p,C+(d+1)*p+(c+1)%p))),r=(n[c]-n[0]+Math.PI/2)/Math.PI*S%1,u=n[(c+1)%n.length]-n[c],u<0&&(u+=2*Math.PI),h=r+u/Math.PI*S,E=this.getTextureIndex(t.texture,d),15===E&&(E=13),63===E&&(E=31),T=E%8*.125,P=.25*(3-Math.floor(E/8)+.1),r=T+.125*(.1+.8*r),h=T+.125*(.1+.8*h),R=P+.2,31===E&&(T+=.125*this.hue,r=T,h=T),c<p/2?(this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,P),new THREE.Vector2(r,R),new THREE.Vector2(h,R)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(h,P),new THREE.Vector2(r,P),new THREE.Vector2(h,R)])):(this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,P),new THREE.Vector2(r,R),new THREE.Vector2(h,P)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(r,R),new THREE.Vector2(h,R),new THREE.Vector2(h,P)]))},t.prototype.buildTorus=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D;if("number"==typeof(k=t.segments))O=k,_=function(){var t,e,i;for(i=[],h=t=0,e=O;0<=e?t<=e:t>=e;h=0<=e?++t:--t)i.push(h/O*Math.PI*2);return i}();else for(_=[],h=d=0,g=k.length-1;0<=g?d<=g:d>=g;h=0<=g?++d:--d)_[h]=k[h]/180*Math.PI;for(T=this.geometry.vertices.length,r=_.length-1,u=8,h=I=0,y=u-1;0<=y?I<=y:I>=y;h=0<=y?++I:--I)s=h/u*Math.PI*2;for(null!=t.section_segments&&("number"==typeof t.section_segments?(u=t.section_segments,s=function(){var t,e,i;for(i=[],h=t=0,e=u-1;0<=e?t<=e:t>=e;h=0<=e?++t:--t)i.push(h/u*Math.PI*2);return i}()):(u=t.section_segments.length,s=function(){var e,i,s;for(s=[],h=e=0,i=u-1;0<=i?e<=i:e>=i;h=0<=i?++e:--e)s.push(t.section_segments[h]/180*Math.PI);return s}()));t.position.x.length<r+1;)t.position.x.push(t.position.x[t.position.x.length-1]);for(;t.position.y.length<r+1;)t.position.y.push(t.position.y[t.position.y.length-1]);for(;t.position.z.length<r+1;)t.position.z.push(t.position.z[t.position.z.length-1]);for(;t.width.length<r+1;)t.width.push(t.width[t.width.length-1]);for(;t.height.length<r+1;)t.height.push(t.height[t.height.length-1]);for(o=c=0,v=r;c<=v;o=c+=1)for(e=_[o],P=Math.cos(e),R=Math.sin(e),h=p=0,b=u-1;p<=b;h=p+=1)i=s[h],C=.01*(t.offset.x+t.position.x[o]+Math.cos(i)*t.height[o]+t.radius),j=.01*(t.offset.y+t.position.y[o]+Math.sin(i)*t.width[o]),B=0,A=P*C+R*B,D=P*B-R*C+.01*t.offset.z,H=j,this.geometry.vertices.push(new THREE.Vector3(H,A,D));for(o=m=0,w=r-1;m<=w;o=m+=1)for(h=f=0,x=u-1;f<=x;h=f+=1)this.geometry.faces.push(new THREE.Face3(T+(o+1)*u+h,T+o*u+h,T+o*u+(h+1)%u)),this.geometry.faces.push(new THREE.Face3(T+(o+1)*u+(h+1)%u,T+(o+1)*u+h,T+o*u+(h+1)%u)),n=(s[h]-s[0])/Math.PI%1,a=s[(h+1)%s.length]-s[h],a<0&&(a+=2*Math.PI),l=n+a/Math.PI,z=this.getTextureIndex(t.texture,o),15===z&&(z=13),63===z&&(z=31),M=z%8*.125,E=.25*(3-Math.floor(z/8)+.1),n=M+.125*(n+.1)*.8,l=M+.125*(l+.1)*.8,S=E+.2,31===z&&(M+=.125*this.hue,n=M,l=M),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(n,E),new THREE.Vector2(n,S),new THREE.Vector2(l,S)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(l,E),new THREE.Vector2(n,E),new THREE.Vector2(l,S)])},t.prototype.ll0Ol=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M;for(_=this.geometry.vertices.length,u=Math.min(t.length.length,t.width.length-1,t.angle.length,t.position.length-1),null==t.offset&&(t.offset={x:0,y:0,z:0}),z=0,M=0,n=l=0,I=u;l<=I;n=l+=1)d=.01*t.position[n],f=.01*t.width[n],this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d-f/2,.01*t.offset.x+z,.01*t.offset.z+M)),n<u&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),0===n&&(e=1,m=0),s=.01*t.bump.size*f*e,i=.01*-t.bump.size*f*m,this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*t.offset.x+z+i,.01*t.offset.z+M+s)),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*t.offset.x+z-i,.01*t.offset.z+M-s))),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f/2,.01*t.offset.x+z,.01*t.offset.z+M)),null!=t.length[n]&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),o=.01*t.length[n],z+=o*e,M+=o*m);for(n=a=0,c=u-1;a<=c;n=a+=1)g=this.getTextureIndex(t.texture,n),15===g&&(g=13),63===g&&(g=31),y=g%8*.125,v=y+.0125,b=v+.1,w=.25*(3-Math.floor(g/8)+.1),x=w+.2,k=w+(x-w)*(.5+.01*t.bump.position),31===g&&(v=y+.125*this.hue,b=v),n<u-1?(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+1,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+3,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+5,_+4*n+3,_+4*n+7)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(v,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(v,k),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,x),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,k),new THREE.Vector2(v,x),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+4,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+6,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+6,_+4*n+3)),this.geometry.faces.push(new THREE.Face3(_+4*n+6,_+4*n+7,_+4*n+3)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(b,w),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(b,k),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,k),new THREE.Vector2(v,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,k),new THREE.Vector2(b,x),new THREE.Vector2(v,x)]))):(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+1,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+3,_+4*n+5)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(v,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(v,k),new THREE.Vector2(b,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,x),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n,_+4*n+4,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+4,_+4*n+5,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+5,_+4*n+3)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(b,w),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(b,w),new THREE.Vector2(b,x),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,x),new THREE.Vector2(v,x)])));for(_=this.geometry.vertices.length,z=0,M=0,n=r=0,p=u;r<=p;n=r+=1)d=.01*t.position[n],f=.01*t.width[n],this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d-f/2,.01*-t.offset.x+z,.01*t.offset.z+M)),n<u&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),0===n&&(e=1,m=0),s=.01*t.bump.size*f*e,i=.01*t.bump.size*f*m,this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*-t.offset.x+z+i,.01*t.offset.z+M+s)),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f*t.bump.position*.01,.01*-t.offset.x+z-i,.01*t.offset.z+M-s))),this.geometry.vertices.push(new THREE.Vector3(.01*t.offset.y+d+f/2,.01*-t.offset.x+z,.01*t.offset.z+M)),null!=t.length[n]&&(e=Math.cos(t.angle[n]*Math.PI/180),m=Math.sin(t.angle[n]*Math.PI/180),o=.01*t.length[n],z-=o*e,M+=o*m);for(n=h=0,O=u-1;h<=O;n=h+=1)g=this.getTextureIndex(t.texture,n),15===g&&(g=13),63===g&&(g=31),y=g%8*.125,v=y+.0125,b=v+.1,w=.25*(3-Math.floor(g/8)+.1),x=w+.2,k=w+(x-w)*(.5+.01*t.bump.position),31===g&&(v=y+.125*this.hue,b=v),n<u-1?(this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+4,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+1,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+5,_+4*n+7)),
this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,w),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(v,k),new THREE.Vector2(b,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,k),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+4,_+4*n)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+6,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+6,_+4*n+2)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+7,_+4*n+6)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(v,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,k),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,k),new THREE.Vector2(v,k)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,x),new THREE.Vector2(b,k)]))):(this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+1,_+4*n+4,_+4*n+5)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+1,_+4*n+5)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(v,w),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(b,x)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(v,k),new THREE.Vector2(b,x)]),t.doubleside&&(this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+4,_+4*n)),this.geometry.faces.push(new THREE.Face3(_+4*n+2,_+4*n+5,_+4*n+4)),this.geometry.faces.push(new THREE.Face3(_+4*n+3,_+4*n+5,_+4*n+2)),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,w),new THREE.Vector2(v,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,k),new THREE.Vector2(b,x),new THREE.Vector2(b,w)]),this.geometry.faceVertexUvs[0].push([new THREE.Vector2(v,x),new THREE.Vector2(b,x),new THREE.Vector2(v,k)])))},t.prototype.shapePoint=function(t,e,i){var s,n,l;return l=i.length,s=Math.atan2(e,-t),s=Math.round((s+2*Math.PI)/(2*Math.PI)*l)%l,n=Math.sqrt(t*t+e*e),i[s]=Math.max(i[s],n)},t.prototype.l1l00=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;for(null==t&&(t=50),c=[],s=l=0,u=t-1;0<=u?l<=u:l>=u;s=0<=u?++l:--l)c[s]=0;for(d=this.geometry.faces,a=0,o=d.length;a<o;a++)for(i=d[a],p=this.geometry.vertices[i.a],O=this.geometry.vertices[i.b],m=this.geometry.vertices[i.c],s=r=0;r<=99;s=r+=1)e=s/100,f=p.x*e+O.x*(1-e),g=p.y*e+O.y*(1-e),this.shapePoint(f,g,c),f=m.x*e+O.x*(1-e),g=m.y*e+O.y*(1-e),this.shapePoint(f,g,c),f=m.x*e+p.x*(1-e),g=m.y*e+p.y*(1-e),this.shapePoint(f,g,c);for(s=h=0,I=c.length-1;h<=I;s=h+=1)c[s]*=2*this.data.size;for(n in c)c[n]=parseFloat(c[n].toFixed(3));return c},t.prototype.I0II1=function(t,e){var i,s,n,l,a;return null==t&&(t=64),a=new THREE.Scene,i=new THREE.OrthographicCamera(0,t,0,t,1,3e3),n=new THREE.MeshLambertMaterial({color:0,emissive:16777215,emissiveMap:OIOIO,side:THREE.DoubleSide}),this.l1OI0.material=n,a.add(this.l1OI0),this.l1OI0.position.set(t/2,t/2,-1e3),l=.35*t*e,this.l1OI0.scale.set(l,l,l),this.l1OI0.rotation.z=.75*Math.PI,l0Il0.O1OOO||(l0Il0.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),l0Il0.O1OOO.setSize(t,t),l0Il0.O1OOO.render(a,i),s=document.createElement("canvas"),s.width=t,s.height=t,s.getContext("2d").drawImage(l0Il0.O1OOO.domElement,0,0),s},t.prototype.getIcon=function(t,e){var i,s,n,l;return null==t&&(t=64),l=new THREE.Scene,i=new THREE.OrthographicCamera(0,t,0,t,1,3e3),this.material=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide}),this.l1OI0.material=this.material,l.add(this.l1OI0),this.l1OI0.position.set(t/2,t/2,-1e3),n=.35*t*e,this.l1OI0.scale.set(n,n,n),this.l1OI0.rotation.z=.75*Math.PI,l0Il0.O1OOO||(l0Il0.O1OOO=new THREE.WebGLRenderer({antialias:!0,alpha:!0})),l0Il0.O1OOO.setSize(t,t),l0Il0.O1OOO.render(l,i),s=document.createElement("canvas"),s.width=t,s.height=t,s.getContext("2d").drawImage(l0Il0.O1OOO.domElement,0,0),s},t.getWeaponIcon=function(e){var i,s;return null==t.icons_buffer[e]&&(i=new t(t[WEAPON_TYPES.types_by_code[e].model],0),i.IOO0l(),s=1,null!=WEAPON_TYPES.types_by_code[e].icon_scale&&(s=WEAPON_TYPES.types_by_code[e].icon_scale),t.icons_buffer[e]=i.getIcon(128,s),i.dispose()),t.icons_buffer[e]},t.getWeaponImage=function(e){var i,s;return null==t.images_buffer[e]&&(i=new t(t[WEAPON_TYPES.types_by_code[e].model],0),i.IOO0l(),s=1,null!=WEAPON_TYPES.types_by_code[e].icon_scale&&(s=WEAPON_TYPES.types_by_code[e].icon_scale),t.images_buffer[e]=i.I0II1(128,s),i.dispose()),t.images_buffer[e]},t}(),WeaponModel.icons_buffer=[],WeaponModel.images_buffer=[],MINING_POD_MODEL={name:"Mining Pod",level:1,model:1,size:1.05,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:function(){var t,e;for(e=[],i=t=0;t<=6;i=++t)e.push(0);return e}(),y:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(50*-Math.cos(i/6*Math.PI));return e}(),z:[0,0,0,0,0,0,0,0,0]},width:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(50*Math.sin(i/6*Math.PI));return e}(),height:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(50*Math.sin(i/6*Math.PI));return e}(),propeller:!1,texture:[1,3,1,12,4]},cannon:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-50,-60,-30,0,30,55,60],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,15,10,15,10,0],height:[0,10,15,10,15,10,0],propeller:!1,texture:[4,63,1,1,1,4]}},wings:{main:{length:[50,10],width:[20,30,20],angle:[45,45],position:[0,0,0],doubleside:!0,offset:{x:0,y:30,z:0},bump:{position:30,size:20},texture:[63]},main2:{length:[50,10],width:[20,30,15],angle:[-45,-45],position:[0,0,0],doubleside:!0,offset:{x:0,y:30,z:0},bump:{position:30,size:20},texture:[63]},wing3:{length:[20],width:[50,30],angle:[0,0],position:[0,0],doubleside:!0,offset:{x:35,y:0,z:0},bump:{position:30,size:40},texture:[3]}}},ATTACK_POD_MODEL={name:"Attack Pod",level:1,model:1,size:1.05,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:[35,55,125,145,215,235,305,325,395],offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-50,-50,0,25,50,40],z:[0,0,0,0,0,0,0]},width:[0,10,50,50,20,0],height:[0,5,20,15,15,0],propeller:!1,texture:[1,1,4,3,17]},cannon:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-60,-70,-30,0,30,35,40],z:[0,0,0,5,5,0,0,0,0]},width:[0,10,15,10,15,10,0],height:[0,10,15,18,15,10,0],propeller:!1,texture:[4,63,1,1,1,4]}},wings:{l110I:{length:[60],width:[80,30],angle:[0,0],position:[0,20],doubleside:!0,offset:{x:0,y:0,z:-5},bump:{position:30,size:20},texture:[63]}}},DEFENCE_POD_MODEL={name:"Defence Pod",level:1,model:1,size:1.05,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:[35,55,125,145,215,235,305,325,395],offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0],y:[0,25,50,40],z:[0,0,0,0,0]},width:[50,50,20,0],height:[15,10,10,0],propeller:!1,texture:[3,3,17]},cannon:{section_segments:6,offset:{x:40,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-25,-20,0,0,20,30,35],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,15,10,7,6,0],height:[0,10,15,18,15,10,0],propeller:!1,texture:[4,63,1,1,1,4]}},wings:{l110I:{length:[60,20],width:[40,35,25],angle:[0,0,0],position:[0,10,20],doubleside:!0,offset:{x:0,y:0,z:0},bump:{position:0,size:80},texture:[1,63]}}},WeaponModel.MINING_POD_MODEL=MINING_POD_MODEL,WeaponModel.ATTACK_POD_MODEL=ATTACK_POD_MODEL,WeaponModel.DEFENCE_POD_MODEL=DEFENCE_POD_MODEL,ROCKET_MODEL={name:"Rocket",id:1,size:1,bodies:{main:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-60,-45,-30,-25,0,15,60,70,60]},width:[0,15,20,20,16,20,20,15,0],height:[0,15,20,20,16,20,20,15,0],propeller:!0,texture:[13,63,3,10,63,4,12,17]}},wings:{main1:{length:[35],width:[40,20],angle:[45,45],position:[0,0,0],doubleside:!0,offset:{x:0,y:40,z:0},bump:{position:30,size:25},texture:[0]},main2:{length:[35],width:[40,20],angle:[-45,-45],position:[0,0,0],doubleside:!0,offset:{x:0,y:40,z:0},bump:{position:30,size:25},texture:[0]}}},MISSILE_MODEL={name:"Missile",id:1,size:1,bodies:{main:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-100,-85,-60,-45,-40,-5,0,25,90,100,90]},width:[0,20,30,30,24,22,26,20,20,20,0],height:[0,20,30,30,24,22,26,20,20,20,0],propeller:!0,texture:[13,63,3,4,10,4,63,4,3,17]}},wings:{main1:{length:[25,25],width:[60,40,30],angle:[45,45],position:[0,0,20],doubleside:!0,offset:{x:0,y:60,z:0},bump:{position:30,size:15},texture:[0]},main2:{length:[25,25],width:[60,40,30],angle:[-45,-45],position:[0,0,20],doubleside:!0,offset:{x:0,y:60,z:0},bump:{position:30,size:15},texture:[0]}}},TORPEDO_MODEL={name:"Torpedo",id:1,size:1.5,bodies:{main:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-100,-90,-80,-25,0,60,80,110,100]},width:[0,15,20,20,20,20,10,10,0],height:[0,15,20,20,20,20,10,10,0],propeller:!0,texture:[13,63,3,10,63,4,12,17]}},wings:{main1:{length:[10,25],width:[5,30,20],angle:[45,45],position:[0,0,0],doubleside:!0,offset:{x:0,y:95,z:0},bump:{position:30,size:25},texture:[0]},main2:{length:[10,25],width:[5,30,20],angle:[-45,-45],position:[0,0,0],doubleside:!0,offset:{x:0,y:95,z:0},bump:{position:30,size:25},texture:[0]}}},WeaponModel.ROCKET_MODEL=ROCKET_MODEL,WeaponModel.MISSILE_MODEL=MISSILE_MODEL,WeaponModel.TORPEDO_MODEL=TORPEDO_MODEL,MINE_MODEL={name:"Space Mine",level:1,model:1,size:.7,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:6,offset:{x:0,y:0,z:0},position:{x:function(){var t,e;for(e=[],i=t=0;t<=6;i=++t)e.push(0);return e}(),y:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*-Math.cos(i/6*Math.PI));return e}(),z:[0,0,0,0,0,0,0,0]},width:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*Math.sin(i/6*Math.PI));return e}(),height:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*Math.sin(i/6*Math.PI));return e}(),propeller:!1,texture:[1,1,63,63,1]}}},i=j=0;j<=2;i=++j)MINE_MODEL.bodies["peak"+i]={angle:30+60*i,section_segments:6,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-115,-110,-100,-90,90,100,110,115],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,10,20,20,10,10,0],height:[0,10,10,20,20,10,10,0],propeller:!1,texture:[4,1,17,4,17,1,4]};for(i=k=0;k<=1;i=++k)MINE_MODEL.bodies["vert"+i]={vertical:!0,angle:60*i-30,section_segments:6,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-115,-110,-100,-90,90,100,110,115],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,10,20,20,10,10,0],height:[0,10,10,20,20,10,10,0],propeller:!1,texture:[4,1,17,4,17,1,4]};for(MINE2_MODEL={name:"Space Mine 2",level:1,model:1,size:1.05,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:function(){var t,e;for(e=[],i=t=0;t<=8;i=++t)e.push(0);return e}(),y:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*-Math.cos(i/8*Math.PI));return e}(),z:[0,0,0,0,0,0,0,0,0,0]},width:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*Math.sin(i/8*Math.PI));return e}(),height:function(){var t,e;for(e=[],i=t=0;t<=10;i=++t)e.push(80*Math.sin(i/8*Math.PI));return e}(),propeller:!1,texture:[1,1,63,3,3,63,1]}}},i=l=0;l<=3;i=++l)MINE2_MODEL.bodies["peak"+i]={angle:45*i,section_segments:6,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-115,-110,-100,-90,90,100,110,115],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,10,20,20,10,10,0],height:[0,10,10,20,20,10,10,0],propeller:!1,texture:[4,1,17,4,17,1,4]};for(i=m=-1;m<=1;i=++m)MINE2_MODEL.bodies["vert"+i]={vertical:!0,angle:45*i,section_segments:6,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-115,-110,-100,-90,90,100,110,115],z:[0,0,0,0,0,0,0,0,0]},width:[0,10,10,20,20,10,10,0],height:[0,10,10,20,20,10,10,0],propeller:!1,texture:[4,1,17,4,17,1,4]};WeaponModel.MINE_MODEL=MINE_MODEL,WeaponModel.MINE2_MODEL=MINE2_MODEL,this.l001O=function(){function t(t,e,i,s){var n,l,a;for(this.width=t,this.height=e,this.k=i,this.f=s,this.m=[],n=0,l=this.width*this.height-1;0<=l?n<=l:n>=l;0<=l?++n:--n)this.m.push({x:0,s:0,f:0});a=Math.floor(this.width/2),this.m[this.m.length-a].x=1,this.p=Math.floor(this.width/2+this.height/2*this.width)}return t.prototype.next=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O;for(d=this.m,s=0,l=d.length;s<l;s++)o=d[s],o.f=0;for(e=n=0,I=this.width-1;n<=I;e=n+=1)this.m[e].f+=-this.k*this.m[e].x;for(e=r=0,c=this.width-2;r<=c;e=r+=1)for(i=h=0,p=this.height-2;h<=p;i=h+=1)t=this.k*(this.m[e+i*this.width].x-this.m[e+1+i*this.width].x),this.m[e+i*this.width].f-=t,this.m[e+1+i*this.width].f+=t,t=this.k*(this.m[e+i*this.width].x-this.m[e+(i+1)*this.width].x),this.m[e+i*this.width].f-=t,this.m[e+(i+1)*this.width].f+=t;for(O=this.m,u=0,a=O.length;u<a;u++)o=O[u],o.s+=o.f,o.s*=this.f,o.x+=o.s;return this.m[this.p].x},t}(),this.O11IO=function(){function t(t){this.I110I=t,this.lIOll=new I0l00,this.context=new(window.AudioContext||window.webkitAudioContext),this.l1lIO(),this.IIl0I=0,this.explosion_damp=0,this.shoot_damp=0,this.foreign_shoot_damp=0}return t.prototype.load=function(){return this.lIOll.start()},t.prototype.l1lIO=function(){this.lIOll.l1O11("Creating sounds..."),this.lIOll.add(function(t){return function(){var e;return e=new O100O(t,"OO1OI"),e.lIlI0=880,t.beep_sound=new Sound(t,.5,function(t){var i;return t*=2,i=1-Math.pow(t,4),i*=Math.exp(6*-t),t>.25&&e.next(),e.next()*i*.25})}}(this)),this.lIOll.add(function(t){return function(){return t.pop_sound=new Sound(t,.5,function(t){return Math.min(Math.exp(100*-t),Math.exp(5*t-1))*Math.sin(100*t*Math.PI*2)*.25})}}(this)),this.lIOll.add(function(t){return function(){var e;return e=new O100O(t,"OO1OI"),e.lIlI0=880,t.collect_sound=new Sound(t,1,function(t){var i;return t*=2,i=1-Math.pow(t,4),i*=Math.exp(6*-t),e.lIlI0=Math.min(1760,220*Math.floor(2+10*t)),e.next()*i*.25})}}(this)),this.lIOll.add(function(t){return function(){var e,i,s;return e=new O100O(t,"l0I0l"),i=new O100O(t,"l0I0l"),s=new O100O(t,"OO0l1"),t.IlOl0=new Sound(t,1,function(t){var n,l;return n=1-Math.pow(t,4),n*=Math.exp(12*-t),e.lIlI0=3e3*Math.exp(12*-t)+120,i.lIlI0=1485*Math.exp(13*-t)+121,l=(e.next()+i.next()+25*s.next()*Math.exp(24*-t))*n*.05,l<0?.5*-Math.pow(-l,.5):.5*Math.pow(l,.5)})}}(this)),this.lIOll.add(function(t){return function(){return t.O0l10=t.IlOl0.copy(),t.O0l10.Il011(.9)}}(this)),this.lIOll.add(function(t){return function(){var e,i,s,n;return i=new O100O(t,"OO0l1"),s=new O100O(t,"l1l0I"),s.lIlI0=40,n=new O100O(t,"l0I0l"),n.lIlI0=40,i.ll10l=.999,e=new llllO(0),t.I1Il0=new Sound(t,1,function(t){var i,s;return i=1-Math.pow(t,4),i*=Math.exp(8*-t),i*=Math.pow(t,.1),s=2*(e.periodicBasic1d(500*t,500)-.5),(s=Math.round(16*s)/16)*i*.35})}}(this)),this.lIOll.add(function(t){return function(){return t.I1Il0.OlO0O()}}(this)),this.lIOll.add(function(t){return function(){var e,i,s,n;return i=new O100O(t,"l1l0I"),s=new O100O(t,"l1l0I"),i.lIlI0=198,s.lIlI0=199,n=new O100O(t,"l1l0I"),n.lIlI0=141,e=new O100O(t,"OO0l1"),e.ll10l=.99,t.l00OI=new Sound(t,1,function(t){return.005*(.2*i.next()+.2*s.next()+.2*n.next()+10*e.next())}),t.l00OI.I1l10()}}(this)),this.lIOll.add(function(t){return function(){var e,i,s;return e=new O100O(t,"l0I0l"),i=new O100O(t,"l0I0l"),s=new O100O(t,"l0I0l"),e.lIlI0=50,i.lIlI0=77,s.lIlI0=102,t.alert_sound=new Sound(t,1,function(t){var s;return t<.5?(s=.5*e.next()+.5*i.next(),e.lIlI0*=1.0001,i.lIlI0*=1.0001,s<0?.1*-Math.pow(-s,.1):.1*Math.pow(s,.1)):0})}}(this)),this.lIOll.add(function(t){return function(){return t.alert_sound.OlO0O(1)}}(this)),this.lIOll.add(function(t){return function(){var e,i;return e=new O100O(t,"l0I0l"),i=new O100O(t,"l0I0l"),e.lIlI0=60,i.lIlI0=61,t.shield_sound=new Sound(t,.25,function(t){return.1*(e.next()+i.next())})}}(this)),this.lIOll.add(function(t){return function(){var e,i;return e=new O100O(t,"l0I0l"),i=new O100O(t,"l0I0l"),e.lIlI0=50,i.lIlI0=51,t.I10lO=new Sound(t,1,function(t){return.1*(e.next()+i.next())}),t.I10lO.I1l10()}}(this)),this.lIOll.add(function(t){return function(){var e;return e=new llllO,t.rocket_woom=new Sound(t,1,function(t){var i;return i=2*(e.periodicBasic1d(1e3*t,1e3)-.5),.15*(i=Math.round(8*i)/8)}),t.rocket_woom.I1l10(),t.rocket_woom_volume=0}}(this)),this.lIOll.add(function(t){return function(){var e,i;return i=new l001O(6,12,.02,.9995),e=new O100O(t,"OO0l1"),e.ll10l=.99,t.l0O1O=new Sound(t,1,function(t){return(i.next()+e.next()*Math.exp(20*-t))*(1-Math.pow(t,4))})}}(this)),this.lIOll.add(function(t){return function(){return t.l0O1O.OlO0O(1),t.l0O1O.mix(t.I1Il0,.25)}}(this)),this.lIOll.add(function(t){return function(){return t.initialized=!0}}(this))},t.prototype.pause=function(){return this.l00OI.lO0I0(0),this.I10lO.lO0I0(0),this.rocket_woom.lO0I0(0)},t.prototype.resume=function(){},t.prototype.l1O00=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M;if(this.initialized){if(this.explosion_damp*=.95,this.shoot_damp*=.95,this.foreign_shoot_damp*=.95,this.I110I.IO010.l0l1O.up?this.IIl0I=.95*this.IIl0I+.05:this.IIl0I=.95*this.IIl0I,!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused)return this.l00OI.lO0I0(0),this.I10lO.lO0I0(0),void this.rocket_woom.lO0I0(0);for(this.l00OI.II0O0(.2*this.IIl0I+.8),this.l00OI.lO0I0(this.IIl0I*this.I110I.settings.getVolume("sounds")),t=1e3,z=this.I110I.IO010.status.x,M=this.I110I.IO010.status.y,y=this.I110I.IOO1I.ll0lO.ll01O,f={x:0,y:0},O=this.I110I.IOO1I.ll0lO.lasers,o=0,d=O.length;o<d;o++)h=O[o],h.shipid!==this.I110I.IO010.status.id&&(h.Oll11(y,f),l=Math.abs(f.x-z),a=Math.abs(f.y-M),l=Math.min(l,this.I110I.size-l),a=Math.min(a,this.I110I.size-a),(e=Math.sqrt(l*l+a*a))<t&&(t=e,u=h));for(null!=u?(u.Oll11(y+1,f),v=f.x,b=f.y,u.Oll11(y,f),v-=f.x,b-=f.y,s=v-this.I110I.IO010.status.OI10I,n=b-this.I110I.IO010.status.OI0O1,k=this.I110I.IO010.status.x-f.x,_=this.I110I.IO010.status.y-f.y,k<-this.I110I.Ill01&&(k+=this.I110I.size),k>this.I110I.Ill01&&(k-=this.I110I.size),_<-this.I110I.Ill01&&(_+=this.I110I.size),_>this.I110I.Ill01&&(_-=this.I110I.size),w=Math.sqrt(k*k+_*_),k/=w,_/=w,i=s*k+n*_,p=Math.max(.1,1+.3*i),x=Math.max(0,1-.06*t)*Math.pow(u.damage/10,.5),this.I10lO.II0O0(p),this.I10lO.lO0I0(x*this.I110I.settings.getVolume("sounds"))):this.I10lO.lO0I0(0),t=1e5,g=null,m=this.I110I.IOO1I.ll0lO.projectiles,r=0,I=m.length;r<I;r++)c=m[r],c.type.code<10||c.type.code>12||c.killed||(l=Math.abs(c.x-z),a=Math.abs(c.y-M),l=Math.min(l,this.I110I.size-l),a=Math.min(a,this.I110I.size-a),(e=Math.sqrt(l*l+a*a))<t&&(t=e,g=c));return null!=g?(v=g.OI10I,b=g.OI0O1,s=v-this.I110I.IO010.status.OI10I,n=b-this.I110I.IO010.status.OI0O1,k=this.I110I.IO010.status.x-g.x,_=this.I110I.IO010.status.y-g.y,k<-this.I110I.Ill01&&(k+=this.I110I.size),k>this.I110I.Ill01&&(k-=this.I110I.size),_<-this.I110I.Ill01&&(_+=this.I110I.size),_>this.I110I.Ill01&&(_-=this.I110I.size),w=Math.sqrt(k*k+_*_),k/=w,_/=w,i=s*k+n*_,this.I110I.IOO1I.ll0lO.ll01O,p=12===g.type.code?.5:11===g.type.code?1:2,p*=Math.max(.1,1+.6*i),x=Math.max(0,1-.03*t),this.rocket_woom.II0O0(p)):x=0,this.rocket_woom_volume=.92*this.rocket_woom_volume+.08*x,this.rocket_woom.lO0I0(this.rocket_woom_volume*this.I110I.settings.getVolume("sounds"))}},t.prototype.alert=function(){return setTimeout(function(t){return function(){return t.alert_sound.play(t.I110I.settings.getVolume("sounds"))}}(this),1),setTimeout(function(t){return function(){return t.alert_sound.play(t.I110I.settings.getVolume("sounds"))}}(this),1e3)},t.prototype.beep=function(t,e){if(null==t&&(t=1),null==e&&(e=1),this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused))return this.beep_sound.play(e*this.I110I.settings.getVolume("sounds"),t)},t.prototype.pop=function(t,e){if(null==t&&(t=1),null==e&&(e=1),this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused))return this.pop_sound.play(e*this.I110I.settings.getVolume("sounds"),t)},t.prototype.collect=function(t,e,i){var s,n,l,a;if(this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused||(l=Math.abs(this.I110I.IO010.status.x-t),a=Math.abs(this.I110I.IO010.status.y-e),l=Math.min(l,this.I110I.size-l),a=Math.min(a,this.I110I.size-a),n=Math.sqrt(l*l+a*a),s=Math.pow(Math.max(0,1-.01*n),1.5),n>40)))return this.collect_sound.play(s*this.I110I.settings.getVolume("sounds"),3*Math.exp(-i/5)+.25)},t.prototype.llOIl=function(t){var e,i;if(this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused||(i=3*Math.exp(-t/10)+.5,(e=Math.pow(t/20,.5))<this.shoot_damp)))return this.shoot_damp=e,e*=.5+.5*Math.random(),this.IlOl0.play(e*this.I110I.settings.getVolume("sounds"),(.04*Math.random()+.98)*i)},t.prototype.I0Ol1=function(t,e,i){var s,n,l,a,o;if(this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused||(l=Math.abs(this.I110I.IO010.status.x-t),a=Math.abs(this.I110I.IO010.status.y-e),l=Math.min(l,this.I110I.size-l),a=Math.min(a,this.I110I.size-a),n=Math.sqrt(l*l+a*a),o=3*Math.exp(-i/10)+.5,s=(.5+.5*Math.random())*Math.pow(i/20,.5),(s*=Math.pow(Math.max(0,1-.01*n),1.5))<this.foreign_shoot_damp)))return this.foreign_shoot_damp=1.1*s,this.O0l10.play((.5+.5*Math.random())*s*this.I110I.settings.getVolume("sounds"),(.04*Math.random()+.98)*o)},t.prototype.IOII1=function(t,e,i,s){var n,l,a,o;if(null==i&&(i=1),null==s&&(s=1),this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused||(a=Math.abs(this.I110I.IO010.status.x-t),o=Math.abs(this.I110I.IO010.status.y-e),a=Math.min(a,this.I110I.size-a),o=Math.min(o,this.I110I.size-o),l=Math.sqrt(a*a+o*o),(n=Math.max(0,1-.02*l)*i)<this.explosion_damp)))return this.explosion_damp=1.1*n,this.I1Il0.play((.5+.5*Math.random())*n*this.I110I.settings.getVolume("sounds"),(.5+.5*Math.random())*s)},t.prototype.shield=function(t,e,i,s){var n,l,a,o;if(null==i&&(i=1),null==s&&(s=1),this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused||(a=Math.abs(this.I110I.IO010.status.x-t),o=Math.abs(this.I110I.IO010.status.y-e),a=Math.min(a,this.I110I.size-a),o=Math.min(o,this.I110I.size-o),l=Math.sqrt(a*a+o*o),(n=Math.pow(Math.max(0,1-.02*l),1)*i)<this.explosion_damp)))return this.explosion_damp=1.1*n,this.shield_sound.play((.5+.5*Math.random())*n*this.I110I.settings.getVolume("sounds"),(.98+.04*Math.random())*s)},t.prototype.lI1I1=function(t,e,i){var s,n,l,a;if(null==i&&(i=1),this.initialized&&!(!this.I110I.settings.getVolume("sounds")>0||this.I110I.paused))return l=Math.abs(this.I110I.IO010.status.x-t),a=Math.abs(this.I110I.IO010.status.y-e),l=Math.min(l,this.I110I.size-l),a=Math.min(a,this.I110I.size-a),n=Math.sqrt(l*l+a*a),s=Math.pow(Math.max(0,1-.01*n),1.5)*i,this.l0O1O.play(s*this.I110I.settings.getVolume("sounds"),.5+.5*Math.random())},t.I10II=Math.log(Math.pow(2,1/12)),t.O0III=function(t){return 440*Math.exp((t-69)*Pigo.Audio.I10II)},t.prototype.loadMusic=function(t){if(this.I110I.is_mobile_app)return this.loaded_soundtrack=t,this.postMessage({name:"load_music",track:t});if(null==this.music||t!==this.loaded_soundtrack)return null!=this.music&&(this.music.pause(),delete this.music),this.loaded_soundtrack=t,this.music=new Audio("https://starblast.data.neuronality.com/music/"+t),this.music.loop=!0},t.prototype.pauseMusic=function(){return this.I110I.is_mobile_app?this.postMessage({name:"pause_music"}):null!=this.music?this.music.pause():void 0},t.prototype.adjustMusicVolume=function(){var t,e;if(this.I110I.is_mobile_app)return t=1,"crystals.mp3"===this.loaded_soundtrack&&(t=.3),e=Math.min(1,.5*this.I110I.settings.getVolume("music")),e*=.5*t,this.music_volume=e,this.postMessage({name:"music_volume",volume:e});if(null!=this.music)return t=1,"crystals.mp3"===this.loaded_soundtrack&&(t=.3),e=Math.min(1,.5*this.I110I.settings.getVolume("music")),e*=.5*t,this.music_volume=e,e>0?(this.music.volume=e,this.music.play()):this.music.pause()},t.prototype.playMusic=function(t){if(null==t&&(t=this.loaded_soundtrack),null!=t)return this.loadMusic(t),this.adjustMusicVolume()},t.prototype.fadeOutMusic=function(){var t,e,i;return this.I110I.is_mobile_app?this.postMessage({name:"fadeout_music"}):null!=this.music?(e=this.music,this.music=null,i=Date.now()+4e3,t=setInterval(function(s){return function(){if(e.volume=s.music_volume*Math.max(0,(i-Date.now())/4e3),Date.now()>i)return clearInterval(t),e.pause()}}(this),100)):void 0},t.prototype.postMessage=function(t){return t=JSON.stringify(t),window.parent.postMessage(t,"*")},t}(),this.O100O=function(){function t(t,e){this.OlIl1=t,this.OI00I=null!=e?e:"l0I0l",this.phase=0,this.lIlI0=440,this.lII00=this.OlIl1.context.sampleRate,this.I1OIO=0,this.ll10l=.99,this.III10()}return t.prototype.III10=function(){switch(this.OI00I){case"OO1OI":return this.next=this.OO1OI;case"l1l0I":return this.next=this.l1l0I;case"OO0l1":return this.next=this.OO0l1;default:return this.next=this.l0I0l}},t.prototype.II100=function(t){return this.OI00I=t,this.III10()},t.prototype.l1l0I=function(){var t;return this.phase=(this.phase+this.lIlI0/this.lII00)%1,(t=Math.sin(2*Math.PI*this.phase))*(2-t*t)},t.prototype.sawSmoothed=function(){var t,e,i,s;for(i=2,t=this.lIlI0/this.lII00/i,e=1,s=i;e<=s;e+=1)this.phase=(this.phase+t)%1,this.I1OIO=.95*this.I1OIO+.05*(2*this.phase-1);return this.I1OIO},t.prototype.l0I0l=function(){return this.phase=(this.phase+this.lIlI0/this.lII00)%1,this.I1OIO=.9*this.I1OIO+.1*(2*this.phase-1)},t.prototype.squareSmoothed=function(){var t,e,i,s,n;for(i=2,t=this.lIlI0/this.lII00/i,e=1,s=i;e<=s;e+=1)this.phase=(this.phase+t)%1,n=this.phase>.5?-1:1,this.I1OIO=.9*this.I1OIO+.1*n;return this.I1OIO},t.prototype.OO1OI=function(){var t;return this.phase=(this.phase+this.lIlI0/this.lII00)%1,t=this.phase>.5?-1:1,this.I1OIO=.9*this.I1OIO+.1*t},t.prototype.OO0l1=function(){var t;return t=2*Math.random()-1,this.I1OIO=this.I1OIO*this.ll10l+t*(1-this.ll10l),this.I1OIO},t}(),this.Sound=function(){function t(e,i,s){this.OlIl1=e,this.IOOOI=i,this.f=s,this.IOOOI instanceof t?this.lllO0(this.IOOOI):null!=this.f&&this.create()}return t.prototype.create=function(){var t,e,i,s,n;for(this.buffer=this.OlIl1.context.createBuffer(2,this.OlIl1.context.sampleRate*this.IOOOI,this.OlIl1.context.sampleRate),t=this.buffer.getChannelData(0),e=this.buffer.getChannelData(1),i=s=0,n=t.length-1;0<=n?s<=n:s>=n;i=0<=n?++s:--s)e[i]=t[i]=this.f(i/t.length)},t.prototype.lllO0=function(t){var e,i,s,n,l,a,o;for(this.IOOOI=t.IOOOI,this.buffer=this.OlIl1.context.createBuffer(2,this.OlIl1.context.sampleRate*this.IOOOI,this.OlIl1.context.sampleRate),e=this.buffer.getChannelData(0),i=this.buffer.getChannelData(1),a=t.buffer.getChannelData(0),o=t.buffer.getChannelData(1),s=n=0,l=e.length-1;0<=l?n<=l:n>=l;s=0<=l?++n:--n)e[s]=a[s],i[s]=o[s]},t.prototype.copy=function(){return new t(this.OlIl1,this)},t.prototype.Il011=function(t){var e,i,s,n,l,a,o;for(n=this.buffer.getChannelData(0),l=this.buffer.getChannelData(1),a=0,o=0,e=i=0,s=n.length-1;i<=s;e=i+=1)n[e]=a=a*t+n[e]*(1-t),l[e]=o=o*t+l[e]*(1-t)},t.prototype.OlO0O=function(t){var e,i,s,n,l,a,o,r,h,u,d;for(null==t&&(t=.5),n=this.OlIl1.context.createBuffer(2,this.OlIl1.context.sampleRate*this.IOOOI,this.OlIl1.context.sampleRate),i=n.getChannelData(0),s=n.getChannelData(1),u=this.buffer.getChannelData(0),d=this.buffer.getChannelData(1),l=a=0,h=i.length-1;a<=h;l=a+=1)i[l]=u[l],s[l]=d[l];for(e=function(t,e,n,a){var o,r,h,u,d;for(l=h=t,u=i.length-2;h<=u;l=h+=1)o=i[l-t]+i[l+1-t],r=s[l-t]+s[l+1-t],d=o*(1-n)+r*n,i[l]+=d*e*(1-a)*Math.pow(1-l/i.length,.1),s[l]+=d*e*a*Math.pow(1-l/i.length,.1)},r=[97,109,131,149,163,179,191,231],l=o=0;o<=3;l=o+=1)e(44*r[2*l+1]+r[l+10],(.3-l/100)*t,r[2*l]%10/10,r[2*l+1]%10/10);return this.buffer=n},t.prototype.mix=function(t,e){var i,s,n,l,a,o,r,h;for(null==e&&(e=1),r=this.buffer.getChannelData(0),h=this.buffer.getChannelData(1),l=t.buffer.getChannelData(0),a=t.buffer.getChannelData(1),n=Math.min(r.length,l.length),i=s=0,o=n-1;s<=o;i=s+=1)r[i]+=l[i]*e,h[i]+=a[i]*e},t.prototype.play=function(t,e){var i;null==t&&(t=1),null==e&&(e=1);try{"suspended"===this.OlIl1.context.state&&this.OlIl1.context.resume()}catch(t){t}return this.source=this.OlIl1.context.createBufferSource(),this.source.playbackRate.value=e,this.source.buffer=this.buffer,i=this.OlIl1.context.createGain(),i.gain.value=t,this.source.connect(i),i.connect(this.OlIl1.context.destination),this.source.start(0,0,this.source.buffer.length/this.source.buffer.sampleRate)},t.prototype.I1l10=function(){return this.source=this.OlIl1.context.createBufferSource(),this.source.loop=!0,this.source.buffer=this.buffer,this.gain=this.OlIl1.context.createGain(),this.gain.gain.value=0,this.source.connect(this.gain),this.gain.connect(this.OlIl1.context.destination),this.source.start()},t.prototype.II0O0=function(t){if(null!=this.source&&t!==this.last_pitch)return this.last_pitch=t,this.source.playbackRate.value=t},t.prototype.lO0I0=function(t){if(null!=this.gain&&t!==this.last_gain)return this.last_gain=t,this.gain.gain.value=t},t.prototype.pause=function(){if(!this.paused&&null!=this.source)return this.paused=!0,this.source.stop(0)},t}(),this.Music=function(){function t(t){var e,i,s,n,l;for(this.OlIl1=t,this.OO1II=this.OlIl1.context.createScriptProcessor(4096,1,1),this.IIOO0=0,this.OlI01=[1,2,3,5,7,9,11,13,17,19,23,29,31,37,41,43],this.lOl1O=[],i=110,s=n=0,l=this.OlI01.length-1;0<=l?n<=l:n>=l;s=0<=l?++n:--n){for(e=(s+1)*i;e>3.9*i;)e/=2;this.lOl1O.push(Math.round(this.OlIl1.context.sampleRate/e))}this.OlIOO=this.OlIl1.context.sampleRate/4,this.OI001=function(t){return function(e){var i,n,l,a,o,r,h,u,d,I,c;for(o=e.outputBuffer,i=o.getChannelData(0),s=l=0,r=o.length-1;l<=r;s=l+=1){for(d=0,I=Math.floor(t.IIOO0/t.OlIOO),c=.1*Math.pow(1-t.IIOO0%t.OlIOO/t.OlIOO,1),n=a=0,h=t.lOl1O.length-1;a<=h;n=a+=1)I%(n+1)==0&&(u=t.IIOO0%t.lOl1O[n],u=2*(u/t.lOl1O[n]-.5),d+=u*c,c*=.6);i[s]=d,t.IIOO0++}}}(this),this.OO1II.onaudioprocess=this.OI001,this.OO1II.connect(this.OlIl1.context.destination)}return t}(),this.Mode=function(){function e(t,e){this.id=t,this.name=e,this.custom_game_name=this.name,this.custom_color=!0,this.radar_shows_leader=!0,this.max_enter_time=2700,this.max_enter_players=30,this.options={friction_ratio:1,speed_mod:1},this.rotate_mines=!1,this.radar_zoom=2,this.soundtrack="procedurality.mp3",this.respawn_delay=5e3,this.I0l10=!0,this.anonymous_ships=!1,this.spectate=!1,this.spectate_ship=1,this.custom_game_allowed=!0,this.show_weaponsbar=!0,this.restricted_weapons_store=!1,this.show_highscore=!0,this.infinite_base_lives=!0,this.II011=!0,this.sharing_enabled=!0,this.II1l1=II1l1,this.O1Ill=O1Ill}return e.prototype.entered=function(e){if(this.options.strafe>0)return setTimeout(function(e){return function(){return e.getInstructor().setHue(e.I110I.IOO1I.IO010.status.hue),e.getInstructor().say(t("Welcome Commander.")),e.getInstructor().say(""),e.getInstructor().say(t("Your ship is fitted with a strafe module. Use [A] to strafe to the left, [D] to strafe to the right."))}}(this),1e3),setTimeout(function(e){return function(){return e.getInstructor().say(""),e.getInstructor().say(t("Use [C] or [Enter] before using chat keys"))}}(this),9e3),setTimeout(function(t){return function(){return t.getInstructor().disappear()}}(this),15e3)},e.prototype.getInstructor=function(){return null==this.instructor&&(this.instructor=new Instructor(this.I110I),this.I110I.display.screen.O0lll.add(this.instructor,[.25,.05,.5,.25])),
this.instructor},e.prototype.drawRadarInfo=function(t){},e.prototype.showUI=function(){},e.prototype.hideUI=function(){},e.prototype.scorePanelShown=function(){return!1},e.prototype.userShowScorePanel=function(){},e.prototype.hideScorePanel=function(){},e.prototype.showScorePanel=function(){},e.prototype.userHideScorePanel=function(){},e.prototype.updateScore=function(t){},e.prototype.updateRadarObjects=function(t){if(null!=this.I110I.display.screen.O0lll.lI0Il)return this.I110I.display.screen.O0lll.lI0Il.OII1l.updateAsteroidsAliens(t)},e.prototype.getWeaponStoreName=function(){return t("Weapon Store")},e.prototype.setOptions=function(t){if(this.options=t,null==this.options.friction_ratio&&(this.options.friction_ratio=1),null==this.options.speed_mod&&(this.options.speed_mod=1),this.options.map_size>120&&(this.radar_zoom=4),null!=this.options.ships&&this.parseShips(this.options),"team"===this.id&&this.options.max_players>=200)return this.aow=!0},e.prototype.acceptChat=function(t,e){return!0},e.prototype.fixPositions=function(){},e.prototype.asteroidsDensityModifier=function(t,e){return 1},e.prototype.killed=function(t,e,i){var s,n;return this.I110I.killers[t]=!0,s=this.I110I.names.get(t),0===s.length&&(s=null),n={score:this.I110I.IO010.status.score,killer:s,kills:this.I110I.IO010.status.kills,deaths:this.I110I.IO010.status.deaths,highscore:this.I110I.IO010.status.bestscore,gameover:e,rank:i,victory:e&&1===i,mode:this.id},this.I110I.killed(t,e,n)},e.prototype.shipCanUpgrade=function(){return this.I110I.IOO1I.IO010.type.level<this.options.max_level},e.prototype.shipCanBuyLife=function(){return this.I110I.IOO1I.IO010.status.lives<6&&this.I110I.IOO1I.IO010.type.level>1},e.prototype.showUpgrades=function(){return!0},e.prototype.isTarget=function(t){return!1},e.prototype.shipUpgradeLockedMessage=function(){return null},e.prototype.messageReceived=function(t){},e.prototype.ignoreKills=function(){return!1},e.prototype.modeStep=function(){},e.prototype.undock=function(){},e.prototype.respawn=function(){return this.I110I.lIllI.respawn(function(e){return function(){if(e.I110I.display.screen.O0lll.OOOI1(),!e.I110I.is_app)return window.onbeforeunload=function(){return t("Exit game?")}}}(this))},e.prototype.parseShips=function(t){var e,i,s,n,l;if(t.ships){for(t.reset_tree&&(II1l1.clear(),O1Ill.clear()),s=t.ships,n=[],e=0,i=s.length;e<i;e++){l=s[e];try{l=JSON.parse(l),l.typespec.level=l.level,l.typespec.model=l.model,l.typespec.code=100*l.level+l.model,l.typespec.name=l.name,II1l1.add(l),n.push(O1Ill.add(l.typespec))}catch(t){t}}return n}},e}(),module.exports=this.Mode,extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.SurvivalMode=function(e){function i(e){this.I110I=e,i.I0Il1.constructor.call(this,"survival","Survival Mode"),this.max_enter_time=1800,this.radar_zoom=4,this.max_enter_players=50,this.vocabulary=[{text:"Hello",icon:"E",key:"O"},{text:"Bye",icon:"F",key:"B"},{text:"Yes",icon:"L",key:"Y"},{text:"No",icon:"M",key:"N"},{text:"Thanks",icon:"A",key:"X"},{text:"Sorry",icon:"¡",key:"S"},{text:"No Prob",icon:"G",key:"P"},{text:"Good Game",icon:"GG",key:"G"},{text:"Team",icon:"1",key:"T"},{text:"Follow me",icon:"P",key:"F"},{text:"Mine",icon:"D",key:"M"},{text:"Attack",icon:"I",key:"A"},{text:"Help",icon:"J",key:"H"},{text:"Kill",icon:"[",key:"K"},{text:"Leader",icon:".",key:"L"},{text:"Hmm",icon:"K",key:"Q"}],this.tips_test="Destroy asteroids",this.tips=[t("Destroy asteroids"),t("Collect gems to upgrade your ship"),t("Fight and don't die!")]}return extend(i,e),i.prototype.lO0I1=function(t){return this.I110I.lIllI.enter(),this.I110I.lIllI.respawn(function(e){return function(){return e.I110I.startGame(t),e.scoreboard=new ScorePanel(e.I110I,t.system_hue),e.I110I.display.screen.O0lll.add(e.scoreboard,[.8,0,.2,.52])}}(this))},i.prototype.entered=function(){return i.I0Il1.entered.call(this)},i.prototype.showUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!0},i.prototype.hideUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.updateScore(t)},i.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},i.prototype.hideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},i.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},i.prototype.shipCanBuyLife=function(){return i.I0Il1.shipCanBuyLife.call(this)&&!this.I110I.IOO1I.ll0lO.survival},i.prototype.modeStep=function(){var t,e,i,s,n,l,a,o,r,h,u;if(this.I110I.IOO1I.ll0lO.survival)for(r=(this.I110I.IOO1I.ll0lO.ll01O-this.I110I.IOO1I.ll0lO.survival_start)/CONSTANTS.RADIATION_TIME,a=Math.sqrt(Math.min(1,r)),null!=this.I110I.display.screen.O0lll.lI0Il.background&&this.I110I.display.screen.O0lll.lI0Il.background.updateRepulsor(Math.max(1e-5,a)),this.I110I.IOO1I.background.updateRepulsor(Math.max(1e-5,a)*CONSTANTS.RADIATION_SIZE),s=a*this.I110I.Ill01*CONSTANTS.RADIATION_SIZE,o=CONSTANTS.RADIATION_STRENGTH*r,h=this.I110I.IOO1I.IO010.status.x,u=this.I110I.IOO1I.IO010.status.y,t=Math.sqrt(h*h+u*u),t<s&&t>0&&(h/=t,u/=t,t=s-t,this.I110I.IOO1I.IO010.status.OI10I+=h*t*o,this.I110I.IOO1I.IO010.status.OI0O1+=u*t*o),n=this.I110I.IOO1I.ll0lO.ships,e=0,i=n.length;e<i;e++)l=n[e],l.OIIIl.status.alive&&(h=l.OIIIl.status.x,u=l.OIIIl.status.y,(t=Math.sqrt(h*h+u*u))<s&&(h/=t,u/=t,l.OIIIl.status.OI10I+=h*(1-t/s)*o,l.OIIIl.status.OI0O1+=u*(1-t/s)*o))},i}(Mode),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.TeamMode=function(e){function i(e){this.I110I=e,i.I0Il1.constructor.call(this,"team","Team Mode"),this.custom_color=!1,this.radar_shows_leader=!1,this.rotate_mines=!0,this.restricted_weapons_store=!0,this.vocabulary=[{text:"You",icon:"N",key:"O"},{text:"Me",icon:"O",key:"E"},{text:"Yes",icon:"L",key:"Y"},{text:"No",icon:"M",key:"N"},{text:"Mine",icon:"D",key:"M"},{text:"Follow",icon:"P",key:"F"},{text:"Attack",icon:"I",key:"A"},{text:"Defend",icon:"%",key:"D"},{text:"Wait",icon:"H",key:"T"},{text:"Kill",icon:"[",key:"K"},{text:"Base",icon:"4",key:"B"},{text:"Hmm",icon:"K",key:"Q"},{text:"Good Game",icon:"GG",key:"G"},{text:"No Prob",icon:"G",key:"P"},{text:"Thanks",icon:"A",key:"X"},{text:"Sorry",icon:"¡",key:"S"}],this.teams=[],this.teamboards=[],this.max_enter_time=2700,this.max_enter_players=60,this.infinite_base_lives=!1,this.tips_test="Win the game by destroying the enemy bases",this.tips=[t("Collect gems to upgrade your ship"),t("Donate gems to your base to upgrade it and access higher tier ships"),t("Win the game by destroying the enemy bases")]}return extend(i,e),i.prototype.getWeaponStoreName=function(){return null!=this.team?this.team.base_name+" - "+t("Weapon Store"):t("Weapon Store")},i.prototype.lO0I1=function(t){var e,i,s,n,l;for(this.game_info=t,this.I110I.startGame(t),this.I110I.display.screen.O0lll.hide(),this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=this.aow?-140:-60,n=t.mode.teams,e=i=0,s=n.length;i<s;e=++i)l=n[e],this.teams.push(new Team(this,l,e));return this.options.auto_assign_teams?this.I110I.lIllI.enter({}):null!=t.mode.restore_ship?(this.restore_ship=t.mode.restore_ship,this.team=this.teams[this.restore_ship.restore_ship_team],this.ship_recovery_page=new RecoverShipPage(this.I110I,this,this.team,this.restore_ship.restore_ship_type),this.I110I.display.screen.O0lll.add(this.ship_recovery_page,[0,0,1,1]),this.I110I.display.showCursor(),this.team_start_page=new TeamStartPage(this.I110I,this)):1===this.teams.length?(this.team_start_page=new TeamStartPage(this.I110I,this),this.teamSelected(this.teams[0])):(this.team_start_page=new TeamStartPage(this.I110I,this),this.I110I.display.screen.O0lll.add(this.team_start_page,[0,0,1,1]),this.I110I.display.showCursor())},i.prototype.recoveryDeclined=function(){if(this.I110I.IOO1I.control.setNavigationListener(null),!this.recovery_answered)return this.recovery_answered=!0,this.team=null,this.I110I.display.screen.O0lll.remove(this.ship_recovery_page),this.I110I.display.screen.O0lll.add(this.team_start_page,[0,0,1,1])},i.prototype.recoveryAccepted=function(){var t;if(this.I110I.IOO1I.control.setNavigationListener(null),!this.recovery_answered)return this.recovery_answered=!0,t=this.teams.indexOf(this.team),this.I110I.lIllI.enter({team:t,restore_ship:!0}),this.I110I.display.screen.O0lll.setHue(this.team.hue),this.I110I.IOO1I.setHue(this.team.hue)},i.prototype.messageReceived=function(t){var e,i,s,n;if("ship_docked"===t)this.I110I.display.screen.O0lll.showWeaponStore(!0);else if("ship_undocked"===t)this.I110I.display.screen.O0lll.hideWeaponStore();else if(null!=t&&"team_stats"===t.name)for(null!=this.team_stats&&null!=this.team&&(i=this.teams.indexOf(this.team))>=0&&(this.team_stats[i].killer.id!==t.data[i].killer.id&&this.I110I.message(t.data[i].killer.name+" best killer in your team"),this.team_stats[i].contributor.id!==t.data[i].contributor.id&&this.I110I.message(t.data[i].contributor.name+" best contributor in your team"),this.team_stats[i].healer.id!==t.data[i].healer.id&&this.I110I.message(t.data[i].healer.name+" best healer in your team")),this.team_stats=t.data,e=s=0,n=this.teams.length-1;s<=n;e=s+=1)this.teams[e].stats=this.team_stats[e]},i.prototype.entered=function(t){var e;return i.I0Il1.entered.call(this),this.options.auto_assign_teams&&(e=t.team,this.team=this.teams[e],this.I110I.display.screen.O0lll.setHue(this.team.hue),this.I110I.IOO1I.setHue(this.team.hue),this.I110I.IOO1I.control.setNavigationListener(null),null!=t&&t.returning?setTimeout(function(t){return function(){return t.getInstructor().setCharacter(t.team.hue),t.getInstructor().say("Welcome OlI1I Commander.\nYour help is definitely needed.\nFight proudly."),setTimeout(function(){return t.getInstructor().disappear()},1e4)}}(this),2e3):setTimeout(function(t){return function(){return t.getInstructor().setCharacter(t.team.hue),t.getInstructor().say("Thanks for joining us Commander.\nYou will stand with us in this battle.\nGood luck and fight proudly."),setTimeout(function(){return t.getInstructor().disappear()},1e4)}}(this),2e3)),this.I110I.lIllI.respawn(),this.I110I.display.hideCursor(),setTimeout(function(t){return function(){var e,i,s,n,l,a,o,r,h;if(null!=t.team_start_page)for(o=t.team_start_page.children,s=0,l=o.length;s<l;s++)h=o[s],h.l000l.push(I1I0O.IIOIl);for(t.I110I.display.screen.O0lll.showTooltips(),t.teamboards=[],r=t.teams,i=n=0,a=r.length;n<a;i=++n)h=r[i],e=new TeamBoard(h,t,t.I110I),t.teamboards.push(e),t.I110I.display.screen.O0lll.add(e,[.8,0,.2,.52]),e.num_players=8,e.start=!1,e.force_ratio=void 0,e.enabled=!1,e.l00ll=!0,e.displayed=!1,h===t.team?(null!=t.team_start_page&&t.team_start_page.animate(e,1),t.scoreboard_index=i,e.displayed=!0):e.l000l.l1lIO({III1l:1.1});return t.I110I.display.screen.O0lll.OOOI1(),t.I110I.addKeyListener(9,{keyPressed:function(){return t.switchScoreboard()},keyReleased:function(){}}),setTimeout(function(){if(null!=t.team_start_page&&t.I110I.display.screen.O0lll.remove(t.team_start_page),null!=t.ship_recovery_page)return t.I110I.display.screen.O0lll.remove(t.ship_recovery_page)},1e3)}}(this),1e3)},i.prototype.switchScoreboard=function(){var t,e,i,s,n,l;for(s=this.teams.length+1,this.I110I.is_mobile_app&&(s=this.teams.length),this.scoreboard_index=(this.scoreboard_index+1)%s,n=this.teamboards,t=e=0,i=n.length;e<i;t=++e)l=n[t],l.displayed&&t!==this.scoreboard_index?(l.displayed=!1,l.l000l.set({III1l:1.1})):l.displayed||t!==this.scoreboard_index||(l.displayed=!0,l.l00ll=!0,l.l000l.set({III1l:0}))},i.prototype.showScorePanel=function(){if(null!=this.teamboards&&this.scoreboard_index<this.teamboards.length)return this.teamboards[this.scoreboard_index].displayed=!0,this.teamboards[this.scoreboard_index].l000l.set({III1l:0})},i.prototype.hideScorePanel=function(){if(null!=this.teamboards&&this.scoreboard_index<this.teamboards.length)return this.teamboards[this.scoreboard_index].displayed=!1,this.teamboards[this.scoreboard_index].l000l.set({III1l:1.1})},i.prototype.scorePanelShown=function(){return null!=this.teamboards&&this.scoreboard_index<this.teamboards.length&&this.teamboards[this.scoreboard_index].displayed},i.prototype.userShowScorePanel=function(){if(null!=this.teamboards)return this.scoreboard_index>=this.teamboards.length&&(this.scoreboard_index=0),this.teamboards[this.scoreboard_index].OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.teamboards&&this.scoreboard_index<this.teamboards.length)return this.teamboards[this.scoreboard_index].hide()},i.prototype.asteroidsDensityModifier=function(t,e){var i,s;return i=Math.sqrt(t*t+e*e),s=.5*Math.sqrt(2),null!=this.options.teams&&1===this.options.teams.length&&(s=0),i=Math.abs(i-s),i<.15?0:1},i.prototype.teamSelected=function(t){var e,i,s,n,l;if(null==this.team){if(this.team=t,e=this.teams.indexOf(this.team),null!=this.options.choose_ship){for(n=this.team_start_page.children,i=0,s=n.length;i<s;i++)l=n[i],l.l000l.push(I1I0O.IIOIl);setTimeout(function(t){return function(){return null!=t.team_start_page&&t.I110I.display.screen.O0lll.remove(t.team_start_page),t.next_round_page=new ChooseShipPage(t.I110I,t),t.next_round_page.visible=!1,t.I110I.display.screen.O0lll.add(t.next_round_page,[0,0,1,1]),t.next_round_page.start(t.options.choose_ship)}}(this),2e3)}else this.I110I.lIllI.enter({team:e});return this.I110I.display.screen.O0lll.setHue(this.team.hue),this.I110I.IOO1I.setHue(this.team.hue),this.I110I.IOO1I.control.setNavigationListener(null)}},i.prototype.shipSelected=function(t){var e,i,s,n;for(s=this.next_round_page.children,e=0,i=s.length;e<i;e++)n=s[e],n.l000l.push(I1I0O.IIOIl);return this.I110I.IOO1I.control.setNavigationListener(null),setTimeout(function(t){return function(){if(null!=t.next_round_page)return t.I110I.display.screen.O0lll.remove(t.next_round_page)}}(this),2e3),this.I110I.lIllI.sendModeMessage({name:"ship_selected",type:100*t.level+t.model}),this.I110I.lIllI.enter({team:this.teams.indexOf(this.team)})},i.prototype.updateScore=function(t){var e,i,s,n,l;if(null!=this.teamboards){for(s=this.teamboards,n=[],e=0,i=s.length;e<i;e++)l=s[e],n.push(l.updateScore(t));return n}},i.prototype.shipCanUpgrade=function(){var t,e;return null!=this.team&&(e=this.team.station_model.level,t=this.team.station_model.OO1I0>=this.team.station_model.crystals_max,6===this.I110I.IOO1I.IO010.type.level?e>=3&&t&&this.I110I.IOO1I.IO010.type.level<this.options.max_level:(e>=3||this.I110I.IOO1I.IO010.type.level<=e+2)&&this.I110I.IOO1I.IO010.type.level<this.options.max_level)},i.prototype.shipCanBuyLife=function(){return i.I0Il1.shipCanBuyLife.call(this)&&this.I110I.IOO1I.IO010.type.level<7},i.prototype.shipUpgradeLockedMessage=function(){var e,i;return this.shipCanUpgrade()?null:this.I110I.IOO1I.IO010.type.level>=this.options.max_level?null:(i=this.team.station_model.level,e=this.team.station_model.OO1I0>=this.team.station_model.crystals_max,6===this.I110I.IOO1I.IO010.type.level&&i>=3&&!e?t("Fill station to unlock new ship tiers"):this.I110I.IOO1I.IO010.type.level>i+2&&this.I110I.IOO1I.IO010.type.level<7?t("Upgrade station to unlock new ship tiers"):null)},i.prototype.updateStations=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O;for(i=1,u=this.teams,s=0,a=u.length;s<a;s++)for(p=u[s],c=p.station_model,p.open=t.getUint8(i)>0,i+=1,c.setLevel(t.getUint8(i),this.I110I),i+=1,c.OO1I0=t.getUint32(i,!0),i+=4,c.crystals_max=this.options.crystal_capacity[c.level],i+=1,d=c.modules,n=0,o=d.length;n<o;n++)h=d[n],O=t.getUint8(i),i+=1,h.setAlive(O>0,this.I110I),h.setShield(Math.max(0,O-1)/254,this.I110I);if(null!=this.team&&this.teams.length>1){for(e=0,I=this.teams,l=0,r=I.length;l<r;l++)(p=I[l])!==this.team&&p.station_model.alive&&e++;0!==e||this.gameover||(this.gameover=!0,this.killed(-1,!0,1))}},i.prototype.attackWarning=function(){var t,e,i,s;if(null!=this.teamboards)for(i=this.teamboards,t=0,e=i.length;t<e;t++)s=i[t],s.team===this.team&&(s.warning_count=20,s.warning_blink=!1)},i.prototype.acceptChat=function(t,e){var i;return null==(i=this.I110I.names.getData(t.OIIIl.status.id))||(i.friendly===this.team.id||e.indexOf("X")<0)},i.prototype.killed=function(t,e,i){var s,n,l,a,o,r,h,u;if(!this.team.station_model.alive){for(this.gameover=!0,s=0,r=this.teams,l=0,o=r.length;l<o;l++)(u=r[l])!==this.team&&(u.station_model.alive||u.station_model.alive_ships>0)&&s++;i=s+1}return this.gameover&&(1===i?this.I110I.l00I0(3):this.I110I.l00I0(1)),1===this.I110I.IO010.type.level&&this.I110I.IO010.status.lives<=1&&(this.gameover=!0,i=void 0),this.I110I.killers[t]=!0,a=this.I110I.names.get(t),0===a.length&&(a=null),h={score:this.I110I.IO010.status.score,killer:a,kills:this.I110I.IO010.status.kills,deaths:this.I110I.IO010.status.deaths,highscore:this.I110I.IO010.status.bestscore,gameover:this.gameover,rank:i,victory:this.gameover&&1===i,mode:this.id},this.gameover&&null!=this.team_stats&&(n=this.teams.indexOf(this.team),this.team_stats[n].killer.id>0&&(h["Best killer"]=this.I110I.names.f.I000l(this.team_stats[n].killer.name)),this.team_stats[n].healer.id>0&&(h["Best healer"]=this.I110I.names.f.I000l(this.team_stats[n].healer.name)),this.team_stats[n].contributor.id>0&&(h["Best contributor"]=this.I110I.names.f.I000l(this.team_stats[n].contributor.name))),this.I110I.killed(t,this.gameover,h)},i.prototype.undock=function(){return this.I110I.lIllI.sendModeMessage("undock")},i.prototype.showUI=function(){var t;if(null!=this.teamboards&&null!=this.teamboards[this.scoreboard_index]&&(t=this.teamboards[this.scoreboard_index],!t.displayed))return t.displayed=!0,t.l00ll=!0,t.l000l.set({III1l:0})},i.prototype.hideUI=function(){var t;if(null!=this.teamboards&&null!=this.teamboards[this.scoreboard_index]&&(t=this.teamboards[this.scoreboard_index],t.displayed))return t.displayed=!1,t.l000l.set({III1l:1.1})},i}(Mode),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.InvasionMode=function(e){function i(e){this.I110I=e,i.I0Il1.constructor.call(this,"invasion","Invasion"),this.max_enter_time=120,this.max_enter_players=6,this.vocabulary=[{text:"Hello",icon:"E",key:"L"},{text:"Bye",icon:"F",key:"B"},{text:"Yes",icon:"L",key:"Y"},{text:"No",icon:"M",key:"N"},{text:"Thanks",icon:"A",key:"X"},{text:"Sorry",icon:"¡",key:"S"},{text:"No Prob",icon:"G",key:"P"},{text:"Good Game",icon:"GG",key:"G"},{text:"You",icon:"N",key:"O"},{text:"Me",icon:"O",key:"E"},{text:"Mine",icon:"D",key:"M"},{text:"Attack",icon:"I",key:"A"},{text:"Help",icon:"J",key:"H"},{text:"Follow",icon:"P",key:"F"},{text:"Kill",icon:"[",key:"K"},{text:"Hmm",icon:"K",key:"Q"}],this.tips_test="Fight and don't die!",this.tips=[t("Fight and don't die!"),t("Collect gems to upgrade your ship")],this.future_tips=[t("Destroy aliens and I1IOI"),t("Collect gems and weapons"),t("Fight the bosses and don't die!")],this.restricted_weapons_store=!0,this.show_highscore=!1,this.infinite_base_lives=!1,this.radar_zoom=1,this.soundtrack="crystals.mp3",this.ecponly=!1,this.custom_game_allowed=!0,this.gameover=!1,this.count_alien_kills=!0}return extend(i,e),i.prototype.lO0I1=function(t){return this.I110I.lIllI.enter(),this.I110I.lIllI.respawn(function(e){return function(){return e.I110I.startGame(t),e.scoreboard=new InvasionScoreboard(e.I110I,t.system_hue),e.I110I.display.screen.O0lll.add(e.scoreboard,[.8,0,.2,.52])}}(this))},i.prototype.asteroidsDensityModifier=function(t,e){return 0},i.prototype.showUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!0},i.prototype.hideUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.updateScore(t)},i.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},i.prototype.hideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},i.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},i.prototype.shipCanBuyLife=function(){return i.I0Il1.shipCanBuyLife.call(this)},i.prototype.updateWave=function(e){var i,s;if(this.scoreboard)return s=e.getUint8(1),s>this.scoreboard.wave&&(i="hsl("+this.I110I.display.screen.O0lll.hue+",70%,90%)",this.scoreboard.wave=s,s>1?(this.I110I.message(t("Wave cleared!").replace("%d",s),i,!1,!0),setTimeout(function(e){return function(){return e.I110I.message(t("Wave %d").replace("%d",s),i,!1,!0)}}(this),2500)):this.I110I.message(t("Wave %d").replace("%d",s),i,!1,!0)),this.scoreboard.I1IOI=e.getUint16(6,!0),this.scoreboard.aliens=e.getUint16(8,!0),this.scoreboard.wave_start_time=e.getUint32(2,!0),this.I110I.display.screen.O0lll.lI0Il.OII1l.updateAsteroidsAliens(e)},i.prototype.killed=function(t,e,i){var s;return e=this.I110I.IO010.status.lives<=1||this.victory,s={score:this.I110I.IO010.status.score,kills:this.I110I.IO010.status.kills,deaths:this.I110I.IO010.status.deaths,wave:this.scoreboard.wave,gameover:e,victory:this.victory,mode:this.id},this.I110I.killed(t,e,s)},i.prototype.modeStep=function(){},i.prototype.messageReceived=function(e){var i;switch(e.im_status){case"im_victory":if(!this.gameover)return this.gameover=!0,this.victory=!0,i="hsl("+this.I110I.display.screen.O0lll.hue+",70%,90%)",this.I110I.message(t("You win!"),i,!1,!0),setTimeout(function(t){return function(){return t.killed(0,!0,1)}}(this),5e3)}},i}(Mode),this.Team=function(){function t(t,e,i){this.mode=t,this.id=i,this.base_name=e.base_name,this.faction=e.faction,this.hue=e.hue,this.open=!1,this.station_desc=e.station,this.station_desc.hue=this.hue,this.members=[{id:1,type:101,score:1e3},{id:2,type:201,score:1e3}],this.station_model=new StationModel(this.station_desc,this),this.mode.I110I.IOO1I.ll0lO.addStation(this.station_model)}return t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.TeamBoard=function(e){function i(t,e,s){this.team=t,this.mode=e,this.I110I=s,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.teamSelected(),!0}}(this)}),this.start=!0,this.displayed=!0,this.enabled=this.start&&this.team.open,this.force_ratio=this.start?.5:.6,this.blending=THREE.AdditiveBlending,this.num_players=10,this.warning_count=0,this.warning_blink=!1}return extend(i,e),i.prototype.teamSelected=function(){return this.mode.teamSelected(this.team)},i.prototype.updateScore=function(t){if(this.scoredata=t,this.displayed)return this.I110I.display.addJob(1,function(t){return function(){return t.l00ll=!0}}(this))},i.prototype.mouseMove=function(t,e,i){return!!this.start&&(this.mode.team_start_page.mouseOver(this.team),!1)},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K,W,Y,J,Z;if(this.enabled=this.start&&this.team.open,this.background="hsla("+this.team.hue+",70%,30%,.15)",this.medium="hsla("+this.team.hue+",50%,50%,.4)",this.color="hsla("+this.team.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),K=Math.round(20*this.IOII0/512),e.font=K+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.medium,e.fillRect(0,.1*this.IOII0,this.IOII0,.1*this.IOII0),e.fillStyle=this.background,e.fillRect(0,.2*this.IOII0,this.IOII0,this.O0O10-.2*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(this.team.faction,.05*this.IOII0,.05*this.IOII0),e.fillStyle=this.color,e.fillText(this.team.base_name,.05*this.IOII0,.15*this.IOII0),this.start||this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*K)+"pt Play",e.fillText("TAB",.9*this.IOII0,.15*this.IOII0),e.strokeStyle=this.color,e.strokeRect(.85*this.IOII0,.12*this.IOII0,.1*this.IOII0,.06*this.IOII0)),e.font=K+"pt Play",l=.0025*this.IOII0,_=.09*this.IOII0,c=this.O0O10-_*this.num_players,q=l0Il0.getShipIcon(101),U=0,null!=q&&null!=this.scoredata){for(j=this.scoredata.getUint8(1),g=2,y=0,B=j-1;y<=B;y+=1)p=this.scoredata.getUint8(g),r=this.I110I.names.getData(p),g+=8,null!=r&&r.friendly===this.team.id&&U++;e.globalAlpha=.75,e.drawImage(q,this.IOII0-_+l,.25*this.IOII0-_/2+l,_-2*l,_-2*l),e.fillStyle="#FFF",e.textAlign="right",e.fillText(U,this.IOII0-_+l,.25*this.IOII0),e.globalAlpha=1}if(this.start&&(c-=2*_,e.font=2*K+"pt FontAwesome",e.textAlign="center",this.team.open?(e.fillStyle=this.color,e.fillRect(0,this.O0O10-2*_,this.IOII0,2*_),e.fillStyle="#000",e.fillText("",this.IOII0/2,this.O0O10-_)):(e.fillStyle=this.color,e.fillText("",this.IOII0/2,this.O0O10-_))),e.font=K+"pt Play",M=.25*_,e.fillStyle=this.color,e.textAlign="right",k=this.team.station_model.level,e.fillText("Lv"+(k+1),this.IOII0-M,c-_/2),s=this.IOII0-2*M-2*_,e.fillStyle=this.medium,e.fillRect(M+_,c-_+M,s,_-2*M),e.fillStyle="#000",e.fillRect(M+_+2,c-_+M+2,s-4,_-2*M-4),e.fillStyle="#F88",o=this.team.station_model.OO1I0/this.team.station_model.crystals_max,e.fillRect(M+_+4,c-_+M+4,(s-8)*o,_-2*M-8),e.font=K+"pt FontAwesome",e.textAlign="left",e.fillText("",M,c-_/2),e.font=Math.round(.6*K)+"pt Play",e.textAlign="left",e.fillText(this.team.station_model.OO1I0,M+_+4,c-1*_),e.textAlign="right",e.fillText(this.team.station_model.crystals_max,M+_+4+s-8,c-1*_),this.team.station_model.hasDestroyedModule()&&(e.textAlign="center",e.fillText(t("REPAIR"),M+_+s*this.mode.options.repair_threshold,c-1*_),e.beginPath(),e.strokeStyle="#FFF",e.moveTo(M+_+s*this.mode.options.repair_threshold,c-_+M),e.lineTo(M+_+s*this.mode.options.repair_threshold,c),e.stroke()),e.font=K+"pt Play",a=0,this.team.station_model.alive_ships=0,G=!1,null!=this.scoredata)for(j=this.scoredata.getUint8(1),g=2,v=0,D=j-1;v<=D&&!(a>=10);v+=1){if(p=this.scoredata.getUint8(g),null!=(r=this.I110I.names.getData(p))&&r.friendly===this.team.id){if(this.mode.team===this.team&&7===a&&p!==this.I110I.IOO1I.IO010.status.id&&!this.start&&!G){g+=8;continue}p===this.I110I.IOO1I.IO010.status.id&&(G=!0),I=this.scoredata.getUint8(g+3),i=!0&I,C=1+(I>>1&15),k=1+(I>>5&7),N=this.scoredata.getUint32(g+4,!0),i&&this.team.station_model.alive_ships++,e.globalAlpha=.75,p===this.I110I.IOO1I.IO010.status.id?e.fillStyle="rgba(255,255,255,.1)":e.fillStyle="#000",e.fillRect(l,c+a*_+l,this.IOII0-2*l,_-2*l),q=l0Il0.getShipIcon(100*k+C),null!=q&&e.drawImage(q,this.IOII0-_+l,c+a*_+l,_-2*l,_-2*l),e.globalAlpha=1,null==r.custom||this.start||(O=I1O00.I0II1(r.custom.badge,r.custom.laser,r.custom.finish,48,r.custom.hue),e.drawImage(O,l,c+a*_,2*_,_)),e.fillStyle=this.color,e.textAlign="left",H=2.5*_,null!=this.team.stats&&(this.team.stats.killer.id===p&&(e.font=K+"pt SBGlyphs",e.fillText("[",H,c+(a+.5)*_),H+=.8*_),this.team.stats.contributor.id===p&&(e.font=K+"pt SBGlyphs",e.fillText("D",H,c+(a+.5)*_),H+=.8*_),this.team.stats.healer.id===p&&(e.font=K+"pt SBGlyphs",e.fillText("",H,c+(a+.5)*_),H+=.8*_)),e.font=K+"pt Play",e.fillText(r.player_name.toUpperCase(),H,c+(a+.5)*_),e.textAlign="right",Y=e.measureText(N).width,e.fillStyle="#000",e.fillRect(this.IOII0-1.5*_-Y-2,c+(a+.25)*_-1,Y+4,.5*_+2),e.fillStyle=this.color,e.fillText(N,this.IOII0-1.5*_,c+(a+.5)*_),a++}g+=8}for(V=this.O0O10-.2*this.IOII0-_*(this.num_players+1)-(this.start?2*_:0),V=Math.min(V,this.IOII0),T=10,E=-10,P=10,S=-10,L=this.team.station_model.modules,b=0,w=L.length;b<w;b++)z=L[b],T=Math.min(T,z.I0llI.position.x/20),P=Math.min(P,z.I0llI.position.y/20),E=Math.max(E,z.I0llI.position.x/20),S=Math.max(S,z.I0llI.position.y/20);for((E+T)/2+.5,(S+P)/2+.5,h=Math.max(4,E-T),u=Math.max(4,S-P),n=Math.min(this.IOII0/(u+2),V/(h+1)),F=this.team.station_model.modules,A=0,x=F.length;A<x;A++)z=F[A],R=STATION_MODULES.types_by_id[z.type],m=StationModuleModel.getModuleImageColorized(R,16728128),f=StationModuleModel.getModuleImageColorized(R,4259839),Z=z.I0llI.position.x/20,J=z.I0llI.position.y/20,d=z.dir,Math.min(this.IOII0,V),W=z.shield,e.save(),e.translate(this.IOII0/2,V/2+.2*this.IOII0),e.scale(n,n),e.translate(J,Z),e.rotate(Math.PI*d*.5),z.alive?(e.globalAlpha=Math.sqrt(W),e.drawImage(f,-1.5,-1.5,3,3),e.globalAlpha=Math.sqrt(1-W),e.drawImage(m,-1.5,-1.5,3,3)):(e.globalAlpha=.1,e.drawImage(f,-1.5,-1.5,3,3),e.drawImage(m,-1.5,-1.5,3,3)),e.restore();return this.warning_count>0&&(this.warning_blink=!this.warning_blink,this.warning_blink&&(e.font=1.5*K+"pt FontAwesome",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#F88",e.shadowBlur=8,e.shadowColor="#F00",e.shadowOpacity=1,e.fillText("",.1*this.IOII0,.3*this.IOII0)),this.warning_count--),e.restore()},i.prototype.OOOI1=function(){if(!this.displayed)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.displayed=!0},i.prototype.hide=function(){if(this.displayed)return this.l000l.set({III1l:1.1}),this.displayed=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app&&!this.start?(this.mode.switchScoreboard(),!0):i.I0Il1.l11Il.call(this,t,e,s)},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.TeamStartPage=function(e){function i(e,s){var n,l,a,o,r,h,u,d,I;for(this.I110I=e,this.mode=s,i.I0Il1.constructor.call(this),h=this.mode.teams.length,d=.2,u=this.mode.teams,a=o=0,r=u.length;o<r;a=++o)I=u[a],n=new TeamBoard(I,this.mode,this.I110I),this.mode.teamboards.push(n),this.add(n,[.5-h/2*d+a*d+.01,.2,d-.02,.7]),this.animate(n,3+.5*a);this.choose=new l0llO(t("Choose sides")),this.choose.font="Play",this.choose.color="#FFF",this.choose.background=null,this.add(this.choose,[.2,.05,.6,.05]),this.animate(this.choose,5),this.systemname=new l0llO(this.mode.game_info.name+" System"),this.systemname.font="Play",this.systemname.color="#FFF",this.systemname.background=null,this.systemname.align="left",this.add(this.systemname,[.2,.9,.5,.05]),this.animate(this.systemname,1),l=new Date,l.setYear(l.getFullYear()+4337-2017),l=l.toLocaleString(translations.getLang(),{month:"long",day:"numeric",year:"numeric"}),this.gamedate=new l0llO(l),this.gamedate.font="Play",this.gamedate.color="#FFF",this.gamedate.background=null,this.gamedate.align="right",this.add(this.gamedate,[.3,.9,.5,.05]),this.animate(this.gamedate,2)}return extend(i,e),i.prototype.IO0O1=function(){var t,e;if(this.I110I.is_app&&null==this.caret)return this.caret=new Caret("OlOI1"),this.caret_index=0,t=this.mode.teamboards[0].O0l1I[0]+this.mode.teamboards[0].O0l1I[2]/2,e=this.mode.teamboards[0].O0l1I[1],this.add(this.caret,[t-.025,e-.02,.05,.05]),this.caret_spacing=(this.mode.teamboards[1].O0l1I[0]-this.mode.teamboards[0].O0l1I[0])/.05,this.I110I.IOO1I.control.setNavigationListener(this),this.animate(this.caret,3.5)},i.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),
t.l000l.pause(e),t.l000l.push({IOOOI:10,k:.01,f:.17})},i.prototype.gamepadNavigation=function(t){switch(t){case"left":return this.setIndex((this.caret_index+this.mode.teams.length-1)%this.mode.teams.length);case"right":return this.setIndex((this.caret_index+1)%this.mode.teams.length);case"ok":if(this.mode.teamboards[this.caret_index].enabled)return this.mode.teamboards[this.caret_index].teamSelected(),this.I110I.IOO1I.control.setNavigationListener(null)}},i.prototype.setIndex=function(t){if(null!=this.caret&&t!==this.caret_index)return this.caret_index=t,this.caret.setOffset(this.caret_index*this.caret_spacing,0)},i.prototype.mouseOver=function(t){var e,i,s,n;for(n=this.mode.teams,e=i=0,s=n.length;i<s;e=++i)n[e]===t&&this.setIndex(e)},i}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.DeclineRecoveryButton=function(e){function i(t,e,s){this.team=t,this.mode=e,this.I110I=s,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.recoveryDeclined(),!0}}(this)}),this.force_ratio=10,this.blending=THREE.AdditiveBlending}return extend(i,e),i.prototype.lOO01=function(e){var i;return this.background="hsla("+this.team.hue+",70%,30%,.15)",this.medium="hsla("+this.team.hue+",50%,50%,.4)",this.color="hsla("+this.team.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),e.fillStyle=this.color,e.fillRect(0,0,this.IOII0,this.O0O10),i=Math.round(this.O0O10/16*5),e.font=i+"pt Play",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#000",e.fillText(t("Abandon rescued ship"),this.IOII0/2,this.O0O10/2),e.font=i+"pt FontAwesome",this.I110I.is_app?Gamepad.drawButton("B",e,.5*this.O0O10,this.O0O10/2,i,this.team.hue):e.fillText("",.5*this.O0O10,this.O0O10/2),e.restore()},i.prototype.recoveryDeclined=function(){return this.mode.recoveryDeclined()},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.RecoverShipButton=function(e){function i(t,e,s,n){this.team=t,this.mode=e,this.I110I=s,this.shipid=n,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.recoveryAccepted(),!0}}(this)}),this.force_ratio=2,this.blending=THREE.AdditiveBlending}return extend(i,e),i.prototype.recoveryAccepted=function(){return this.mode.recoveryAccepted()},i.prototype.lOO01=function(e){var i,s;return this.background="hsla("+this.team.hue+",70%,30%,.15)",this.medium="hsla("+this.team.hue+",50%,50%,.4)",this.color="hsla("+this.team.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),e.fillStyle=this.background,e.fillRect(0,0,this.IOII0,this.O0O10),s=Math.round(this.O0O10/16),e.font=s+"pt Play",e.fillStyle=this.color,e.fillRect(0,0,this.IOII0,2*s),i=l0OOl.I0II1(this.shipid,this.hue),e.drawImage(i,this.IOII0/2-.25*this.O0O10,.1*this.O0O10,.5*this.O0O10,.5*this.O0O10),e.textBaseline="middle",e.textAlign="center",e.fillStyle="#000",e.fillText(t("Message from %s").replace("%s",this.team.faction),this.IOII0/2,s),e.fillStyle=this.color,e.fillText(t("Your ship has been rescued at:"),this.IOII0/2,.6*this.O0O10),e.fillText(this.team.base_name,this.IOII0/2,.7*this.O0O10),e.fillStyle=this.color,e.fillRect(0,.8*this.O0O10,this.IOII0,.2*this.O0O10),e.fillStyle="#000",e.fillText(t("Accept rescued ship"),this.IOII0/2,.9*this.O0O10),this.I110I.is_app?Gamepad.drawButton("A",e,.1*this.O0O10,.9*this.O0O10,s,this.team.hue):(e.font=s+"pt FontAwesome",e.fillText("",.1*this.O0O10,.9*this.O0O10)),e.restore()},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.RecoverShipPage=function(t){function e(t,i,s,n){this.I110I=t,this.mode=i,this.team=s,this.shipid=n,e.I0Il1.constructor.call(this),this.recovery=new RecoverShipButton(this.team,this.mode,this.I110I,this.shipid),this.add(this.recovery,[.3,.3,.4,.3]),this.decline=new DeclineRecoveryButton(this.team,this.mode,this.I110I),this.add(this.decline,[.3,.61,.4,.06]),this.animate(this.recovery,1),this.animate(this.decline,2),this.I110I.is_app&&this.I110I.IOO1I.control.setNavigationListener(this)}return extend(e,t),e.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),t.l000l.pause(e),t.l000l.push({IOOOI:10,k:.01,f:.17})},e.prototype.gamepadNavigation=function(t){switch(t){case"ok":return this.recovery.recoveryAccepted();case"cancel":return this.decline.recoveryDeclined()}},e}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.DeathMatchMode=function(e){function i(e,s,n){this.I110I=e,null==s&&(s="deathmatch"),null==n&&(n="Deathmatch"),i.I0Il1.constructor.call(this,s,n),this.vocabulary=[],this.radar_zoom=1,this.max_enter_time=3600,this.max_enter_players=10,this.soundtrack="argon.mp3",this.respawn_delay=1e3,this.I0l10=!1,this.pro=!1,this.anonymous_ships=!0,this.radar_shows_leader=!1,this.show_weaponsbar=!1,this.tips_test="Kill any ship for %d point",this.tips=[t("Kill any ship for %d point").replace("%d",1),t("Kill your target for %d points").replace("%d",2),t("Score %d points to win the round").replace("%d",12)]}return extend(i,e),i.prototype.lO0I1=function(t){return this.game_info=t,this.I110I.startGame(t),this.I110I.display.screen.O0lll.hide(),this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=-40,this.next_round_page=new NextRoundPage(this.I110I,this),this.next_round_page.visible=!1,this.I110I.display.screen.O0lll.add(this.next_round_page,[0,0,1,1]),this.I110I.lIllI.enter()},i.prototype.entered=function(t){},i.prototype.shipSelected=function(t){return this.I110I.lIllI.sendModeMessage({dm_status:"dm_ship_selected",dm_value:100*t.level+t.model})},i.prototype.showUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!0},i.prototype.hideUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},i.prototype.hideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},i.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},i.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.updateScore(t)},i.prototype.shipCanUpgrade=function(){return!1},i.prototype.showUpgrades=function(){return!1},i.prototype.roundStarted=function(){return this.status="round",this.respawn(),this.I110I.display.hideCursor(),this.I110I.display.screen.O0lll.OOOI1(),this.next_round_page.startRound(),setTimeout(function(t){return function(){return t.I110I.display.screen.O0lll.showTooltips(),null==t.scoreboard&&(t.scoreboard=new DMScorePanel(t.I110I,t.game_info.system_hue),t.I110I.display.screen.O0lll.add(t.scoreboard,[.8,0,.2,.52])),t.I110I.display.screen.O0lll.OOOI1(),t.next_round_page.visible=!1}}(this),1e3)},i.prototype.roundEnded=function(t){return this.status="roundend",setTimeout(function(e){return function(){return e.I110I.display.showCursor(),e.next_round_page.visible=!0,e.next_round_page.removeButtons(),e.next_round_page.startScorePanel(t.dm_results),e.I110I.display.screen.O0lll.hide(),e.I110I.IOO1I.I1IOI.fadeout=!0}}(this),1e3)},i.prototype.showWaitingPage=function(){return this.next_round_page.startWaiting(),this.I110I.display.showCursor(),this.I110I.display.screen.O0lll.hide(),this.next_round_page.visible=!0,this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=-40},i.prototype.showCountDownPage=function(t){if(this.I110I.display.showCursor(),this.I110I.display.screen.O0lll.hide(),this.next_round_page.visible=!0,this.next_round_page.startCountDown(this.ships_choice,t.dm_time+Date.now()),this.I110I.IOO1I.I1IOI.Il11I(this.map_id),null!=this.I110I.display.screen.O0lll.lI0Il.background)return this.I110I.display.screen.O0lll.lI0Il.background.Il11I(this.map_id)},i.prototype.messageReceived=function(e){switch(e.dm_status){case"waiting":this.status="waiting",this.showWaitingPage();break;case"countdown":this.status="countdown",this.ships_choice=e.dm_ships,this.map_id=e.dm_map_id,this.showCountDownPage(e);break;case"round":return this.roundStarted();case"roundend":return this.roundEnded(e);case"gameover":return this.I110I.display.screen.O0lll.hide(),this.I110I.O1IO0.killed({rounds:e.dm_rounds,wins:e.dm_wins,gameover:!0}),this.I110I.gameover=!0,this.I110I.lIllI.socket.close();case"dm_target":return this.target_id=e.dm_target,this.I110I.message(t("New target assigned"),"#F88")}},i.prototype.isTarget=function(t){return t===this.target_id},i.prototype.ignoreKills=function(){return"round"!==this.status},i.prototype.killed=function(t,e,i){return setTimeout(function(e){return function(){var i,s;if("round"===e.status)return e.I110I.killers[t]=!0,i=e.I110I.names.get(t),0===i.length&&(i=null),s={score:e.I110I.IO010.status.score,killer:i,kills:e.I110I.IO010.status.kills,deaths:e.I110I.IO010.status.deaths,highscore:e.I110I.IO010.status.bestscore,gameover:!1,rank:0,victory:!1,mode:e.id},e.I110I.killed(t,!1,s)}}(this),1e3)},i.prototype.respawn=function(){if("round"===this.status){if(!this.spectate)return this.I110I.lIllI.respawn(function(e){return function(){if(e.I110I.display.screen.O0lll.OOOI1(),!e.I110I.is_app)return window.onbeforeunload=function(){return t("Exit game?")}}}(this));if(this.I110I.display.screen.O0lll.OOOI1(),!this.I110I.is_app)return window.onbeforeunload=function(){return t("Exit game?")}}},i.prototype.findBestServer=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f;for(f=[],I=0,null,e=0,a=t.length;e<a;e++)for(O=t[e],c=O.systems,s=0,o=c.length;s<o;s++)m=c[s],m.open&&m.players<this.max_enter_players&&m.mode===this.id&&(f.push(m),m.OOIll=O,I+=m.players);for(f.sort(function(t,e){return e.time-t.time}),p=I+1,i=Math.ceil(p/(this.max_enter_players-2));f.length>i;)f.splice(0,1);for(d=0,n=0,r=f.length;n<r;n++)m=f[n],d+=100*(this.max_enter_players-m.players)/this.max_enter_players;if(d>0)for(u=Math.floor(Math.random()*d),d=0,l=0,h=f.length;l<h;l++)if(m=f[l],d+=100*(this.max_enter_players-m.players)/this.max_enter_players,u<d)return m.OOIll;return null},i}(Mode),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ProDeathMatchMode=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this,this.I110I,"deathmatch","Pro Deathmatch"),this.pro=!0,this.spectate=!1,this.custom_game_name="Deathmatch"}return extend(e,t),e.prototype.findBestServer=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y;for(y=[],p=0,null,e=0,a=t.length;e<a;e++)for(f=t[e],O=f.systems,s=0,o=O.length;s<o;s++)g=O[s],g.open&&g.players<this.max_enter_players&&g.mode===this.id&&(y.push(g),g.OOIll=f,p+=g.players);if(this.I110I.l10lI.OO11I())for(y.sort(function(t,e){return e.players_list.length-t.players_list.length}),n=0,r=y.length;n<r;n++)if(f=y[n],f.players_list.length<this.max_enter_players)return f.OOIll;for(y.sort(function(t,e){return e.time-t.time}),m=p+1,i=Math.ceil(m/(this.max_enter_players-2));y.length>i;)y.splice(0,1);for(c=0,l=0,h=y.length;l<h;l++)g=y[l],c+=100*Math.max(0,this.max_enter_players-1-g.players)/this.max_enter_players;if(c>0)for(I=Math.floor(Math.random()*c),c=0,d=0,u=y.length;d<u;d++)if(g=y[d],c+=100*Math.max(0,this.max_enter_players-1-g.players)/this.max_enter_players,I<c)return g.OOIll;return null},e}(DeathMatchMode),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.DMScorePanel=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;if(null!=this.view){for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),v=Math.round(20*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),e.textAlign="center",e.font=Math.round(.8*v)+"pt Play",this.I110I.is_mobile_app||(e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),v=Math.round(22*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",m=Math.min(10,this.view.getUint8(1)),u=2,c=this.I110I.IOO1I.IO010.status.rank,s=e.createLinearGradient(0,0,this.IOII0,0),s.addColorStop(0,"hsla("+this.hue+",40%,20%,.5)"),s.addColorStop(.05,"hsla("+this.hue+",40%,20%,0)"),s.addColorStop(1,"hsla("+this.hue+",40%,20%,.5)"),n=e.createLinearGradient(0,0,this.IOII0,0),n.addColorStop(0,"hsla("+this.hue+",40%,60%,.5)"),n.addColorStop(.05,"hsla("+this.hue+",40%,60%,0)"),n.addColorStop(1,"hsla("+this.hue+",40%,60%,.5)"),e.translate(0,this.O0O10/11),c>10&&(a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&(a=this.I110I.IOO1I.IO010.status.hue),I=this.I110I.player_name,p=this.I110I.IOO1I.IO010.status.score,o=9,e.fillStyle=n,e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",this.I110I.IOO1I.IO010.status.l10lI&&(l=Math.round(.08*this.O0O10),null!=(i=this.I110I.names.getCustom(this.I110I.IOO1I.IO010.status.id))&&(h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l))),e.fillText(c+". "+I,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(p,this.IOII0-10,(o+.5)/11*this.O0O10),m=Math.min(9,m)),o=d=0,f=m-1;d<=f;o=d+=1)r=this.view.getUint8(u),g=this.view.getUint32(u+4,!0),u+=8,a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&null!=(y=this.I110I.IOO1I.ll0lO.l1l0O[r])&&(a=y.OIIIl.status.hue),O=this.I110I.names.get(r),r===this.I110I.IOO1I.IO010.status.id?(e.fillStyle=n,i=this.I110I.names.getCustom(r)):(e.fillStyle=s,i=this.I110I.names.getCustom(r)),e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",null!=i&&(l=Math.round(.08*this.O0O10),h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l)),e.fillText(o+1+". "+O,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(g,this.IOII0-10,(o+.5)/11*this.O0O10);return e.restore()}},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.DMScoreLine=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.ecpimg=null}return extend(e,t),e.prototype.setInfo=function(t){return this.info=t,this.l00ll=!0,this.ecpimg=null},e.prototype.lOO01=function(t){var e,i,s,n,l,a;if(null!=this.info)return t.save(),t.translate(this.px,this.OO000),t.fillStyle="rgba(255,255,255,.1)",t.fillRect(0,.025*this.O0O10,this.IOII0,.95*this.O0O10),l=Math.round(.5*this.O0O10),this.I110I.mode.pro&&(l=Math.round(.4*this.O0O10)),t.font=l+"pt Play",t.textBaseline="middle",t.textAlign="left",t.fillStyle="#FFF",t.fillText(this.info.name,4*this.O0O10,.5*this.O0O10),t.fillText(this.info.rank+".",.25*this.O0O10,.5*this.O0O10),t.textAlign="center",t.fillText(this.info.kills,.95*this.IOII0,.5*this.O0O10),t.fillStyle="rgba(255,255,255,.75)",t.fillText(this.info.rounds,.75*this.IOII0,.5*this.O0O10),t.fillText(this.info.wins,.85*this.IOII0,.5*this.O0O10),this.info.pro&&(this.info.rated?(n=this.info.live_rank-this.info.previous_rank,n=n>0?"▼"+n:n<0?"▲"+Math.abs(n):"",t.fillText(this.info.live_rank,.6*this.IOII0,.5*this.O0O10),a=t.measureText(this.info.live_rank).width,t.textAlign="left",t.font=Math.round(.5*l)+"pt Play",t.fillStyle="rgba(255,255,255,.5)",t.fillText(n,.6*this.IOII0+a/2+l/2,.5*this.O0O10),s=Math.round(this.info.rating),i=Math.round(this.info.previous_rating),n=s-i,n=n>0?"+"+n:n<0?n:"",t.textAlign="center",t.font=l+"pt Play",t.fillText(s,.45*this.IOII0,.5*this.O0O10),t.fillStyle="rgba(255,255,255,.75)",a=t.measureText(s).width,t.textAlign="left",t.font=Math.round(.5*l)+"pt Play",t.fillStyle="rgba(255,255,255,.5)",t.fillText(n,.45*this.IOII0+a/2+l/2,.5*this.O0O10)):(t.fillStyle="rgba(255,255,255,.5)",t.fillText("--",.6*this.IOII0,.5*this.O0O10),t.fillText("--",.45*this.IOII0,.5*this.O0O10))),e=this.info.custom,null!=e&&(null==this.ecpimg&&(this.ecpimg=new I1O00(this.O0O10,e).toImage(),this.ecpimg.onload=function(t){return function(){return t.l00ll=!0}}(this)),this.ecpimg.complete&&t.drawImage(this.ecpimg,1.5*this.O0O10,0,2*this.O0O10,this.O0O10)),t.restore()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.DMScoreHeader=function(e){function i(t){this.I110I=t,i.I0Il1.constructor.call(this)}return extend(i,e),i.prototype.lOO01=function(e){var i,s;return e.save(),e.translate(this.px,this.OO000),i=e.createLinearGradient(0,0,0,this.O0O10),i.addColorStop(0,"rgba(255,255,255,0)"),i.addColorStop(1,"rgba(255,255,255,.1)"),e.fillStyle=i,e.fillRect(0,.025*this.O0O10,this.IOII0,.95*this.O0O10),s=Math.round(.6*this.O0O10),this.I110I.mode.pro&&(s=Math.round(.5*this.O0O10)),e.font=s+"pt FontAwesome",e.textBaseline="middle",e.textAlign="center",e.fillStyle="rgba(255,255,255,.75)",e.fillText("",.75*this.IOII0,.5*this.O0O10),e.fillText("",.85*this.IOII0,.5*this.O0O10),e.font=s+"pt SBGlyphs",e.fillText("[",.95*this.IOII0,.5*this.O0O10),this.I110I.mode.pro&&(e.font=Math.round(.7*s)+"pt Play",e.fillText(t("Points"),.45*this.IOII0,.65*this.O0O10),e.fillText(t("Rank"),.6*this.IOII0,.65*this.O0O10),e.font=Math.round(.4*s)+"pt Play",e.fillText(t("LIVE"),.45*this.IOII0,.2*this.O0O10),e.fillText(t("LIVE"),.6*this.IOII0,.2*this.O0O10)),e.restore()},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.NextRoundPage=function(e){function i(e,s){var n;this.I110I=e,this.mode=s,i.I0Il1.constructor.call(this),this.mode.pro?(this.title=new l0llO(t("PRO DEATHMATCH")),this.cup=new Cup(""),this.add(this.cup,[.4,.06,.2,.2]),this.animate(this.cup,1)):this.title=new l0llO(t("Deathmatch").toUpperCase()),this.title.font="Play",this.title.color="#FFF",this.title.background=null,this.title.text_shadow.opacity=1,this.title.text_shadow.blur=20,this.title.text_shadow.color="#F80",this.title.stroke_size=8,this.title.levelmod=-1,this.title.stroke_color="#000",this.title.blending=THREE.NormalBlending,this.add(this.title,[.3,.18,.4,.04]),this.animate(this.title,.75),this.I110I.is_app&&(this.quit_button=new QuitDMButton(this.I110I,200,function(t){return function(){return window.onbeforeunload=null,document.location.hash="",document.location.reload()}}()),this.add(this.quit_button,[0,.94,.2,.06]),this.animate(this.quit_button,.75)),this.nextround=new l0llO(t("Choose your ship for this round")),this.nextround.font="Play",this.nextround.color="#FFF",this.nextround.background=null,this.nextround.text_shadow.opacity=1,this.nextround.text_shadow.blur=20,this.nextround.text_shadow.color="#F80",this.nextround.stroke_size=4,this.nextround.stroke_color="#000",this.nextround.blending=THREE.NormalBlending,this.add(this.nextround,[.1,.3,.8,.05]),this.animate(this.nextround,1),this.countdown=new l0llO("10"),this.countdown.font="Play",this.countdown.color="#FFF",this.countdown.background=null,this.add(this.countdown,[.1,.85,.8,.1]),this.animate(this.countdown,1.5),this.buttons=[],this.scorelines=[],this.scoreheader=new DMScoreHeader(this.I110I),this.scoreheader.visible=!1,n=this.mode.pro?.1:.2,this.add(this.scoreheader,[n,.2,1-2*n,.7/11])}return extend(i,e),i.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),t.l000l.pause(e),t.l000l.push({d:1,k:.01,f:.17})},i.prototype.disappear=function(t){return t.l000l.set({d:1,k:.05,f:.2,opacity:0,I0O1O:.5,I1ll0:.5})},i.prototype.bump=function(t){return t.l000l.set({d:.1,I0O1O:1.5,I1ll0:1.5,k:.1,f:.3}),t.l000l.push({d:.8,k:.05,f:.2})},i.prototype.scoranim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.5,III1l:2*(Math.random()-.5)}),t.l000l.pause(Math.random()),t.l000l.push({d:4,k:.01,f:.2})},i.prototype.superanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01,rotation:2*Math.PI}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.topanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.removeButtons=function(){var t,e,i,s;for(s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.dispose(),this.remove(t);return this.buttons=[]},i.prototype.createButtons=function(t){var e,i,s,n,l,a,o,r,h;for(this.removeButtons(),i=s=0,l=t.length;s<l;i=++s)r=t[i],t[i]=this.I110I.mode.II1l1.ships_by_code[r];for(o=t.length,h=.25,i=n=0,a=t.length;n<a;i=++n)r=t[i],e=new ShipSelectButton(this.I110I,this.mode,r,-Math.PI/8+i/Math.max(1,o-1)*Math.PI/4),this.add(e,[.5-o/2*h+i*h+.01,.35,h-.02,.45]),this.animate(e,.5*i),this.buttons.push(e),1===t.length&&e.setSelected(!0)},i.prototype.shipSelected=function(t){var e,i,s,n;for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],e.setSelected(e===t);return this.mode.shipSelected(t.ship)},i.prototype.startWaiting=function(){var e,i,s,n;for(this.status="waiting",this.countdown.visible=!0,this.visible=!0,this.countdown.lO110=this.countdown.O0l1I=[.1,.46,.8,.08],this.countdown.l1O11(t("Waiting for more players")),this.nextround.visible=!1,this.animate(this.nextround,0),this.animate(this.title,0),null!=this.quit_button&&(this.animate(this.quit_button,0),this.quit_button.enabled=!0),null!=this.cup&&this.animate(this.cup,0),this.animate(this.countdown,0),s=this.scorelines,e=0,i=s.length;e<i;e++)n=s[e],this.disappear(n);this.disappear(this.scoreheader)},i.prototype.startCountDown=function(t,e){var i,s,n,l,a,o,r;for(this.countdown_time=e,this.status="countdown",this.visible=!0,this.createButtons(t),a=Math.floor(Math.max(0,Math.min(10,(this.countdown_time-Date.now())/1e3))),this.countdown.visible=!0,this.countdown.l1O11(a),this.countdown.lO110=this.countdown.O0l1I=[.3,.85,.4,.1],this.animate(this.countdown,.5),this.nextround.visible=!0,this.animate(this.nextround,0),this.animate(this.nextround,0),this.animate(this.title,0),null!=this.quit_button&&(this.animate(this.quit_button,0),this.quit_button.enabled=!0),null!=this.cup&&this.animate(this.cup,0),n=this.scorelines,i=0,s=n.length;i<s;i++)l=n[i],this.disappear(l);this.disappear(this.scoreheader),this.I110I.is_app&&(null==this.caret&&(this.caret=new Caret("OlOI1"),this.caret_index=0,this.add(this.caret)),o=this.buttons[0].O0l1I[0]+this.buttons[0].O0l1I[2]/2,r=this.buttons[0].O0l1I[1],this.caret.visible=!0,this.caret.O0l1I=this.caret.lO110=[o-.025,r-.02,.05,.05],this.buttons.length>1&&(this.caret_spacing=(this.buttons[1].O0l1I[0]-this.buttons[0].O0l1I[0])/.05),this.I110I.IOO1I.control.setNavigationListener(this))},i.prototype.startRound=function(){var t,e,i,s;for(this.status="round",this.I110I.IOO1I.control.setNavigationListener(null),null!=this.caret&&(this.caret.visible=!1),this.disappear(this.countdown),s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],this.disappear(t),t.enabled=!1;if(this.disappear(this.nextround),this.disappear(this.title),null!=this.quit_button&&(this.disappear(this.quit_button),this.quit_button.enabled=!1),null!=this.cup)return this.disappear(this.cup)},i.prototype.startScorePanel=function(e){var i,s,n,l,a,o,r,h,u,d,I;for(s=n=0;n<=9;s=++n)null==this.scorelines[s]&&(this.scorelines[s]=new DMScoreLine(this.I110I),r=this.mode.pro?.1:.2,this.add(this.scorelines[s],[r,.2+.7*(s+1)/11,1-2*r,.7/11])),this.scorelines[s].visible=!1;if(e.length>0){for(this.scoreheader.visible=!0,this.scoranim(this.scoreheader),d=1,I=1,h=0,e.sort(function(t,e){return e.dm_kills-t.dm_kills}),a=e[0].dm_kills,i=function(t){return function(e){return t.scorelines[e].setInfo({name:t.I110I.names.get(u.dm_id),pro:t.mode.pro,kills:u.dm_kills,deaths:u.dm_deaths,rounds:u.dm_rounds,wins:u.dm_wins,rank:I,rating:u.dm_live_rating,live_rank:u.dm_live_rank,previous_rating:u.dm_previous_rating,previous_rank:u.dm_previous_rank,rated:u.dm_rated,custom:t.I110I.names.getCustom(u.dm_id)}),u.dm_id===t.I110I.IOO1I.IO010.status.id&&(h=I),d+=1,t.scorelines[e].visible=!0,t.scoranim(t.scorelines[e])}}(this),s=l=0,o=e.length;l<o&&(u=e[s],!(s>=10));s=++l)u.dm_kills<a&&(I=d,a=u.dm_kills),i(s);return 1===h?(this.countdown.l1O11(t("You win!")),this.countdown.O0l1I=this.countdown.lO110=[.1,.025,.8,.1],this.superanim(this.countdown)):(this.countdown.O0l1I=this.countdown.lO110=[.1,.025,.8,.1],this.countdown.l1O11(t("Your rank:")+" #"+h),this.topanim(this.countdown))}},i.prototype.IO0O1=function(){var t;switch(this.status){case"waiting":return this.countdown.visible=Date.now()%1e3<700,this.removeButtons();case"countdown":if((t=Math.floor(Math.max(0,Math.min(10,(this.countdown_time-Date.now())/1e3))))!==this.countdown.text)return this.countdown.l1O11(t),this.bump(this.countdown)}},i.prototype.gamepadNavigation=function(t){switch(t){case"left":return this.setIndex((this.caret_index+this.buttons.length-1)%this.buttons.length);case"right":return this.setIndex((this.caret_index+1)%this.buttons.length);case"ok":return this.buttons[this.caret_index].l11Il(0,0,0),this.buttons[this.caret_index].I11IO(0,0,0);case"cancel":return window.onbeforeunload=null,document.location.hash="",document.location.reload()}},i.prototype.setIndex=function(t){if(null!=this.caret&&t!==this.caret_index)return this.caret_index=t,this.caret.setOffset(this.caret_index*this.caret_spacing,0)},i.prototype.mouseOver=function(t){var e,i,s,n;for(n=this.buttons,e=i=0,s=n.length;i<s;e=++i)n[e]===t&&this.setIndex(e)},i}(Il0ll),this.Cup=function(t){function e(){return e.I0Il1.constructor.apply(this,arguments)}return extend(e,t),e.prototype.lOO01=function(t){var e,i;return t.save(),t.globalAlpha=1,t.translate(this.px,this.OO000),i=.8*this.O0O10,t.font=i+"pt FontAwesome",t.textBaseline="middle",t.textAlign="center",e=t.createLinearGradient(0,0,this.IOII0,this.O0O10),e.addColorStop(0,"#FCEABB"),e.addColorStop(.5,"#FCCD4D"),e.addColorStop(.51,"#F8B500"),e.addColorStop(1,"#FBDF93"),t.fillStyle=e,t.shadowColor="#000",t.shadowOpacity=1,t.shadowBlur=this.O0O10/20,t.fillText(this.text,this.IOII0/2,this.O0O10/2),t.restore()},e}(l0llO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.QuitDMButton=function(e){function i(t,e,s){this.I110I=t,this.hue=e,this.OI001=s,i.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.OI001(),!0}}(this)}),this.hue=200}return extend(i,e),i.prototype.lOO01=function(e){var i,s,n,l,a,o;return this.background1="hsla("+this.hue+",50%,30%,.5)",this.background2="hsla("+this.hue+",50%,10%,.8)",this.color="hsl("+this.hue+",50%,80%)",e.save(),e.translate(this.px,this.OO000),i=e.createLinearGradient(0,0,.2*this.O0O10,this.O0O10),i.addColorStop(0,this.background1),i.addColorStop(1,this.background2),e.fillStyle=i,a=this.O0O10/4,o=this.IOII0,s=this.O0O10,e.beginPath(),e.moveTo(0,0),e.lineTo(o-a,0),e.lineTo(o,a),e.lineTo(o,s),e.lineTo(0,s),e.closePath(),e.fill(),n=o/2,l=Math.round(Math.min(s/2.5,o/16)),e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.color,e.font=l+"pt Play",e.fillText(t("Quit to Menu"),n,s/2),e.font=l+"pt FontAwesome",e.fillText("",s/2,s/2),this.I110I.using_gamepad&&Gamepad.drawButton("B",e,o-s/2,s/2,s/4,this.hue,!0),e.restore()},i}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.RoundEndPage=function(e){function i(e,s){var n,l,a,o,r,h,u,d;for(this.I110I=e,this.mode=s,i.I0Il1.constructor.call(this),r=this.mode.teams.length,u=.2,h=this.mode.teams,l=a=0,o=h.length;a<o;l=++a)d=h[l],n=new TeamBoard(d,this.mode,this.I110I),this.mode.teamboards.push(n),this.add(n,[.5-r/2*u+l*u+.01,.2,u-.02,.7]),this.animate(n,3+.5*l);this.title=new l0llO(t("NEXT ROUND")),this.title.font="Play",this.title.color="#FFF",this.title.background=null,this.add(this.title,[.1,.05,.8,.1]),this.animate(this.title,5)}return extend(i,e),i.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),t.l000l.pause(e),t.l000l.push({IOOOI:10,k:.01,f:.17})},i}(Il0ll),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ShipSelectButton=function(t){function e(t,i,s,n){this.I110I=t,this.mode=i,this.ship=s,this.rotation=n,e.I0Il1.constructor.call(this,{pressed:function(t){return function(){return t.shipSelected(),!0}}(this),O1O0l:function(t){return function(){return t.enabled=!t.selected,!0}}(this)}),this.start=!0,this.displayed=!0,this.shipimg=null}return extend(e,t),e.prototype.shipSelected=function(){return this.parent.shipSelected(this)},e.prototype.setSelected=function(t){if(t!==this.selected&&(this.selected=t,this.l00ll=!0,!this.selected))return this.enabled=!0},e.prototype.setShip=function(t){return this.ship=t,this.l00ll=!0},e.prototype.updateScore=function(t){if(this.scoredata=t,this.displayed)return this.l00ll=!0},e.prototype.mouseMove=function(t,e,i){return this.mode.next_round_page.mouseOver(this),!0},e.prototype.lOO01=function(t){var e,i,s,n,l,a,o;for(this.background="hsla("+this.I110I.hue+",70%,15%,.3)",this.medium="hsla("+this.I110I.hue+",50%,50%,.4)",this.medium2="hsla("+this.I110I.hue+",100%,70%,.6)",this.color="hsla("+this.I110I.hue+",100%,70%,1)",t.save(),t.translate(this.px,this.OO000),
o=Math.round(this.O0O10/20),t.font=o+"pt Play",t.textBaseline="middle",t.textAlign="center",n=this.O0O10/100,t.strokeStyle=this.medium,this.selected&&(t.strokeStyle=this.color),e=t.createRadialGradient(this.IOII0/2,this.O0O10/2,0,this.IOII0/2,this.O0O10/2,.71*Math.max(this.IOII0,this.O0O10)),e.addColorStop(0,"#000"),e.addColorStop(1,this.background),t.fillStyle=e,t.beginPath(),t.moveTo(8*n,n),t.lineTo(n,8*n),t.lineTo(n,this.O0O10-4*n),t.lineTo(4*n,this.O0O10-n),t.lineTo(this.IOII0-8*n,this.O0O10-n),t.lineTo(this.IOII0-n,this.O0O10-8*n),t.lineTo(this.IOII0-n,4*n),t.lineTo(this.IOII0-4*n,n),t.closePath(),t.fill(),t.lineWidth=n,t.stroke(),this.selected&&(o=Math.round(this.O0O10/10),t.fillStyle=this.color,t.font=o+"pt FontAwesome",t.fillText("",this.IOII0/2,.9*this.O0O10)),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0,0,0,1)",i=s=0,a=this.O0O10-1;s<=a;i=s+=4)t.fillRect(0,i,this.IOII0,1.2);return t.globalCompositeOperation="source-over",o=Math.round(this.O0O10/20),t.font=o+"pt Play",t.fillStyle=this.color,t.fillText(this.ship.name,this.IOII0/2,.1*this.O0O10),null!=this.ship.designer&&(t.fillStyle=this.medium2,t.font=Math.round(.7*o)+"pt Play",t.fillText("Designed by: "+this.ship.designer,this.IOII0/2,.8*this.O0O10)),null!=this.ship.inspired&&(t.fillStyle=this.medium2,t.font=Math.round(.7*o)+"pt Play",t.fillText("Inspired by: "+this.ship.inspired,this.IOII0/2,.8*this.O0O10)),l=new l0Il0(this.ship,this.I110I.hue/360),o=Math.min(this.IOII0,this.O0O10),null==this.shipimg&&(this.shipimg=l.get3DImage(o,this.rotation)),t.drawImage(this.shipimg,this.IOII0/2-o/2,this.O0O10/2-o/2,o,o),t.restore()},e}(IO0Il),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.InvasionScoreboard=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0,this.wave=0,this.I1IOI=0,this.aliens=0,this.wave_start_time=0}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.setModeData=function(t){},i.prototype.fillAsteroid=function(t,e,i,s){var n,l,a,o,r,h;for(o=new l000I(1),t.beginPath(),n=l=0;l<=19;n=l+=1)a=.8+.4*o.next(),r=e+Math.cos(n/20*Math.PI*2)*s*a,h=i+Math.sin(n/20*Math.PI*2)*s*a,0===n?t.moveTo(r,h):t.lineTo(r,h);return t.closePath(),t.fill()},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x;if(null!=this.view){for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),w=Math.round(20*this.IOII0/512),e.font=w+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("RB",e,.5*this.IOII0,.05*this.IOII0,.8*w,this.hue):this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*w)+"pt Play",e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),e.textAlign="left",e.textBaseline="bottom",this.wave>0?(e.font=Math.round(1.5*w)+"pt Play",e.fillStyle=this.color,e.fillText(t("Wave %d").replace("%d",this.wave),.05*this.IOII0,.24*this.O0O10),x=Math.floor((this.I110I.IOO1I.ll0lO.ll01O-this.wave_start_time)/60),e.textAlign="right",e.font=Math.round(w)+"pt Play",x>=60&&(y=x%60,y<10&&(y="0"+y),x=Math.floor(x/60)+":"+y),e.fillText(x,.95*this.IOII0,.24*this.O0O10)):(m=Math.min(6,this.view.getUint8(1)),m<6&&(e.font=Math.round(.9*w)+"pt Play",e.fillStyle=this.color,e.textAlign="left",e.fillText(t("Waiting for more players"),.05*this.IOII0,.24*this.O0O10)),(x=120-Math.floor((this.I110I.IOO1I.ll0lO.ll01O-this.wave_start_time)/60))>0&&(e.textAlign="right",e.fillStyle=this.color,e.font=Math.round(w)+"pt Play",x>=60&&(y=x%60,y<10&&(y="0"+y),x=Math.floor(x/60)+":"+y),e.fillText(x,.95*this.IOII0,.24*this.O0O10))),e.fillStyle=this.medium,e.fillRect(.05*this.IOII0,.25*this.O0O10,.9*this.IOII0,.01*this.O0O10),e.fillStyle=this.color,e.font=Math.round(1.5*w)+"pt Play",e.textAlign="left",e.textBaseline="middle",e.fillText(this.I1IOI,.26*this.IOII0,.35*this.O0O10),e.fillText(this.aliens,.76*this.IOII0,.35*this.O0O10),e.font=Math.round(1.5*w)+"pt FontAwesome",e.textAlign="right",b=1.5*w,this.fillAsteroid(e,.24*this.IOII0-b/2,.35*this.O0O10,b/2),null==this.alien_img&&(this.alien_img=new Image,this.alien_img.crossOrigin="Anonymous",this.alien_img.src="https://starblast.data.neuronality.com/img/alien.png"),this.alien_img.complete&&this.alien_img.width>0&&e.drawImage(this.alien_img,.74*this.IOII0-.1*this.IOII0,.35*this.O0O10-.05*this.IOII0,.1*this.IOII0,.1*this.IOII0),w=Math.round(22*this.IOII0/512),e.font=w+"pt Play",e.textBaseline="middle",m=Math.min(6,this.view.getUint8(1)),u=2,c=this.I110I.IOO1I.IO010.status.rank,s=e.createLinearGradient(0,0,this.IOII0,0),s.addColorStop(0,"hsla("+this.hue+",40%,20%,.5)"),s.addColorStop(.05,"hsla("+this.hue+",40%,20%,0)"),s.addColorStop(1,"hsla("+this.hue+",40%,20%,.5)"),n=e.createLinearGradient(0,0,this.IOII0,0),n.addColorStop(0,"hsla("+this.hue+",40%,60%,.5)"),n.addColorStop(.05,"hsla("+this.hue+",40%,60%,0)"),n.addColorStop(1,"hsla("+this.hue+",40%,60%,.5)"),e.translate(0,this.O0O10/11),c>6&&(a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&(a=this.I110I.IOO1I.IO010.status.hue),I=this.I110I.player_name,p=this.I110I.IOO1I.IO010.status.score,o=9,e.fillStyle=n,e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",this.I110I.IOO1I.IO010.status.l10lI&&(l=Math.round(.08*this.O0O10),null!=(i=this.I110I.names.getCustom(this.I110I.IOO1I.IO010.status.id))&&(h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l))),e.fillText(c+". "+I,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(p,this.IOII0-10,(o+.5)/11*this.O0O10),m=Math.min(9,m)),o=d=0,f=m-1;d<=f;o=d+=1)r=this.view.getUint8(u),g=this.view.getUint32(u+4,!0),u+=8,a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&null!=(v=this.I110I.IOO1I.ll0lO.l1l0O[r])&&(a=v.OIIIl.status.hue),O=this.I110I.names.get(r),r===this.I110I.IOO1I.IO010.status.id?(e.fillStyle=n,i=this.I110I.names.getCustom(r)):(e.fillStyle=s,i=this.I110I.names.getCustom(r)),e.fillRect(0,(o+4)/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",null!=i&&(l=Math.round(.08*this.O0O10),h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+4+.5)/11*this.O0O10-l/2,2*l,l)),e.fillText(o+1+". "+O,5+.16*this.O0O10,(o+4+.5)/11*this.O0O10),e.textAlign="right",e.fillText(g,this.IOII0-10,(o+4+.5)/11*this.O0O10);return e.restore()}},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.BattleRoyaleMode=function(e){function i(e,s,n){this.I110I=e,null==s&&(s="battleroyale"),null==n&&(n="Battle Royale"),i.I0Il1.constructor.call(this,s,n),this.vocabulary=[],this.radar_zoom=2,this.high_def_radar=!0,this.max_enter_time=120,this.max_enter_players=30,this.soundtrack="crystals.mp3",this.respawn_delay=1e3,this.I0l10=!1,this.anonymous_ships=!1,this.radar_shows_leader=!1,this.show_weaponsbar=!0,this.restricted_weapons_store=!0,this.II1l1=BATTLE_SHIPS,this.O1Ill=BATTLE_SHIP_TYPES,this.II1l1.add(II1l1.ships_by_code[101]),this.O1Ill.add(O1Ill.types_by_code[101]),this.RADIATION_TIME=36e3,this.RADIATION_SIZE=1.3,this.RADIATION_STRENGTH=.003,this.RADIATION_START=7200,this.custom_game_allowed=!0,this.II011=!1,this.tips_test="Collect weapons and refills",this.tips=[t("Collect weapons and refills"),t("Kill other players"),t("Be the last player standing")],this.spawned=!1}return extend(i,e),i.prototype.lO0I1=function(t){return this.game_info=t,this.I110I.startGame(t),this.I110I.display.screen.O0lll.hide(),this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=-40,this.next_round_page=new BattleRoyalePage(this.I110I,this),this.next_round_page.visible=!1,this.I110I.display.screen.O0lll.add(this.next_round_page,[0,0,1,1]),this.I110I.lIllI.enter()},i.prototype.entered=function(t){},i.prototype.shipSelected=function(t){return this.I110I.lIllI.sendModeMessage({br_status:"br_ship_selected",br_value:100*t.level+t.model}),this.spawn()},i.prototype.showUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!0},i.prototype.hideUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},i.prototype.hideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},i.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},i.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.survivors=this.I110I.lIllI.alive_ships,this.scoreboard.updateScore(t)},i.prototype.shipCanUpgrade=function(){return!1},i.prototype.showUpgrades=function(){return!1},i.prototype.updateRadar=function(t){if(null!=this.I110I.display.screen.O0lll.lI0Il&&null!=this.I110I.display.screen.O0lll.lI0Il.OII1l)return this.I110I.display.screen.O0lll.lI0Il.OII1l.updateShips(t)},i.prototype.roundStarted=function(){return this.anonymous_ships=!0,this.I1llO=this.I110I.IOO1I.ll0lO.ll01O,this.status="playing",this.spawned_once||this.spawn(),this.next_round_page.visible=!1},i.prototype.spawn=function(){return this.spawned_once=!0,this.respawn(),this.I110I.display.hideCursor(),this.I110I.display.screen.O0lll.OOOI1(),setTimeout(function(t){return function(){return t.next_round_page.hideButtons()}}(this),500),setTimeout(function(t){return function(){return t.I110I.display.screen.O0lll.showTooltips(),null==t.scoreboard&&(t.scoreboard=new BattleScoreboard(t.I110I,t.game_info.system_hue),t.I110I.display.screen.O0lll.add(t.scoreboard,[.8,0,.2,.52])),t.I110I.display.screen.O0lll.OOOI1()}}(this),1e3)},i.prototype.showCountDownPage=function(){return this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=-40,this.I110I.display.showCursor(),this.I110I.display.screen.O0lll.hide(),this.next_round_page.visible=!0,this.next_round_page.startCountDown(this.ships_choice,Date.now()+(7800-this.I110I.IOO1I.ll0lO.ll01O)/60*1e3)},i.prototype.messageReceived=function(t){switch(t.br_status){case"br_waiting":this.status="waiting",this.ships_choice=t.br_ships,this.showCountDownPage(t);break;case"br_info":return this.next_round_page.player_count=t.br_playercount;case"br_starting":return this.next_round_page.countdown_time=Date.now()+1e4;case"br_start":return this.roundStarted()}},i.prototype.killed=function(t,e,i){return setTimeout(function(e){return function(){var s,n;return s=e.I110I.names.get(t),0===s.length&&(s=null),n={killer:s,kills:e.I110I.IO010.status.kills,gameover:!0,rank:i,victory:1===i,mode:e.id},e.I110I.killed(t,!0,n)}}(this),1===i?5e3:3e3)},i.prototype.respawn=function(){return this.I110I.lIllI.respawn(function(e){return function(){if(e.I110I.display.screen.O0lll.OOOI1(),!e.I110I.is_app)return window.onbeforeunload=function(){return t("Exit game?")}}}(this))},i.prototype.drawRadarInfo=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E;if(y=new l000I(this.options.map_id||0),O=new llllO(this.options.map_id||0),E=[],E.push({x:1,y:1,size:.05}),(o=Math.floor(this.options.map_size/30))>0)for(r=d=0,v=o-1;d<=v;r=d+=1)for(h=c=0,b=o-1;c<=b;h=c+=1)E.push({x:(r+y.next())/o*2-1,y:(h+y.next())/o*2-1,size:(y.next()+.5)/40*2});for(r=p=0,I=E.length;p<I;r=++p)for(M=E[r],x=M.x,_=M.y,w=M.size,s=m=-1;m<=1;s=m+=1)for(n=f=-1;f<=1;n=f+=1){for(t.fillStyle="hsla(60,50%,50%,.3)",t.beginPath(),u=g=0;g<=39;u=g+=1)k=Math.cos(u/40*Math.PI*2),z=Math.sin(u/40*Math.PI*2),e=O.I1OOI(k+100*r,z,3),i=O.I1OOI(k+100*r,z+50,3),k*=.2+1.6*e,z*=.2+1.6*i,t.lineTo(x+k*w+2*s,z*w-_+2*n);t.closePath(),t.fill(),t.fillStyle="hsla(60,50%,50%,1)",t.beginPath(),l=x+2*s,a=2*n-_,t.moveTo(l+.005,a-.03),t.lineTo(l-.015,a),t.lineTo(l,a+.01),t.lineTo(l-.005,a+.03),t.lineTo(l+.015,a),t.lineTo(l,a-.01),t.closePath(),t.fill()}},i.prototype.createWeaponZones=function(){var t,e,i,s,n,l,a,o,r,h,u,d;if(o=new l000I(this.options.map_id||0),new llllO(this.options.map_id||0),d=[],d.push({x:1,y:1,size:.05}),(t=Math.floor(this.options.map_size/30))>0)for(e=s=0,r=t-1;s<=r;e=s+=1)for(i=l=0,h=t-1;l<=h;i=l+=1)d.push({x:(e+o.next())/t,y:(i+o.next())/t,size:(o.next()+.5)/40*2});for(this.weapon_zones=[],e=a=0,n=d.length;a<n;e=++a)u=d[e],this.weapon_zones.push({x:(u.x-.5)*this.options.map_size*10,y:(u.y-.5)*this.options.map_size*10});return this.weapon_zones},i.prototype.fixPositions=function(){var t,e,i,s,n;if(null!=this.I110I.IOO1I.background.weapon_zones){for(s=this.I110I.IOO1I.background.weapon_zones.children,n=[],e=0,i=s.length;e<i;e++)t=s[e],n.push(this.I110I.IOO1I.ll0lO.I1I1O(t));return n}},i.prototype.modeStep=function(){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g;if(null==this.I110I.IOO1I.background.weapon_zones){for(this.createWeaponZones(),i=this.I110I.IOO1I.background.weapon_zones=new THREE.Group,i.position.z=-2,u=this.weapon_zones,s=n=0,l=u.length;n<l;s=++n)g=u[s],r=(new WeaponZoneMarker).l1OI0,r.position.x=g.x,r.position.y=g.y,r.position.z=s/100,r.scale.x=40,r.scale.y=40,i.add(r);this.I110I.IOO1I.background.IOO1I.add(i)}if("playing"===this.status&&1===this.I110I.lIllI.alive_ships&&this.I110I.IOO1I.ll0lO.ll01O>this.I1llO+600&&!this.gameover&&(this.gameover=!0,this.killed(0,!0,1)),this.I110I.IOO1I.ll0lO.ll01O>=this.RADIATION_START)for(this.repulsive_warning||(this.repulsive_warning=!0,this.I110I.message(t("Warning: Repulsive gravity field detected"),"#F62"),this.I110I.OlIl1.alert()),O=(this.I110I.IOO1I.ll0lO.ll01O-this.RADIATION_START)/this.RADIATION_TIME,c=Math.sqrt(Math.min(1,O)),null!=this.I110I.display.screen.O0lll.lI0Il.background&&this.I110I.display.screen.O0lll.lI0Il.background.updateRepulsor(Math.max(1e-5,c)),this.I110I.IOO1I.background.updateRepulsor(Math.max(1e-5,c)*this.RADIATION_SIZE),h=c*this.I110I.Ill01*this.RADIATION_SIZE,p=this.RADIATION_STRENGTH*O,m=this.I110I.IOO1I.IO010.status.x,f=this.I110I.IOO1I.IO010.status.y,e=Math.sqrt(m*m+f*f),e<h&&e>0&&(m/=e,f/=e,e=h-e,this.I110I.IOO1I.IO010.status.OI10I+=m*e*p,this.I110I.IOO1I.IO010.status.OI0O1+=f*e*p),d=this.I110I.IOO1I.ll0lO.ships,o=0,a=d.length;o<a;o++)I=d[o],I.OIIIl.status.alive&&(m=I.OIIIl.status.x,f=I.OIIIl.status.y,(e=Math.sqrt(m*m+f*f))<h&&(m/=e,f/=e,e=h-e,I.OIIIl.status.OI10I+=m*e*p,I.OIIIl.status.OI0O1+=f*e*p))},i}(Mode),this.WeaponZoneMarker=function(){function t(){var t,e;e=this.getMaterial(),t=new THREE.PlaneGeometry(1,1),this.l1OI0=new THREE.Mesh(t,e)}return t.prototype.getMaterial=function(){var e,i,s,n,l;return null!=t.material?t.material:(e=document.createElement("canvas"),n=512,e.width=n,e.height=n,i=e.getContext("2d"),s=i.createRadialGradient(n/2,n/2,0,n/2,n/2,n/2),s.addColorStop(0,"hsla(60,50%,80%,.4)"),s.addColorStop(.95,"hsla(60,50%,80%,.05)"),s.addColorStop(.96,"hsla(60,50%,80%,.2)"),i.beginPath(),i.fillStyle=s,i.arc(n/2,n/2,n/2,0,2*Math.PI,!0),i.fill(),i.fillStyle="hsl(60,50%,80%)",i.shadowColor="hsl(60,50%,80%)",i.shadowBlur=n/20,i.shadowOpacity=1,i.font=n/4+"pt SBGlyphs",i.textAlign="center",i.textBaseline="middle",i.fillText("(",n/2,n/2),l=new THREE.Texture(e),l.needsUpdate=!0,t.material=new THREE.MeshBasicMaterial({color:16777215,map:l,opacity:.5,transparent:!0,depthWrite:!1}))},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.BattleRoyalePage=function(e){function i(e,s){this.I110I=e,this.mode=s,i.I0Il1.constructor.call(this),this.title=new l0llO(t("Battle Royale").toUpperCase()),this.title.font="Play",this.title.color="#FFF",this.title.background=null,this.title.text_shadow.opacity=1,this.title.text_shadow.blur=20,this.title.text_shadow.color="#F80",this.title.stroke_size=8,this.title.levelmod=-1,this.title.stroke_color="#000",this.title.blending=THREE.NormalBlending,this.add(this.title,[.3,.14,.4,.08]),this.animate(this.title,.75),this.I110I.is_app&&(this.quit_button=new QuitDMButton(this.I110I,200,function(t){return function(){return window.onbeforeunload=null,document.location.hash="",document.location.reload()}}()),this.add(this.quit_button,[0,.94,.2,.06]),this.animate(this.quit_button,.75)),this.nextround=new l0llO(t("Choose your ship")),this.nextround.font="Play",this.nextround.color="#FFF",this.nextround.background=null,this.nextround.text_shadow.opacity=1,this.nextround.text_shadow.blur=20,this.nextround.text_shadow.color="#F80",this.nextround.stroke_size=4,this.nextround.stroke_color="#000",this.nextround.blending=THREE.NormalBlending,this.add(this.nextround,[.1,.3,.8,.05]),this.animate(this.nextround,1),this.countdown=new l0llO(""),this.countdown.font="Play",this.countdown.color="#FFF",this.countdown.background=null,this.add(this.countdown,[.3,.875,.4,.05]),this.animate(this.countdown,1.5),this.player_num=new PlayerCountLabel(""),this.add(this.player_num,[.05,.875,.2,.05]),this.player_count=0,this.buttons=[],this.mode.pro}return extend(i,e),i.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),t.l000l.pause(e),t.l000l.push({d:1,k:.01,f:.17})},i.prototype.disappear=function(t){return t.l000l.set({d:1,k:.05,f:.2,opacity:0,I0O1O:.5,I1ll0:.5})},i.prototype.bump=function(t){return t.l000l.set({d:.1,I0O1O:1.1,I1ll0:1.1,k:.1,f:.3}),t.l000l.push({d:.8,k:.05,f:.2})},i.prototype.scoranim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.5,III1l:2*(Math.random()-.5)}),t.l000l.pause(Math.random()),t.l000l.push({d:4,k:.01,f:.2})},i.prototype.superanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01,rotation:2*Math.PI}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.topanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.removeButtons=function(){var t,e,i,s;for(s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.dispose(),this.remove(t);return this.buttons=[]},i.prototype.createButtons=function(t){var e,i,s,n,l,a,o,r,h;for(this.removeButtons(),i=s=0,l=t.length;s<l;i=++s)r=t[i],t[i]=BATTLE_SHIPS.ships_by_code[r];for(o=t.length,h=Math.min(.25,1/o),i=n=0,a=t.length;n<a;i=++n)r=t[i],e=new ShipSelectButton(this.I110I,this.mode,r,-Math.PI/8+i/Math.max(1,o-1)*Math.PI/4),this.add(e,[.5-o/2*h+i*h+.01,.36,h-.02,.45]),this.animate(e,.5*i),this.buttons.push(e),1===t.length&&e.setSelected(!0)},i.prototype.shipSelected=function(t){var e,i,s,n;for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],e.setSelected(e===t);return this.mode.shipSelected(t.ship)},i.prototype.startWaiting=function(){this.status="waiting",this.countdown.visible=!0,this.visible=!0,this.countdown.lO110=this.countdown.O0l1I=[.1,.46,.8,.08],this.countdown.l1O11(t("Waiting for more players")),this.nextround.visible=!1,this.animate(this.nextround,0),this.animate(this.title,0),null!=this.quit_button&&(this.animate(this.quit_button,0),this.quit_button.enabled=!0),null!=this.cup&&this.animate(this.cup,0),this.animate(this.countdown,0)},i.prototype.startCountDown=function(t,e){var i,s;this.countdown_time=e,this.status="countdown",this.visible=!0,this.createButtons(t),this.countdown.visible=!0,this.countdown.lO110=this.countdown.O0l1I=[.3,.875,.4,.05],this.nextround.visible=!0,this.animate(this.nextround,0),this.animate(this.nextround,0),this.animate(this.title,0),null!=this.quit_button&&(this.animate(this.quit_button,0),this.quit_button.enabled=!0),null!=this.cup&&this.animate(this.cup,0),this.I110I.is_app&&(null==this.caret&&(this.caret=new Caret("OlOI1"),this.caret_index=0,this.add(this.caret)),i=this.buttons[0].O0l1I[0]+this.buttons[0].O0l1I[2]/2,s=this.buttons[0].O0l1I[1],this.caret.visible=!0,this.caret.O0l1I=this.caret.lO110=[i-.025,s-.02,.05,.05],this.buttons.length>1&&(this.caret_spacing=(this.buttons[1].O0l1I[0]-this.buttons[0].O0l1I[0])/.05),this.I110I.IOO1I.control.setNavigationListener(this))},i.prototype.hideButtons=function(){var t,e,i,s;for(s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],this.disappear(t),t.enabled=!1;this.disappear(this.title),this.disappear(this.nextround),null!=this.caret&&(this.caret.visible=!1),setTimeout(function(e){return function(){var i,s,n;for(n=e.buttons,i=0,s=n.length;i<s;i++)t=n[i],e.remove(t);return e.remove(e.title),e.remove(e.nextround)}}(this),1e3)},i.prototype.startRound=function(){var t,e,i,s;for(this.status="round",this.I110I.IOO1I.control.setNavigationListener(null),null!=this.caret&&(this.caret.visible=!1),this.disappear(this.countdown),s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],this.disappear(t),t.enabled=!1;if(this.disappear(this.nextround),this.disappear(this.title),null!=this.quit_button&&(this.disappear(this.quit_button),this.quit_button.enabled=!1),null!=this.cup)return this.disappear(this.cup)},i.prototype.IO0O1=function(){var t;switch(this.status){case"waiting":return this.countdown.visible=Date.now()%1e3<700,this.removeButtons();case"countdown":if(t=Math.floor((this.countdown_time-Date.now())/1e3),t>=60?t=Math.floor(t/60)+":"+(t%60<10?"0":"")+t%60:t<0&&(t=t<-5?"Waiting for more players":""),t!==this.countdown.text&&(this.countdown.l1O11(t),this.bump(this.countdown),"Waiting for more players"!==t&&this.mode.spawned_once?this.countdown.lO110=this.countdown.O0l1I=[.3,.1,.4,.1]:this.countdown.lO110=this.countdown.O0l1I=[.3,.875,.4,.05]),this.player_count!==this.player_num.text)return this.player_num.l1O11(this.player_count),this.bump(this.player_num)}},i.prototype.gamepadNavigation=function(t){switch(t){case"left":return this.setIndex((this.caret_index+this.buttons.length-1)%this.buttons.length);case"right":return this.setIndex((this.caret_index+1)%this.buttons.length);case"ok":return this.buttons[this.caret_index].l11Il(0,0,0),this.buttons[this.caret_index].I11IO(0,0,0);case"cancel":return window.onbeforeunload=null,document.location.hash="",document.location.reload()}},i.prototype.setIndex=function(t){if(null!=this.caret&&t!==this.caret_index)return this.caret_index=t,this.caret.setOffset(this.caret_index*this.caret_spacing,0)},i.prototype.mouseOver=function(t){var e,i,s,n;for(n=this.buttons,e=i=0,s=n.length;i<s;e=++i)n[e]===t&&this.setIndex(e)},i}(Il0ll),this.PlayerCountLabel=function(t){function e(t){this.text=t,e.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending}return extend(e,t),e.prototype.l1O11=function(t){return this.l00ll=t!==this.text,this.text=t},e.prototype.lOO01=function(t){var e;return t.save(),t.translate(this.px,this.OO000),e=5*this.O0O10/10,t.font=e+"pt Play",t.textBaseline="middle",t.textAlign="left",t.fillStyle="#FFF",t.fillText(this.text,this.IOII0/2+.1*this.O0O10,this.O0O10/2),t.font=e+"pt SBGlyphs",t.textAlign="right",t.fillStyle="#FFF",t.fillText("y",this.IOII0/2-.1*this.O0O10,this.O0O10/2),t.restore()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.BattleScoreboard=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0,this.survivors=0}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;if(null!=this.view){for(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),v=Math.round(20*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("RB",e,.5*this.IOII0,.05*this.IOII0,.8*v,this.hue):this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*v)+"pt Play",e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),e.textAlign="left",e.textBaseline="bottom",this.survivors>0&&(e.font=Math.round(1.5*v)+"pt Play",e.fillStyle=this.color,e.textAlign="center",e.fillText(t("Survivors:")+" "+this.survivors,.5*this.IOII0,.24*this.O0O10)),e.fillStyle=this.medium,e.fillRect(.05*this.IOII0,.25*this.O0O10,.9*this.IOII0,.01*this.O0O10),e.fillStyle=this.color,v=Math.round(22*this.IOII0/512),e.font=v+"pt Play",e.textBaseline="middle",m=Math.min(8,this.view.getUint8(1)),u=2,c=this.I110I.IOO1I.IO010.status.rank,s=e.createLinearGradient(0,0,this.IOII0,0),s.addColorStop(0,"hsla("+this.hue+",40%,20%,.5)"),s.addColorStop(.05,"hsla("+this.hue+",40%,20%,0)"),s.addColorStop(1,"hsla("+this.hue+",40%,20%,.5)"),n=e.createLinearGradient(0,0,this.IOII0,0),n.addColorStop(0,"hsla("+this.hue+",40%,60%,.5)"),n.addColorStop(.05,"hsla("+this.hue+",40%,60%,0)"),n.addColorStop(1,"hsla("+this.hue+",40%,60%,.5)"),e.translate(0,this.O0O10/11),c>8&&(a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&(a=this.I110I.IOO1I.IO010.status.hue),I=this.I110I.player_name,p=this.I110I.IOO1I.IO010.status.score,o=9,e.fillStyle=n,e.fillRect(0,o/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",this.I110I.IOO1I.IO010.status.l10lI&&(l=Math.round(.08*this.O0O10),null!=(i=this.I110I.names.getCustom(this.I110I.IOO1I.IO010.status.id))&&(h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+.5)/11*this.O0O10-l/2,2*l,l))),e.fillText(c+". "+I,5+.16*this.O0O10,(o+.5)/11*this.O0O10),e.textAlign="right",e.fillText(p,this.IOII0-10,(o+.5)/11*this.O0O10),m=Math.min(9,m)),o=d=0,f=m-1;d<=f&&!(7===o&&c>8);o=d+=1)r=this.view.getUint8(u),g=this.view.getUint32(u+4,!0),u+=8,a=this.hue,null!=this.I110I.mode.options&&null!=this.I110I.mode.options.friendly_colors&&this.I110I.mode.options.friendly_colors>1&&null!=(y=this.I110I.IOO1I.ll0lO.l1l0O[r])&&(a=y.OIIIl.status.hue),O=this.I110I.names.get(r),r===this.I110I.IOO1I.IO010.status.id?(e.fillStyle=n,i=this.I110I.names.getCustom(r)):(e.fillStyle=s,i=this.I110I.names.getCustom(r)),e.fillRect(0,(o+2)/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),e.fillStyle="hsla("+a+",80%,90%,1)",e.textAlign="left",null!=i&&(l=Math.round(.08*this.O0O10),h=I1O00.I0II1(i.badge,i.laser,i.finish,48,i.hue),h.complete&&e.drawImage(h,0,(o+2+.5)/11*this.O0O10-l/2,2*l,l)),e.fillText(o+1+". "+O,5+.16*this.O0O10,(o+2+.5)/11*this.O0O10),e.textAlign="right",e.fillText(g,this.IOII0-10,(o+2+.5)/11*this.O0O10);return e.restore()}},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.TutorialMode=function(e){function i(e){this.I110I=e,i.I0Il1.constructor.call(this,"tutorial","Training"),this.max_enter_time=1,this.max_enter_players=1,this.custom_game_allowed=!1,this.II011=!1,this.vocabulary=[{text:"Hello",icon:"E",key:"L"},{text:"Bye",icon:"F",key:"B"},{text:"Yes",icon:"L",key:"Y"},{text:"No",icon:"M",key:"N"},{text:"Thanks",icon:"A",key:"X"},{text:"Sorry",icon:"¡",key:"S"},{text:"No Prob",icon:"G",key:"P"},{text:"Good Game",icon:"GG",key:"G"},{text:"You",icon:"N",key:"O"},{text:"Me",icon:"O",key:"E"},{text:"Mine",icon:"D",key:"M"},{text:"Attack",icon:"I",key:"A"},{text:"Help",icon:"J",key:"H"},{text:"Follow",icon:"P",key:"F"},{text:"Kill",icon:"[",key:"K"},{text:"Hmm",icon:"K",key:"Q"}],this.radar_zoom=1,this.soundtrack="argon.mp3",this.gameover=!1,this.ship_can_upgrade=!1,this.ship_can_buy_life=!1,this.show_upgrades=!1,this.disable_ship_upgrade_collapsing=!0,this.respawn_delay=1e3,this.sharing_enabled=!1,this.I0l10=!1,this.tips_test="You will learn everything about controlling your ship, upgrading, using secondary weapons, comms.",this.tips=[t("You will learn everything about controlling your ship, upgrading, using secondary weapons, comms."),t("If you skip this training, you can still start it later from the profile page.")]}return extend(i,e),i.prototype.lO0I1=function(t){return this.I110I.lIllI.enter(),this.I110I.lIllI.respawn(function(e){return function(){return e.I110I.startGame(t),e.scoreboard=new TutorialScoreboard(e.I110I,t.system_hue),e.I110I.display.screen.O0lll.add(e.scoreboard,[.8,0,.2,.52])}}(this))},i.prototype.asteroidsDensityModifier=function(t,e){return 0},i.prototype.showUI=function(){if(null!=this.scoreboard&&(this.scoreboard.visible=!0),null==this.end_sequence_start&&this.killed_once)return this.instructor.clear(),this.tutorial_steps.replayStep()},i.prototype.hideUI=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.updateScore(t)},i.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},i.prototype.hideScorePanel=function(){
if(null!=this.scoreboard)return this.scoreboard.visible=!1},i.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},i.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},i.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},i.prototype.shipCanUpgrade=function(){return this.ship_can_upgrade},i.prototype.shipCanBuyLife=function(){return this.ship_can_buy_life},i.prototype.showUpgrades=function(){return this.show_upgrades},i.prototype.updateWave=function(e){var i,s;if(this.scoreboard)return s=e.getUint8(1),s>this.scoreboard.wave&&(i="hsl("+this.I110I.display.screen.O0lll.hue+",70%,90%)",this.scoreboard.wave=s,s>1?(this.I110I.message(t("Wave cleared!").replace("%d",s),i,!1,!0),setTimeout(function(e){return function(){return e.I110I.message(t("Wave %d").replace("%d",s),i,!1,!0)}}(this),2500)):this.I110I.message(t("Wave %d").replace("%d",s),i,!1,!0)),this.scoreboard.I1IOI=e.getUint16(6,!0),this.scoreboard.aliens=e.getUint16(8,!0),this.scoreboard.wave_start_time=e.getUint32(2,!0),this.I110I.display.screen.O0lll.lI0Il.OII1l.updateAsteroidsAliens(e)},i.prototype.killed=function(e,i,s){var n;return this.victory?(n={gameover:i,victory:this.victory,mode:this.id},this.I110I.killed(e,i,n)):(this.killed_once=!0,this.instructor.clear(),setTimeout(function(e){return function(){return e.instructor.say(t("Come on! Losing your ship isn't a big deal, you will be able to respawn and continue playing."))}}(this),1e3),setTimeout(function(t){return function(){return t.instructor.disappear(),n={gameover:!1,mode:t.id},t.I110I.killed(e,i,n)}}(this),9e3))},i.prototype.modeStep=function(){null==this.instructor&&(this.instructor=new Instructor(this.I110I),this.I110I.display.screen.O0lll.add(this.instructor,[.25,.05,.5,.25]),this.I110I.display.screen.O0lll.add(this.instructor.arrow,[0,0,.1,.1])),null==this.tutorial_steps&&(this.tutorial_steps=new TutorialSteps(this.I110I,this),this.tutorial_start=Date.now()+2e3),Date.now()>this.tutorial_start&&this.tutorial_steps.process(this),null!=this.end_sequence_start&&Date.now()>this.end_sequence_start+6e4&&this.scoreboard.aliens<=0&&!this.gameover&&(this.gameover=!0,this.instructor.clear(),setTimeout(function(e){return function(){return e.instructor.say(t("Wow you did well! I wish you good luck, it has been a pleasure training you."))}}(this),1e3),setTimeout(function(t){return function(){return t.instructor.disappear(),t.victory=!0,t.killed(0,!0,1)}}(this),1e4))},i.prototype.messageReceived=function(e){var i;switch(e.im_status){case"im_victory":if(!this.gameover)return this.gameover=!0,this.victory=!0,i="hsl("+this.I110I.display.screen.O0lll.hue+",70%,90%)",this.I110I.message(t("You win!"),i,!1,!0),setTimeout(function(t){return function(){return t.killed(0,!0,1)}}(this),5e3)}},i.prototype.findBestServer=function(t){return null},i}(Mode),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.Instructor=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.lines=[""],this.index=0,this.feed=[],this.current_feed="",this.hue=200,this.character="Lucina",this.characters={Lucina:{hue:200,image:"https://starblast.data.neuronality.com/img/tutorial-survival.png"},Klaus:{hue:120,image:"https://starblast.data.neuronality.com/img/tutorial-battleroyale.png"},Maria:{hue:60,image:"https://starblast.data.neuronality.com/img/tutorial-team.png"},Kan:{hue:300,image:"https://starblast.data.neuronality.com/img/tutorial-invasion.png"},Zoltar:{hue:0,image:"https://starblast.data.neuronality.com/img/tutorial-deathmatch.png"}},this.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),this.instructor_image=new Image,this.instructor_image.crossOrigin="Anonymous",this.instructor_image.src="https://starblast.data.neuronality.com/img/tutorial-survival.png",this.instructor_image.onload=function(t){return function(){return t.l00ll=!0}}(this),this.next_type=0,this.I0O1O=1,this.I1ll0=1,this.III1l=0,this.I0O10=0,this.arrow=new TutorialArrow(this.I110I),this.arrow.hide()}return extend(e,t),e.prototype.setCharacter=function(t){var e,i,s,n,l,a,o;if(null!=t&&"number"==typeof t){s=1e3,n=(t+30)%360-30,a=this.characters;for(l in a)o=a[l],(i=Math.abs(o.hue-n))<s&&(s=i,e=l);t=e}if(null!=t&&null!=this.characters[t]&&t!==this.character)return this.instructor_image=new Image,this.instructor_image.crossOrigin="Anonymous",this.instructor_image.src=this.characters[t].image,this.hue=this.characters[t].hue,this.character=t},e.prototype.setHue=function(t){var e,i,s,n,l;e=null,n=1e3,s=this.characters;for(i in s)l=s[i],Math.abs(t-l.hue)<n&&(n=Math.abs(t-l.hue),e=i);return this.setCharacter(e)},e.prototype.disappear=function(){if(!this.IIOIl)return this.IIOIl=!0,this.l000l.set({I0O1O:.5,I1ll0:.5,opacity:0}),this.arrow.hide(),setTimeout(function(t){return function(){if(t.IIOIl)return t.visible=!1}}(this),1e3)},e.prototype.clear=function(){return this.lines=[""],this.feed=[],this.current_feed="",this.l00ll=!0},e.prototype.say=function(t){var e,i,s,n,l;if(this.IIOIl=!1,this.visible=!0,this.l000l.set({I0O1O:1.025*this.I0O1O,I1ll0:1.025*this.I1ll0,III1l:this.III1l,I0O10:this.I0O10,k:.1,d:.1}),this.l000l.push({I0O1O:this.I0O1O,I1ll0:this.I1ll0,III1l:this.III1l,I0O10:this.I0O10,opacity:1,k:.1,f:.3}),null!=t){if(s=t.split("\n"),s.length>1){for(n=[],e=0,i=s.length;e<i;e++)l=s[e],n.push(this.say(l));return n}return this.feed.push(t.toUpperCase())}},e.prototype.lOO01=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f;for(t.save(),t.translate(this.px,this.OO000),i=t.createLinearGradient(0,0,0,this.O0O10),i.addColorStop(0,"hsla("+this.hue+",80%,20%,.9)"),i.addColorStop(1,"hsla("+this.hue+",80%,10%,.8)"),t.fillStyle=i,t.fillRect(0,0,this.IOII0,this.O0O10),null!=this.instructor_image&&this.instructor_image.complete&&this.instructor_image.width>0&&(m=.3*this.IOII0,s=this.O0O10,u=Math.min(m/this.instructor_image.width,s/this.instructor_image.height),m=this.instructor_image.width*u,s=this.instructor_image.height*u,t.drawImage(this.instructor_image,.175*this.IOII0-m/2,this.O0O10-s-2,m,s)),t.strokeStyle="rgba(255,255,255,.5)",t.lineWidth=2,t.strokeRect(1,1,this.IOII0-2,this.O0O10-2),this.line_height=this.O0O10/7,this.font_size=Math.round(this.O0O10/12),this.line_width=.64*this.IOII0,t.font=this.font_size+"pt Play",t.fillStyle="rgba(255,255,255,.9)",t.textAlign="left",t.textBaseline="middle",c=Math.max(0,this.lines.length-6),h=[],n=l=c,d=this.lines.length-1;l<=d;n=l+=1){for(O=this.lines[n].split(" "),e="",a=0,r=O.length;a<r;a++)p=O[a],m=t.measureText(e+p).width,m<this.line_width||0===e.length?e+=p+" ":(h.push(e),e=p+" ");h.push(e)}for(f=1*this.line_height,c=Math.max(0,h.length-6),n=o=c,I=h.length-1;o<=I;n=o+=1)p=h[n].trim(),t.fillText(p,.35*this.IOII0,f),f+=this.line_height;return t.restore()},e.prototype.IO0O1=function(){var t,e;return this.next_type<=0?(this.next_type=Math.floor(3+3*Math.random()),"string"==typeof this.current_feed&&(this.current_feed=this.current_feed.split(" ")),this.current_feed.length>0?(t=this.current_feed.indexOf(" "),t<=0&&(t=this.current_feed.length),e=this.current_feed.splice(0,1)[0]+" ",this.lines[this.lines.length-1]+=e,this.l00ll=!0,this.I110I.OlIl1.beep(4,.1)):this.feed.length>0?(this.current_feed=this.feed.splice(0,1)[0],this.lines.push("")):void 0):this.next_type--},e}(IIIlO),this.TutorialArrow=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this),this.force_ratio=1,this.size=.15,this.visible=!1,this.levelmod=-10,this.rotation=0}return extend(e,t),e.prototype.pointComponent=function(t,e,i){var s,n,l,a,o;return null==e&&(e=0),null==i&&(i=0),t instanceof IIIlO?(n=t.getAbsolutePosition(),a=n.x+n.width/2,o=n.y+n.height/2,n.x+=e*n.width,n.y+=i*n.height,l=10*this.size/16,s=this.size,Math.abs(a-.5)>Math.abs(o-.5)?a<.5?(this.rotation=Math.PI,this.O0l1I=this.lO110=[n.x+n.width,n.y+n.height/2-s/2,l,s]):(this.rotation=0,this.O0l1I=this.lO110=[n.x-l,n.y+n.height/2-s/2,l,s]):o<.5?(this.rotation=-Math.PI/2,this.O0l1I=this.lO110=[n.x+n.width/2-l/2,n.y+n.height,l,s]):(this.rotation=Math.PI/2,this.O0l1I=this.lO110=[n.x+n.width/2-l/2,n.y-this.size,l,s]),this.OOOI1()):this.pointObject(t,e,i)},e.prototype.pointObject=function(t,e,i){var s,n,l,a,o;return null==e&&(e=0),null==i&&(i=0),n={x:t.position.x/this.I110I.display.width,y:t.position.y/this.I110I.display.height,width:t.scale.x/this.I110I.display.width,height:t.scale.y/this.I110I.display.height},n.x-=n.width/2,n.y-=n.height/2,a=n.x+n.width/2,o=n.y+n.height/2,n.x+=e*n.width,n.y+=i*n.height,l=10*this.size/16,s=this.size,Math.abs(a-.5)>Math.abs(o-.5)?a<.5?(this.rotation=Math.PI,this.O0l1I=this.lO110=[n.x+n.width,n.y+n.height/2-this.size/2,l,s]):(this.rotation=0,this.O0l1I=this.lO110=[n.x-l,n.y+n.height/2-this.size/2,l,s]):o<.5?(this.rotation=-Math.PI/2,this.O0l1I=this.lO110=[n.x+n.width/2-l/2,n.y+n.height,l,s]):(this.rotation=Math.PI/2,this.O0l1I=this.lO110=[n.x+n.width/2-l/2,n.y-s,l,s]),this.OOOI1()},e.prototype.IO0O1=function(){if(this.shown&&!this.l000l.isRunning())return this.l000l.push({I0O1O:1.2,I1ll0:1.2,d:.25,rotation:this.rotation}),this.l000l.push({d:.25,rotation:this.rotation})},e.prototype.OOOI1=function(){if(!this.shown)return this.shown=!0,this.visible=!0,this.l000l.l1lIO({opacity:0,I0O1O:.5,I1ll0:.5,rotation:this.rotation}),this.l000l.push({d:1,rotation:this.rotation})},e.prototype.hide=function(){if(this.shown)return this.shown=!1,this.l000l.set({opacity:0,I0O1O:.5,I1ll0:.5,rotation:this.rotation}),setTimeout(function(t){return function(){if(!t.shown)return t.visible=!1}}(this),1e3)},e.prototype.lOO01=function(t){var e;return t.save(),t.translate(this.px,this.OO000),e=.1*this.O0O10,t.fillStyle="#FFF",t.shadowBlur=e,t.shadowOpacity=1,t.shadowColor="#F80",t.beginPath(),t.moveTo(this.IOII0-e,.5*this.O0O10),t.lineTo(.5*this.IOII0,this.O0O10-e),t.lineTo(.5*this.IOII0,.7*this.O0O10),t.lineTo(e,.7*this.O0O10),t.lineTo(e,.3*this.O0O10),t.lineTo(.5*this.IOII0,.3*this.O0O10),t.lineTo(.5*this.IOII0,e),t.closePath(),t.fill(),t.restore()},e}(IIIlO),this.TutorialSteps=function(){function e(t,e){var i,s,n,l;for(this.I110I=t,this.mode=e,this.O11ll=[],this.O010I(),this.achievements=[],n=this.O11ll,i=0,s=n.length;i<s;i++)l=n[i],null!=l.achievement&&this.achievements.push(l.achievement);this.current_index=0,this.congrat_index=0,this.waiting_index=0,this.achieved=0}return e.prototype.add=function(t){return this.I110I.using_gamepad&&null!=t.gamepad?this.O11ll.push(t.gamepad):this.I110I.is_mobile_app&&null!=t.touch?this.O11ll.push(t.touch):this.I110I.is_mobile_app||null==t.mouse?this.O11ll.push(t):this.O11ll.push(t.mouse)},e.prototype.process=function(t){if(!this.finished)return null==this.current_step&&this.nextStep(),this.processCurrentStep()},e.prototype.replayStep=function(){return this.current_index-=1,this.nextStep()},e.prototype.setStep=function(t){return this.current_step=t,null!=this.current_step.transform?(this.mode.instructor.I0O1O=this.current_step.transform.I0O1O||1,this.mode.instructor.I1ll0=this.current_step.transform.I1ll0||1,this.mode.instructor.III1l=this.current_step.transform.III1l||0,this.mode.instructor.I0O10=this.current_step.transform.I0O10||0):(this.mode.instructor.I0O1O=1,this.mode.instructor.I1ll0=1,this.mode.instructor.III1l=0,this.mode.instructor.I0O10=0),this.current_step.clear&&this.mode.instructor.clear(),null!=this.current_step.text&&this.mode.instructor.say("\n"+this.current_step.text),null!=this.current_step.pointer&&this.current_step.pointer(this.mode.instructor.arrow),null!=this.current_step.opacity?this.mode.instructor.opacity=this.current_step.opacity:this.mode.instructor.opacity=1,null!=this.current_step.l1lIO&&this.current_step.l1lIO(),null!=this.current_step.checkValue?(this.step_value=this.current_step.checkValue(),this.step_expiration=0):this.step_expiration=Date.now()+1e3*this.current_step.time,this.idle_delay=this.current_step.idle_delay||15e3,this.idle_time=Date.now()+this.idle_delay},e.prototype.nextStep=function(){return null!=this.current_step&&this.current_step.achievement&&(this.achieved=this.achievements.indexOf(this.current_step.achievement)+1),this.mode.instructor.arrow.hide(),this.current_index<this.O11ll.length?this.setStep(this.O11ll[this.current_index++]):(this.mode.instructor.disappear(),this.finished=!0)},e.prototype.processCurrentStep=function(){var t;if(this.step_expiration>0){if(Date.now()>this.step_expiration)return this.nextStep()}else if(null!=this.current_step.checkValue)if(this.current_step.checkValue()!==this.step_value){if(this.mode.instructor.arrow.hide(),this.step_expiration=Date.now()+1e3*this.current_step.time,!this.current_step.skip_congrat)return setTimeout(function(t){return function(){return t.mode.instructor.say("\n"+t.congratulations[t.congrat_index]),t.congrat_index=(t.congrat_index+1)%t.congratulations.length}}(this),1e3*this.current_step.time/2)}else if(Date.now()>this.idle_time)return t=2*this.idle_delay,this.mode.instructor.say("\n"+this.waiting[this.waiting_index]),this.waiting_index=(this.waiting_index+1)%this.waiting.length,this.setStep(this.current_step),this.idle_delay=t,this.idle_time=Date.now()+this.idle_delay},e.prototype.O010I=function(){var e,i,s;for(e=[t("OK good."),t("Well done."),t("Fine, but nothing to brag about."),t("OK I was told you'd do that."),t("Okay, let's take this as learnt."),t("Is that it? Okay"),t("Alright")],this.congratulations=[];e.length>0;)this.congratulations.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);for(s=[t("Did you fall asleep?"),t("???"),t("Do you copy?"),t("I think we lost comms. Commander??"),t("Are you ok?")],this.waiting=[];s.length>0;)this.waiting.push(s.splice(Math.floor(Math.random()*s.length),1)[0]);return this.add({text:t("Welcome to your new unit, Commander. Here is your briefing."),time:5}),this.add({touch:this.I110I.settings.check("joystick_thrust")?{text:t("Use the joystick to steer the ship and move."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.up}}(this),time:3,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.joystick.object)}}(this)}:{text:t("Use the joystick to steer the ship and aim."),checkValue:function(t){return function(){return Math.floor(t.I110I.IOO1I.IO010.l0l1O.angle/180)}}(this),time:3,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.joystick.object)}}(this)},mouse:{text:t("Move the mouse cursor to steer the ship and aim."),checkValue:function(t){return function(){return Math.floor(t.I110I.IOO1I.IO010.l0l1O.angle/180)}}(this),time:3},gamepad:{text:t("Use Left Stick to steer the ship and aim."),checkValue:function(t){return function(){return Math.floor(t.I110I.IOO1I.IO010.l0l1O.angle/180)}}(this),time:3}}),this.add({touch:this.I110I.settings.check("joystick_thrust")?{text:t("Guess what, this spaceship can shoot lasers.")+" "+t("Touch this button to fire."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.llOIl}}(this),time:4,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.fire_buttons)}}(this),achievement:t("Basic Controls")}:{text:t("Guess what, this spaceship can shoot lasers.")+" "+t("Touch this button to fire."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.llOIl}}(this),time:4,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.fire_buttons,0,-.333)}}(this)},mouse:{text:t("Guess what, this spaceship can shoot lasers.")+" "+t("Click left mouse button to fire."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.llOIl}}(this),time:4},gamepad:{text:t("Guess what, this spaceship can shoot lasers.")+" "+t("Press Ⓐ to fire."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.llOIl}}(this),time:4}}),i={touch:{text:t("OK let’s move this wreck now.")+" "+t("Touch this button to accelerate."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.up}}(this),time:4,achievement:t("Basic Controls"),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.fire_buttons,0,.333)}}(this)},mouse:{text:t("OK let’s move this wreck now.")+" "+t("Click right mouse button to accelerate."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.up}}(this),time:4,achievement:t("Basic Controls")},gamepad:{text:t("OK let’s move this wreck now.")+" "+t("Press Right Trigger to accelerate."),checkValue:function(t){return function(){return t.I110I.IOO1I.IO010.l0l1O.up}}(this),time:4,achievement:t("Basic Controls")}},this.I110I.is_mobile_app&&this.I110I.settings.check("joystick_thrust")||this.add(i),this.I110I.is_mobile_app&&!this.I110I.settings.check("joystick_thrust")&&this.add({text:t("You can also touch the central button to both fire and accelerate."),time:5,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.fire_buttons)}}(this)}),this.add({l1lIO:function(t){return function(){return setTimeout(function(){return t.I110I.lIllI.sendModeMessage("spawn_asteroid")},1e3)}}(this),text:t("Surprise! Here is an asteroid. Destroy it!"),checkValue:function(t){return function(){return t.I110I.IOO1I.OO1I0.OO1I0.length}}(this),time:2,skip_congrat:!0}),this.add({text:t("Oh oh! gems. Collect them all!"),checkValue:function(t){return function(){return 20===t.I110I.IO010.status.OO1I0?Math.random():t.I110I.IO010.status.OO1I0}}(this),time:6}),this.add({l1lIO:function(t){return function(){return t.mode.show_upgrades=!0}}(this),text:t("This ship could really be improved, you know. You can use your gems for that."),time:3}),this.add({text:t("Upgrade any of your shield, firepower, damage or ship speed and agility...")+(this.I110I.using_gamepad?" "+t("Use the D-Pad."):""),time:5,checkValue:function(t){return function(){return 286331153===t.I110I.IO010.status.levels?Math.random():t.I110I.IO010.status.levels}}(this),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.specupgrades)}}(this)}),this.add({l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("max_ship"),t.I110I.lIllI.sendModeMessage("empty_crystals"),t.I110I.IO010.status.OO1I0=0,setTimeout(function(){return t.I110I.lIllI.sendModeMessage("spawn_alien"),t.mode.instructor.l000l.set({opacity:.25})},4e3)}}(this),text:t("Now fill your gems bar to access higher tier ships. Here is some fodder."),time:4,idle_delay:3e4,checkValue:function(t){return function(){return 20===t.I110I.IO010.status.OO1I0?Math.random():0}}(this)}),this.add({l1lIO:function(t){return function(){return t.mode.ship_can_upgrade=!0}}(this),text:t("Pick your favorite ship of these two.")+(this.I110I.using_gamepad?" "+t("Use the D-Pad."):""),clear:!0,transform:{I0O10:.5,I0O1O:.8,I1ll0:.8},time:3,checkValue:function(t){return function(){return t.I110I.IO010.status.OO1I0<20&&t.I110I.lIllI.sendModeMessage("fill_crystals"),t.I110I.IO010.type.level>1?(t.mode.ship_can_upgrade=!1,Math.random()):0}}(this),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.shipupgrades)}}(this),achievement:t("Upgrades")}),this.add({l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("max_ship"),t.mode.ship_can_upgrade=!1}}(this),text:t("We will now have some fun with secondary weapons"),time:3}),this.add({text:t("The Weapon Store opens when your are docked at your station (team mode) or manually (survival mode)."),time:6}),this.add({touch:{text:t("Touch this button to open the Weapon Store."),checkValue:function(t){return function(){return null!=t.I110I.display.screen.O0lll.weapon_store&&t.I110I.display.screen.O0lll.weapon_store.shown?Math.random():0}}(this),time:3,skip_congrat:!0,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.buttons_panel.store_button)}}(this)},mouse:{text:t("Press [W] or click this button to open the Weapon Store."),checkValue:function(t){return function(){return null!=t.I110I.display.screen.O0lll.weapon_store&&t.I110I.display.screen.O0lll.weapon_store.shown?Math.random():0}}(this),time:3,skip_congrat:!0,pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapons_bar,0,-1/16)}}(this)},gamepad:{text:t("Press Ⓧ to open the Weapon Store."),checkValue:function(t){return function(){return null!=t.I110I.display.screen.O0lll.weapon_store&&t.I110I.display.screen.O0lll.weapon_store.shown?Math.random():0}}(this),time:3,skip_congrat:!0}}),this.add({l1lIO:function(t){return function(){return t.mode.show_upgrades=!1,t.I110I.lIllI.sendModeMessage("fill_crystals")}}(this),text:t("Press this button to convert all your gems into credits."),clear:!0,checkValue:function(t){return function(){return t.I110I.display.screen.O0lll.weapon_store.shown||t.I110I.display.screen.O0lll.showWeaponStore(),0===t.I110I.IO010.status.OO1I0&&t.I110I.weapons.credits>0?Math.random():0}}(this),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapon_store.transfer_button)}}(this),idle_delay:4e4,transform:{III1l:-.3,I0O10:2.3},time:3}),this.add({l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("fill_credits")}}(this),text:t("Use your credits to buy weapons. I have added a little."),checkValue:function(t){return function(){return t.I110I.display.screen.O0lll.weapon_store.shown||t.I110I.display.screen.O0lll.showWeaponStore(),t.I110I.weapons.weapons.length>=t.I110I.IO010.type.level?Math.random():0}}(this),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapon_store.buy_buttons[5])}}(this),transform:{III1l:-.3,I0O10:2.3},time:3}),this.add({text:t("You can now close the Weapon Store"),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapon_store.exit_button)}}(this),checkValue:function(t){return function(){return t.I110I.display.screen.O0lll.weapon_store.shown?0:Math.random()}}(this),time:3}),this.add({touch:{l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("fix_secondaries")}}(this),text:t("Press these buttons to fire your secondaries."),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapons_bar,0,.25)}}(this),checkValue:function(t){return function(){var e,i,s,n;for(s=t.I110I.weapons.weapons,e=0,i=s.length;e<i;e++){if(n=s[e],10===n.code&&4!==n.ammo)return Math.random();if(11===n.code&&2!==n.ammo)return Math.random()}return 0}}(this),time:3,achievement:t("Secondary Weapons")},mouse:{l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("fix_secondaries")}}(this),text:t("Press this button or keyboard [Alt] to fire your secondaries. Press [⇧] to switch from one secondary to another."),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.weapons_bar,0,-.45)}}(this),checkValue:function(t){return function(){var e,i,s,n;for(s=t.I110I.weapons.weapons,e=0,i=s.length;e<i;e++){if(n=s[e],10===n.code&&4!==n.ammo)return Math.random();if(11===n.code&&2!==n.ammo)return Math.random()}return 0}}(this),time:10,achievement:t("Secondary Weapons")},gamepad:{l1lIO:function(t){return function(){return t.I110I.lIllI.sendModeMessage("fix_secondaries")}}(this),text:t("Press Ⓑ to fire your secondaries. Press Ⓨ to switch from one secondary to another."),checkValue:function(t){return function(){var e,i,s,n;for(s=t.I110I.weapons.weapons,e=0,i=s.length;e<i;e++){if(n=s[e],10===n.code&&4!==n.ammo)return Math.random();if(11===n.code&&2!==n.ammo)return Math.random()}return 0}}(this),time:10,achievement:t("Secondary Weapons")}}),this.add({text:t("Let's talk about advanced controls."),time:3}),this.add({text:t("When you move in the void of space, there is nothing to stop you."),time:5}),this.add({text:t("Fortunately, your ship has an RCS module that simulates friction to brake you."),time:5}),this.add({text:t("You can switch off this system to slide endlessly. You can then switch it on again."),time:5}),this.add({touch:{text:t("Press this button to switch RCS ON/OFF"),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.rcs)}}(this),checkValue:function(t){return function(){return t.I110I.IO010.status.glide}}(this),time:10,achievement:t("Advanced Controls")},mouse:{text:t("Use [Ctrl] to switch RCS ON/OFF"),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.rcs)}}(this),checkValue:function(t){return function(){return t.I110I.IO010.status.glide}}(this),time:10,achievement:t("Advanced Controls")},gamepad:{text:t("Press Left Trigger to switch RCS ON/OFF"),checkValue:function(t){return function(){return t.I110I.IO010.status.glide}}(this),time:10,achievement:t("Advanced Controls")}}),this.add({touch:{text:t("You can communicate with other players using universal galactic language.")+" "+t("Touch your ship and talk."),pointer:function(t){return function(e){return e.pointComponent({position:{x:t.I110I.display.width/2,y:.48*t.I110I.display.height},scale:{x:0,y:.1*t.I110I.display.height}},0,.25)}}(this),checkValue:function(t){return function(){return t.I110I.IOO1I.chat_bubble.text.length}}(this),time:10,achievement:t("Communications")},mouse:{text:t("You can communicate with other players using universal galactic language.")+" "+t("Press [ENTER] or click this button and talk."),pointer:function(t){return function(e){return e.pointComponent(t.I110I.display.screen.O0lll.chatpanel.open_button)}}(this),checkValue:function(t){return function(){return t.I110I.display.screen.O0lll.chatpanel.shown&&t.mode.instructor.arrow.hide(),t.I110I.IOO1I.chat_bubble.text.length}}(this),time:10,achievement:t("Communications")},gamepad:{text:t("You can communicate with other players using universal galactic language.")+" "+t("Move and press Right Stick to talk"),checkValue:function(t){return function(){return t.I110I.IOO1I.chat_bubble.text.length}}(this),time:10,achievement:t("Communications")}}),this.add({text:t("You look all ready!"),time:3}),this.add({text:t("Before I go, let me tell you this: space is a hazardous place."),time:4}),this.add({text:t("Always watch your radar."),time:3}),this.add({text:t("Lower tier ships are usually faster. Use this advantage to run. Come back to battle when you've gained strength."),time:10,achievement:t("Combat Briefing")}),this.add({l1lIO:function(t){return function(){return setTimeout(function(){return t.mode.show_upgrades=!0,t.I110I.lIllI.sendModeMessage("end_sequence"),t.mode.end_sequence_start=Date.now()},5e3)}}(this),text:t("Damn it. Command Center is reporting an alien attack. Let me upgrade your ship and fill it with secondaries. Good luck Commander."),time:8})},e}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.TutorialScoreboard=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0,this.wave=0,this.I1IOI=0,this.aliens=0,this.wave_start_time=0}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.setModeData=function(t){},i.prototype.fillAsteroid=function(t,e,i,s){var n,l,a,o,r,h;for(o=new l000I(1),t.beginPath(),n=l=0;l<=19;n=l+=1)a=.8+.4*o.next(),r=e+Math.cos(n/20*Math.PI*2)*s*a,h=i+Math.sin(n/20*Math.PI*2)*s*a,0===n?t.moveTo(r,h):t.lineTo(r,h);return t.closePath(),t.fill()},i.prototype.lOO01=function(e){var i,s,n,l,a,o,r,h,u,d;if(null!=this.view&&(this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),d=Math.round(20*this.IOII0/512),e.font=d+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("RB",e,.5*this.IOII0,.05*this.IOII0,.8*d,this.hue):this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*d)+"pt Play",e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),e.textAlign="left",e.textBaseline="bottom",e.font=Math.round(d)+"pt Play",e.fillStyle=this.color,e.textAlign="center",e.fillText(t("Training"),.5*this.IOII0,.24*this.O0O10),e.fillStyle=this.medium,e.fillRect(.05*this.IOII0,.25*this.O0O10,.9*this.IOII0,.01*this.O0O10),e.fillStyle=this.color,e.font=Math.round(1.5*d)+"pt Play",e.textAlign="left",e.textBaseline="middle",this.I1IOI>0&&e.fillText(this.I1IOI,.26*this.IOII0,.35*this.O0O10),this.aliens>0&&e.fillText(this.aliens,.76*this.IOII0,.35*this.O0O10),e.font=Math.round(1.5*d)+"pt FontAwesome",e.textAlign="right",u=1.5*d,this.I1IOI>0&&this.fillAsteroid(e,.24*this.IOII0-u/2,.35*this.O0O10,u/2),null==this.alien_img&&(this.alien_img=new Image,this.alien_img.crossOrigin="Anonymous",this.alien_img.src="https://starblast.data.neuronality.com/img/alien.png"),this.alien_img.complete&&this.alien_img.width>0&&this.aliens>0&&e.drawImage(this.alien_img,.74*this.IOII0-.1*this.IOII0,.35*this.O0O10-.05*this.IOII0,.1*this.IOII0,.1*this.IOII0),d=Math.round(22*this.IOII0/512),e.font=d+"pt Play",e.textBaseline="middle",l=e.createLinearGradient(0,0,this.IOII0,0),l.addColorStop(0,"hsla("+this.hue+",40%,20%,.5)"),l.addColorStop(.05,"hsla("+this.hue+",40%,20%,0)"),l.addColorStop(1,"hsla("+this.hue+",40%,20%,.5)"),a=e.createLinearGradient(0,0,this.IOII0,0),a.addColorStop(0,"hsla("+this.hue+",40%,60%,.5)"),a.addColorStop(.05,"hsla("+this.hue+",40%,60%,0)"),a.addColorStop(1,"hsla("+this.hue+",40%,60%,.5)"),e.translate(0,this.O0O10/11),null!=this.I110I.mode.tutorial_steps)){for(n=this.I110I.mode.tutorial_steps.achievements,s=this.I110I.mode.tutorial_steps.achieved,o=r=0,h=n.length;r<h;o=++r)i=n[o],e.fillStyle=l,e.fillRect(0,(o+3.5)/11*this.O0O10+2,this.IOII0,this.O0O10/11-4),o<s?(e.fillStyle="hsla("+this.hue+",80%,90%,1)",e.textAlign="left",e.font=Math.round(.8*d)+"pt SBGlyphs",e.fillText("#",5,(o+3.5+.5)/11*this.O0O10)):e.fillStyle="hsla("+this.hue+",80%,90%,.5)",e.font=d+"pt Play",e.textAlign="left",e.fillText(o+1+". "+i,5+.16*this.O0O10,(o+3.5+.5)/11*this.O0O10);return e.restore()}},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ModdingMode=function(t){function e(t){this.I110I=t,e.I0Il1.constructor.call(this,"modding","Modding"),
this.vocabulary=[]}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e.prototype.lO0I1=function(t){return this.game_info=t,null!=this.options.choose_ship?(this.I110I.startGame(t),this.I110I.display.screen.O0lll.hide(),this.I110I.IOO1I.ll0lO.IOO11.x=0,this.I110I.IOO1I.ll0lO.IOO11.y=-40,this.next_round_page=new ChooseShipPage(this.I110I,this),this.next_round_page.visible=!1,this.I110I.display.screen.O0lll.add(this.next_round_page,[0,0,1,1]),this.I110I.lIllI.enter(),this.next_round_page.start(this.options.choose_ship)):(this.I110I.lIllI.enter(),this.I110I.lIllI.respawn(function(e){return function(){if(e.I110I.startGame(t),null==e.scoreboard)return e.scoreboard=new ScorePanel(e.I110I,t.system_hue),e.I110I.display.screen.O0lll.add(e.scoreboard,[.8,0,.2,.52])}}(this)))},e.prototype.shipSelected=function(t){return this.I110I.lIllI.sendModeMessage({name:"ship_selected",type:100*t.level+t.model}),this.spawn()},e.prototype.spawn=function(){return this.spawned_once=!0,this.respawn(),this.I110I.display.hideCursor(),this.I110I.display.screen.O0lll.OOOI1(),setTimeout(function(t){return function(){return t.next_round_page.hideButtons()}}(this),500),setTimeout(function(t){return function(){return t.I110I.display.screen.O0lll.showTooltips(),null==t.scoreboard&&(t.scoreboard=new ScorePanel(t.I110I,t.game_info.system_hue),t.I110I.display.screen.O0lll.add(t.scoreboard,[.8,0,.2,.52])),t.I110I.display.screen.O0lll.OOOI1()}}(this),1e3)},e.prototype.showUI=function(){var t,e;if(null!=this.scoreboard&&(this.scoreboard.visible=!0),null!=this.ui_components)for(e in this.ui_components)t=this.ui_components[e],t.interfaceShown()},e.prototype.hideUI=function(){var t,e;if(null!=this.scoreboard&&(this.scoreboard.visible=!1),null!=this.ui_components)for(e in this.ui_components)t=this.ui_components[e],t.interfaceHidden()},e.prototype.intermission=function(t){var e,i,s;i={};for(e in t)s=t[e],e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),"string"==typeof s&&(s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),i[e]=s;return this.respawn_delay=1,this.I110I.killed(0,t.gameover,i),this.respawn_delay=5e3},e.prototype.updateScore=function(t){if(null!=this.scoreboard)return this.scoreboard.updateScore(t)},e.prototype.showScorePanel=function(){if(null!=this.scoreboard&&this.scoreboard.shown)return this.scoreboard.visible=!0},e.prototype.hideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.visible=!1},e.prototype.scorePanelShown=function(){return null!=this.scoreboard&&this.scoreboard.shown},e.prototype.userShowScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.OOOI1()},e.prototype.userHideScorePanel=function(){if(null!=this.scoreboard)return this.scoreboard.hide()},e.createMode=function(t,i){if(null!=i.root_mode)switch(i.root_mode){case"survival":return new ModdedSurvivalMode(t);case"team":return new ModdedTeamMode(t);case"deathmatch":return new ModdedDeathMatchMode(t);case"invasion":return new ModdedInvasionMode(t);case"battleroyale":return new ModdedBattleRoyaleMode(t)}return new e(t)},e}(Mode),this.GenericMode=function(){function t(){}return t.prototype.messageReceivedModding=function(t){var e;switch(t.name){case"instructor_says":return this.showInstructor(),null!=t.character&&this.instructor.setCharacter(t.character),this.instructor.say(t.text);case"show_instructor":return this.showInstructor();case"hide_instructor":return this.hideInstructor();case"set_ui_component":return this.setUIComponent(t.component);case"intermission":return this.intermission(t.data);case"set_object":return this.setObject(t.object);case"remove_object":return this.removeObject(t.id);case"set_custom_map":if(e=t.data,this.options.custom_map=e,this.I110I.IOO1I.I1IOI.Il11I(Math.random()),null!=this.I110I.display.screen.O0lll.lI0Il.background)return this.I110I.display.screen.O0lll.lI0Il.background.Il11I(Math.random())}},t.prototype.showInstructor=function(){return null==this.instructor?(this.instructor=new Instructor(this.I110I),this.I110I.display.screen.O0lll.add(this.instructor,[.25,.05,.5,.25])):this.instructor.say()},t.prototype.hideInstructor=function(){if(null!=this.instructor)return this.instructor.disappear()},t.prototype.setUIComponent=function(t){try{if(null==this.ui_components&&(this.ui_components={}),null==t.id)return;if("scoreboard"===t.id)null!=this.scoreboard&&this.scoreboard instanceof ModdingScoreboard||(null!=this.scoreboard&&this.I110I.display.screen.O0lll.remove(this.scoreboard),this.scoreboard=new ModdingScoreboard(this.I110I,this.game_info.system_hue),this.I110I.display.screen.O0lll.add(this.scoreboard,[.8,0,.2,.52]),this.ui_components.scoreboard=this.scoreboard);else if("radar_background"===t.id)return this.radar_background=t,null!=this.drawRadarInfo&&null==this.drawRadarInfo0&&(this.drawRadarInfo0=this.drawRadarInfo,this.drawRadarInfo=function(t){return function(e){if(null!=t.drawRadarInfo0&&t.drawRadarInfo0(e),null!=t.radar_background)return e.save(),e.translate(-1,-1),e.scale(2/256,2/256),ModdingUIComponent.drawContent(e,0,0,256,256,t.radar_background.components,t.I110I),e.restore()}}(this)),void(null!=this.I110I.display.screen.O0lll.lI0Il.background&&this.I110I.display.screen.O0lll.lI0Il.background.Il11I(this.game_info.seed));return null!=this.ui_components[t.id]?this.ui_components[t.id].set(t):this.ui_components[t.id]=new ModdingUIComponent(this.I110I,t)}catch(t){t}},t.prototype.setObject=function(t){return null==this.mod_objects&&(this.mod_objects=new ModObjectGroup(this.I110I)),this.mod_objects.setObject(t)},t.prototype.removeObject=function(t){if(null!=this.mod_objects)return this.mod_objects.removeObject(t)},t.prototype.fixPositions=function(){if(null!=this.mod_objects)return this.mod_objects.fixPositions()},t}(),this.ModdedSurvivalMode=function(t){function e(t){e.I0Il1.constructor.call(this,t)}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e}(SurvivalMode),this.ModdedTeamMode=function(t){function e(t){e.I0Il1.constructor.call(this,t)}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e}(TeamMode),this.ModdedDeathMatchMode=function(t){function e(t){e.I0Il1.constructor.call(this,t)}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e}(DeathMatchMode),this.ModdedInvasionMode=function(t){function e(t){e.I0Il1.constructor.call(this,t)}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e}(InvasionMode),this.ModdedBattleRoyaleMode=function(t){function e(t){e.I0Il1.constructor.call(this,t)}return extend(e,t),e.prototype.setOptions=function(t){if(e.I0Il1.setOptions.call(this,t),t.radar_zoom&&(this.radar_zoom=t.radar_zoom),null!=t.weapons_store&&(this.restricted_weapons_store=!t.weapons_store),null!=t.vocabulary)return this.vocabulary=t.vocabulary},e.prototype.messageReceived=function(t){return e.I0Il1.messageReceived.call(this,t),this.messageReceivedModding(t)},e}(BattleRoyaleMode),expand=function(t,e){var i,s;s=[];for(i in e.prototype)t.prototype[i]=e.prototype[i];return s},expand(this.ModdedSurvivalMode,this.GenericMode),expand(this.ModdedTeamMode,this.GenericMode),expand(this.ModdedInvasionMode,this.GenericMode),expand(this.ModdedDeathMatchMode,this.GenericMode),expand(this.ModdedBattleRoyaleMode,this.GenericMode),expand(this.ModdingMode,this.GenericMode),this.ModdedTeamMode.prototype.setOptions=this.ModdedSurvivalMode.prototype.setOptions,extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ModdingUIComponent=function(t){function e(t,i){this.I110I=t,this.component=i,e.I0Il1.constructor.call(this),this.shown=!1,this.l000l.l1lIO({opacity:0,I0O1O:.5,I1ll0:.5}),this.interface_hidden=!1,this.I110I.display.screen.O0lll.add(this),this.set(this.component)}return extend(e,t),e.prototype.set=function(t){return this.component=t,null!=this.component.position&&(this.component.position[0]/=100,this.component.position[1]/=100,this.component.position[2]/=100,this.component.position[3]/=100,this.O0l1I=this.lO110=this.component.position),this.component.clickable&&null!=this.component.shortcut&&this.I110I.addKeyListener(this.component.shortcut.charCodeAt(0),this),this.l00ll=!0,this.interface_hidden||null!=this.component.visible&&!this.component.visible?this.hide():this.OOOI1()},e.prototype.interfaceHidden=function(){return this.interface_hidden=!0,this.hide()},e.prototype.interfaceShown=function(){if(this.interface_hidden=!1,this.component.visible||null==this.component.visible)return this.OOOI1()},e.prototype.hide=function(){if(this.shown)return this.shown=!1,this.l000l.set({I0O1O:.5,I1ll0:.5,opacity:0}),setTimeout(function(t){return function(){if(!t.shown)return t.visible=!1}}(this),1e3)},e.prototype.OOOI1=function(){if(!this.shown)return this.shown=!0,this.visible=!0,this.l000l.set({opacity:1})},e.prototype.l11Il=function(t,e,i){return!(!this.component.clickable||this.I110I.settings.check("buttons_disabled"))&&(this.l000l.set({I0O1O:.9,I1ll0:.9,d:.5}),this.l000l.push({d:.5}),this.I110I.lIllI.sendModeMessage({name:"ui_component_clicked",id:this.component.id}),!0)},e.prototype.keyPressed=function(){if(this.component.clickable)return this.l000l.set({I0O1O:.9,I1ll0:.9,d:.5}),this.l000l.push({d:.5}),this.I110I.lIllI.sendModeMessage({name:"ui_component_clicked",id:this.component.id})},e.prototype.keyReleased=function(){},e.prototype.lOO01=function(t){return e.drawContent(t,this.px,this.OO000,this.IOII0,this.O0O10,this.component.components,this.I110I)},e.drawContent=function(t,e,i,s,n,l,a){var o,r,h,u,d,I,c,p,O,m,f,g,y;t.save(),t.translate(e,i);try{if(l)for(u=0,c=l.length;u<c;u++)switch(o=l[u],o.type){case"round":m=o.position[2]*s/100,h=o.position[3]*n/100,g=o.position[0]*s/100,y=o.position[1]*n/100,t.beginPath(),f=o.width||1,t.ellipse(g+m/2,y+h/2,m/2-f/2,h/2-f/2,0,0,2*Math.PI,!0),null!=o.fill&&(t.fillStyle=o.fill,t.fill()),null!=o.stroke&&(t.strokeStyle=o.stroke,null!=o.width&&(t.lineWidth=o.width),t.stroke());break;case"box":m=o.position[2]*s/100,h=o.position[3]*n/100,g=o.position[0]*s/100,y=o.position[1]*n/100,t.beginPath(),f=o.width||1,t.rect(g,y,m,h),null!=o.fill&&(t.fillStyle=o.fill,t.fill()),null!=o.stroke&&(t.strokeStyle=o.stroke,null!=o.width&&(t.lineWidth=o.width),t.stroke());break;case"text":for(m=o.position[2]*s/100,h=o.position[3]*n/100,g=o.position[0]*s/100,y=o.position[1]*n/100,O=Math.round(h/1.5),t.font=O+"pt Play";;){if(O<5||t.measureText(o.value).width<m)break;O-=1,t.font=O+"pt Play"}t.textBaseline="middle",t.fillStyle=o.color,null==o.align||"center"===o.align?(t.textAlign="center",t.fillText(o.value,g+m/2,y+h/2)):"left"===o.align?(t.textAlign="left",t.fillText(o.value,g,y+h/2)):"right"===o.align&&(t.textAlign="right",t.fillText(o.value,g+m,y+h/2));break;case"player":m=o.position[2]*s/100,h=o.position[3]*n/100,g=o.position[0]*s/100,y=o.position[1]*n/100,d=o.id,null!=d&&null!=a&&(t.save(),t.rect(g,y,m,h),t.clip(),r=a.names.getCustom(d),p=a.names.get(d),null!=r&&(I=I1O00.I0II1(r.badge,r.laser,r.finish,48,r.hue),I.complete&&t.drawImage(I,g,y,2*h,h)),null!=p&&(null!=o.color&&(t.fillStyle=o.color),t.textAlign="left",t.textBaseline="middle",t.fillText(p,g+2.25*h,y+h/2),t.restore()))}}catch(t){}return t.restore()},e}(IIIlO),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ChooseShipPage=function(e){function i(e,s){this.I110I=e,this.mode=s,i.I0Il1.constructor.call(this),this.I110I.is_app&&(this.quit_button=new QuitDMButton(this.I110I,200,function(t){return function(){return window.onbeforeunload=null,document.location.hash="",document.location.reload()}}()),this.add(this.quit_button,[0,.94,.2,.06]),this.animate(this.quit_button,.75)),this.nextround=new l0llO(t("Choose your ship")),this.nextround.font="Play",this.nextround.color="#FFF",this.nextround.background=null,this.nextround.text_shadow.opacity=1,this.nextround.text_shadow.blur=20,this.nextround.text_shadow.color="#F80",this.nextround.stroke_size=4,this.nextround.stroke_color="#000",this.nextround.blending=THREE.NormalBlending,this.add(this.nextround,[.1,.3,.8,.05]),this.animate(this.nextround,1),this.buttons=[]}return extend(i,e),i.prototype.start=function(t){var e,i;this.visible=!0,this.I110I.display.showCursor(),this.createButtons(t),this.nextround.visible=!0,this.animate(this.nextround,0),null!=this.quit_button&&(this.animate(this.quit_button,0),this.quit_button.enabled=!0),this.I110I.is_app&&(null==this.caret&&(this.caret=new Caret("OlOI1"),this.caret_index=0,this.add(this.caret)),e=this.buttons[0].O0l1I[0]+this.buttons[0].O0l1I[2]/2,i=this.buttons[0].O0l1I[1],this.caret.visible=!0,this.caret.O0l1I=this.caret.lO110=[e-.025,i-.02,.05,.05],this.buttons.length>1&&(this.caret_spacing=(this.buttons[1].O0l1I[0]-this.buttons[0].O0l1I[0])/.05),this.I110I.IOO1I.control.setNavigationListener(this))},i.prototype.animate=function(t,e){return t.l000l.l1lIO({I0O1O:.5,I1ll0:.5,opacity:0}),t.l000l.pause(e),t.l000l.push({d:1,k:.01,f:.17})},i.prototype.disappear=function(t){return t.l000l.set({d:1,k:.05,f:.2,opacity:0,I0O1O:.5,I1ll0:.5})},i.prototype.bump=function(t){return t.l000l.set({d:.1,I0O1O:1.1,I1ll0:1.1,k:.1,f:.3}),t.l000l.push({d:.8,k:.05,f:.2})},i.prototype.scoranim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.5,III1l:2*(Math.random()-.5)}),t.l000l.pause(Math.random()),t.l000l.push({d:4,k:.01,f:.2})},i.prototype.superanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01,rotation:2*Math.PI}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.topanim=function(t){return t.l000l.l1lIO({I0O1O:.01,I1ll0:.01}),t.l000l.push({d:4,k:.05,f:.2})},i.prototype.removeButtons=function(){var t,e,i,s;for(s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],t.dispose(),this.remove(t);return this.buttons=[]},i.prototype.createButtons=function(t){var e,i,s,n,l,a,o,r,h;for(this.removeButtons(),i=s=0,l=t.length;s<l;i=++s)r=t[i],t[i]=this.mode.II1l1.ships_by_code[r];for(o=t.length,h=Math.min(.25,1/o),i=n=0,a=t.length;n<a;i=++n)r=t[i],e=new ShipSelectButton(this.I110I,this.mode,r,-Math.PI/8+i/Math.max(1,o-1)*Math.PI/4),this.add(e,[.5-o/2*h+i*h+.01,.36,h-.02,.45]),this.animate(e,.5*i),this.buttons.push(e),1===t.length&&e.setSelected(!0)},i.prototype.shipSelected=function(t){var e,i,s,n;for(n=this.buttons,i=0,s=n.length;i<s;i++)e=n[i],e.setSelected(e===t);return this.mode.shipSelected(t.ship)},i.prototype.hideButtons=function(){var t,e,i,s;for(s=this.buttons,e=0,i=s.length;e<i;e++)t=s[e],this.disappear(t),t.enabled=!1;this.disappear(this.nextround),null!=this.caret&&(this.caret.visible=!1),setTimeout(function(e){return function(){var i,s,n;for(n=e.buttons,i=0,s=n.length;i<s;i++)t=n[i],e.remove(t);return e.remove(e.nextround)}}(this),1e3)},i.prototype.gamepadNavigation=function(t){switch(t){case"left":return this.setIndex((this.caret_index+this.buttons.length-1)%this.buttons.length);case"right":return this.setIndex((this.caret_index+1)%this.buttons.length);case"ok":return this.buttons[this.caret_index].l11Il(0,0,0),this.buttons[this.caret_index].I11IO(0,0,0);case"cancel":return window.onbeforeunload=null,document.location.hash="",document.location.reload()}},i.prototype.setIndex=function(t){if(null!=this.caret&&t!==this.caret_index)return this.caret_index=t,this.caret.setOffset(this.caret_index*this.caret_spacing,0)},i.prototype.mouseOver=function(t){var e,i,s,n;for(n=this.buttons,e=i=0,s=n.length;i<s;e=++i)n[e]===t&&this.setIndex(e)},i}(Il0ll),this.ModObject=function(){function t(t,e,i){this.I0llI=t,this.object=e,this.type=i,this.type.IOO0l(function(t){return function(e){return t.l1OI0=e,t.l1OI0.position.set(t.object.position.x,t.object.position.y,t.object.position.z),t.l1OI0.scale.set(t.object.scale.x,t.object.scale.y,t.object.scale.z),t.l1OI0.rotation.set(t.object.rotation.x,t.object.rotation.y,t.object.rotation.z),t.I0llI.I0llI.add(t.l1OI0)}}(this))}return t.prototype.set=function(t){if(null!=t.position&&(this.object.position=t.position,null!=this.l1OI0&&this.l1OI0.position.set(this.object.position.x,this.object.position.y,this.object.position.z)),null!=t.scale&&(this.object.scale=t.scale,null!=this.l1OI0&&this.l1OI0.scale.set(this.object.scale.x,this.object.scale.y,this.object.scale.z)),null!=t.rotation&&(this.object.rotation=t.rotation,null!=this.l1OI0))return this.l1OI0.rotation.set(this.object.rotation.x,this.object.rotation.y,this.object.rotation.z)},t.prototype.remove=function(){if(null!=this.l1OI0)return this.I0llI.I0llI.remove(this.l1OI0)},t}(),this.ModObjectType=function(){function t(t){var e,i,s;this.spec=t,this.id=this.spec.id,s=new THREE.LoadingManager,i=new THREE.OBJLoader(s),e=this.spec.obj,i.load(e,function(t){return function(e){return t.object=e,t.checkLoaded()}}(this)),this.spec.emissive&&(this.emissive_img=new Image,this.emissive_img.crossOrigin="Anonymous",this.emissive_img.src=this.spec.emissive,this.emissive_img.onload=function(t){return function(){return t.emissive=new THREE.Texture(t.emissive_img),t.emissive.needsUpdate=!0,t.checkLoaded()}}(this)),this.spec.diffuse&&(this.diffuse_img=new Image,this.diffuse_img.crossOrigin="Anonymous",this.diffuse_img.src=this.spec.diffuse,this.diffuse_img.onload=function(t){return function(){return t.diffuse=new THREE.Texture(t.diffuse_img),t.diffuse.needsUpdate=!0,t.checkLoaded()}}(this)),this.spec.specular&&(this.specular_img=new Image,this.specular_img.crossOrigin="Anonymous",this.specular_img.src=this.spec.specular,this.specular_img.onload=function(t){return function(){return t.specular=new THREE.Texture(t.specular_img),t.specular.needsUpdate=!0,t.checkLoaded()}}(this)),this.spec.bump&&(this.bump_img=new Image,this.bump_img.crossOrigin="Anonymous",this.bump_img.src=this.spec.bump,this.bump_img.onload=function(t){return function(){return t.bump=new THREE.Texture(t.bump_img),t.bump.needsUpdate=!0,t.checkLoaded()}}(this)),this.queue=[]}return t.prototype.checkLoaded=function(){if(null!=this.object&&!(null!=this.spec.emissive&&null==this.emissive||null!=this.spec.diffuse&&null==this.diffuse||null!=this.spec.specular&&null==this.specular||null!=this.spec.bump&&null==this.bump))for(this.updateMaterial(),this.l1OI0=this.object.children[0];this.queue.length>0;)this.IOO0l(this.queue.splice(0,1)[0])},t.prototype.IOO0l=function(t){return null==this.l1OI0?this.queue.push(t):t(new THREE.Mesh(this.l1OI0.geometry,this.material))},t.l1l00=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b;for(null==e&&(e=50),m=function(t,i,s){var n,l;return e=s.length,n=Math.atan2(i,-t),n=Math.round((n+2*Math.PI)/(2*Math.PI)*e)%e,l=Math.sqrt(t*t+i*i),s[n]=Math.max(s[n],l)},s=new THREE.Geometry,s.fromBufferGeometry(t),t=s,O=[],l=o=0,I=e-1;0<=I?o<=I:o>=I;l=0<=I?++o:--o)O[l]=0;for(c=t.faces,r=0,u=c.length;r<u;r++)for(n=c[r],f=t.vertices[n.a],g=t.vertices[n.b],y=t.vertices[n.c],l=h=0;h<=99;l=h+=1)i=l/100,v=f.x*i+g.x*(1-i),b=f.y*i+g.y*(1-i),m(v,b,O),v=y.x*i+g.x*(1-i),b=y.y*i+g.y*(1-i),m(v,b,O),v=y.x*i+f.x*(1-i),b=y.y*i+f.y*(1-i),m(v,b,O);for(a=d=0,p=O.length-1;0<=p?d<=p:d>=p;a=0<=p?++d:--d)O[a]=parseFloat(O[a].toFixed(3));return O},t.prototype.updateMaterial=function(){return null!=this.emissive&&null==this.diffuse&&null==this.specular&&null==this.bump?(this.emissiveColor=null!=this.emissive||null!=this.spec.emissiveColor?null!=this.spec.emissiveColor?this.spec.emissiveColor:16777215:0,this.material=new THREE.MeshBasicMaterial({color:this.emissiveColor,map:this.emissive,side:THREE.DoubleSide,transparent:null==this.spec.transparent||this.spec.transparent})):null==this.specular&&null==this.bump&&null==this.spec.specularColor?(this.diffuseColor=null!=this.diffuse||null!=this.spec.diffuseColor?null!=this.spec.diffuseColor?this.spec.diffuseColor:16777215:0,this.emissiveColor=null!=this.emissive||null!=this.spec.emissiveColor?null!=this.spec.emissiveColor?this.spec.emissiveColor:16777215:0,this.material=new THREE.MeshLambertMaterial({color:this.diffuseColor,map:this.diffuse,emissive:this.emissiveColor,emissiveMap:this.emissive,side:THREE.DoubleSide,transparent:null==this.spec.transparent||this.spec.transparent})):(this.diffuseColor=null!=this.diffuse||null!=this.spec.diffuseColor?null!=this.spec.diffuseColor?this.spec.diffuseColor:16777215:0,this.emissiveColor=null!=this.emissive||null!=this.spec.emissiveColor?null!=this.spec.emissiveColor?this.spec.emissiveColor:16777215:0,this.specularColor=null!=this.specular||null!=this.spec.specularColor?null!=this.spec.specularColor?this.spec.specularColor:16777215:0,this.material=new THREE.MeshPhongMaterial({color:this.diffuseColor,map:this.diffuse,emissiveMap:this.emissive||null,specularMap:this.specular||null,bumpMap:this.bump,bumpScale:this.spec.bumpScale?this.spec.bumpScale:.1,shininess:null!=this.spec.shininess?this.spec.shininess:30,specular:this.specularColor,emissive:this.emissiveColor,side:THREE.DoubleSide,transparent:null==this.spec.transparent||this.spec.transparent}))},t}(),this.ModObjectGroup=function(){function t(t){this.I110I=t,this.I0llI=new THREE.Group,this.I110I.IOO1I.IOO1I.add(this.I0llI),this.objects={},this.object_types={}}return t.prototype.getObjectType=function(t){},t.prototype.setObject=function(t){var e,i,s;if(t.id)return e=this.objects[t.id],null!=e?e.set(t):(s=t.type.id,i=this.object_types[s],null==i&&(i=new ModObjectType(t.type),this.object_types[s]=i),e=new ModObject(this,t,i),this.objects[t.id]=e)},t.prototype.removeObject=function(t){var e,i;if(null==t){for(e in this.objects)i=this.objects[e],i.remove();return this.objects={}}if(null!=(i=this.objects[t]))return i.remove(),delete this.objects[t]},t.prototype.fixPositions=function(){var t,e;for(t in this.objects)e=this.objects[t],null!=e.l1OI0&&this.I110I.IOO1I.ll0lO.I1I1O(e.l1OI0)},t}(),extend=function(t,e){function i(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.I0Il1=e.prototype,t},hasProp={}.hasOwnProperty,this.ModdingScoreboard=function(e){function i(t,e){this.I110I=t,this.hue=e,i.I0Il1.constructor.call(this),this.blending=THREE.AdditiveBlending,this.force_ratio=10/11,this.align_top=!0,this.I110I.addKeyListener(9,this),this.shown=!0,this.components=[]}return extend(i,e),i.prototype.updateHue=function(t){return this.hue=t,this.l00ll=!0},i.prototype.updateScore=function(t){if(this.view=t,this.visible)return this.l00ll=!0},i.prototype.set=function(t){return this.components=t.components},i.prototype.interfaceHidden=function(){},i.prototype.interfaceShown=function(){},i.prototype.lOO01=function(e){var i;if(null!=this.view)return this.background="hsla("+this.hue+",70%,30%,.15)",this.medium="hsla("+this.hue+",50%,50%,.4)",this.color="hsla("+this.hue+",50%,80%,1)",e.save(),e.translate(this.px,this.OO000),i=Math.round(20*this.IOII0/512),e.font=i+"pt Play",e.textBaseline="middle",e.textAlign="left",e.fillStyle=this.color,e.beginPath(),e.moveTo(0,.025*this.IOII0),e.lineTo(0,.1*this.IOII0),e.lineTo(this.IOII0,.1*this.IOII0),this.I110I.is_mobile_app?e.lineTo(this.IOII0,0):(e.lineTo(this.IOII0,.09*this.IOII0),e.lineTo(.75*this.IOII0,.09*this.IOII0),e.lineTo(.72*this.IOII0,0)),e.lineTo(.025*this.IOII0,0),e.closePath(),e.fill(),e.fillStyle=this.background,e.fillRect(0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0),e.fillStyle=this.color,e.fillStyle="#000",e.fillText(t("Scoreboard"),.05*this.IOII0,.05*this.IOII0),this.I110I.using_gamepad?Gamepad.drawButton("RB",e,.5*this.IOII0,.05*this.IOII0,.8*i,this.hue):this.I110I.is_mobile_app||(e.textAlign="center",e.font=Math.round(.8*i)+"pt Play",e.fillText("TAB",.5*this.IOII0,.05*this.IOII0),e.strokeStyle="#000",e.strokeRect(.45*this.IOII0,.02*this.IOII0,.1*this.IOII0,.06*this.IOII0)),ModdingUIComponent.drawContent(e,0,.1*this.IOII0,this.IOII0,this.O0O10-.1*this.IOII0,this.components,this.I110I),e.restore()},i.prototype.OOOI1=function(){if(!this.shown)return null!=this.close_timer&&clearTimeout(this.close_timer),this.visible=!0,this.l00ll=!0,this.l000l.set(),this.shown=!0},i.prototype.hide=function(){if(this.shown)return this.l000l.set({III1l:1.1}),this.shown=!1,this.close_timer=setTimeout(function(t){return function(){return t.visible=!1,t.close_timer=null}}(this),1e3)},i.prototype.l11Il=function(t,e,s){return this.I110I.is_mobile_app?this.hide():i.I0Il1.l11Il.call(this,t,e,s)},i.prototype.keyPressed=function(){return this.shown?this.hide():this.OOOI1()},i.prototype.keyReleased=function(){},i}(IIIlO),this.Names=function(){function t(t){this.I110I=t,this.names=[],this.custom=[],this.requests=[],this.data=[],this.f=new lOll0}return t.prototype.get=function(t){var e;return e=this.names[t],null==e?((null==this.requests[t]||Date.now()>this.requests[t]+2e3)&&(this.I110I.lIllI.Ol10O(t),this.requests[t]=Date.now()),""):e},t.prototype.getCustom=function(t){return null==this.I110I.lIllI?null:(this.get(t),this.custom[t])},t.prototype.getData=function(t){return null==this.I110I.lIllI?null:(this.get(t),this.data[t])},t.prototype.set=function(t,e,i){return t===this.I110I.IO010.status.id&&null!=this.I110I.player_name&&this.I110I.player_name.length>0?(e=this.I110I.player_name,i.player_name=e):e=this.f.I000l(e),this.names[t]=e,this.custom[t]=i.custom,this.data[t]=i},t}(),this.l0I10=function(){function t(){this.x=0,this.y=0,this.OI10I=0,this.OI0O1=0,this.r=0,this.IOlOI=0,this.angle=0,this.O0lO0=0,this.guided=!1,this.glide=!1,this.dash=!1,this.score=0,this.shield=0,this.generator=0,this.OO1I0=0,this.invulnerable=!1,this.healing=!1,this.contribution=0,this.left=!1,this.right=!1,this.up=!1,this.strafe_left=!1,this.strafe_right=!1,this.OlOI1=!1,this.llOIl=!1,this.lllll=0,this.hue=0,this.rank=100,this.kills=0,this.bestscore=0,this.levels=0,this.alive=!1,this.lives=1,this.deaths=0,this.l10lI=!1}return t.prototype.Ol0I0=function(t){if(null!=this.O0II0&&t>=this.O0II0.getUint32(8,!0))return this.read(this.O0II0),this.O0II0=null},t.prototype.read=function(t){var e,i;return this.x=t.getFloat32(16,!0),this.y=t.getFloat32(20,!0),this.OI10I=t.getFloat32(24,!0),this.OI0O1=t.getFloat32(28,!0),this.r=t.getFloat32(32,!0),this.IOlOI=t.getFloat32(36,!0),e=t.getUint8(2),this.alive=(1&e)>0,this.up=(2&e)>0,this.lives=7&Math.floor(e/4),this.strafe_left=(32&e)>0,this.strafe_right=(64&e)>0,this.hue=Math.floor(360*t.getUint8(3)/256),this.angle=t.getUint16(12,!0),this.O0lO0=t.getUint8(40),this.rank=t.getUint8(41),i=t.getUint16(14,!0),this.type=1023&i,this.healing=0!=(1024&i),this.dash=0!=(2048&i),this.l10lI=0!=(4096&i),this.guided=0!=(8192&i),this.glide=0!=(16384&i),this.invulnerable=0!=(32768&i),this.shield=t.getUint16(42,!0),this.generator=t.getUint16(44,!0),this.OO1I0=t.getUint16(46,!0),this.score=t.getUint32(48,!0),this.levels=t.getUint32(52,!0),this.lllll=t.getUint32(8,!0)},t}(),this.OIlOO=function(){function t(t,e,i,s,n,l){this.I0O0I=e,this.shipid=s,this.laserticles=l,this.x=t.getFloat32(i,!0),this.y=t.getFloat32(i+4,!0),this.z=t.getFloat32(i+8,!0),this.OI10I=t.getFloat32(i+12,!0),this.OI0O1=t.getFloat32(i+16,!0),this.speed=t.getFloat32(i+20,!0),this.id=t.getUint16(i+24,!0),this.angle=t.getFloat32(i+26,!0),this.type=t.getUint8(i+30),this.damage=t.getUint8(i+31),this.type=Math.max(0,Math.min(6,0|this.type)),this.IOOOI=this.speed<100?120:Math.round(-2*Math.log(1-63/this.speed)*60),this.soundplayed=!1,this.hue=0,null!=n&&(null!=n.lIOI0?this.hue=n.lIOI0.hue:"number"==typeof n&&(this.hue=n)),this.laserticles.IOO1I.I110I.mode.anonymous_ships&&this.shipid!==this.laserticles.IOO1I.IO010.status.id&&(this.hue=(this.laserticles.IOO1I.I110I.hue+180)%360,this.type=0),this.IlOlO=Oll0O.hsvToRgbHex(this.hue/360,.5,1),this.laserticles.llOIl(this)}return t.prototype.kill=function(t,e,i){return this.laserticles.kill(this,t,e,i)},t.prototype.Oll11=function(t,e){var i,s,n,l;return i=Math.cos(this.angle),s=Math.sin(this.angle),n=(t-this.I0O0I)/60,l=1-Math.exp(.5*-n),e.x=this.x+i*l*100+60*this.OI10I*n,e.y=this.y+s*l*100+60*this.OI0O1*n},t}(),this.l0I11=function(){function t(t){this.I110I=t,this.ships=[],this.lasers=[],this.l1l0O=[],this.stations=[],this.projectiles=[],this.aliens=[],this.I1IOI=[],this.I0llI=new THREE.Group,this.I1llO=Date.now(),this.ll01O=0,this.IOlO0=0,this.offtime_count=0,this.time_initialized=!1,this.l100I=16,this.last_read_time=0,this.IOO11={x:0,y:0,OI10I:0,OI0O1:0,zoom:1},this.rip_plates=[],this.weapon_physics=new WeaponPhysics(this.I110I),this.alien_physics=new AlienPhysics(this.I110I)}return t.prototype.O0OlI=function(t){var e,i;if(!(t<this.last_read_time)){if(this.last_read_time=t,i=Date.now()-t,e=Math.round(i-this.I1llO),Math.abs(e)>30&&this.time_initialized,this.time_initialized)if(Math.abs(i-this.I1llO)>150){if(++this.offtime_count>3)return this.I1llO=i,this.offtime_count=0,!1}else this.offtime_count=0;else this.I1llO=i,this.time_initialized=!0;return this.I1llO>i&&(this.I1llO=.95*this.I1llO+.05*i),!0}},t.prototype.addDemoShip=function(t){var e,i,s,n,l;return l=this.I110I.mode.O1Ill.types_by_code[t.type],n=new l0Il0(this.I110I.mode.II1l1.ships_by_code[l.code],t.hue/360),i=n.I0llI,this.I0llI.add(i),e=new l01ll(this.I110I,l,!0),e.status=t,s={OIIIl:e,model:i,shipmodel:n},this.ships.push(s),this.l1l0O[t.id]=s,this.IlOOl(s)},t.prototype.Il0IO=function(t){var e,i,s,n,l,a,o;return a=new l0I10,a.read(t),a.id=t.getUint8(1),o=this.I110I.mode.O1Ill.types_by_code[a.type],i=a.hue,this.I110I.mode.anonymous_ships&&(i=(this.I110I.hue+180)%360),l=new l0Il0(this.I110I.mode.II1l1.ships_by_code[o.code],i/360),s=l.I0llI,this.I0llI.add(s),this.I0llI.add(l.lIOI0.l1OI0),e=new l01ll(this.I110I,o,!0),e.status=a,n={OIIIl:e,model:s,shipmodel:l,lIOI0:l.lIOI0},this.ships.push(n),this.l1l0O[a.id]=n,this.IlOOl(n),this.I110I.lIllI.Ol10O(a.id)},t.prototype.addStation=function(t){return this.stations.push(t),this.I0llI.add(t.I0llI)},t.prototype.updateStations=function(){var t,e,i,s,n,l;for(t=this.ll01O/60/3600%1*Math.PI*2,s=this.I110I.Ill01*Math.sqrt(2)*.5,1===this.stations.length&&(s=0),n=this.stations,e=0,i=n.length;e<i;e++)l=n[e],l.I0llI.position.x=s*Math.cos(t+l.phase),l.I0llI.position.y=s*Math.sin(t+l.phase),this.I1I1O(l.I0llI),l.III10(this.ll01O)},t.prototype.isShipVisible=function(t){var e;return null!=(e=this.l1l0O[t])&&e.model.visible},t.prototype.shipSays=function(t,e){var i,s;if(null!=(s=this.l1l0O[t])&&this.I110I.mode.acceptChat(s,e))return null==s.chatbubble?(i=s.OIIIl.status.hue,this.I110I.mode.anonymous_ships&&(i=(this.I110I.hue+180)%360),s.chatbubble=new ChatBubble(this.I110I,i,e),s.chatbubble.l1O11(e),
this.I0llI.add(s.chatbubble.l1OI0)):s.chatbubble.l1O11(e),this.IlOOl(s)},t.prototype.OOIO0=function(t,e){var i;if(null!=(i=this.l1l0O[t]))return i.lIOI0.llOl1(e)},t.prototype.I0O0l=function(t,e){var i,s,n;if(!((i=e.getUint32(8,!0))<t.status.lllll)){if(i>this.ll01O)return t.status.O0II0=e;if(!(i<this.ll01O))return t.status.read(e);if(t.status.read(e),this.ll01O-i<30){for(s=i+1,n=this.ll01O;s<=n;s+=1)t.l1O00();return t.status.OO100=this.ll01O}}},t.prototype.O001O=function(t){var e;return e=this.l1l0O[t.getUint8(1)],null!=e?this.I0O0l(e.OIIIl,t):this.Il0IO(t)},t.prototype.O0llI=function(t){var e,i,s,n;for(s=this.ships,e=0,i=s.length;e<i;e++)n=s[e],this.IlOOl(n,t);this.updateStations(),this.updateRipPlates(),this.updateProjectiles(),this.updateAliens(),this.updateAsteroids(),this.I110I.mode.fixPositions()},t.prototype.I1I1O=function(t){var e,i;return e=t.position.x-this.IOO11.x,i=t.position.y-this.IOO11.y,e>this.I110I.Ill01?t.position.x-=this.I110I.size:e<-this.I110I.Ill01&&(t.position.x+=this.I110I.size),i>this.I110I.Ill01?t.position.y-=this.I110I.size:i<-this.I110I.Ill01?t.position.y+=this.I110I.size:void 0},t.prototype.fixPositionXY=function(t){var e,i;return e=t.x-this.IOO11.x,i=t.y-this.IOO11.y,e>this.I110I.Ill01?t.x-=this.I110I.size:e<-this.I110I.Ill01&&(t.x+=this.I110I.size),i>this.I110I.Ill01?t.y-=this.I110I.size:i<-this.I110I.Ill01?t.y+=this.I110I.size:void 0},t.prototype.IlOOl=function(t,e){var i,s,n,l,a;return null==e&&(e=1),this.I110I.mode.anonymous_ships||null!=(i=this.I110I.names.getCustom(t.OIIIl.status.id))&&(t.shipmodel.finish=i.finish),t.model.position.x=t.OIIIl.status.x,t.model.position.y=t.OIIIl.status.y,t.shipmodel.l10lI=t.OIIIl.status.l10lI,null!=t.lIOI0&&(t.lIOI0.l1OI0.position.x=t.OIIIl.status.x,t.lIOI0.l1OI0.position.y=t.OIIIl.status.y-2-t.OIIIl.type.radius,t.lIOI0.l1OI0.position.z=1,t.lIOI0.III10(this.I110I,this.I110I.names.get(t.OIIIl.status.id),t.OIIIl.status,t.OIIIl.instance),this.I1I1O(t.lIOI0.l1OI0)),null!=t.chatbubble&&(t.chatbubble.l1OI0.position.x=t.OIIIl.status.x,t.chatbubble.l1OI0.position.y=t.OIIIl.status.y+4,t.chatbubble.l1OI0.position.z=1,t.chatbubble.IO0O1(),this.I1I1O(t.chatbubble.l1OI0)),s=this.I110I.mode.anonymous_ships?(this.I110I.hue+180)%360/360:t.OIIIl.status.hue/360,(t.OIIIl.type.code!==t.OIIIl.status.type||Math.abs(t.shipmodel.hue-s)>.01)&&(t.OIIIl.setType(this.I110I.mode.O1Ill.types_by_code[t.OIIIl.status.type]),this.I0llI.remove(t.model),this.I0llI.remove(t.lIOI0.l1OI0),t.shipmodel.dispose(),n=t.OIIIl.status.hue,this.I110I.mode.anonymous_ships&&(n=(this.I110I.hue+180)%360),a=new l0Il0(this.I110I.mode.II1l1.ships_by_code[t.OIIIl.status.type],n/360),a.bump(this.ll01O),l=a.I0llI,this.I0llI.add(l),this.I0llI.add(a.lIOI0.l1OI0),t.shipmodel=a,t.model=l,t.lIOI0=a.lIOI0),this.I1I1O(t.model),t.model.rotation.x=t.OIIIl.I0100,t.model.rotation.y=.4*t.OIIIl.O1001,t.model.rotation.z=t.OIIIl.status.r+Math.PI,t.model.visible=this.ll01O-t.OIIIl.status.lllll<90&&t.OIIIl.status.alive,null!=t.lIOI0&&(t.lIOI0.l1OI0.visible=this.ll01O-t.OIIIl.status.lllll<90&&t.OIIIl.status.alive&&!t.OIIIl.status.guided),t.shipmodel.propstep(t.OIIIl.status.up||t.OIIIl.status.dash),t.shipmodel.invulnerable=t.OIIIl.status.invulnerable,t.shipmodel.III10(this.ll01O),t.OIIIl.pods.updateModels(t.model.visible),t.OIIIl.pods.fixPositions()},t.prototype.removeShip=function(t){var e,i,s,n;for(this.I0llI.remove(t.model),t.shipmodel.dispose(),null!=t.lIOI0&&this.I0llI.remove(t.lIOI0.l1OI0),n=this.ships,e=i=0,s=n.length;i<s;e=++i)if(n[e]===t){this.ships.splice(e,1);break}},t.prototype.O11ll=function(){var t,e,i,s,n;for(n=Date.now(),Math.abs(n-this.IOlO0)>1e3&&(this.IOlO0=n,this.lllI1=n-this.l100I),this.l100I=.05*(n-this.lllI1)+.95*this.l100I,this.lllI1=n,this.IOlO0=.99*(this.IOlO0+this.l100I)+.01*n,n=this.IOlO0,s=Math.round((n-this.I1llO)/1e3*60),t=Math.max(0,Math.min(30,s-this.ll01O)),e=1,i=t;e<=i;e+=1)this.l1O00();return this.ll01O=s,t},t.prototype.l1O00=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;for(g=null!=this.I110I.mode.options.shield_regen_factor?this.I110I.mode.options.shield_regen_factor:1,d=null!=this.I110I.mode.options.power_regen_factor?this.I110I.mode.options.power_regen_factor:1,this.IO010.status.alive&&(this.IO010.status.generator=Math.max(this.IO010.status.generator,Math.min(this.IO010.instance.generator_capacity,this.IO010.status.generator+this.IO010.instance.generator_reload/60*d))),this.IO010.status.alive&&(this.IO010.status.shield=Math.min(this.IO010.instance.shield_capacity,this.IO010.status.shield+this.IO010.instance.shield_reload/60*g)),this.IO010.status.Ol0I0(this.ll01O),this.IO010.l1O00(),this.IO010.status.OO100=this.ll01O+1,p=this.ships,i=0,n=p.length;i<n;i++)y=p[i],y.OIIIl.status.Ol0I0(this.ll01O),y.OIIIl.l1O00(),y.OIIIl.status.OO100=this.ll01O+1;for(O=this.projectiles,s=0,l=O.length;s<l;s++)u=O[s],u.l1O00();for(m=this.aliens,r=0,a=m.length;r<a;r++)t=m[r],t.l1O00();for(f=this.I1IOI,h=0,o=f.length;h<o;h++)t=f[h],t.l1O00();for(this.I110I.mode.modeStep(),this.I0010(),this.lll1I(),e=I=this.projectiles.length-1;I>=0;e=I+=-1)this.projectiles[e].killed&&(this.projectiles[e].dispose(),this.projectiles.splice(e,1));for(e=c=this.aliens.length-1;c>=0;e=c+=-1)this.aliens[e].killed&&(this.aliens[e].dispose(),this.aliens.splice(e,1));for(e=v=this.I1IOI.length-1;v>=0;e=v+=-1)this.I1IOI[e].killed&&(this.I1IOI[e].dispose(),this.I1IOI.splice(e,1));this.ll01O++},t.prototype.initCamera=function(t){return null==t&&(t=1),this.IOO11.x=this.IO010.status.x,this.IOO11.y=this.IO010.status.y,this.IOO11.OI10I=0,this.IOO11.OI0O1=0,this.IOO11.zoom=t},t.prototype.lll1I=function(){var t,e,i,s,n,l,a;this.IOO11.x<this.IO010.status.x-this.I110I.Ill01?this.IOO11.x+=this.I110I.size:this.IOO11.x>this.IO010.status.x+this.I110I.Ill01&&(this.IOO11.x-=this.I110I.size),this.IOO11.y<this.IO010.status.y-this.I110I.Ill01?this.IOO11.y+=this.I110I.size:this.IOO11.y>this.IO010.status.y+this.I110I.Ill01&&(this.IOO11.y-=this.I110I.size),n=this.IO010.status.x+30*this.IO010.status.OI10I,l=this.IO010.status.y+30*this.IO010.status.OI0O1,e=n-this.IOO11.x,i=l-this.IOO11.y,t=Math.sqrt(e*e+i*i),s=100,t>s&&(e*=s/t,i*=s/t),this.IOO11.OI10I+=.02*e,this.IOO11.OI0O1+=.02*i,this.IOO11.OI10I*=.7,this.IOO11.OI0O1*=.7,this.IO010.status.alive&&(this.IOO11.x+=this.IOO11.OI10I,this.IOO11.y+=this.IOO11.OI0O1),a=Math.pow(this.IO010.type.radius/3,.3),null!=this.I110I.mode.II1l1.ships_by_code[this.IO010.type.code].zoom&&(a/=this.I110I.mode.II1l1.ships_by_code[this.IO010.type.code].zoom),this.IOO11.zoom=.995*this.IOO11.zoom+.005*a,isNaN(this.IOO11.x)||isNaN(this.IOO11.y)||isNaN(this.IOO11.OI10I)||isNaN(this.IOO11.OI0O1)},t.prototype.laser=function(t){var e,i,s,n,l,a,o,r;for(n=(t.byteLength-8)/32,o=t.getUint8(1),r=t.getUint32(4,!0),a=this.l1l0O[o],null==a&&o===this.I110I.IOO1I.IO010.status.id&&(a=this.I110I.IOO1I.ship,this.I110I.IOO1I.IO010.status.generator=t.getUint16(2,!0)),0===o&&(a=t.getUint16(2,!0)),e=8,i=1,l=n;i<=l;i+=1)s=new OIlOO(t,r,e,o,a,this.I110I.IOO1I.laserticles),this.lasers.push(s),e+=32,o===this.I110I.IOO1I.IO010.status.id&&s.damage===this.IO010.pulsePower()&&(this.IO010.last_pulse_shot=r)},t.prototype.I0010=function(){var t,e,i,s,n,l;for(this.I110I.IOO1I.laserticles.III10(this.ll01O),l=this.lasers,e=0,n=l.length;e<n;e++)s=l[e],s.I0O0I<=this.ll01O&&(s.soundplayed||(s.soundplayed=!0,s.shipid===this.IO010.status.id?this.I110I.OlIl1.llOIl(s.damage):this.I110I.OlIl1.I0Ol1(s.x,s.y,s.damage)));for(t=i=this.lasers.length-1;i>=0;t=i+=-1)s=this.lasers[t],this.ll01O>s.I0O0I+120&&(s.kill(),this.lasers.splice(t,1))},t.prototype.I0101=function(t,e,i,s){var n,l,a;for(n=l=this.lasers.length-1;l>=0;n=l+=-1)if(a=this.lasers[n],a.id===t)return a.kill(e,i,s),this.lasers.splice(n,1),a;return null},t.prototype.showRipPlate=function(t){var e,i,s;return i=this.I110I.names.get(t.status.id),e=this.I110I.names.getCustom(t.status.id),t===this.I110I.IOO1I.IO010&&(i=this.I110I.player_name),s=new RIPPlate(i,e),s.l1OI0.position.x=t.status.x,s.l1OI0.position.y=t.status.y,this.fixPositionXY(s.l1OI0),this.rip_plates.push(s),this.I110I.IOO1I.IOO1I.add(s.l1OI0)},t.prototype.updateRipPlates=function(){var t,e,i;for(t=e=this.rip_plates.length-1;e>=0;t=e+=-1)i=this.rip_plates[t],this.fixPositionXY(i.l1OI0),i.III10(),i.remove&&(this.rip_plates.splice(t,1),this.I110I.IOO1I.IOO1I.remove(i.l1OI0),i.dispose())},t.prototype.updateProjectiles=function(){var t,e,i,s;for(s=this.projectiles,t=0,e=s.length;t<e;t++)i=s[t],i.updateModel()},t.prototype.updateAliens=function(){var t,e,i,s;for(s=this.aliens,e=0,i=s.length;e<i;e++)t=s[e],t.updateModel()},t.prototype.updateAsteroids=function(){var t,e,i,s;for(s=this.I1IOI,e=0,i=s.length;e<i;e++)t=s[e],t.updateModel()},t.prototype.projectileStatus=function(t){var e,i,s,n,l,a;for(a=t.getUint8(1),e=t.getUint16(2,!0),l=this.projectiles,i=0,s=l.length;i<s;i++)if(n=l[i],n.typeid===a&&n.id===e)return n.III10(t);switch(a){case 10:case 11:case 12:return n=new Rocket(this.I110I,t),this.projectiles.push(n);case 20:case 21:return n=new Mine(this.I110I,t),this.projectiles.push(n)}},t.prototype.projectileExplosion=function(t,e){var i,s,n,l;for(l=this.projectiles,i=0,s=l.length;i<s;i++)if(n=l[i],n.typeid===t&&n.id===e)return this.I110I.IOO1I.IlI00.blast(n.x,n.y,3*n.type.damage_area/15),this.I110I.OlIl1.IOII1(n.x,n.y,1,.25),this.I110I.IOO1I.shakeCamera(n.x,n.y,n.type.damage/20),void(n.killed=!0)},t.prototype.alienStatus=function(t){var e,i,s,n,l;for(t.getUint8(1),i=t.getUint16(2,!0),l=this.aliens,s=0,n=l.length;s<n;s++)if(e=l[s],e.id===i)return e.III10(t);return e=new Alien(this.I110I,t),this.aliens.push(e)},t.prototype.findAlien=function(t){var e,i,s,n;for(n=this.aliens,i=0,s=n.length;i<s;i++)if(e=n[i],e.id===t)return e;return null},t.prototype.alienExplosion=function(t,e){var i,s,n,l;for(l=this.aliens,s=0,n=l.length;s<n;s++)if(i=l[s],i.id===t)return this.I110I.IOO1I.IlI00.explode(i.x,i.y,null,i.getSpec("IOII1")),this.I110I.OlIl1.IOII1(i.x,i.y,1,.25),this.I110I.IOO1I.shakeCamera(i.x,i.y,i.getSpec("IOII1")),i.killed=!0,void(null!=e&&e>0&&(this.I110I.display.screen.O0lll.figures.bonus(e,i.x,i.y),(null==this.last_alien_shot||i.max_shield>this.last_alien_shot)&&(this.last_alien_shot=i.max_shield,this.I110I.takeScreenshot("frag",Date.now()+200,this.I110I.IO010.type.level+i.max_shield/50))))},t.prototype.asteroidStatus=function(t){var e,i,s,n,l;for(i=t.getUint16(2,!0),l=this.I1IOI,s=0,n=l.length;s<n;s++)if(e=l[s],e.id===i)return e.III10(t);return e=new MobileAsteroid(this.I110I,t),this.I1IOI.push(e)},t.prototype.asteroidExplosion=function(t){var e,i,s,n;for(n=this.I1IOI,i=0,s=n.length;i<s;i++)if(e=n[i],e.id===t)return this.I110I.IOO1I.IlI00.explode(e.x,e.y,null,e.size/10),this.I110I.OlIl1.IOII1(e.x,e.y,1,.25),this.I110I.IOO1I.shakeCamera(e.x,e.y,e.size/10),void(e.killed=!0)},t}(),this.OlO1I=function(){function t(t,e){this.address=t,this.OI001=e,this.socket=WSS.create(this.address),this.socket.onopen=function(t){return function(){return t.start=Date.now(),t.socket.send("ping")}}(this),this.socket.onmessage=function(t){return function(e){if("pong"===e.data&&(t.time=Date.now()-t.start,null!=t.OI001))return t.OI001(t.time)}}(this)}return t}(),bind=function(t,e){return function(){return t.apply(e,arguments)}},this.I10IO=function(){function t(t,e,i){var s;if(this.I110I=t,this.OI001=e,this.IIIIl=null!=i?i:{},this.pong=bind(this.pong,this),null!=localStorage.getItem("force_server"))return this.OI001(localStorage.getItem("force_server"),"Forced",!0);s=new XMLHttpRequest,s.open("GET","https://starblast.io/simstatus.json",!0),s.onreadystatechange=function(t){return function(){var e,i,n,l,a;if(4===s.readyState&&200===s.status){for(a=JSON.parse(s.responseText),t.regions={},e=0,i=a.length;e<i;e++)l=a[e],null==t.IIIIl[l.address]&&(n=t.regions[l.location],null==n&&(n=new ServerRegion(t.I110I,l.location),t.regions[l.location]=n),n.add(l));t.sendPingRequests()}}}(this),s.send(null)}return t.prototype.sendPingRequests=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I;if(I="Auto",null!=this.I110I.preferred){for(s in this.regions)for(a=this.regions[s],o=a.servers,e=0,n=o.length;e<n;e++)for(u=o[e],r=u.systems,i=0,l=r.length;i<l;i++)if(d=r[i],!d.survival&&d.id===this.I110I.preferred)return void this.OI001(u.address,u.location,!1);return this.I110I.cannotJoin()}if(null!=(t=localStorage.getItem("region"))&&null!=this.regions[t]&&this.regions[t].servers.length>0)return localStorage.removeItem("region"),this.pong(this.regions[t]);if(I&&null!=this.regions[I]&&this.regions[I].servers.length>0)return this.regions[I].ping(function(t){return function(e){return t.pong(e)}}(this));h=[];for(s in this.regions)this.regions[s].servers.length>0?h.push(this.regions[s].ping(function(t){return function(e){return t.pong(e)}}(this))):h.push(void 0);return h},t.prototype.refusedBy=function(t){var e,i,s,n,l,a,o;this.found=!1;for(s in this.regions)for(l=this.regions[s],a=l.servers,e=i=0,n=a.length;i<n;e=++i)o=a[e],o.address===t&&l.servers.splice(e,1);this.sendPingRequests()},t.prototype.pong=function(t){if(!this.found)return this.found=!0,localStorage.setItem("last_best_region",t.name),t.findBestServer(this.OI001,this.I110I.preferred)},t}(),this.ServerRegion=function(){function t(t,e){this.I110I=t,this.name=e,this.servers=[]}return t.prototype.add=function(t){return this.servers.push(t)},t.prototype.ping=function(t){var e,i,s;if(this.OI001=t,0!==this.servers.length)for(this.servers.sort(function(t,e){return t.current_players-e.current_players}),e=i=0,s=Math.min(1,this.servers.length-1);i<=s;e=i+=1)this.l1II1(this.servers[e])},t.prototype.l1II1=function(t){return new OlO1I(t.address,function(t){return function(e){return t.OI001(t)}}(this))},t.prototype.findBestServer=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A;if(i=null,w=0,null!=this.I110I.mode)if(null!=this.I110I.mode.findBestServer)i=this.I110I.mode.findBestServer(this.servers);else{for(k=this.servers,o=0,u=k.length;o<u;o++)for(T=k[o],_=T.systems,r=0,d=_.length;r<d;r++)C=_[r],C.open&&C.players<this.I110I.mode.max_enter_players&&C.mode===this.I110I.mode.id&&C.mod_id===this.I110I.mode.mod_id&&C.time<this.I110I.mode.max_enter_time&&(w+=100*(this.I110I.mode.max_enter_players-C.players)/this.I110I.mode.max_enter_players,w+=100*(this.I110I.mode.max_enter_time-C.time)/this.I110I.mode.max_enter_time);if(w>0)for(b=Math.floor(Math.random()*w),w=0,z=this.servers,h=0,I=z.length;h<I;h++){for(T=z[h],M=T.systems,m=0,c=M.length;m<c&&(C=M[m],C.open&&C.players<this.I110I.mode.max_enter_players&&C.mode===this.I110I.mode.id&&C.mod_id===this.I110I.mode.mod_id&&C.time<this.I110I.mode.max_enter_time&&(w+=100*(this.I110I.mode.max_enter_players-C.players)/this.I110I.mode.max_enter_players,w+=100*(this.I110I.mode.max_enter_time-C.time)/this.I110I.mode.max_enter_time,b<w&&(i=T)),null==i);m++);if(null!=i)break}}if(null!=i)return t(i.address,i.location,!1);if(null==this.I110I.mode||"modding"!==this.I110I.mode.id||"prototypes"!==this.I110I.mode.mod_id&&"src"!==this.I110I.mode.mod_id)for(a=v=this.servers.length-1;v>=0;a=v+=-1)this.servers[a].modding&&this.servers.splice(a,1);else{for(f=!1,a=g=this.servers.length-1;g>=0;a=g+=-1)this.servers[a].modding&&(f=!0);if(f)for(a=y=this.servers.length-1;y>=0;a=y+=-1)this.servers[a].modding||this.servers.splice(a,1)}for(n=[],E=this.servers,x=0,p=E.length;x<p;x++)T=E[x],0===T.systems.length&&n.push(T);if(P=null!=this.I110I.mode?this.I110I.mode.id:"",l=function(t){var e,i,s,n;for(t+=P,e=331,i=197,s=0,a=n=t.length-1;n>=0;a=n+=-1)s=((s+t.charCodeAt(a))*e+i)%1e9;return s},n.length>0)return n.sort(function(t,e){return l(t.address)-l(e.address)}),t(n[0].address,n[0].location,!0);if(this.servers.length>0){for(this.servers.sort(function(t,e){return t.usage.cpu-e.usage.cpu}),s=this.servers[0].usage.cpu,R=[],S=this.servers,A=0,O=S.length;A<O;A++)T=S[A],T.usage.cpu<s+5&&R.push(T);return R.sort(function(t,e){return l(t.address)-l(e.address)}),t(R[0].address,R[0].location,!0)}},t}(),this.PrivateServerFinder=function(){function t(t,e,i,s){var n;if(this.I110I=t,this.region=e,this.OI001=i,this.modding=null!=s&&s,null!=localStorage.getItem("force_server"))return this.OI001(localStorage.getItem("force_server"),"Forced",!0);n=new XMLHttpRequest,n.open("GET","https://starblast.io/simstatus.json",!0),n.onreadystatechange=function(t){return function(){var e,i,s,l,a,o,r;if(4===n.readyState&&200===n.status){for(r=JSON.parse(n.responseText),t.regions={},i=0,s=r.length;i<s;i++)a=r[i],a.modding&&!t.modding||t.modding&&!a.modding||(l=t.regions[a.location],null==l&&(l=new PrivateServerRegion(a.location),t.regions[a.location]=l),l.add(a));t.regions[t.region]&&(o=t.regions[t.region].servers,o.sort(function(t,e){return t.usage.cpu-e.usage.cpu}),e=o[0],t.OI001(e.address))}}}(this),n.send(null)}return t}(),this.PrivateServerRegion=function(){function t(t){this.name=t,this.servers=[]}return t.prototype.add=function(t){return this.servers.push(t)},t}(),this.IOIOI=function(){function e(t,e,i,s,n){var l,a;this.I110I=t,this.address=e,this.hue=s,null==n&&(n=!1),this.status_sent_count=0,this.accepted=!1,this.socket=WSS.create(this.address),this.socket.onmessage=function(t){return function(e){var i;if("string"!=typeof(e=e.data))return null!=e.arrayBuffer?e.arrayBuffer().then(function(e){return t.llO1l(e)}):(i=new FileReader,i.onload=function(e){return t.llO1l(e.target.result)},i.readAsArrayBuffer(e));if("pong"===e)return t.pong();if(e=JSON.parse(e),e.name)switch(e.name){case"welcome":return t.lO0I1(e.data);case"cannot_join":return t.cannotJoin();case"entered":return t.entered(e.data);case"player_name":return t.OOIO0(e);case"ecp_verified":return t.ECPVerified(e);case"modemsg":return t.modeMsg(e);case"error":return t.error(e)}}}(this),this.socket.onclose=function(t){return function(){return t.l00OO()}}(this),this.I110I.O1IO0.IOIIO?(l=null,a=this.I110I.O1IO0.steam_client_id):(a=null,l=this.I110I.l10lI.key),this.socket.onopen=function(t){return function(){var e;if(t.socket.send(JSON.stringify({name:"join",data:{mode:t.I110I.mode_id,mod_id:t.I110I.mode.mod_id,spectate:t.I110I.mode.spectate,spectate_ship:t.I110I.mode.spectate_ship,player_name:(new lOll0).I000l(t.I110I.player_name),hue:t.hue,preferred:null!=t.I110I.preferred&&t.I110I.preferred,bonus:i,ecp_key:l,steamid:a,ecp_custom:t.I110I.l10lI.custom,create:n,client_ship_id:t.I110I.getClientShipID(),client_tr:t.I110I.OIO00()}})),t.I110I.l10lI.OO11I()&&null!=t.I110I.l10lI.key&&t.I110I.l10lI.key.length>5)try{if(e=localStorage.getItem("l10lI I110I"),null==e&&(e="0"),e=parseInt(e),Date.now()>e+72e5)return t.I110I.sendGAEvent("ecp",t.I110I.l10lI.key.substring(0,5)),localStorage.setItem("l10lI I110I",Date.now())}catch(t){t}}}(this),this.alive_ships=0,this.ping_count=0,this.ping_total=0,this.ping_value=0}return e.prototype.ECPVerified=function(t){var e,i,s;if(i=t.data.key,s=t.data.valid,e=t.data.custom,this.I110I.l10lI.llI10(i,s,e),s)return this.I110I.IOO1I.ship.finish=this.I110I.l10lI.custom.finish},e.prototype.cannotJoin=function(){return this.I110I.cannotJoin()},e.prototype.lO0I1=function(t){var e;return t.version>CONSTANTS.PROTOCOL_VERSION?void this.I110I.O1IO0.reloadGame():(null!=t.mode&&(this.I110I.setMode(t.mode.id,t.mode),this.I110I.mode.setOptions(t.mode)),e=new l000I(t.seed),t.system_hue=120+e.O1010(240),this.accepted=!0,null!=t.size&&this.I110I.setSize(t.size),this.I110I.lO0I1(t),this.join_time=Date.now())},e.prototype.enter=function(t){return null==t&&(t={}),t.spectate=this.I110I.mode.spectate,this.socket.send(JSON.stringify({name:"enter",data:t}))},e.prototype.entered=function(t){return this.I110I.IO010.status.id=t.shipid,this.I110I.entered(t)},e.prototype.ping=function(){return this.cancel_ping||(this.ping_time=Date.now(),this.socket.send("ping")),this.cancel_ping=!1},e.prototype.pong=function(){var t;return t=Date.now()-this.ping_time,this.measuredPing(t)},e.prototype.measuredPing=function(t){if(!(t>=1e3))return t=Math.max(0,t-8),Math.abs(t-this.ping_value)>20?this.ping_value=t:this.ping_value=.9*this.ping_value+.1*t,this.I110I.ping=Math.round(this.ping_value),this.ping_count++,this.ping_total+=t,60===this.ping_count?(this.ping_total/60<80&&null!=this.I110I.region&&localStorage.setItem("region",this.I110I.region),this.I110I.sendGAEvent("ping_evt",50*Math.ceil(this.ping_total/600/5)+"ms")):void 0},e.prototype.respawn=function(t){return this.respawn_callback=t,this.socket.send(JSON.stringify({name:"respawn"}))},e.prototype.say=function(t){return this.socket.send(JSON.stringify({name:"say",data:t}))},e.prototype.lOlII=function(t){var e,i,s,n,l;return l=new DataView(t),n=l.getUint32(4,!0),this.I110I.IOO1I.ll0lO.O0OlI(n),l.getUint8(1)!==this.I110I.IO010.status.id?this.I110I.IOO1I.ll0lO.O001O(l):(this.statusPingCheck(l),i=l.getUint8(2),e=(1&i)>0,e&&(this.I110I.IO010.status.killed=!1),this.I110I.IO010.status.alive&&!e&&setTimeout(function(t){return function(){if(!t.I110I.IO010.status.killed&&!t.I110I.mode.ignoreKills())return t.killed(0,0)}}(this),1e3),this.I110I.IOO1I.ll0lO.I0O0l(this.I110I.IO010,l),null!=this.respawn_callback&&e?(this.I110I.IO010.OO111(),s=this.respawn_callback,this.respawn_callback=null,s()):void 0)},e.prototype.laser=function(t){return this.I110I.IOO1I.ll0lO.laser(t)},e.prototype.l00OO=function(){return this.accepted?this.I110I.l00OO():this.I110I.refused()},e.prototype.killed=function(e,i){var s,n;if(!this.I110I.IO010.status.killed&&(this.I110I.IO010.status.killed=!0,this.I110I.IO010.status.deaths++,this.I110I.IO010.status.alive=!1,this.I110I.IOO1I.IlI00.explode(this.I110I.IO010.status.x,this.I110I.IO010.status.y,null,Math.max(5,this.I110I.IO010.type.radius)),this.I110I.OlIl1.IOII1(this.I110I.IO010.status.x,this.I110I.IO010.status.y,4,.25),this.I110I.IOO1I.shakeCamera(this.I110I.IO010.status.x,this.I110I.IO010.status.y,20),n=this.I110I.names.get(e),n.length>0&&this.I110I.message(t("%s killed you!").replace("%s",n),"#FF8"),this.I110I.mode.killed(e,0!==i,i),e>0&&null!=(s=this.I110I.IOO1I.ll0lO.l1l0O[e])))return this.I110I.sendGAEvent("kill",s.OIIIl.type.name+" kills "+this.I110I.IO010.type.name),this.I110I.takeScreenshot("killed",Date.now()+200,2*this.I110I.IO010.type.level+2*s.OIIIl.type.level)},e.prototype.llO1l=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K,W,Y,J,Z,X,Q,$,tt,et,it,st,nt,lt,at,ot,rt,ht,ut,dt,It,ct;switch(ut=new DataView(e),r=ut.getUint8(0)){case 0:this.lOlII(e);break;case 71:X=ut.getUint32(1,!0),this.I110I.IOO1I.ll0lO.survival_start=X,this.I110I.IOO1I.ll0lO.survival=!0;break;case 100:this.laser(ut);break;case 101:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),q=ut.getUint8(12),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It),n=null!=k?k.angle:null,I=null!=k?k.damage:1,U=this.I110I.IOO1I.ll0lO.l1l0O[q],null!=U?null!=k&&6===k.type?(U.shipmodel.bumpShield(),this.I110I.OlIl1.shield(dt,It)):U.OIIIl.status.shield>I?(U.shipmodel.IOlOO=1,this.I110I.OlIl1.shield(dt,It)):(this.I110I.IOO1I.IlI00.explode(dt,It,n,I/10),this.I110I.OlIl1.IOII1(dt,It)):q===this.I110I.IO010.status.id&&(null!=k&&6===k.type?(this.I110I.IOO1I.ship.bumpShield(),this.I110I.OlIl1.shield(dt,It)):this.I110I.IOO1I.IO010.status.shield>I?(this.I110I.IOO1I.ship.IOlOO=1,this.I110I.OlIl1.shield(dt,It)):(this.I110I.IOO1I.IlI00.explode(dt,It,n,I/10),this.I110I.OlIl1.IOII1(dt,It),this.I110I.IOO1I.shakeCamera(dt,It,I/20)));break;case 103:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It),n=null!=k?k.angle:0,Q=null!=k?k.damage:10,Q=Math.pow(Q/10,.5),this.I110I.IOO1I.IlI00.explode(dt,It,n,Q),this.I110I.OlIl1.IOII1(dt,It,Q);break;case 102:dt=ut.getFloat32(2,!0),It=ut.getFloat32(6,!0),Q=ut.getUint8(1)/60,this.I110I.IOO1I.IlI00.explode(dt,It,null,3*Q),this.I110I.OlIl1.lI1I1(dt,It,Math.pow(Math.min(1,3*Q),1.5));break;case 110:if(dt=ut.getInt8(2),It=ut.getInt8(3),F=ut.getUint32(4,!0),q=ut.getUint8(8),A=ut.getUint8(9),V=ut.getUint32(10,!0),null==(l=this.I110I.IOO1I.I1IOI.OIl0O.I00IO(dt,It))||!l.on)return;q===this.I110I.IO010.status.id&&(this.I110I.IO010.status.score=V,this.I110I.display.screen.O0lll.figures.bonus(A,10*l.x,10*l.y)),this.I110I.IOO1I.IlI00.explode(10*l.x,10*l.y,null,10*l.size),this.I110I.OlIl1.IOII1(10*l.x,10*l.y,4,.25),this.I110I.IOO1I.shakeCamera(10*l.x,10*l.y,5*l.size),l.respawn=F;break;case 111:this.I110I.IOO1I.ll0lO.asteroidStatus(ut);break;case 112:g=ut.getUint16(2,!0),this.I110I.IOO1I.ll0lO.asteroidExplosion(g);break;case 120:for(W=ut.getUint8(1),Y=ut.getUint32(1,!0),y=5;;){if(y>=ut.byteLength)break;A=ut.getUint8(y),g=ut.getUint16(y+1,!0),dt=ut.getFloat32(y+3,!0),It=ut.getFloat32(y+7,!0),$=ut.getFloat32(y+11,!0),tt=ut.getFloat32(y+15,!0),this.I110I.IOO1I.OO1I0.add(dt,It,$,tt,A,Y,g),y+=19}break;case 121:q=ut.getUint8(1),d=ut.getUint16(2,!0),this.I110I.IOO1I.OO1I0.eat(d,q);break;case 130:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),Z=ut.getUint8(12),E=ut.getUint8(13),m=0!==ut.getUint8(14),N=ut.getUint16(15,!0),G=ut.getUint16(17,!0),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It,m),n=null!=k?k.angle:null,I=null!=k?k.damage:1,J=this.I110I.IOO1I.ll0lO.stations[Z],null!=J&&null!=k&&(null!=(M=J.modules[E])&&6===k.type||!m)&&(J.setModuleShield(M,N,G),6===k.type?(M.bumpShield(),this.I110I.OlIl1.shield(dt,It)):M.shield>.1?(M.IOlOO=1,this.I110I.OlIl1.shield(dt,It)):(this.I110I.IOO1I.IlI00.explode(dt,It,n,I/10),this.I110I.OlIl1.IOII1(dt,It)));break;case 141:s=ut.getUint8(1),dt=ut.getFloat32(2,!0),It=ut.getFloat32(6,!0),null!=this.I110I.display.screen.O0lll.figures&&this.I110I.display.screen.O0lll.figures.bonus(s,dt,It,16744576,11),this.I110I.OlIl1.collect(dt,It,s);break;case 147:g=ut.getUint8(1),s=ut.getUint32(2,!0),g===this.I110I.IOO1I.IO010.status.id?(this.I110I.message(t("You contributed %d gems to your team!").replace("%d",s)),this.I110I.IO010.status.contribution+=s):null!=(T=this.I110I.names.get(g))&&T.length>0&&this.I110I.message(t("%s contributed %d gems to your team!").replace("%d",s).replace("%s",T));break;case 155:nt=ut.getUint8(1),S=ut.getUint8(2),dt=ut.getFloat32(3,!0),It=ut.getFloat32(7,!0),J=this.I110I.IOO1I.ll0lO.stations[nt],M=J.modules[S],M.alive=!1,this.I110I.OlIl1.IOII1(dt,It,4,.25),this.I110I.IOO1I.shakeCamera(dt,It,20),this.I110I.IOO1I.IlI00.explode(dt,It,null,7);break;case 150:q=ut.getUint8(1),q===this.I110I.IO010.status.id&&this.I110I.IO010.status.alive?(w=ut.getUint8(2),j=ut.getUint8(12),this.killed(w,j),this.I110I.IOO1I.ll0lO.showRipPlate(this.I110I.IO010)):(U=this.I110I.IOO1I.ll0lO.l1l0O[q],this.I110I.killers[q]=!1,null!=U&&(U.OIIIl.status.alive=!1,w=ut.getUint8(2),A=ut.getUint32(4,!0),w===this.I110I.IO010.status.id&&(this.I110I.IO010.status.kills++,T=this.I110I.names.get(q),T.length>0&&(this.I110I.message(t("You killed %s!").replace("%s",T),"#F88"),0!=(2147483648&ut.getUint32(8,!0))&&setTimeout(function(e){return function(){return e.I110I.message(t("Revenge kill bonus +%s points").replace("%s",Math.round(A/2)))}}(this),500)),this.I110I.IO010.status.score=2147483647&ut.getUint32(8,!0),setTimeout(function(t){return function(){return t.I110I.display.screen.O0lll.figures.bonus(A,U.OIIIl.status.x,U.OIIIl.status.y,16777215,10,2)}}(this),1e3),this.I110I.takeScreenshot("frag",Date.now()+200,this.I110I.IO010.type.level+U.OIIIl.type.level)),this.I110I.IOO1I.ll0lO.isShipVisible(q)&&(this.I110I.IOO1I.ll0lO.showRipPlate(U.OIIIl),this.I110I.IOO1I.IlI00.explode(U.OIIIl.status.x,U.OIIIl.status.y,null,Math.max(5,U.OIIIl.type.radius)),this.I110I.OlIl1.IOII1(U.OIIIl.status.x,U.OIIIl.status.y,4,.25),this.I110I.IOO1I.shakeCamera(U.OIIIl.status.x,U.OIIIl.status.y,10))));break;case 175:this.I110I.weapons.read(ut);break;case 180:q=ut.getUint16(1,!0),z=ut.getUint8(3),a=ut.getUint8(4),c=ut.getUint8(5),it=ut.getUint16(6,!0),st=ut.getUint8(8),et=null,0===st?null!=this.I110I.IOO1I.ll0lO.l1l0O[it]?et=this.I110I.IOO1I.ll0lO.l1l0O[it].OIIIl.status:it===this.I110I.IO010.status.id&&(et=this.I110I.IO010.status):1===st&&(et=this.I110I.IOO1I.ll0lO.findAlien(it)),q===this.I110I.IO010.status.id?(this.I110I.IO010.pods.setMiningNum(z),this.I110I.IO010.pods.setAttackNum(a),this.I110I.IO010.pods.setDefenceNum(c),this.I110I.IO010.pods.target=et):null!=(U=this.I110I.IOO1I.ll0lO.l1l0O[q])&&(U.OIIIl.pods.setMiningNum(z),U.OIIIl.pods.setAttackNum(a),U.OIIIl.pods.setDefenceNum(c),U.OIIIl.pods.target=et);break;case 181:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),ct=ut.getFloat32(12,!0),C=ut.getUint8(16),R=ut.getUint8(17),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It,42===C),n=null!=k?k.angle:null,I=null!=k?k.damage:1,42===C?this.I110I.OlIl1.shield(dt,It):(this.I110I.IOO1I.IlI00.explode(dt,It,n,1,ct),this.I110I.OlIl1.IOII1(dt,It));break;case 182:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),q=ut.getUint16(12,!0),C=ut.getUint8(14),R=ut.getUint8(15),ct=ut.getFloat32(16,!0),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It),n=null!=k?k.angle:null,I=null!=k?k.damage:1,q===this.I110I.IO010.status.id?O=this.I110I.IO010:null!=this.I110I.IOO1I.ll0lO.l1l0O[q]&&(O=this.I110I.IOO1I.ll0lO.l1l0O[q].OIIIl),null!=O&&(this.I110I.IOO1I.IlI00.explode(dt,It,n,2,ct),this.I110I.OlIl1.IOII1(dt,It,2,.5),O.pods.remove(C,R),this.I110I.IOO1I.shakeCamera(dt,It,.5));break;case 184:rt=ut.getUint8(1),Y=ut.getUint32(2,!0),g=ut.getUint16(6,!0),dt=ut.getFloat32(8,!0),It=ut.getFloat32(12,!0),$=ut.getFloat32(16,!0),tt=ut.getFloat32(20,!0),this.I110I.IOO1I.collectibles.add(dt,It,$,tt,Y,g,rt);break;case 183:q=ut.getUint8(1),h=ut.getUint16(2,!0),this.I110I.IOO1I.collectibles.eat(h,q);break;case 185:this.I110I.IOO1I.ll0lO.projectileStatus(ut);break;case 186:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It),n=null!=k?k.angle:null,I=null!=k?k.damage:1,this.I110I.IOO1I.IlI00.explode(dt,It,n,1,0),this.I110I.OlIl1.IOII1(dt,It);break;case 187:ht=ut.getUint8(1),g=ut.getUint16(2,!0),this.I110I.IOO1I.ll0lO.projectileExplosion(ht,g);break;case 190:I=ut.getUint16(1,!0),dt=ut.getFloat32(3,!0),It=ut.getFloat32(7,!0),n=ut.getFloat32(11,!0),this.I110I.IOO1I.IlI00.explode(dt,It,n,I/10),this.I110I.OlIl1.IOII1(dt,It),this.I110I.IOO1I.shakeCamera(dt,It,I/20);break;case 200:case 201:for(this.alive_ships=0,u=ut.getUint8(1),f=v=0,H=u-1;v<=H;f=v+=1)this.alive_ships+=1&ut.getUint8(2+8*f+3);null!=this.I110I.display&&null!=this.I110I.display.screen.O0lll.lI0Il&&this.I110I.display.screen.O0lll.lI0Il.O10II(ut,this.I110I.IO010.status.id),this.I110I.mode.updateScore(ut),this.I110I.IOO1I.ll0lO.survival=201===r,this.I110I.IOO1I.ll0lO.survival&&null==this.I110I.IOO1I.ll0lO.survival_start&&(this.I110I.IOO1I.ll0lO.survival_start=this.I110I.IOO1I.ll0lO.ll01O),this.I110I.IOO1I.ll0lO.survival&&1===this.alive_ships&&!this.I110I.gameover&&(this.I110I.gameover=!0,setTimeout(function(t){return function(){return t.I110I.mode.killed(0,!0,1)}}(this),5e3));break;case 205:this.I110I.mode.updateStations(ut);break;case 206:null!=this.I110I.mode.updateWave?this.I110I.mode.updateWave(ut):this.I110I.mode.updateRadarObjects(ut);break;case 207:null!=this.I110I.mode.updateRadar&&this.I110I.mode.updateRadar(ut);break;case 210:for(ot=ut.getUint32(1,!0),P=(ut.byteLength-5)/3,f=b=0,B=P-1;b<=B;f=b+=1)dt=ut.getInt8(5+3*f),It=ut.getInt8(6+3*f),at=ut.getUint8(7+3*f)+ot,null!=(l=this.I110I.IOO1I.I1IOI.OIl0O.I00IO(dt,It))&&(l.respawn=at);break;case 220:this.I110I.IOO1I.ll0lO.alienStatus(ut);break;case 221:g=ut.getUint16(2,!0),dt=ut.getFloat32(4,!0),It=ut.getFloat32(8,!0),k=this.I110I.IOO1I.ll0lO.I0101(g,dt,It),n=null!=k?k.angle:null,I=null!=k?k.damage:1,this.I110I.IOO1I.IlI00.explode(dt,It,n,1,0),this.I110I.OlIl1.IOII1(dt,It);break;case 222:g=ut.getUint16(2,!0),K=ut.getUint16(4,!0),o=ut.getUint16(6,!0),K!==this.I110I.IOO1I.IO010.status.id?o=0:this.I110I.mode.count_alien_kills&&this.I110I.IOO1I.IO010.status.kills++,this.I110I.IOO1I.ll0lO.alienExplosion(g,o);break;case 240:for(q=ut.getUint8(1),lt="",f=x=2,D=ut.byteLength-1;x<=D;f=x+=1)lt+=String.fromCharCode(ut.getUint8(f));q===this.I110I.IO010.status.id?this.I110I.IOO1I.say(lt):this.I110I.IOO1I.ll0lO.shipSays(q,lt);break;case 250:this.I110I.system_players=ut.getUint8(1),this.I110I.total_players=ut.getUint32(2,!0);break;case 255:
for(y=1;y<ut.byteLength;){for(W=ut.getUint8(y++),i=new ArrayBuffer(W),p=new DataView(i),f=_=0,L=W-1;0<=L?_<=L:_>=L;f=0<=L?++_:--_)p.setUint8(f,ut.getUint8(y++));this.llO1l(i)}}},e.prototype.OO111=function(t){if(this.socket.send(t),this.status_sent_count++,(t&=20991)!==this.last_status_sent&&(this.last_status_sent=t,!this.use_status_ping))return this.use_status_ping=!0,this.ping_status=t,this.status_ping_time=Date.now()},e.prototype.statusPingCheck=function(t){var e,i,s,n,l;if(this.use_status_ping){if(e=t.getUint16(12,!0),i=0!=(16384&t.getUint16(14,!0)),l=0!=(2&t.getUint8(2)),s=e,i&&(s+=16384),l&&(s+=4096),n=Date.now()-this.status_ping_time,s===this.ping_status)return this.measuredPing(n),this.use_status_ping=!1;if(n>1e3)return this.use_status_ping=!1}},e.prototype.Ol10O=function(t){return this.socket.send(JSON.stringify({name:"get_name",data:{id:t}}))},e.prototype.OOIO0=function(t){return this.I110I.names.set(t.data.id,t.data.player_name,t.data)},e.prototype.pushType=function(t){return this.socket.send(JSON.stringify({name:"ship_type",data:t}))},e.prototype.upgradeSpec=function(t){return this.socket.send(JSON.stringify({name:"upgrade_spec",data:t}))},e.prototype.upgradeShip=function(t){return this.socket.send(JSON.stringify({name:"upgrade_ship",data:t}))},e.prototype.buyLife=function(){return this.socket.send(JSON.stringify({name:"buy_life"}))},e.prototype.modeMsg=function(t){return this.I110I.mode.messageReceived(t.data)},e.prototype.sendModeMessage=function(t){return this.socket.send(JSON.stringify({name:"modemsg",data:t}))},e.prototype.startTransfer=function(t,e){return this.socket.send(JSON.stringify({name:"start_transfer"}))},e.prototype.endTransfer=function(t,e){return this.socket.send(JSON.stringify({name:"end_transfer"}))},e.prototype.buyWeapon=function(t){return this.socket.send(JSON.stringify({name:"buy_weapon",data:{type:t}}))},e.prototype.removeWeapon=function(t){return this.socket.send(JSON.stringify({name:"remove_weapon",data:{index:t}}))},e.prototype.shootWeapon=function(t,e){return this.socket.send(JSON.stringify({name:"shoot_weapon",data:{index:t,type:e}}))},e.prototype.toggleHealing=function(t,e){return this.socket.send(JSON.stringify({name:"toggle_healing"}))},e.prototype.error=function(e){return null!=e.id&&"SteamAppOwnerShip"===e.id?(this.I110I.gameover=!0,void this.I110I.O1IO0.showError(t("Server returned that you do not own this Steam application"))):this.I110I.O1IO0.showError(t(e.data))},e}(),this.I0l00=function(){function t(t){this.OI001=t,this.O0O1O=[],this.text="",this.IOI01=0,this.paused=!1}return t.prototype.start=function(){return setInterval(function(t){return function(){return t.lOII0()}}(this),30)},t.prototype.l1O11=function(t){this.text=t},t.prototype.add=function(t){return this.O0O1O.push({name:this.text,l01OO:t}),this.IOI01=Math.max(this.IOI01,this.O0O1O.length)},t.prototype.insert=function(t){return this.O0O1O.splice(0,0,{name:this.text,l01OO:t}),this.IOI01=Math.max(this.IOI01,this.O0O1O.length)},t.prototype.exec=function(t){return t()},t.prototype.II0lO=function(){return 100-this.O0O1O.length/this.IOI01*100},t.prototype.pause=function(){return this.paused=!0},t.prototype.resume=function(){return this.paused=!1},t.prototype.lOII0=function(){if(0!==this.O0O1O.length&&!this.paused){this.O111I=this.O0O1O[0];try{this.O111I.l01OO()}catch(t){t}return this.O0O1O.splice(0,1),null!=this.OI001?this.OI001():void 0}},t}(),IFrameDetection=function(){function t(t){this.I110I=t;try{this.inIframe=window.self!==window.top}catch(t){t,this.inIframe=!0}try{this.domain=document.referrer}catch(t){t,this.domain=!1}}return t}(),bind=function(t,e){return function(){return t.apply(e,arguments)}},this.IOlI1=function(){function e(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U,q,K,W,Y,J,Z,X,Q,$,tt,et,it,st,nt;if(this.I110I=e,this.adBlockedPage=bind(this.adBlockedPage,this),this.sharePart=bind(this.sharePart,this),this.killed=bind(this.killed,this),this.toggleFullScreen=bind(this.toggleFullScreen,this),this.exitFullScreen=bind(this.exitFullScreen,this),this.showPDMRankings=bind(this.showPDMRankings,this),this.showGameCreated=bind(this.showGameCreated,this),this.l1IO0=bind(this.l1IO0,this),this.showSettings=bind(this.showSettings,this),this.showDonate=bind(this.showDonate,this),this.showModdingSpace=bind(this.showModdingSpace,this),this.getModdingNextDates=bind(this.getModdingNextDates,this),this.getModdingRealTime=bind(this.getModdingRealTime,this),this.showChangeLog=bind(this.showChangeLog,this),this.showStore=bind(this.showStore,this),this.showError=bind(this.showError,this),this.showInfos=bind(this.showInfos,this),this.O01I1=bind(this.O01I1,this),this.adBlocked=bind(this.adBlocked,this),"?itch"===document.location.search&&(window.history.pushState("STARBLAST.io","STARBLAST.io","/"),!this.I110I.l10lI.OO11I()))return this.welcomeItch();if(this.webp_capable=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),this.optim_ext=this.webp_capable?"webp":"png",this.ismobile=window.innerWidth<800,this.rankingsfile="https://starblast.io/rankings.json",this.invasionfile="https://starblast.io/invasion.json",this.modsfile="https://starblast.io/modsinfo.json",this.I10I0=!1,!document.querySelector("#overlay"))return this.appConstructor(this.I110I);if(this.overlay=document.querySelector("#overlay"),this.overlay.style.display="block",this.isAdBlocked=!1,this.lastModal=null,this.l0OOI=18e4,gdactive&&(this.l0OOI=0),localStorage.getItem("II00O")||localStorage.setItem("II00O",Date.now()),this.II00O=parseInt(localStorage.getItem("II00O")),this.currency="$",this.iframe=new IFrameDetection(this.I110I),this.I110I.l10lI.OO11I())for(w=document.querySelectorAll(".hide-ecp"),E=0,S=w.length;E<S;E++)b=w[E],b.remove();for(this.gameModesLoader(!1),X=document.querySelector("#training"),X.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.installed_modes=[new TutorialMode(t.I110I)],t.game_modes=t.installed_modes,t.selectedMode=0,t.startGame()}}(this)),this.selectedMode=0,y=document.querySelector("#game_modes"),K=this.game_modes,F=0,T=K.length;F<T;F++)v=K[F],y.innerHTML+="<span data-translate='"+v.name+"'>"+t(v.name)+"</span>";for("undefined"==typeof blockAdBlock?this.adBlocked():(blockAdBlock.setOption({debug:!1,checkOnLoad:!1,resetOnEnd:!1}),blockAdBlock.onDetected(this.adBlocked),blockAdBlock.check()),this.I110I.l10lI.OO11I()||this.I110I.is_app||(this.O0lI0("https://admax.space/static/js/include.js",this.IlIO1),window.vitag=window.vitag||{},this.O0lI0("https://services.vlitag.com/adv1/?q=d793231a9b4f6e8faec120e19a2c5578",function(t){return function(){return t.IlIO1,vitag.videoDiscoverConfig={random:!0,noFixedVideo:!0},(window.vitag.Init=window.vitag.Init||[]).push(function(){viAPItag.initInstreamBanner("vi_462315137")}),(window.vitag.Init=window.vitag.Init||[]).push(function(){viAPItag.display("vi_462315138")})}}(this)),gdactive?II01O():this.O0lI0("//api.adinplay.com/libs/aiptag/pub/NRN/starblast.io/tag.min.js",this.O01I1)),this.logofont="Days One",WebFont.load({google:{families:["Play::latin,latin-ext"]},custom:{families:["FontAwesome","SBGlyphs"]},fontactive:function(t){return function(e,i){if("Play"===e&&t.changeGameMode(0),"FontAwesome"===e)return t.lIl01()}}(this)}),this.logo=this.OOIl1(),g=document.querySelectorAll(".sbg-gears"),z=document.querySelectorAll(".sbg-info, .info"),s=document.querySelectorAll(".cbtn"),c=document.querySelectorAll(".sbg-facebook"),$=document.querySelectorAll(".sbg-twitter"),o=document.querySelector(".close-modal"),r=document.querySelector("#colors"),h=document.querySelector(".colorwrapper"),l=document.querySelectorAll(".full-changelog"),q=document.querySelector("#rankings"),u=document.querySelector("#donate"),d=document.querySelector("#donate_mobile"),N=document.querySelector("#prevMode"),V=document.querySelector("#nextMode"),D=document.querySelector(".modal"),document.querySelector("#alsotry a"),L=document.querySelector("#moddingspace"),Z=document.querySelector("#startmodding"),null!=Z&&Z.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.showModdingSpace()}}(this)),J=new XMLHttpRequest,J.open("GET",this.modsfile,!0),J.onreadystatechange=function(t){return function(){var t,e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f;if(4===J.readyState&&200===J.status){for(e=JSON.parse(J.responseText),O=0,u=e[0],r=0,s=u.length;r<s;r++)a=u[r],a.active&&(O+=3600*a.active_duration*1e3);for(t=Date.now()%O,m=0,p=0,d=e[0],h=0,n=d.length;h<n;h++)if(a=d[h],a.featured)return o=new Image,o.src="https://starblast.data.neuronality.com/modding/img/"+a.mod_id+".jpg",o.style.maxWidth="100%",o.style.marginTop="5px",void L.appendChild(o);for(I=e[0],c=[],i=f=0,l=I.length;f<l;i=++f)a=I[i],a.active&&c.push(function(e,i){var s;if(p+=3600*e.active_duration*1e3,s=t>m&&t<p,m=p,s)return o=new Image,o.src="https://starblast.data.neuronality.com/modding/img/"+e.mod_id+".jpg",o.style.maxWidth="100%",o.style.marginTop="5px",L.appendChild(o)}(a));return c}}}(),J.send(null),M=document.querySelector("#joinsrc"),null!=M&&M.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.startModdingMode({mod_id:"src2"})}}(this)),this.iframe.inIframe||(/android/i.test(navigator.userAgent)&&this.showStore("android"),/(ipad|iphone|ipod)/i.test(navigator.userAgent)&&this.showStore("appstore")),p=function(t){return function(e){var i;if(i=document.createElement("span"),i.style.background="linear-gradient(135deg,hsl("+e+",70%,60%) 0%,hsl("+e+",70%,40%) 100%)",i.setAttribute("data-hue",e),i.addEventListener("click",function(i){return t.setColor(e)}),r.appendChild(i),108===e||228===e)return r.appendChild(document.createElement("br"))}}(this),x=G=0,W=12;G<=348;x=G+=W)p(x);for(h.addEventListener("click",function(t){return function(e){return r.style.display="block"===r.style.display?"none":"block",t.IlIO1()}}(this)),null===localStorage.getItem("shipColor")?this.setColor(null):this.setColor(localStorage.getItem("shipColor")),Y=document.querySelectorAll(".cookieconsent"),U=0,P=Y.length;U<P;U++)i=Y[U],"yes"===localStorage.getItem("consent")||null!==localStorage.getItem("last_best_region")?i.remove():i.style.opacity="1";for(D.addEventListener("click",function(t){return function(t){return t.stopPropagation()}}()),document.addEventListener("click",function(t){return function(e){return t.closeModal()}}(this)),o.addEventListener("click",function(t){return function(e){return t.closeModal()}}(this)),document.addEventListener("keydown",function(t){return function(e){if(e=e||window.event,27===e.keyCode&&("block"===r.style.display&&(r.style.display="none",t.IlIO1()),"block"===D.style.display&&t.closeModal()),document.querySelector("#player input")!==document.activeElement){if(!t.I10I0&&39===e.keyCode){if("block"===D.style.display)return;document.getElementById("play").focus(),t.changeGameMode(1)}if(!t.I10I0&&37===e.keyCode){if("block"===D.style.display)return;return document.getElementById("play").focus(),t.changeGameMode(-1)}}}}(this)),O=function(t){return function(e){if(e)return e.addEventListener("click",function(e){return e.preventDefault(),e.stopPropagation(),t.showChangeLog()})}}(this),tt=0,R=l.length;tt<R;tt++)n=l[tt],O(n);for(q&&q.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.showPDMRankings()}}(this)),u.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.showDonate()}}(this)),L.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.showModdingSpace()}}(this)),d.addEventListener("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.showDonate()}}(this)),N.addEventListener("click",function(t){return function(e){return t.changeGameMode(-1)}}(this)),V.addEventListener("click",function(t){return function(e){return t.changeGameMode(1)}}(this)),et=0,C=z.length;et<C;et++)_=z[et],_.addEventListener("click",function(t){return function(e){return e.stopPropagation(),t.showInfos()}}(this));for(m=function(t){return function(t){return t.addEventListener("click",function(t){var e,s,n,l;for(t.preventDefault(),localStorage.setItem("consent","yes"),s=document.querySelectorAll(".cookieconsent"),n=[],l=0,e=s.length;l<e;l++)i=s[l],n.push(i.remove());return n})}}(),it=0,A=s.length;it<A;it++)a=s[it],m(a);for(st=0,j=g.length;st<j;st++)f=g[st],f.addEventListener("click",function(t){return function(e){return e.stopPropagation(),t.showSettings()}}(this));for(nt=0,H=c.length;nt<H;nt++)I=c[nt],I.addEventListener("click",function(t){return function(t){return localStorage.setItem("lOI11",!0),window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(document.location.href))}}());for(k=0,B=$.length;k<B;k++)Q=$[k],Q.addEventListener("click",function(e){return function(e){var i;return localStorage.setItem("lOI11",!0),i=t("Come and play")+" #starblastio",window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(i)+"&url="+encodeURIComponent(document.location.href))}}());window.addEventListener("resize",function(t){return function(){return t.IlIO1()}}(this)),this.lIl01()}return e.prototype.appConstructor=function(t){return this.I110I=t,WebFont.load({google:{families:["Play::latin,latin-ext"]},custom:{families:["FontAwesome","SBGlyphs"]},fontactive:function(t){return function(t,e){}}()}),this.gameModesLoader()},e.prototype.gameModesLoader=function(e){var i,s,n,l,a;if(null==e&&(e=!1),this.installed_modes=[new TeamMode(this.I110I),new SurvivalMode(this.I110I),new InvasionMode(this.I110I),new ProDeathMatchMode(this.I110I),new BattleRoyaleMode(this.I110I)],e&&(this.installed_modes.splice(0,0,new TutorialMode(this.I110I)),this.installed_modes[0].II011=!0),/#(\d+)@(\w.+):(\d+)/.test(document.location.hash))return i=document.location.hash.match(/#(\d+)@(\w.+):(\d+)/),this.game_modes=[{name:"Private game",id:"private",custom_color:!0,address:{ip:i[2],port:0|i[3],gameid:0|i[1]}}];if(/#(\d+)$/.test(document.location.hash))return this.game_modes=[{name:t("Join game")+" "+document.location.hash,id:"join",custom_color:!0}];for(this.game_modes=[],a=this.installed_modes,n=0,l=a.length;n<l;n++)s=a[n],s.II011&&this.game_modes.push(s);return this.I110I.l10lI.OO11I()?this.game_modes=this.game_modes.concat({name:"Create custom game",id:"sandbox",ecponly:!0,custom_color:!1}):void 0},e.prototype.checkModdingMode=function(){var t,e,i,s,n;for(s=document.getElementsByClassName("join-modding-friday"),n=[],e=0,i=s.length;e<i;e++)t=s[e],n.push(t.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.startModdingMode({mod_id:"src2",max_enter_players:15,max_enter_time:72e3})}}(this)));return n},e.prototype.startModdingMode=function(t){return this.game_modes[this.selectedMode].id="modding",this.game_modes[this.selectedMode].mod_id=t.mod_id,this.game_modes[this.selectedMode].max_enter_players=null!=t.max_enter_players?t.max_enter_players:30,this.game_modes[this.selectedMode].max_enter_time=null!=t.max_enter_time?t.max_enter_time:72e3,this.startGame()},e.prototype.checkBattleRoyale=function(){var t,e,i,s,n,l,a,o,r,h;if(!this.I110I.is_app&&battle_started&&!battle_finished){for(this.game_modes.splice(0,0,new BattleRoyaleMode(this.I110I)),l=document.getElementsByClassName("join-alpha-centauri"),e=0,i=l.length;e<i;e++)t=l[e],t.style.display="block",t.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.installed_modes.splice(0,0,new BattleRoyaleMode(t.I110I)),t.game_modes=t.installed_modes,t.startGame()}}(this));for(l=document.getElementsByClassName("event-time"),r=[],a=0,s=l.length;a<s;a++)t=l[a],r.push(t.style.display="none");return r}if(!this.I110I.is_app&&battle_finished){for(l=document.getElementsByClassName("alphacentauri"),h=[],o=0,n=l.length;o<n;o++)t=l[o],h.push(t.style.display="none");return h}},e.prototype.welcomeItch=function(){var e;return this.logofont="Days One",e=document.createElement("style"),e.innerText="#canvaswrapper canvas { cursor:auto !important; }",(document.head||document.getElementsByTagName("head")[0]).appendChild(e),WebFont.load({google:{families:[this.logofont.replace(" ","+"),"Play::latin,latin-ext"]},custom:{families:["FontAwesome"]},fontactive:function(e){return function(i,s){if(i===e.logofont)return setTimeout(function(){var i,s,n,l,a,o,r;return e.logo=e.OOIl1(),document.querySelector(".modal"),o=document.querySelector(".modal .header"),a=document.querySelector(".modal .modalbody"),o.innerHTML="",o.style.textAlign="center",l=new Image,l.style.width="50%",l.src=e.logo.toDataURL(),o.appendChild(l),i=document.createElement("div"),i.classList.add("infos"),i.style.fontSize="0.9em",i.innerHTML=t("Thank you very much for your purchase. One last thing before you can start to play: just insert the ECP key you received by email in the box below."),a.appendChild(i),s=document.createElement("form"),s.style.marginTop="20px",s.style.textAlign="center",n=document.createElement("input"),n.classList.add("ecpinput"),n.style.fontSize="20px",n.setAttribute("placeholder",t("Insert your key here")),s.appendChild(n),s.appendChild(document.createElement("br")),r=document.createElement("button"),r.classList.add("donate-btn"),r.innerText=t("Start to play"),r.style.fontSize="15px",s.appendChild(r),a.appendChild(s),s.addEventListener("submit",function(i){var s;if(i.preventDefault(),!e.ECPverifing)return s=n.value.replace(/[o|O]/g,"0").toLowerCase(),e.I110I.l10lI.lO1ll(s)?(e.I110I.l10lI.I11l0(s),e.ECPverifing=!0,r.innerHTML="<i class='fa fa-cog fa-spin'></i>",e.I110I.l10lI.verify(function(i){return e.ECPverifing=!1,i?(document.location.hash="",document.location.reload()):(alert(t("This OI1IO is invalid")),r.innerHTML=t("Start to play"))})):alert(t("This OI1IO is invalid"))}),e.showModal("itch")},1)}}(this)})},e.prototype.l111I=function(){var t,e,i,s,n;if(document.querySelector("#overlay")){for(i=document.querySelector("#player"),n=document.querySelector("#respawn"),n.nextElementSibling,document.querySelector(".mobile"),document.querySelector(".desktop"),document.querySelector(".mobile-social"),document.querySelector(".mobile-tools"),document.querySelector(".social"),document.querySelector(".gameloader"),document.querySelector("#content"),document.querySelector("#home"),document.querySelector(".followtools"),document.querySelector(".mobile-view"),document.querySelectorAll(".changelog-new"),t=e=1;e<=3;t=++e)document.querySelector("#cdm-zone-0"+t)&&(document.querySelector("#cdm-zone-0"+t).style.display="inline-block",document.querySelector("#cdm-zone-0"+t).style.border="2px solid hsl(200,50%,70%)",document.querySelector("#cdm-zone-0"+t).style.boxShadow="0 0 15px hsl(200,50%,70%)");return i.classList.remove("hide"),s=i.querySelector("input"),s.value=localStorage.getItem("lastNickname"),!1 in window&&s.focus(),i.addEventListener("submit",function(t){return function(e){return t.startGame(e)}}(this)),document.querySelector("#respawn_btn").addEventListener("click",function(t){return function(){if(t.I10I0){if(t.I110I.sendGAEvent("respawn_evt"),clearTimeout(t.IO0O1),t.clearAds(),t.I110I.l10lI.OO11I())return t.I110I.respawn(),t.clear();if(t.isAdBlocked)return t.I110I.pause(),localStorage.setItem("II00O",Date.now()),t.II00O=Date.now(),t.adBlockedPage();if(!t.I110I.mode.I0l10)return t.I110I.respawn(),t.clear();if(Date.now()-t.II00O>t.l0OOI){if(window.adplayer)return localStorage.setItem("II00O",Date.now()),t.II00O=Date.now(),document.querySelector(".top-left")&&(document.querySelector(".top-left").innerHTML=""),t.I110I.pause(),void window.aiptag.cmd.player.push(function(){return window.adplayer.startPreRoll()});if("function"==typeof gdApi&&(localStorage.setItem("II00O",Date.now()),t.II00O=Date.now(),t.I110I.pause(),"function"==typeof gdApi.showBanner))return gdApi.showBanner()}return document.querySelector(".top-left")&&(document.querySelector(".top-left").innerHTML=""),t.I110I.resume(),t.I110I.respawn(),t.clear()}}}(this)),document.querySelector("#refresh_btn").addEventListener("click",function(t){return function(){if(t.I10I0)return t.I110I.sendGAEvent("reload_evt"),t.reloadGame()}}(this)),document.querySelector("#continue_btn").addEventListener("click",function(t){return function(){if(t.I10I0)return t.sharePart()}}(this)),this.displayOptions(),this.IlIO1()}},e.prototype.abTesting=function(){var t,e,i,s,n,l;try{if(t=localStorage.getItem("adabt"),null==t&&(t=Math.random()<.2?"A":"B",localStorage.setItem("adabt",t)),ga("set","dimension1",t),"A"===t){for(n=this.game_modes,l=[],i=0,s=n.length;i<s;i++)e=n[i],l.push(e.I0l10=!1);return l}}catch(t){t}},e.prototype.startGame=function(t){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z;if(document.querySelector("[data-ad-slot=vi_462315137]")&&document.querySelector("[data-ad-slot=vi_462315137]").remove(),document.querySelector(".top-right")&&document.querySelector(".top-right").remove(),document.querySelector(".adblock")&&document.querySelector(".adblock").remove(),!this.I10I0){if(null!=this.game_modes[this.selectedMode]&&"sandbox"===this.game_modes[this.selectedMode].id&&this.I110I.l10lI.OO11I())return null!=t&&t.preventDefault(),this.l1IO0();for(this.clearAds(),m=document.querySelector("#player"),f=document.querySelector("#rcstuto"),g=document.querySelector("#respawn"),e=g.nextElementSibling,x=document.querySelector(".mobile"),w=document.querySelector(".desktop"),p=document.querySelector(".mobile-social"),O=document.querySelector(".mobile-tools"),v=document.querySelector(".social"),r=document.querySelector(".gameloader"),l=document.querySelector("#content"),document.querySelector("#home"),o=document.querySelector(".followtools"),c=document.querySelector(".mobile-view"),n=document.querySelectorAll(".changelog-new"),b=document.querySelector(".training"),h=document.querySelector("#player input"),this.I110I.sendGAEvent("play_evt"),null!=t&&t.preventDefault(),this.I110I.is_mobile&&this.setFullScreen(),f.appendChild(RCS.staticRCSImage(this.I110I)),o&&(o.style.display="none"),null!=c&&(c.style.display="none"),m.style.display="none",e.style.display="none",p.style.display="none",O.style.display="none",v.style.display="none",r.style.display="block",null!=b&&(b.style.display="none"),this.ismobile||this.I110I.l10lI.OO11I()||this.isAdBlocked||(i=document.createElement("div"),i.setAttribute("id","cdm-zone-01"),l.insertBefore(i,l.firstChild)),u=0,d=n.length;u<d;u++)s=n[u],s.style.display="none";return"ontouchstart"in window?x.style.display="block":w.style.display="block",k=h.value.toUpperCase().substr(0,16),localStorage.setItem("lastNickname",k),k||(k=lIl1O.shuffle()[0].toUpperCase()),_=window.innerHeight,z=window.innerWidth,I=z<1e3&&"ontouchstart"in window?_:_-v.offsetHeight,a=l.offsetHeight,y=a<I?1:I/a,l.style.marginTop=(I-a)/2+"px",l.style.transform="scale("+y+")",this.I10I0=!0,"private"===this.game_modes[0].id?this.I110I.startPrivateGame(k,localStorage.getItem("lOI11")||this.I110I.l10lI.OO11I(),localStorage.getItem("shipColor")||"0",this.game_modes[0].address):this.I110I.start(this.game_modes[this.selectedMode].id,k,localStorage.getItem("lOI11")||this.I110I.l10lI.OO11I(),localStorage.getItem("shipColor")||"0")}},e.prototype.reloadGame=function(){return document.location.href=document.location.href.split("#")[0]+"#",document.location.reload()},e.prototype.lIl01=function(){var t,e;if(t=new I1O00(48,this.I110I.l10lI.custom).toImage(),t.style.marginBottom="-5px",document.querySelector(".ecplogo").innerHTML="",document.querySelector(".ecplogo").appendChild(t),this.I110I.l10lI.OO11I())return document.querySelector(".inputwrapper img")&&document.querySelector(".inputwrapper img").remove(),e=document.querySelector(".inputwrapper"),t=new I1O00(32,this.I110I.l10lI.custom).toImage(),t.style.position="absolute",t.style.left="0",t.style.top="5px",t.style.cursor="pointer",t.addEventListener("click",function(t){return function(e){return e.stopPropagation(),t.showDonate()}}(this)),e.insertBefore(t,e.firstChild)},e.prototype.adBlocked=function(){var t,e,i;if(document.querySelector(".adblock")&&(document.querySelector(".adblock").style.display="block",document.querySelector(".top-right")&&(document.querySelector(".top-right").style.top="5vh"),document.querySelector(".top-left")&&(document.querySelector(".top-left").style.top="5vh")),!this.I110I.l10lI.OO11I()){for(this.isAdBlocked=!0,e=i=1;i<=3;e=++i)document.querySelector("#cdm-zone-0"+e)&&document.querySelector("#cdm-zone-0"+e).remove();return document.querySelector("[data-ad-slot=vi_462315138]")&&document.querySelector("[data-ad-slot=vi_462315138]").remove(),t=document.querySelector("#home"),t.innerHTML="<a target='_blank' href='http://www.neuronball.com/'><img src='//starblast.data.neuronality.com/neuronball.jpg'></a>"}},e.prototype.O0lI0=function(t,e,i,s){var n,l,a,o,r;if(n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script"),a=!0,i&&(o.id=i),s)for(l in s)r=s[l],o.setAttribute(l,r);return o.async="async",o.charset="UTF-8",o.src=t,o.onload=o.onreadystatechange=function(){if(a&&(!o.readyState||/loaded|complete/.test(o.readyState)))return a=!1,e(),o.onload=o.onreadystatechange=null},n.appendChild(o)},e.prototype.O01I1=function(){if("undefined"!=typeof aipPlayer&&null!==aipPlayer)return window.aiptag=window.aiptag||{},window.aiptag.consented=!0,window.aiptag.cmd=window.aiptag.cmd||[],window.aiptag.cmd.display=window.aiptag.cmd.display||[],window.aiptag.cmd.player=window.aiptag.cmd.player||[],window.aiptag.cmd.player.push(function(t){return function(){return window.adplayer=new aipPlayer({AD_WIDTH:960,AD_HEIGHT:540,AD_FULLSCREEN:!0,AD_CENTERPLAYER:!1,LOADING_TEXT:"loading advertisement",PREROLL_ELEM:document.getElementById("preroll"),AIP_COMPLETE:function(e){return t.I110I.sendGAEvent("adinplay_complete"),t.I110I.resume(),t.I110I.respawn(),t.clear()},AIP_REMOVE:function(){return t.I110I.sendGAEvent("adinplay_remove"),t.I110I.resume(),t.I110I.respawn(),t.clear()}})}}(this))},e.prototype.setColor=function(t){var e,i,s,n;for(null===t&&(t=360*Math.floor(30*Math.random())/30),t=parseInt(t),i=document.querySelectorAll("#colors span"),s=0,n=i.length;s<n;s++)if(e=i[s],t===parseInt(e.getAttribute("data-hue"))){if(e.classList.contains("selected"))return document.querySelector("#colors").style.display="none",this.IlIO1();localStorage.setItem("shipColor",t),e.classList.add("selected"),document.querySelector(".colorchosen").style.background="linear-gradient(135deg,hsl("+t+",70%,60%) 0%,hsl("+t+",70%,40%) 100%)",document.querySelector("#player input").style.color="hsla("+t+",100%,90%,.9)",document.querySelector("#player input").style["text-shadow"]="0 0 7px hsla("+t+",80%,80%,1)"}else e.classList.remove("selected")},e.prototype.copyRoomLink=function(){var t;t=document.createElement("input"),t.style.position="absolute",t.style.top="-1000px",t.value="https://starblast.io/#"+document.location.href.split("#")[1],document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("SelectAll"),document.execCommand("copy",!1,null)}catch(t){t}t.style.display="none";try{return t.remove()}catch(e){return e,t.outerHTML=""}},e.prototype.displayOptions=function(){var t,e,i,s,n,l,a,o,r,h,u,d;if("function"!=typeof GiveAway&&"function"!=typeof PromoContest){if(h=document.querySelector(".social"),a=document.querySelector(".mobile-social"),o=document.querySelector(".mobile-tools"),t=document.querySelector(".followtools"),r=document.querySelector(".mobile-view"),i=document.querySelector("#home"),s=document.querySelector("#home_mobile"),e=document.querySelector(".steam-greenlight"),u=window.innerHeight,d=window.innerWidth,null!=t&&(t.style.display="none"),null!=r&&(r.style.display="none"),h.style.display="none",a.style.display="none",o.style.display="none",i.style.display="none",s.style.display="none",e&&(e.style.display="none"),this.I110I.l10lI.OO11I())for(document.querySelector("#alsotry")&&document.querySelector("#alsotry").remove(),n=l=1;l<=3;n=++l)document.querySelector("#cdm-zone-0"+n)&&document.querySelector("#cdm-zone-0"+n).remove();if(i.style.height=this.I110I.l10lI.OO11I()?"auto":this.isAdBlocked?"250px":"0px",s.style.height=this.I110I.l10lI.OO11I()?"auto":"50px",this.ismobile&&u>d){if(!this.I110I.l10lI.OO11I())return s.style.display="block"}else{if(this.ismobile)return this.I110I.l10lI.OO11I()||(s.style.display="block"),a.style.display="block",o.style.display="block";if(null!=r&&(r.style.display="block"),this.I10I0||null==t||(t.style.display="block"),this.I110I.l10lI.OO11I()||(i.style.display="block"),h.style.display="block",e)return e.style.display="block"}}},e.prototype.IlIO1=function(){var t,e,i,s,n,l,a,o,r;return this.ismobile=window.innerWidth<800,t=document.querySelector("#content"),l=document.querySelector(".social"),o=document.querySelector(".top-right"),a=document.querySelector(".top-left"),i=document.querySelector(".gameloader"),"block"===i.style.display&&(i.style.marginTop=(window.innerHeight-i.offsetHeight)/2+"px"),r=window.innerHeight,window.innerWidth,o&&(o.style.display=this.ismobile?"none":"block",a.style.display=this.ismobile?"none":"block"),s=this.ismobile?r:r-l.offsetHeight,e=t.offsetHeight,n=e<s?1:s/e,t.style.marginTop=(s-e)/2+"px",t.style.transform="scale("+n+")"},e.prototype.llIlO=function(t,e){return null==e&&(e=!1),t.classList.add("hide"),setTimeout(function(){return e?void t.remove():t.style.display="none"},500)},e.prototype.changeGameMode=function(t){var e,i,s,n;if(!(1===t&&this.game_modes.length-1===this.selectedMode||-1===t&&0===this.selectedMode))return n=document.querySelector("#prevMode"),s=document.querySelector("#nextMode"),n.style.visibility="visible",s.style.visibility="visible",this.selectedMode+=t,this.selectedMode%=this.game_modes.length,0===this.selectedMode&&(n.style.visibility="hidden"),this.game_modes.length-1===this.selectedMode&&(s.style.visibility="hidden"),this.selectedMode<0&&(this.selectedMode=this.game_modes.length-1),document.querySelector("#play").classList.remove("orange"),this.game_modes[this.selectedMode].ecponly&&document.querySelector("#play").classList.add("orange"),e=document.querySelector("#game_modes span:first-child"),i=document.querySelector("#game_modes"),e.style.marginLeft=-1*this.selectedMode*i.offsetWidth+"px",document.querySelector(".colorwrapper").style.display=this.game_modes[this.selectedMode].custom_color?"block":"none",document.querySelector("#colors").style.display="none",this.IlIO1(),this.game_modes[this.selectedMode]},e.prototype.closeModal=function(t){var e;if(this.getrealtimer&&clearTimeout(this.getrealtimer),e=document.querySelector(".modal"),"none"!==e.style.display)return e.style.top=-1*window.innerHeight+"px",this.modalHideTimer=setTimeout(function(){if(e.style.display="none","function"==typeof t)return t()},600)},e.prototype.showModal=function(t){var e,i;return this.lastModal=t,e=document.querySelector(".modal"),e.style.width="pdmrankings"===t||"moddingspace"===t?"1200px":"800px",e.style.maxHeight="100%",e.style.height="pdmrankings"===t||"moddingspace"===t?"100%":"auto",e.style.display="block",i=(window.innerHeight-e.offsetHeight)/2,e.style.top=i+"px"},e.prototype.showInfos=function(){var e,i,s,n,l;return s=document.querySelector(".modal"),"block"===s.style.display?"infos"===this.lastModal?this.closeModal():this.closeModal(this.showInfos):(document.querySelector(".modal .modaltitle").innerHTML=t("INFO"),n=document.querySelector(".modal .modalbody"),l=document.getElementById("gameinfos").innerHTML.replace("\n","").replace(/\n/g,"<br>"),n.innerHTML="<div class='infos'>"+l+"</div>",i=document.querySelector(".modal .modalbody #infologo"),e=new Image,e.src="https://starblast.data.neuronality.com/img/starblast_io_logo.svg",i.appendChild(e),this.showModal("infos"))},e.prototype.showError=function(e){var i,s,n;return i=document.querySelector(".modal"),"block"===i.style.display?"error"===this.lastModal?this.closeModal():this.closeModal(this.showError):(this.I10I0=!1,
this.errored=!0,document.querySelector(".modal .close-modal").remove(),document.querySelector(".modal .modaltitle").innerHTML=t("Error"),s=document.querySelector(".modal .modalbody"),s.innerHTML="<div class='textcentered infos'><i class='fa fa-warning fa-4x'></i><p>"+e+"</p></div>",n=document.createElement("button"),n.setAttribute("class","donate-btn"),n.addEventListener("click",function(t){return function(){return t.reloadGame()}}(this)),n.innerHTML=t("Reload game"),s.querySelector(".textcentered").appendChild(n),document.querySelector(".gameloader")&&(i.style.margin="auto",document.querySelector(".gameloader").remove()),this.showModal("error"))},e.prototype.showStore=function(t){var e,i,s;return s=document.createElement("div"),s.classList.add("gplay"),e=new Image,"android"===t&&(e.src="https://starblast.data.neuronality.com/img/gplay."+(this.webp_capable?"webp":"jpg"),i=document.createElement("a"),i.setAttribute("href","https://play.google.com/store/apps/details?id=io.starblast&pcampaignid=MKT-Other-global-all-co-prtnr-OO000-PartBadge-Mar2515-1"),i.setAttribute("alt","Get it on Google Play"),i.setAttribute("target","_blank")),"appstore"===t&&(e.src="https://starblast.data.neuronality.com/img/appstore."+(this.webp_capable?"webp":"jpg"),i=document.createElement("a"),i.setAttribute("href","https://itunes.apple.com/us/app/starblast-io/id1377198552"),i.setAttribute("target","_blank")),i.appendChild(e),e.onload=function(){return s.appendChild(i),document.body.appendChild(s),e.style.marginTop=(window.innerHeight-e.offsetHeight)/2+"px",s.addEventListener("click",function(){return s.remove()}),window.addEventListener("resize",function(){if(e)return e.style.marginTop=(window.innerHeight-e.offsetHeight)/2+"px"})}},e.prototype.showChangeLog=function(){var e,i,s;return e=document.querySelector(".modal"),"block"===e.style.display?"changelog"===this.lastModal?this.closeModal():this.closeModal(this.showChangeLog):(document.querySelector(".modal .modaltitle").innerHTML=t("Changelog"),i=document.querySelector(".modal .modalbody"),s=new XMLHttpRequest,s.open("GET","./changelog.txt",!0),s.onreadystatechange=function(t){return function(){if(4===s.readyState&&200===s.status)return i.innerHTML="<p class='smalltext'>"+s.responseText.replace(/(\d{4}-\d{2}-\d{2})\s/g,"<span class='date'>$1</span>").replace(/\n/g,"<br>")+"</p>",t.showModal("changelog")}}(this),s.send(null))},e.prototype.getModdingRealTime=function(){var t;return t=new XMLHttpRequest,t.open("GET","https://starblast.io/simstatus.json",!0),t.onreadystatechange=function(e){return function(){var i,s,n,l,a,o,r,h,u,d;if(4===t.readyState&&200===t.status){for(i=JSON.parse(t.responseText),o={},s=0,n=i.length;s<n;s++)for(u=i[s],h=u.systems,r=0,l=h.length;r<l;r++)d=h[r],d.mod_id&&(o[d.mod_id]||(o[d.mod_id]=0),o[d.mod_id]+=d.players);for(a in o)document.querySelector("[data-modid="+a+"] .modrealtime")&&(document.querySelector("[data-modid="+a+"] .modrealtime").innerText=o[a]);return e.getrealtimer=setTimeout(e.getModdingRealTime,5e3)}}}(this),t.send(null)},e.prototype.getModdingNextDates=function(){var t,e,i,s,n,l,a,o,r,h,u,d;for(n=document.querySelectorAll(".mod.inactive"),l=0,a=n.length;l<a;l++)s=n[l],r=s.getAttribute("data-start-ts"),h=(r-Date.now())/1e3,o=Math.max(0,h),i=o/3600|0,t=(o/600|0)%6,u=(o/60|0)%10,e=Math.abs((o/10|0)%6),d=Math.abs((0|o)%10),s.querySelector(".modnext").innerText=i+":"+t+u+":"+e+d;return setTimeout(this.getModdingNextDates,1e3)},e.prototype.showModdingSpace=function(){var e,i,s;return e=document.querySelector(".modal"),i=document.querySelector(".modal .modalbody"),"block"===e.style.display?"moddingspace"===this.lastModal?this.closeModal():this.closeModal(this.showModdingSpace):(document.querySelector(".modal .modaltitle").innerHTML=t("Modding Space"),i=document.querySelector(".modal .modalbody"),i.innerHTML="<i class='fa fa-cog fa-spin'></i>",s=new XMLHttpRequest,s.open("GET",this.modsfile,!0),s.onreadystatechange=function(t){return function(){var e,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k;if(4===s.readyState&&200===s.status){for(a=JSON.parse(s.responseText),y=a[0],u=0,d=y.length;u<d;u++)p=y[u],p.active||"prototypes"!==p.mod_id||(p.active=!0,p.featured=!0);for(i.innerHTML="<div class='modal-header'>Enjoy our selection of the best mods contributed by the community:</div>",h=document.createElement("div"),h.classList.add("modwrap"),h.style.textAlign="center",n=document.createElement("div"),n.style.textAlign="center",n.innerHTML="<h2 style='margin-bottom:5px;'>Featured mods</h2>",e=document.createElement("div"),e.classList.add("modwrap"),e.style.textAlign="center",e.style.marginBottom="20px",e.style.paddingBottom="10px",e.style.borderBottom="1px solid hsla(200,50%,70%,.5)",x=0,f=0,v=a[0],m=0,I=v.length;m<I;m++)p=v[m],p.active&&!p.featured&&(f+=1,x+=3600*p.active_duration*1e3);for(l=Date.now()%x,k=0,w=0,b=a[0],o=function(i,s){var n,a,o,r,u,d,I,c,p;return i.featured||(w+=3600*i.active_duration*1e3),a=l>k&&l<w,p=Date.now()+k-l,k=w,p<Date.now()&&(p+=x),r=document.createElement("div"),r.classList.add("mod"),r.setAttribute("data-modid",i.mod_id),r.setAttribute("data-start-ts",p),a||i.featured||r.classList.add("inactive"),r.addEventListener("click",function(){if(a||i.featured)return t.closeModal(),t.startModdingMode(i)}),u=new Image,u.src="https://starblast.data.neuronality.com/modding/img/"+i.mod_id+".jpg",c=document.createElement("div"),c.classList.add("totalplayed"),i.new?c.innerHTML="NEW!":(n=Intl?new Intl.NumberFormat(translations.getLang()).format(i.timesplayed||0):i.timesplayed||0,c.innerHTML='<i class="fa fa-gamepad"></i> '+n),d=document.createElement("span"),d.classList.add("nowplaying"),a||i.featured?d.innerHTML='<i class="sbg sbg-user"></i> <span class="modrealtime">0</span>':d.innerHTML='Next event: <span class="modnext">'+p+"</span>",I=document.createElement("div"),I.classList.add("title"),I.innerText=i.title,o=document.createElement("span"),o.classList.add("author"),o.innerText="by "+i.author,I.appendChild(o),c.appendChild(d),r.appendChild(c),r.appendChild(u),r.appendChild(I),i.featured?e.prepend(r):(a&&e.appendChild(r),a?void 0:h.appendChild(r))},r=g=0,c=b.length;g<c;r=++g)p=b[r],p.active&&o(p,r);return t.sortMods(h),i.appendChild(n),i.appendChild(e),i.appendChild(h),O=document.createElement("div"),O.classList.add("modecp"),O.innerHTML="<a target='_blank' href='https://starblast.io/shipeditor/'><i class='sbg sbg-fly-full fa-2x'></i> Ship Editor</a> <a target='_blank' href='https://starblast.io/modding.html'><i class='sbg sbg-modding fa-2x'></i> Mod Editor</a><div>Create more ships and mods (coding skills required)</div>",t.I110I.l10lI.OO11I()&&!t.I110I.is_app&&i.appendChild(O),t.showModal("moddingspace"),t.getModdingRealTime(),t.getModdingNextDates()}}}(this),s.send(null))},e.prototype.sortMods=function(t){var e,i,s,n,l;for(s=function(){var e,i,s,l;for(s=t.children,l=[],e=0,i=s.length;e<i;e++)n=s[e],l.push(n);return l}(),s.sort(function(t,e){return t.dataset.startTs-e.dataset.startTs});null!=t.firstChild;)t.removeChild(t.firstChild);for(l=[],e=0,i=s.length;e<i;e++)n=s[e],l.push(t.appendChild(n));return l},e.prototype.showDonate=function(){var e,i,s,n,l,a,o,r,h,u,d,I;if(u=document.querySelector(".modal"),d=document.querySelector(".modal .modalbody"),"block"===u.style.display)return"donate"===this.lastModal?this.closeModal():this.closeModal(this.showDonate);if(this.I110I.l10lI.OO11I()){for(I=function(t){return function(){return document.querySelector(".ecpverifiedlogo").innerHTML="",document.querySelector(".shippreview").innerHTML="",document.querySelector(".ecpverifiedlogo").appendChild(new I1O00(112,t.I110I.l10lI.custom).canvas),document.querySelector(".shippreview").appendChild(l0Il0.exportThumbnail(101,localStorage.getItem("shipColor"),t.I110I.l10lI.custom.finish,t.I110I.l10lI.custom.laser,192)),t.lIl01()}}(this),l=OI1IO.options,document.querySelector(".modal .modaltitle").innerHTML=t("Greetings, Elite Commander"),d.innerHTML='<div class="infos">\n  <div class="center">\n    <p>'+t("Thank you for your purchase! Your ECP is valid, please keep it safe.")+'</p>\n<button id="viewEcp" class="ecpinput ecpbtn"><i class="fa fa-eye"></i></button>\n<input id="ECPKey" readonly class=\'ecpinput\' placeholder="&#9679;&#9679;&#9679;&#9679;&#9679; - &#9679;&#9679;&#9679;&#9679;&#9679;" data-value=\''+localStorage.getItem("ECPKey")+'\' style="vertical-align:middle; width:200px;">\n  <button id="removeEcp" class="ecpinput ecpbtn"><i class="fa fa-trash"></i></button>\n</div>\n<div class=\'beta textcentered\'>\n  <h3 class=\'customizeship\'>'+t("Create your custom game")+"</h3>\n</div>\n<h3 class='customizeship'>"+t("Customize your ship")+"</h3>\n<table class='customtable noselect'>\n  <tr>\n    <td class='ecpverifiedlogo frozenbg'></td>\n    <td>\n      <div data-type='badge'>\n          <i class='fa fa-caret-left'></i>\n          <div class='title frozenbg'>"+t(l.badge[this.I110I.l10lI.custom.badge])+"</div>\n    <i class='fa fa-caret-right'></i><br />\n</div>\n<div data-type='finish'>\n    <i class='fa fa-caret-left'></i>\n    <div class='title frozenbg'>"+t(l.finish[this.I110I.l10lI.custom.finish])+"</div>\n    <i class='fa fa-caret-right'></i>\n</div>\n<div data-type='laser'>\n    <i class='fa fa-caret-left'></i>\n    <div class='title frozenbg'>"+t(l.laser[this.I110I.l10lI.custom.laser])+"</div>\n          <i class='fa fa-caret-right'></i>\n      </div>\n    </td>\n    <td class='shippreview frozenbg'></td>\n  </tr>\n</table>\n<h3 class=\"customizeship\">"+t("Download our application")+'</h3>\n  <div class=\'download-apps\'>\n    <a href="https://starblast.data.neuronality.com/download/starblast_setup-latest.exe" download><img src="https://starblast.data.neuronality.com/img/windows.png"></a>\n    <a href="https://starblast.data.neuronality.com/download/Starblast.dmg" download><img src="https://starblast.data.neuronality.com/img/osx.jpg"></a>\n    <a href="https://starblast.data.neuronality.com/download/starblast-latest-x86_64.AppImage" download><img src="https://starblast.data.neuronality.com/img/linux.jpg"></a>\n  </div>\n</div>',n=document.createElement("button"),n.setAttribute("class","donate-btn"),n.style.marginTop="0",n.innerHTML=t("Create custom game"),n.addEventListener("click",function(t){return function(){return t.I110I.O1IO0.l1IO0()}}(this)),d.querySelector(".textcentered").appendChild(n),document.getElementById("viewEcp").addEventListener("click",function(t){var e;return e=document.getElementById("ECPKey"),e.value===e.getAttribute("data-value")?e.value="":e.value=e.getAttribute("data-value")}),document.getElementById("removeEcp").addEventListener("click",function(e){return function(i){if(confirm(t("Would you like to remove your ECP from this browser?")))return e.I110I.l10lI.removeKey()}}(this)),i=document.querySelectorAll(".customtable .fa"),a=function(e){return function(i){return i.addEventListener("click",function(s){var n,a,o,r,h,u,d;return h=i.parentElement,d=h.getAttribute("data-type"),n=i.classList.contains("fa-caret-left")?-1:1,a=Object.keys(l[d]),o=a.length,u=a.indexOf(e.I110I.l10lI.custom[d]),r=u+n,r<0&&(r=o-1),r===o&&(r=0),localStorage.setItem(d,a[r]),e.I110I.l10lI.custom[d]=a[r],h.querySelector(".title").innerHTML=t(l[d][a[r]]),I()})}}(this),r=0,h=i.length;r<h;r++)e=i[r],a(e);return I(),this.showModal("donate")}return document.querySelector(".modal .modaltitle").innerHTML="<i class='fa fa-fw ecphead'></i>"+t("Elite Commander Pass"),o=new I1O00(64,this.I110I.l10lI.custom).toImage(),o.style.height="32px",o.style.marginBottom="-5px",o.style.marginLeft="-38px",document.querySelector(".modaltitle .ecphead").appendChild(o),s=function(e){return function(){var i,s,n,l,a,o,r,h,u,I,c,p;for(p=document.getElementById("donatebox").innerHTML,d.innerHTML="<div class='infos'>"+p+"</div>",translations.translateDOM(),d.innerHTML=d.innerHTML.replace(/\$/g,e.currency),l=document.querySelector("#licenceKey"),a=document.querySelector("#licenceKeyBtn"),o=document.querySelector("#licenceKeyForm"),h=document.querySelector("#paypal_submission"),I=document.querySelectorAll(".pricechoice span"),i=document.querySelector("#donatebtn"),c=function(t){var e,i,s;for(i=0,e=I.length;i<e;i++)s=I[i],s.classList.remove("active");return t.classList.add("active"),s=t.getAttribute("data-price")},s=function(t){return t.addEventListener("click",function(e){return c(t)})},r=0,n=I.length;r<n;r++)u=I[r],s(u);return i.addEventListener("click",function(t){return e.I110I.l10lI.l1lO0(),h.querySelector("[name=amount]").value=document.querySelector(".pricechoice .active").getAttribute("data-price"),h.querySelector("[name=lc]").value=translations.getLang().toUpperCase(),h.querySelector("[name=custom]").value=e.I110I.l10lI.key,h.querySelector("[name=currency_code]").value="€"===e.currency?"EUR":"USD",h.submit()}),o.addEventListener("submit",function(i){var s;if(i.preventDefault(),!e.ECPverifing)return s=l.value.replace(/[o|O]/g,"0").toLowerCase(),e.I110I.l10lI.lO1ll(s)?(e.I110I.l10lI.I11l0(s),e.ECPverifing=!0,a.innerHTML="<i class='fa fa-cog fa-spin'></i>",e.I110I.l10lI.verify(function(t){return e.ECPverifing=!1,t?e.reloadGame():a.innerHTML="OK"})):alert(t("This ECPKey is invalid"))})}}(this),new I10IO(this,function(t){return function(e,i){if("Europe"===i&&(t.currency="€",s()),null!==t.I110I.l10lI.key)return t.I110I.l10lI.verifyServer(e,function(e){if(e)return t.reloadGame()})}}(this)),s(),this.showModal("donate")},e.prototype.buildSettings=function(){var e,i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x;document.querySelector(".modal .modaltitle").innerHTML=t("SETTINGS"),e="",h=document.querySelector(".modal .modalbody");for(s in this.I110I.settings.parameters)if(!this.I110I.settings.isHidden(s))if(c=this.I110I.settings.parameters[s],"range"!==c.type)if("select"!==c.type)e+='<div class="option">'+t(c.name)+'<label class="switch"><input type="checkbox" '+(c.value?'checked="checked"':"")+' id="'+s+'""><div class="slider"></div></label></div>';else{for(e+='<div class="option">'+t(c.name)+'<select id="'+s+'">',"language"===s&&c.options.sort(),g=c.options,n=0,l=g.length;n<l;n++)d=g[n],"language"===s?(x=t(d,d)+" - "+t(d,"en"),v="style='font-size:.8em'"):(x=t(d),v=""),e+="<option "+v+' value="'+d+'" '+(c.value===d?'selected="selected"':"")+">"+x+"</option>";e+="</select></div>"}else e+='<div class="option">'+t(c.name)+'<div class="range">\n  <input id=\''+s+"' type=\"range\" min='"+c.min+"' max='"+c.max+"' value='"+c.value+"' step='"+c.l1O00+"'>\n<span id='"+s+"_value'>"+c.value+"</span>\n  </div>\n</div>";for(h.innerHTML=e,I=document.querySelectorAll(".option input[type=checkbox]"),u=0,a=I.length;u<a;u++)d=I[u],d.addEventListener("click",function(t){return function(e){return t.updateSettings(e)}}(this));for(f=document.querySelectorAll(".option input[type=range]"),i=function(e){return function(i){if(i.addEventListener("input",function(s){return x=document.querySelector("#"+i.getAttribute("id")+"_value"),x.innerText="0"===i.value?t("Off"):Math.round(50*i.value)+" %",e.updateSettings(s,!0)}),i.dispatchEvent(new Event("input")),"sounds"===i.id)return i.addEventListener("change",function(t){return e.I110I.OlIl1.beep(4+.2*Math.random(),1)})}}(this),p=0,o=f.length;p<o;p++)m=f[p],i(m);for(w=document.querySelectorAll(".option select"),y=[],O=0,r=w.length;O<r;O++)b=w[O],y.push(b.addEventListener("change",function(t){return function(e){return t.updateSettings(e,!0)}}(this)));return y},e.prototype.showSettings=function(){var t;return t=document.querySelector(".modal"),"block"===t.style.display?"settings"===this.lastModal?this.closeModal():this.closeModal(this.showSettings):(this.buildSettings(),this.showModal("settings"))},e.prototype.l1IO0=function(){var e,i,s,n;return i=document.querySelector(".modal"),"block"===i.style.display?"gamecreator"===this.lastModal?this.closeModal():this.closeModal(this.l1IO0):(s=document.querySelector(".modal .modalbody"),document.querySelector(".modal .modaltitle").innerHTML=t("Create custom game"),e="",n=new XMLHttpRequest,n.open("GET","https://starblast.io/simstatus.json",!0),n.onreadystatechange=function(i){return function(){var l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E;if(4===n.readyState&&200===n.status){for(M=JSON.parse(n.responseText),x=[],I=0,c=M.length;I<c;I++)_=M[I],-1===x.indexOf(_.location)&&x.push(_.location);for(x.sort(),e+='<div class="option">'+t("Server location")+'<select id="server_location">',f=0,p=x.length;f<p;f++)w=x[f],e+='<option value="'+w+'">'+w+"</option>";for(e+="</select></div>",e+='<div class="option">'+t("Map name")+'<input id="map_name" maxlength="20" type="text" placeholder="'+t("Random map name")+'"></div>',e+='<div id="mapsize" class="option">'+t("Map Size")+'<div class="range"><input id="map_size" type="range" min="20" max="200" value="60" step="10"><span id="mpsize">'+t("Average")+"</span></div></div>",e+='<div id="mappattern"><div class="option">'+t("Map pattern")+'<input id="map_id" min="1" max="9999" type="number" class="number" value="5000"></div>',e+='<canvas id="mappreview" width="239" height="239"></canvas></div>',e+='<hr style="clear:both" />',e+='<div class="option">'+t("Game mode")+'<select id="game_mode">',v=i.installed_modes,g=0,O=v.length;g<O;g++)u=v[g],u.custom_game_allowed&&(e+='<option value="'+u.id+'">'+t(u.custom_game_name)+"</option>");for(e+="</select></div>",e+='<div class="sandboxmode" id="_survival"><div class="option">'+t("Survival Triggers")+"</div>",e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Time")+'<div class="range"><input id="survival_time" type="range" min="10" max="600" value="45" step="5"><span id="stvalue">45min</span></div></div>',e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Level")+'<div class="range"><input id="survival_level" type="range" min="2" max="8" value="7" step="1"><span id="slvalue">7</span></div></div></div>',e+='<div class="sandboxmode" id="_team"><div class="option">'+t("Team mode options")+"</div>",e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Station Size")+'<div class="range"><input id="station_size" type="range" min="1" max="4" value="2" step="1"><span id="ssvalue">'+t("Average")+"</span></div></div>",e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Station Crystal Capacity")+'<div class="range"><input id="station_crystal_capacity" type="range" min="0.1" max="10" value="1" step=".1"><span id="sccvalue">&times; 1</span></div></div>',e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Station Repair Threshold")+'<div class="range"><input id="station_repair_threshold" type="range" min="0" max="1" value=".25" step=".01"><span id="srtvalue">25 %</span></div></div>',e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Station Regeneration")+'<div class="range"><input id="station_regeneration" type="range" min="0" max="2" value="1" step=".1"><span id="stregenvalue">&times; 1</span></div></div>',e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Healing Enabled")+'<label class="switch"><input type="checkbox" id="healing_enabled"><div class="slider"></div></label></div>',e+="</div>",e+='<div style="display:none;" class="option" id="seasonchoice"><select id="season"><option value="s1">'+t("Season %d").replace("%d","1")+"</option></select></div>",e+='<div id="mapspecs">',e+="<hr />",e+='<div class="option">'+t("Max players")+'<div class="range"><input id="max_players" type="range" min="2" max="120" value="30" step="1"><span id="mpvalue">30</span></div></div>',e+='<div class="option" id="crysval">'+t("Crystal value")+'<div class="range"><input id="crystal_value" type="range" min="0" max="5" value="2" step="0.5"><span id="crvalue">&times;2</span></div></div>',e+='<div class="option">'+t("Asteroids strength")+'<div class="range"><input id="asteroids_strength" type="range" min="0" max="5" value="1" step="0.1"><span id="asstr">'+t("Default")+"</span></div></div>",e+='<div class="option" id="nteams">'+t("Number of teams")+'<div class="range"><input id="friendly_colors" type="range" min="0" max="5" value="0" step="1"><span id="fcvalue">'+t("None")+"</span></div></div>",e+="<hr />",e+="</div>",e+='<div id="shipspecs">',e+='<div class="option">'+t("Number of lives")+'<div class="range"><input id="lives" type="range" min="0" max="5" value="3" step="1"><span id="livesvalue">3</span></div></div>',e+='<div class="option">'+t("Starting ship")+'<select id="starting_ship">',b=II1l1.ships,y=0,m=b.length;y<m;y++)z=b[y],l=100*z.level+z.model,e+='<option style="font-size:.8em;" data-level="'+z.level+'" value="'+l+'">['+t("Level")+" "+z.level+"] "+z.name+"</option>";if(e+="</select></div>",e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Maxed")+'<label class="switch"><input type="checkbox" id="maxedship"><div class="slider"></div></label></div>',e+='<div class="option">'+t("Max ship level")+'<div class="range"><input id="max_level" type="range" min="1" max="7" value="7" step="1"><span id="mlvalue">7</span></div></div>',e+='<div class="option"> <i class="fa fa-fw fa-level-up fa-rotate-90"></i> '+t("Number of lives")+'<div class="range"><input id="maxtierlives" type="range" min="0" max="5" value="3" step="1"><span id="maxtierlivesvalue">3</span></div></div>',e+="<hr />",e+="</div>",e+='<div id="shipoptions">',e+='<div class="option">'+t("Ship Speed")+'<div class="range"><input id="speed_mod" type="range" min="0.1" max="2" value="1" step="0.1"><span id="ssstr">'+t("Default")+"</span></div></div>",e+='<div class="option">'+t("Shield regen factor")+'<div class="range"><input id="shield_regen_factor" type="range" min="0" max="2" value="1" step="0.1"><span id="srf">'+t("Default")+"</span></div></div>",e+='<div class="option">'+t("Power regen factor")+'<div class="range"><input id="power_regen_factor" type="range" min="0" max="2" value="1" step="0.1"><span id="prf">'+t("Default")+"</span></div></div>",e+='<div class="option">'+t("Friction ratio")+'<div class="range"><input id="friction_ratio" type="range" min="0" max="2" value="1" step="0.1"><span id="frratio">&times; 1</span></div></div>',e+='<div class="option">'+t("Strafe")+'<div class="range"><input id="strafe" type="range" min="0" max="1" value="0" step="0.1"><span id="stratio">None</span></div></div>',e+='<div class="option">'+t("RCS Toggle")+'<label class="switch"><input type="checkbox" id="rcs_toggle"><div class="slider"></div></label></div>',e+='<div class="option">'+t("Limited mines lifespan")+'<label class="switch"><input checked="checked" type="checkbox" id="mines_self_destroy"><div class="slider"></div></label></div>',e+="</div>",e+='<div class="textcentered"></div>',s.innerHTML=e,a=document.createElement("button"),a.setAttribute("class","donate-btn"),a.innerHTML=t("Create custom game"),s.querySelector(".textcentered").appendChild(a),o=!1,a.addEventListener("click",function(){var e,n,l,r,h;if(!o){for(o=!0,l=s.querySelectorAll(".option"),h={},r=0,e=l.length;r<e;r++)n=l[r],n.querySelector("select")&&(h[n.querySelector("select").getAttribute("id")]=n.querySelector("select").value),n.querySelector("input")&&(h[n.querySelector("input").getAttribute("id")]=n.querySelector("input").value),n.querySelector("input[type=checkbox]")&&(h[n.querySelector("input").getAttribute("id")]=n.querySelector("input").checked);return"team"!==h.game_mode&&(h.healing_enabled=void 0),a.innerHTML="<i class='fa fa-cog fa-spin'></i>",i.I110I.createMatch(h,function(e,s){return k(),e||(o=!1,a.innerHTML=t("Create custom game")),document.location.hash=s,i.showGameCreated()})}}),k=function(){var t,e,i,n,l;for(i=s.querySelectorAll(".option"),n={},l=0,t=i.length;l<t;l++)e=i[l],e.querySelector("select")&&(n[e.querySelector("select").getAttribute("id")]=e.querySelector("select").value),e.querySelector("input")&&(n[e.querySelector("input").getAttribute("id")]=e.querySelector("input").value),e.querySelector("input[type=checkbox]")&&(n[e.querySelector("input").getAttribute("id")]=e.querySelector("input").checked);return localStorage.setItem("privateGameSettings",JSON.stringify(n))},E=function(){var t,e,s;return document.getElementById("mappattern").style.display="block",document.getElementById("nteams").style.display="block",document.getElementById("mapsize").style.display="block",document.getElementById("shipspecs").style.display="block",document.getElementById("shipoptions").style.display="block",document.getElementById("mapspecs").style.display="block",e=document.getElementById("map_id").value,s=document.getElementById("map_size").value,t=document.getElementById("game_mode").value,"battleroyale"===t&&(document.getElementById("nteams").style.display="none",document.getElementById("shipspecs").style.display="none",document.getElementById("shipoptions").style.display="none",document.getElementById("crysval").style.display="none"),"deathmatch"===t&&(document.getElementById("mappattern").style.display="none",document.getElementById("nteams").style.display="none",document.getElementById("shipspecs").style.display="none"),"invasion"===t&&(document.getElementById("mappattern").style.display="none",document.getElementById("nteams").style.display="none",document.getElementById("mapsize").style.display="none",document.getElementById("shipspecs").style.display="none",document.getElementById("shipoptions").style.display="none",document.getElementById("mapspecs").style.display="none"),i.showModal(i.lastmodal),new II1II(i.I110I).ll111(document.getElementById("mappreview"),e,s,t)},document.getElementById("map_id").addEventListener("input",function(){var t;return t=parseInt(this.value),isNaN(t)&&(this.value="5000"),t<1&&(this.value="1"),t>9999&&(this.value="9999"),E(),k()}),document.getElementById("rcs_toggle").addEventListener("click",function(){return k()}),document.getElementById("mines_self_destroy").addEventListener("click",function(){return k()}),document.getElementById("healing_enabled").addEventListener("click",function(){return k()}),document.getElementById("friction_ratio").addEventListener("input",function(){return document.getElementById("frratio").innerHTML="&times; "+this.value,"1"===this.value&&(document.getElementById("frratio").innerHTML=t("Default")),k()}),document.getElementById("strafe").addEventListener("input",function(){return document.getElementById("stratio").innerHTML="&times; "+this.value,"0"===this.value&&(document.getElementById("stratio").innerHTML=t("None")),k()}),document.getElementById("speed_mod").addEventListener("input",function(){return document.getElementById("ssstr").innerHTML="&times; "+this.value,"1"===this.value&&(document.getElementById("ssstr").innerHTML=t("Default")),k()}),document.getElementById("shield_regen_factor").addEventListener("input",function(){return document.getElementById("srf").innerHTML="&times; "+this.value,"1"===this.value&&(document.getElementById("srf").innerHTML=t("Default")),k()}),document.getElementById("power_regen_factor").addEventListener("input",function(){return document.getElementById("prf").innerHTML="&times; "+this.value,"1"===this.value&&(document.getElementById("prf").innerHTML=t("Default")),k()}),document.getElementById("maxedship").addEventListener("click",function(){return k()}),document.getElementById("game_mode").addEventListener("input",function(){var t,e,i,s,n;for(document.getElementById("seasonchoice").style.display="none",i=document.querySelectorAll(".sandboxmode"),n=0,e=i.length;n<e;n++)s=i[n],s.style.display="none";return t=document.getElementById("friendly_colors"),"survival"===this.value&&(document.getElementById("_survival").style.display="block",t.setAttribute("min","0"),t.dispatchEvent(new Event("input"))),"team"===this.value&&(document.getElementById("_team").style.display="block",t.setAttribute("min","2"),t.dispatchEvent(new Event("input"))),"invasion"===this.value&&(document.getElementById("seasonchoice").style.display="block"),E(),k()}),document.getElementById("starting_ship").addEventListener("input",function(){var t,e;return t=document.getElementById("max_level"),t.setAttribute("min",this.options[this.selectedIndex].getAttribute("data-level")),t.dispatchEvent(new Event("input")),e=document.getElementById("survival_level"),e.setAttribute("min",1*this.options[this.selectedIndex].getAttribute("data-level")+1),e.dispatchEvent(new Event("input")),k()}),document.getElementById("server_location").addEventListener("input",function(){return k()}),document.getElementById("max_players").addEventListener("input",function(){return document.getElementById("mpvalue").innerHTML=this.value,k()}),document.getElementById("crystal_value").addEventListener("input",function(){var e;return e="&times; "+this.value,"0"===this.value&&(e=t("None")),"1"===this.value&&(e=t("Default")),document.getElementById("crvalue").innerHTML=e,k()}),document.getElementById("asteroids_strength").addEventListener("input",function(){var e;return e="&times; "+this.value,"0"===this.value&&(e=t("None")),"1"===this.value&&(e=t("Default")),document.getElementById("asstr").innerHTML=e,k()}),document.getElementById("station_size").addEventListener("input",function(){var e;return"1"===this.value&&(e=t("Small")),"2"===this.value&&(e=t("Average")),"3"===this.value&&(e=t("Big")),"4"===this.value&&(e=t("Huge")),document.getElementById("ssvalue").innerHTML=e,k()}),document.getElementById("station_crystal_capacity").addEventListener("input",function(){return document.getElementById("sccvalue").innerHTML="&times; "+this.value,k()}),document.getElementById("station_repair_threshold").addEventListener("input",function(){return document.getElementById("srtvalue").innerHTML=Math.round(100*this.value)+" %",k()}),document.getElementById("station_regeneration").addEventListener("input",function(){return document.getElementById("stregenvalue").innerHTML="&times; "+this.value,k()}),document.getElementById("map_size").addEventListener("input",function(){var e;return e=20*Math.round(this.value/20),20===e&&(e=t("Micro")),40===e&&(e=t("Tiny")),60===e&&(e=t("Small")),80===e&&(e=t("Average")),100===e&&(e=t("Big")),120===e&&(e=t("Bigger")),140===e&&(e=t("Even Bigger")),160===e&&(e=t("Really big")),180===e&&(e=t("Biggest")),200===e&&(e=t("Huge")),document.getElementById("mpsize").innerHTML=e,E(),k()}),document.getElementById("lives").addEventListener("input",function(){return document.getElementById("livesvalue").innerHTML=this.value,k()}),document.getElementById("maxtierlives").addEventListener("input",function(){return document.getElementById("maxtierlivesvalue").innerHTML=this.value,k()}),document.getElementById("max_level").addEventListener("input",function(){return document.getElementById("mlvalue").innerHTML=this.value,k()}),document.getElementById("friendly_colors").addEventListener("input",function(){var e;return e="0"===this.value?t("None"):this.value,document.getElementById("fcvalue").innerHTML=e,k()}),document.getElementById("survival_time").addEventListener("input",function(){return document.getElementById("stvalue").innerHTML=t("%s minutes").replace("%s",this.value),k()}),document.getElementById("survival_level").addEventListener("input",function(){var e;return e="8"===this.value?t("Infinite"):this.value,document.getElementById("slvalue").innerHTML=e,k()}),r=localStorage.getItem("privateGameSettings")){r=JSON.parse(r);for(d in r)null!=document.getElementById(d)&&("checkbox"===document.getElementById(d).getAttribute("type")?document.getElementById(d).checked=r[d]:(document.getElementById(d).value=r[d],h=new Event("input"),document.getElementById(d).dispatchEvent(h)))}else document.querySelectorAll(".sandboxmode")[0].style.display="block";return E(),i.showModal("gamecreator")}}}(this),n.send(null))},e.prototype.showGameCreated=function(){var e,i,s,n;return i=document.querySelector(".modal"),"block"===i.style.display?"gamecreated"===this.lastModal?this.closeModal():this.closeModal(this.showGameCreated):(s=document.querySelector(".modal .modalbody"),
document.querySelector(".modal .modaltitle").innerHTML=t("Your custom game"),e=document.location.href,n="<div class='infos textcentered'>",n+=t("Your custom game was successfully created. You can now invite people with the link below:"),n+="</div>",this.I110I.is_app?n+="<div class='stats textcentered' style='padding:20px'>\n  <small>"+t("Copy Room Link")+"</small><br />\n<input readonly value='https://starblast.io/"+document.location.hash+'\' onclick="this.focus(); this.select();" />\n</div>':n+="<div class='stats textcentered' style='padding:20px'>\n  <small>"+t("Copy Room Link")+"</small><br />\n<input readonly value='"+e+'\' onclick="this.focus(); this.select();" /><br />\n  <i class="fa fa-facebook"></i>\n  <i class="fa fa-twitter"></i>\n  <i class="fa fa-vk"></i>\n  <i class="fa fa-envelope"></i>\n</div>',n+="<div class='infos textcentered'>",n+=t("You have to join the game within 2 minutes or it will be discarded."),n+="<br />",n+="<button class='donate-btn' id='joincustom'>"+t("Join my custom game")+"</button>",n+="</div>",s.innerHTML=n,document.querySelector("#joincustom").addEventListener("click",function(e){return function(i){var s;return s=document.location.hash.match(/#(\d+)@(\w.+):(\d+)/),e.game_modes=[{name:t("Private game"),id:"private",custom_color:!0,address:{ip:s[2],port:0|s[3],gameid:0|s[1]}}],e.startGame(),e.closeModal()}}(this)),this.I110I.is_app||(document.querySelector(".modalbody .fa-envelope").addEventListener("click",function(t){return function(t){return document.location.href="mailto:?subject=starblast.io&body="+e}}()),document.querySelector(".modalbody .fa-facebook").addEventListener("click",function(t){return function(t){return window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e))}}()),document.querySelector(".modalbody .fa-vk").addEventListener("click",function(t){return function(t){return window.open("http://vk.com/share.php?url="+encodeURIComponent(e))}}()),document.querySelector(".modalbody .fa-twitter").addEventListener("click",function(i){return function(i){var s;return s=t("Come and play")+" #starblastio",window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(s)+"&url="+encodeURIComponent(e))}}())),this.showModal("gamecreated"))},e.prototype.showPDMRankings=function(){var e,i,s,n,l,a,o,r,h,u,d;return a=document.querySelector(".modal"),"block"===a.style.display?"pdmrankings"===this.lastModal?this.closeModal():this.closeModal(this.showPDMRankings):(o=document.querySelector(".modal .modalbody"),i=localStorage.getItem("activeseason")||"s1",e=localStorage.getItem("activeregion")||"Europe",null==document.querySelector("[data-region="+e+"]")&&(e="America"),n=null,s=null,l='<div class=\'gmodes\'>\n  <span data-mode="deathmatch" class="selected">'+t("Pro Deathmatch")+'</span>\n<span data-mode="invasion">'+t("Invasion")+"</span>\n</div>",l+="<div class='textcentered spinner'><i class='fa fa-3x fa-cog fa-spin'></i></div>",this.I110I.l10lI.OO11I()||(l+="<div class='textcentered' style='margin-bottom:50px;'>",l+=t("Buy your Elite Commander Pass to take part in the Championship."),l+="</div>"),l+="<div id='modalcontent'></div>",o.innerHTML=l,d=function(e){return function(e){var i,n,l,a,r,h,u,d,I,c,p,O,m,f,g,y,v,b;for(m=function(t){var i,n,l,a;for(a=s[e],i=0,n=a.length;i<n;i++)if(l=a[i],t===l.id)return l},document.querySelector(".modal .modaltitle").innerHTML=t("Invasion rankings"),d="<div class='textcentered regions'>",d+="<span data-season='s1' class='region active frozenbg'>"+t("Season %d").replace("%d","1")+"</span>",d+="</div>",d+="<div id='ranks'></div>",o.querySelector("#modalcontent").innerHTML=d,l=new Date(s.last_update),y='<table class="rankings">\n<thead style="background:rgba(0,0,0,.5)"><tr>\n  <th colspan="2">'+t("Updated %d").replace("%d",l.toLocaleTimeString(translations.getLang(),{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))+"</th>\n<th></th>\n<th>"+t("Max wave reached")+"</th>\n<th>"+t("Highscore")+"</th>\n</tr></thead>\n<tbody>",a=0,f=s[e],r=0,h=f.length;r<h&&(O=f[r],c=O.name.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),b=O.max_wave,O.victory>0&&(b=O.victory+" <i class='fa fa-trophy'></i>"),y+='<tr O10lO="'+O.id+'">\n  <td style="width:80px; padding:0 10px;"></td>\n  <td style="width:20%; word-wrap: break-word; word-break: break-all; white-space: normal;font-size:.7em; padding:0;"><div style=\'max-height:30px; overflow:hidden;\'>'+c+'</div></td>\n  <td class="textcentered" style="width:1%; background:rgba(0,0,0,.2); border-left:1px dashed hsl(200,50%,50%);">#'+ ++a+'</td>\n  <td class="trophies textcentered" style="width:30%">'+b+'</td>\n  <td class="textcentered" style="width:30%">'+O.score.toLocaleString()+"</td>\n</tr>",!(a>=100));r++);for(y+="</tbody></table>",document.getElementById("ranks").innerHTML=y,n=document.querySelectorAll("[O10lO]"),v=500,p=700,g=[],I=0,u=n.length;I<u;I++)i=n[I],g.push(function(t){return setTimeout(function(){var e;return O=m(t.getAttribute("O10lO")),e=new I1O00(t.offsetHeight-5,{badge:O.custom.badge,laser:O.custom.laser,finish:O.custom.finish}).canvas,t.querySelector("td:first-child").appendChild(e),setTimeout(function(){return e.style.opacity="1",e.style.transform="translateY(0px) scale(1)"},p+=50)},v+=1)}(i));return g}}(),u=function(i){return function(i,s){var n,l,a,r,h,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A;b=function(t){var e,n,l,a;for(a=i.ratings[s],e=0,n=a.length;e<n;e++)if(l=a[e],t===l.id)return l},document.querySelector(".modal .modaltitle").innerHTML=t("Pro Deathmatch Championship"),m="<div class='textcentered regions'>";for(T in i.ratings)"local"!==T&&"Australia"!==T&&(m+="<span data-region="+T+" class='region frozenbg'>"+t(T)+"</span>");for(m+="</div>",m+="<div id='ranks'></div>",o.querySelector("#modalcontent").innerHTML=m,e=localStorage.getItem("activeregion")||"Europe",null==document.querySelector("[data-region="+e+"]")&&(e="America"),document.querySelector("[data-region="+e+"]").classList.add("active"),M=document.querySelectorAll(".region.frozenbg"),r=function(t){return t.addEventListener("click",function(){var e,s,n;for(n=0,s=M.length;n<s;n++)e=M[n],e.classList.remove("active");return t.classList.add("active"),localStorage.setItem("activeregion",t.getAttribute("data-region")),u(i,t.getAttribute("data-region"))})},d=0,I=M.length;d<I;d++)z=M[d],r(z);for(i.ratings[s].sort(function(t,e){return e.live_rating-t.live_rating}),h=0,E=i.ratings[s],f=0,c=E.length;f<c;f++)v=E[f],v.live_rank=++h;for(i.ratings[s].sort(function(t,e){return e.official_rating-t.official_rating}),a=new Date(i.last_update),C='<table class="rankings">\n<thead><tr>\n  <th colspan="2">'+t("Official rankings are updated every day at %d").replace("%d",a.toLocaleTimeString(translations.getLang(),{hour:"numeric",minutes:"numeric"}))+'</th>\n  <th class="orating" colspan="3">'+t("Official ranking")+'</th>\n  <th colspan="3" style="width:33.333%">'+t("Live ranking")+"</th>\n</tr></thead>\n<tbody>",h=0,S=i.ratings[s],k=0,p=S.length;k<p&&(v=S[k],w=Math.round(v.live_rating-Math.round(v.official_rating)),R=v.official_rating<v.live_rating?"+":"",x=0===w?"=":"("+R+w+")",g=v.name.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),C+='<tr O10lO="'+v.id+'">\n  <td style="width:80px; padding:0 10px;"></td>\n  <td style="width:25%; word-wrap: break-word; word-break: break-all; white-space: normal;font-size:.7em; padding:0;"><div style="max-height:30px; overflow:hidden;">'+g+'</div></td>\n  <td style="width:10%; background:rgba(0,0,0,.2); border-left:1px dashed hsl(200,50%,50%);">#'+ ++h+'</td>\n  <td style="text-align:center; background:rgba(0,0,0,.2);">'+Math.round(v.official_rating)+'</td>\n  <td class="trophies">'+(h<=3?"<i class='fa fa-trophy'></i>":"")+'</td>\n  <td style="width:10%">#'+v.live_rank+'</td>\n  <td style="text-align:center;">'+Math.round(v.live_rating)+" <small>"+x+'</small></td>\n  <td style="width:10%;">'+(h>v.live_rank?"<i class='fa fa-long-arrow-up'></i>&nbsp;"+(h-v.live_rank):h<v.live_rank?"<i class='fa fa-long-arrow-down'></i>&nbsp;"+-1*(h-v.live_rank):"")+"</td>\n</tr>",!(h>=100));k++);for(C+="</tbody></table>",document.getElementById("ranks").innerHTML=C,l=document.querySelectorAll("[O10lO]"),A=500,y=700,P=[],_=0,O=l.length;_<O;_++)n=l[_],P.push(function(t){return setTimeout(function(){var e;return v=b(t.getAttribute("O10lO")),e=new I1O00(t.offsetHeight-5,{badge:v.custom.badge,laser:v.custom.laser,finish:v.custom.finish}).canvas,t.querySelector("td:first-child").appendChild(e),setTimeout(function(){return e.style.opacity="1",e.style.transform="translateY(0px) scale(1)"},y+=50)},A+=1)}(n));return P}}(),r=new XMLHttpRequest,r.open("GET",this.rankingsfile,!0),r.onreadystatechange=function(t){return function(){var t;if(4===r.readyState&&200===r.status)return t=JSON.parse(r.responseText),n=t,document.querySelector(".modal .spinner")&&document.querySelector(".modal .spinner").remove(),u(t,e)}}(),r.send(null),h=new XMLHttpRequest,h.open("GET",this.invasionfile,!0),h.onreadystatechange=function(){var t,l,a,o,r;if(4===h.readyState&&200===h.status){for(s=JSON.parse(h.responseText),l=document.querySelectorAll(".gmodes span"),r=[],a=0,o=l.length;a<o;a++)t=l[a],r.push(function(t){return t.addEventListener("click",function(){var s,a,o;for(o=0,a=l.length;o<a;o++)s=l[o],s.classList.remove("selected");if(t.classList.add("selected"),"invasion"===t.getAttribute("data-mode")&&d(i),"deathmatch"===t.getAttribute("data-mode"))return u(n,e)})}(t));return r}},h.send(null),this.showModal("pdmrankings"))},e.prototype.updateSettings=function(t,e){var i;if(null==e&&(e=!1),this.I110I.settings.set(t.target.id,e?t.target.value:t.target.checked),this.I110I.settings.auto=!1,localStorage.setItem("auto",!1),"language"===t.target.id)return translations.langChanged(),this.buildSettings(),this.I110I.is_app?this.I110I.is_mobile_app?i=document.querySelector(".gamemodes"):(i=document.querySelector(".gamemodes"),i.innerHTML="",this.modeMenuBuilt=!1):this.changeGameMode(0)},e.prototype.openingCountdown=function(){var e,i,s,n,l,a,o,r,h;return s=document.querySelector("#game_over"),a=(this.opening-Date.now())/1e3,l=Math.max(0,a),n=l/3600|0,e=(l/600|0)%6,r=(l/60|0)%10,i=Math.abs((l/10|0)%6),h=Math.abs((0|l)%10),a<=0?this.reloadGame():(o=n+" : "+e+r+" : "+i+h,s.innerHTML="<div class='smallblue'>"+t("game starts in")+"</div>"+o,this.IlIO1(),setTimeout(function(t){return function(){return t.openingCountdown()}}(this),100))},e.prototype.clear=function(){return this.llIlO(this.overlay)},e.prototype.I0lII=function(t){if(t>=100)return"function"==typeof GiveAway?new GiveAway(this.I110I):"function"==typeof PromoContest?new PromoContest(this.I110I):this.l111I()},e.prototype.gameLoader=function(t,e){var i,s,n;if(i=document.querySelector(".gameloader"),s=i.querySelector(".loaderprogress"),n=i.querySelector(".textprogress"),s.style.width=t+"%",n.innerHTML=e,t>=100)return this.llIlO(this.overlay)},e.prototype.setFullScreen=function(){if(null==document.documentElement.webkitRequestFullScreen||document.webkitIsFullScreen?null==document.documentElement.requestFullScreen||document.fullScreen?null==document.documentElement.mozRequestFullScreen||document.mozFullScreen||document.documentElement.mozRequestFullScreen():document.documentElement.requestFullScreen():document.documentElement.webkitRequestFullScreen(),"undefined"!=typeof screen&&null!==screen&&null!=screen.orientation)return screen.orientation.lock("landscape").then(null,function(t){})},e.prototype.isFullScreen=function(){return!!document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenEnabled},e.prototype.exitFullScreen=function(){return null!=document.exitFullscreen?document.exitFullscreen():null!=document.webkitExitFullscreen?document.webkitExitFullscreen():null!=document.mozCancelFullScreen?document.mozCancelFullScreen():null!=document.msExitFullscreen?document.msExitFullscreen():void 0},e.prototype.toggleFullScreen=function(){return this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},e.prototype.showStatLines=function(){if(document.querySelector(".statinfo.hide"))return document.querySelector(".statinfo.hide").classList.remove("hide"),setTimeout(function(t){return function(){return t.showStatLines()}}(this),300)},e.prototype.swapElements=function(t,e){var i,s,n;return i=t.parentNode,s=e.parentNode,n=e.nextSibling,n===t&&(n=n.nextSibling),i.replaceChild(e,t),n?s.insertBefore(t,n):s.appendChild(t),!0},e.prototype.killed=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O;if(e||(e={score:0,killer:null,kills:0,highscore:0,gameover:!1,rank:0}),e.gameover)return this.gameOver(e);this.I110I.l10lI.OO11I()||this.I110I.is_app||(document.querySelector(".top-left")&&(document.querySelector(".top-left").innerHTML='<div class="adsbyvli" data-ad-slot="vi_462315137"></div>'),(window.vitag.Init=window.vitag.Init||[]).push(function(){viAPItag.initInstreamBanner("vi_462315137")}),(window.vitag.Init=window.vitag.Init||[]).push(function(){viAPItag.display("vi_462315138")})),null!=e.killer&&(e.killer=e.killer.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),o=document.querySelector("#player"),h=document.querySelector("#respawn"),i=h.nextElementSibling,c=h.querySelector(".stats"),l=document.querySelector(".gameloader"),u=document.querySelector("#respawn_actions"),I=document.querySelector("#respawn_swap"),s=document.querySelector("#continue_btn"),d=document.querySelector("#respawn_btn"),r=document.querySelector("#refresh_btn"),n=document.querySelector(".followtools"),this.overlay.classList.remove("hide"),this.overlay.style.display="block",o.style.display="none",i.style.display="block",n&&(n.style.display="block"),i.style.visibility="hidden",u.style.opacity="0",I.style.opacity="0",l.style.display="none",h.style.display="block",p="";for(a in e)O=e[a],"rank"!==a&&"mode"!==a&&"boolean"!=typeof O&&O&&null!=(O=(""+O).replace(/</g,"&lt;").replace(/>/g,"&gt;"))&&(p+='<div class="statinfo hide"><span>'+t(a)+"</span><span>"+O+"</span></div>");return c.innerHTML=p,this.showStatLines(),this.displayOptions(),this.IlIO1(),setTimeout(function(t){return function(){return Math.random()<.5&&t.swapElements(u,I),i.style.visibility="visible",t.displayOptions(),t.IlIO1(),setTimeout(function(){return d.style.display="none",r.style.display="none",s.style.display="inline-block",u.style.opacity="1",I.style.opacity="1",t.IlIO1(),t.timeout=100,t.countdown()},t.I110I.l10lI.OO11I()?10:300)}}(this),this.I110I.l10lI.OO11I()?10:1e3)},e.prototype.sharePart=function(){var e,i,s,n,l,a;return s=document.querySelector("#respawn"),e=s.nextElementSibling,n=document.querySelector("#respawn_actions"),l=document.querySelector("#respawn_swap"),a=document.querySelector(".stats"),e.style.opacity="0",n.style.opacity="0",l.style.opacity="0",a.style.opacity="0",i=document.location.href,this.isAdBlocked||this.refreshAds(),setTimeout(function(s){return function(){return a.innerHTML="<p>"+t("Play now with friends!")+"</p>\n<small>"+t("Copy Room Link")+"</small><br />\n<input readonly value='"+i+'\' onclick="this.focus(); this.select();" /><br />\n<i class="fa fa-facebook"></i>\n<i class="fa fa-twitter"></i>\n<i class="fa fa-vk"></i>\n<i class="fa fa-envelope"></i>',document.querySelector(".stats .fa-envelope").addEventListener("click",function(t){return document.location.href="mailto:?subject=starblast.io&body="+i}),document.querySelector(".stats .fa-facebook").addEventListener("click",function(t){return window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(i))}),document.querySelector(".stats .fa-vk").addEventListener("click",function(t){return window.open("http://vk.com/share.php?url="+encodeURIComponent(i))}),document.querySelector(".stats .fa-twitter").addEventListener("click",function(e){var s;return s=t("Come and play")+" #starblastio",window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(s)+"&url="+encodeURIComponent(i))}),document.querySelector("#continue_btn").style.display="none",document.querySelector("#respawn_btn").style.display="inline-block",document.querySelector("#refresh_btn").style.display="inline-block",a.style.opacity="1",Math.random()<.5&&s.swapElements(n,l),s.IlIO1(),setTimeout(function(){return s.displayOptions(),s.IlIO1(),e.style.visibility="visible",e.style.opacity="1",n.style.opacity="1",l.style.opacity="1"},s.I110I.l10lI.OO11I()?10:500)}}(this),this.I110I.l10lI.OO11I()?10:2e3)},e.prototype.countdown=function(){var t;return t=document.querySelector("#menucountdown"),t.innerHTML=--this.timeout,this.IO0O1=setTimeout(function(t){return function(){return 0===t.timeout?(window.onbeforeunload=null,t.reloadGame()):t.countdown()}}(this),1e3)},e.prototype.clearAds=function(){var t,e,i;for(i=[],t=e=1;e<=3;t=++e)document.querySelector("#cdm-zone-0"+t)?i.push(document.querySelector("#cdm-zone-0"+t).innerHTML=""):i.push(void 0);return i},e.prototype.refreshAds=function(){var t;if(!this.I110I.l10lI.OO11I()){if("undefined"!=typeof factorem&&null!==factorem&&"function"==typeof factorem.refreshAds)try{document.querySelector("#cdm-zone-01")&&factorem.refreshAds([1],!0),document.querySelector("#cdm-zone-02")&&factorem.refreshAds([2],!0),document.querySelector("#cdm-zone-03")&&factorem.refreshAds([3],!0)}catch(t){t}if("undefined"!=typeof googletag&&null!==googletag&&"undefined"!=typeof homeads&&null!==homeads&&"undefined"!=typeof homeadsmobile&&null!==homeadsmobile&&"function"==typeof googletag.pubads){if(!this.ismobile){if(Math.random()<.02)return t=document.querySelector("#home"),void(t.innerHTML="<a target='_blank' href='http://www.neuronball.com/'><img src='http://195.154.232.40/neuronball.jpg'></a>");googletag.pubads().refresh(homeads)}if(this.ismobile)return googletag.pubads().refresh(homeadsmobile)}}},e.prototype.gameOver=function(e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m;s=document.querySelector("#canvaswrapper"),h=document.querySelector("#player"),d=document.querySelector("#respawn"),i=d.nextElementSibling,p=document.querySelector(".stats"),l=document.querySelector("#game_over"),I=document.querySelector("#respawn_actions"),n=document.querySelector("#continue_btn"),c=document.querySelector("#respawn_btn"),u=document.querySelector("#refresh_btn"),a=document.querySelector(".gameloader"),this.overlay.classList.remove("hide"),this.overlay.style.display="block",l.style.display="block",d.style.display="block",I.style.display="block",I.classList.remove("hide"),h.style.display="none",a.style.display="none",i.style.display="none",p.style.display="block",n.style.display="none",c.style.display="none",u.style.display="inline-block",u.innerText=t("New Battle"),this.isAdBlocked||(this.refreshAds(),i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),O="";for(r in e)m=e[r],"mode"!==r&&"boolean"!=typeof m&&("team"!==e.mode||"rank"!==r||null==m?"wave"!==r?null!=m&&(O+='<div class="statinfo hide"><span>'+t(r)+"</span><span>"+m+"</span></div>"):O+='<div class="statinfo hide"><span>'+t("Wave %d").replace("%d","")+"</span><span>"+m+"</span></div>":O+='<div class="statinfo hide"><span>'+t("Team rank")+"</span><span>"+m+"</span></div>");return p.innerHTML=O,this.showStatLines(),1===e.rank&&(o=document.getElementById("gameovermsg"),"survival"===e.mode?o.innerHTML=t("Congratulations, you're the last survivor!"):"team"===e.mode&&(o.innerHTML=t("Your team wins!"))),"invasion"===e.mode&&e.victory&&(o=document.getElementById("gameovermsg"),o.innerHTML=t("You win!")),"battleroyale"===e.mode&&e.victory&&(o=document.getElementById("gameovermsg"),o.innerHTML=t("You win!")),"tutorial"===e.mode&&e.victory&&(o=document.getElementById("gameovermsg"),o.innerHTML=t("Training Complete!")),u.style.display="inline-block",s.style["-webkit-filter"]="blur(3px) grayscale(100%)",s.style["-moz-filter"]="blur(3px) grayscale(100%)",s.style.filter="blur(3px) grayscale(100%)",this.displayOptions(),this.IlIO1()},e.prototype.connectionLost=function(){var t,e,i,s,n,l,a,o,r,h,u,d;return e=document.querySelector("#canvaswrapper"),l=document.querySelector("#player"),o=document.querySelector("#respawn"),t=o.nextElementSibling,d=document.querySelector(".stats"),i=document.querySelector("#connection_lost"),r=document.querySelector("#respawn_actions"),s=document.querySelector("#continue_btn"),h=document.querySelector("#respawn_btn"),a=document.querySelector("#refresh_btn"),n=document.querySelector(".gameloader"),u=document.getElementById("serverip"),u.innerText="("+this.I110I.lIllI.address+")",u.style.fontSize=".4em",this.overlay.classList.remove("hide"),this.overlay.style.display="block",i.style.display="block",o.style.display="block",r.style.display="block",r.classList.remove("hide"),l.style.display="none",n.style.display="none",t.style.display="none",d.style.display="none",s.style.display="none",h.style.display="none",a.style.display="inline-block",e.style["-webkit-filter"]="blur(3px) grayscale(100%)",e.style["-moz-filter"]="blur(3px) grayscale(100%)",e.style.filter="blur(3px) grayscale(100%)",this.displayOptions(),this.IlIO1(),this.timeout=60,this.countdown()},e.prototype.adBlockedPage=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I;return n=document.querySelector("#canvaswrapper"),o=document.querySelector("#player"),h=document.querySelector("#respawn"),i=h.nextElementSibling,I=document.querySelector(".stats"),t=document.querySelector("#adblocked_message"),u=document.querySelector("#respawn_actions"),l=document.querySelector("#continue_btn"),d=document.querySelector("#respawn_btn"),r=document.querySelector("#refresh_btn"),a=document.querySelector(".gameloader"),this.overlay.classList.remove("hide"),this.overlay.style.display="block",t.style.display="block",h.style.display="block",u.style.display="block",u.classList.remove("hide"),o.style.display="none",a.style.display="none",i.style.display="none",I.style.display="none",l.style.display="none",d.style.display="none",r.style.display="none",n.style["-webkit-filter"]="blur(3px) grayscale(100%)",n.style["-moz-filter"]="blur(3px) grayscale(100%)",n.style.filter="blur(3px) grayscale(100%)",this.displayOptions(),this.IlIO1(),s=10,(e=function(l){return function(){return 0==s--?(n.removeAttribute("style"),t.style.display="none",i.style.display="block",I.style.display="block",l.I110I.resume(),l.I110I.respawn(),l.clear()):(t.querySelector(".donate-btn").innerHTML=s,setTimeout(e,1e3))}}(this))()},e.prototype.OOIl1=function(t){var e,i;return null==t&&(t=1.25),e=document.createElement("canvas"),i=new Image,i.src="https://starblast.data.neuronality.com/img/starblast_io_logo.svg?3",i.crossOrigin="Anonymous",i.ondragstart=function(t){return t.preventDefault()},i.addEventListener("dragstart",function(t){return t.preventDefault()}),i.onload=function(t){return function(){var s,n;return n=document.getElementById("logo"),n.appendChild(i),n.style.opacity=1,s=e.getContext("2d"),s.drawImage(i,0,0),t.IlIO1()}}(this),e},e.prototype.drawHex=function(t,e,i,s,n){var l,a,o,r,h,u,d,I,c,p;for(t.beginPath(),l=Math.PI/2,t.moveTo(e+Math.cos(l)*s,i+Math.sin(l)*n),o=r=1;r<=5;o=r+=1)l+=Math.PI/3,t.lineTo(e+Math.cos(l)*s,i+Math.sin(l)*n);for(t.closePath(),t.stroke(),a=t.createRadialGradient(e+.5,i+.5,0,e,i,1),a.addColorStop(0,"hsla(200,70%,70%,0)"),a.addColorStop(1,"hsla(200,70%,70%,.05)"),t.fillStyle=a,t.fill(),t.fillStyle="hsla(200,70%,70%,.25)",l=Math.PI/2,o=h=0;h<=5;o=h+=1)l+=Math.PI/3,t.fillRect(e+Math.cos(l)*s-.01,i+Math.sin(l)*n-.01,.02,.02),t.fillRect(e+Math.cos(l)*s*.5-.01,i+Math.sin(l)*n*.5-.01,.02,.02),t.fillRect(e+Math.cos(l)*s*.75-.01,i+Math.sin(l)*n*.75-.01,.02,.02);for(l=Math.PI/2,o=u=0;u<=6;o=u+=1)l+=Math.PI/3,I=Math.cos(l)*s-.01,p=Math.sin(l)*n-.01,o>0&&(t.fillRect(e+.5*(d+I)-.01,i+.5*(c+p)-.01,.02,.02),t.fillRect(e+.375*(d+I)-.01,i+.375*(c+p)-.01,.02,.02),t.fillRect(e+.25*(d+I)-.01,i+.25*(c+p)-.01,.02,.02)),d=I,c=p},e.prototype.createDeco=function(){var t,e,i,s,n;return t=document.createElement("canvas"),t.width=512,t.height=416,e=t.getContext("2d"),e.strokeStyle="hsla(200,70%,70%,.15)",e.translate(t.width/2,t.height/2),e.scale(t.width/4,t.height/4),e.lineWidth=4/t.width,s=1/Math.cos(Math.PI/6)*.95,n=1/Math.cos(Math.PI/6)*1.1,this.drawHex(e,-1,-2,s,n),this.drawHex(e,1,-2,s,n),this.drawHex(e,-2,0,s,n),this.drawHex(e,0,0,s,n),this.drawHex(e,2,0,s,n),this.drawHex(e,-1,2,s,n),this.drawHex(e,1,2,s,n),i=t.toDataURL(),document.getElementById("overlay").style["background-image"]="url("+i+")",document.getElementById("overlay").style["background-position"]="center"},e}(),null==(base=Array.prototype).shuffle&&(base.shuffle=function(){var t,e,i,s,n;if(this.length>1)for(t=i=s=this.length-1;s<=1?i<=1:i>=1;t=s<=1?++i:--i)e=Math.floor(Math.random()*(t+1)),n=[this[e],this[t]],this[t]=n[0],this[e]=n[1];return this}),indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},this.Settings=function(){function t(t){var e,i,s,n,l,a;this.I110I=t,this.parameters={antialias:{name:"Antialiasing",value:!0,level:10,filter:"default,app"},fullres:{name:"Full Resolution",value:!0,level:8,filter:"default,app"},galaxies:{name:"Galaxies",value:!0,level:9,filter:"default,app,mobile"},nebulae:{name:"Nebulae",value:!0,level:7,filter:"default,app"},explolight:{name:"Explosions Lights",value:!0,level:7,filter:"default,app,mobile"},moons:{name:"Moons",value:!0,level:6,filter:"default,app"},planets:{name:"Planets",value:!0,level:5,filter:"default,app"},background:{name:"Background",value:!0,level:4,filter:"default,app"},gravity_field:{name:"Display gravity field",value:!0,filter:"default,app"},colorblind:{name:"High Contrast",value:!1,filter:"default,app,mobile"},buttons_disabled:{name:"Button clicks disabled",value:!1,filter:"default,app"},shake:{name:"Camera shake",value:!0,skipauto:!0,filter:"default,app,mobile"},gamepad_control:{name:"Gamepad support",value:!1,filter:"app,mobile"},automatic_screenshots:{name:"Automatic screenshots",value:!1,filter:"app"},sounds:{name:"Sound Effects",value:1,skipauto:!0,type:"range",min:0,max:2,l1O00:.02,filter:"default,app,mobile"},music:{name:"Music",value:1,skipauto:!0,type:"range",min:0,max:2,l1O00:.02,filter:"default,app,mobile"},language:{name:"Language",value:!1,type:"select",options:["en","fr","de","es","pl","ru","hu","ja","pt","hr","tr","cs","sk","id","nl","it","zh","zh-tw","da","ar","sv","ro","lt","az","th","he","ko","fa","el"],filter:"default,app,mobile"},joystick_thrust:{name:"Joystick thrust",value:!1,filter:"mobile"},auto_rcs:{name:"Auto RCS",value:!1,filter:"mobile"}},this.level=10,this.auto=JSON.parse(localStorage.getItem("auto")||!0),this.forced={};for(a in this.parameters)localStorage.getItem(a)&&(this.parameters[a].stored=!0,this.parameters[a].value=JSON.parse(localStorage.getItem(a)),"range"===this.parameters[a].type&&(!0===this.parameters[a].value?this.parameters[a].value=1:!1===this.parameters[a].value&&(this.parameters[a].value=0)));this.parameters.language.value||(l=(navigator.language||navigator.userLanguage||"en").substr(0,2),navigator.languages&&navigator.languages[0]&&(l=navigator.languages[0].substr(0,2)),indexOf.call(this.parameters.language.options,l)<0&&(l="en"),this.first_launch=!0,this.set("language",l)),this.auto&&(i=document.createElement("canvas"),i.width=i.height=2,s=i.getContext("2d"),n=window.devicePixelRatio||1,e=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,1!==n/e&&this.set("antialias",!1)),this.first_launch&&this.set("joystick_thrust",!0)}return t.prototype.l1lIO=function(){if(this.filter="default",this.I110I.is_app&&(this.filter="app",this.parameters.gamepad_control.stored||(this.parameters.gamepad_control.value=!0)),this.I110I.is_mobile_app&&(this.filter="mobile",this.set("antialias",!1),this.set("fullres",!0),!this.parameters.gamepad_control.stored))return this.parameters.gamepad_control.value=!1},t.prototype.isHidden=function(t){var e;return null!=(e=this.parameters[t])&&(null!=e.filter&&e.filter.indexOf(this.filter)<0)},t.prototype.remove=function(t){return delete this.parameters[t]},t.prototype.check=function(t){var e;return null!=(e=this.forced[t]||this.parameters[t])&&e.value},t.prototype.getVolume=function(t){var e;return e=this.parameters[t],null==e?0:"boolean"==typeof e.value?e.value?1:0:e.value},t.prototype.set=function(t,e){if(this.parameters[t].value!==e)return this.parameters[t].value=e,this.save(t),this.I110I.propertyChanged(t,e)},t.prototype.get=function(t){var e;return null!=(e=this.parameters[t])&&e.value},t.prototype.save=function(t){var e;if(null==t&&(t=null),null!=t)return localStorage.setItem(t,JSON.stringify(this.parameters[t].value));for(e in this.parameters)localStorage.setItem(e,JSON.stringify(this.parameters[e].value));return localStorage.setItem("auto",JSON.stringify(this.auto))},t}(),this.I1O00=function(){function t(t,e){this.size=null!=t?t:128,this.custom=null!=e?e:{},this.icon=this.custom.badge||"pirate",this.laser=this.custom.laser||"simple",this.finish=this.custom.finish||"gold",this.hue=this.custom.hue||0,this.OI1lI()}return t.prototype.toImage=function(){return this.image=new Image,this.image.src=this.canvas.toDataURL(),this.image},t.prototype.updateImage=function(){if(null!=this.image)return this.image.src=this.canvas.toDataURL()},t.prototype.OI1lI=function(){var t,e,i,s,n;if(null==this.canvas&&(this.canvas=document.createElement("canvas")),n=this.canvas.width=2*this.size,s=this.canvas.height=this.size,e=this.canvas.getContext("2d"),e.clearRect(0,0,this.canvas.width,this.canvas.height),"blank"!==this.custom.badge)return e.fillStyle="#000",e.beginPath(),e.arc(n/2,s/2,s/2,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.moveTo(.05*n,.25*s),e.lineTo(.05*n,.75*s),e.lineTo(n/2,.9*s),e.lineTo(.95*n,.75*s),e.lineTo(.95*n,.25*s),e.lineTo(n/2,.1*s),e.closePath(),e.fill(),e.lineWidth=.07*s,e.globalCompositeOperation="destination-out",e.strokeStyle="#000",e.beginPath(),e.arc(n/2,s/2,.6*s,0,2*Math.PI,!0),e.stroke(),this.drawMaterial(e,n,s),this.drawIcon(e,n,s),this.drawLaser(e,n,s),e.globalCompositeOperation="source-atop",e.save(),e.translate(n/2,s/2),e.scale(n/2,s/2),i=e.createRadialGradient(0,0,0,0,0,1),i.addColorStop(0,"rgba(255,255,255,.2)"),i.addColorStop(1,"rgba(0,0,0,.2)"),e.fillStyle=i,e.fillRect(-1,-1,2,2),e.restore(),e.globalCompositeOperation="source-over",i=e.createRadialGradient(n/2-.25*s,s/2-.25*s,0,n/2,s/2,.45*s),i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(.5,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,.5)"),e.fillStyle=i,e.beginPath(),e.arc(n/2,s/2,.45*s,0,2*Math.PI,!0),e.fill(),e.globalCompositeOperation="destination-over",e.translate(n/2,s/2),e.scale(n/2,s/2),i=e.createRadialGradient(0,0,0,0,0,1),i.addColorStop(.7,"rgba(0,0,0,1)"),i.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=i,e.fillRect(-1,-1,2,2),this.resize?(t=document.createElement("canvas"),t.width=this.size,t.height=this.size/2,t.getContext("2d").drawImage(this.canvas,0,0,this.size,this.size/2),this.canvas=t):void 0},t.prototype.drawMaterial=function(t,e,i){var s,n,l,a,o,r,h,u,d,I;switch(this.finish){case"alloy":s=t.createLinearGradient(0,0,0,i),s.addColorStop(0,"#68A"),s.addColorStop(.5,"#FFF"),s.addColorStop(.5,"#765"),s.addColorStop(1,"#CCC");break;case"titanium":s=t.createLinearGradient(0,0,0,i),s.addColorStop(0,"#444"),s.addColorStop(.5,"#AAA"),s.addColorStop(.5,"#444"),s.addColorStop(1,"#111");break;case"gold":s=t.createLinearGradient(0,0,0,i),s.addColorStop(0,"hsl(40,100%,50%)"),s.addColorStop(.5,"hsl(40,100%,80%)"),s.addColorStop(.5,"hsl(20,100%,30%)"),s.addColorStop(1,"hsl(40,100%,50%)");break;case"carbon":for(s=t.createLinearGradient(0,0,0,i),h=Math.min(10,this.size/10),l=a=0,u=h-1;a<=u;l=a+=1)s.addColorStop(l/h,"#000"),s.addColorStop((l+1)/h,"#888");for(n=t.createLinearGradient(0,0,0,i),n.addColorStop(0,"#333"),n.addColorStop(.1,"#888"),l=o=0,d=h-1;o<=d;l=o+=1)n.addColorStop((l+.5)/h,"#000"),n.addColorStop(Math.min(1,(l+1.5)/h),"#888");break;default:s=t.createLinearGradient(0,0,0,i),s.addColorStop(0,"#EEE"),s.addColorStop(1,"#666")}if(t.globalCompositeOperation="source-atop",t.fillStyle=s,
"carbon"===this.finish){for(l=r=0,I=4*h-1;r<=I;l=r+=1)t.fillStyle=l%2==0?s:n,t.fillRect(l*e/(4*h),0,e/(4*h),i);s=t.createLinearGradient(0,0,0,i),s.addColorStop(.3,"rgba(0,0,0,.5)"),s.addColorStop(.5,"rgba(0,0,0,0)"),s.addColorStop(.7,"rgba(0,0,0,.5)"),t.fillStyle=s,t.fillRect(0,0,e,i)}else t.fillStyle=s,t.fillRect(0,0,e,i);return t.globalCompositeOperation="source-over"},t.prototype.drawLaser=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c,p;for(t.save(),t.translate(.12*e,i/2),p=I101O.getShape(parseInt(this.laser)),n=0,a=p.length;n<a;n++){for(c=p[n],t.beginPath(),s=t.createRadialGradient(0,0,0,0,0,i/6),s.addColorStop(0,"hsl(50,100%,100%)"),s.addColorStop(1,"hsl(50,80%,40%)"),t.fillStyle=s,t.strokeStyle="rgba(0,0,0,.8)",t.lineWidth=i/24,l=0,o=c.length;l<o;l++)I=c[l],t.lineTo(I[1]*i/10,I[0]*i/9);t.closePath(),t.stroke(),t.fill()}for(t.restore(),t.save(),t.translate(.88*e,i/2),p=I101O.getShape(parseInt(this.laser)),u=0,r=p.length;u<r;u++){for(c=p[u],t.beginPath(),s=t.createRadialGradient(0,0,0,0,0,i/6),s.addColorStop(0,"hsl(50,100%,100%)"),s.addColorStop(1,"hsl(50,80%,40%)"),t.fillStyle=s,t.strokeStyle="rgba(0,0,0,.8)",t.lineWidth=i/24,d=0,h=c.length;d<h;d++)I=c[d],t.lineTo(I[1]*i/10,I[0]*i/9);t.closePath(),t.stroke(),t.fill()}return t.restore()},t.prototype.drawIcon=function(t,e,i){var s,n,l,a,o,r,h,u,d,I,c;switch(this.icon){case"gamepedia":this.icon="https://starblast.io/ecp/gamepedia.png";break;case"discord":this.icon="https://starblast.io/ecp/discord.png";break;case"twitch":this.icon="https://starblast.io/ecp/twitch.png";break;case"medic":this.icon="https://starblast.io/ecp/medic.jpg";break;case"halo":this.icon="https://starblast.io/ecp/halo.png";break;case"nwac":this.icon="https://starblast.io/ecp/nwac.png";break;case"unge":this.icon="https://starblast.io/ecp/unge.png";break;case"csf":this.icon="https://starblast.io/ecp/csf.png";break;case"pmf":this.icon="https://starblast.io/ecp/pmf.png"}if(d=Math.round(i/2.2),null!=this.icon&&this.icon.startsWith("http")){if(this.icon=this.icon.replace("http:","https:"),null==this.icon_src&&(this.icon_src=new Image,this.icon_src.crossOrigin="Anonymous",this.icon_src.src=this.icon,this.icon_src.onload=function(t){return function(){return t.OI1lI(),t.updateImage()}}(this)),this.icon_src.complete)try{s=document.createElement("canvas"),s.width=i,s.height=i,n=s.getContext("2d"),n.fillStyle="#FFF",n.beginPath(),n.arc(i/2,i/2,.45*i,0,2*Math.PI,!0),n.fill(),n.globalCompositeOperation="source-in",n.drawImage(this.icon_src,.05*i,.05*i,.9*i,.9*i),t.drawImage(s,e/2-.5*i,i/2-.5*i,i,i)}catch(t){t}}else{switch(t.font=d+"pt SBGlyphs",t.textBaseline="middle",t.textAlign="center",this.icon){case"reddit":t.fillStyle="#246";break;case"star":t.fillStyle="hsl(200,50%,20%)";break;case"youtube":t.fillStyle="#B11";break;case"paw":t.fillStyle="#DA5";break;case"pirate":case"invader":case"empire":case"alliance":case"sdf":case"medic":t.fillStyle="#111";break;default:t.fillStyle="hsl(200,50%,20%)"}switch(t.beginPath(),t.arc(e/2,i/2,.45*i,0,2*Math.PI,!0),t.fill(),this.icon){case"reddit":t.fillStyle="#FFF",t.fillText("~",e/2,i/2);break;case"youtube":t.fillStyle="#FFF",t.fillText("Z",e/2,i/2);break;case"pirate":t.font=d+"pt SBGlyphs",t.fillStyle="#FFF",t.fillText("[",e/2,i/2);break;case"sdf":t.font=d+"pt SBGlyphs",t.fillStyle="#FFF",t.fillText("Y",e/2,i/2);break;case"paw":t.fillStyle="#000",t.fillText("V",e/2,i/2);break;case"alliance":t.fillStyle="#F00",t.fillText("X",e/2,i/2);break;case"empire":t.fillStyle="#FFF",t.fillText("R",e/2,i/2);break;case"invader":for(u=[[0,0,1,0,0,0,0,0,1,0,0],[0,0,0,1,0,0,0,1,0,0,0],[0,0,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,0,1],[1,0,1,0,0,0,0,0,1,0,1],[0,0,0,1,1,0,1,1,0,0,0]],t.fillStyle="hsl(120,100%,50%)",l=.7*i/11,a=r=0;r<=10;a=r+=1)for(o=h=0;h<=7;o=h+=1)I=e/2+l*(a-5),c=i/2+l*(o-4),1===u[o][a]&&t.fillRect(I-.4*l,c-.4*l,.8*l,.8*l);break;default:t.fillStyle="hsl(50,100%,70%)",t.fillText("S",e/2,i/2)}}},t.prototype.drawStar=function(t,e,i,s,n){var l,a,o,r;for(t.beginPath(),l=-Math.PI/2,o=0;o<=4;o+=1)a=Math.cos(l),r=Math.sin(l),t.lineTo(e+a*n,i+r*n),l+=Math.PI/5,a=Math.cos(l),r=Math.sin(l),t.lineTo(e+a*s,i+r*s),l+=Math.PI/5;return t.closePath(),t.fill()},t.prototype.drawWing=function(t,e,i,s,n,l){var a,o,r,h,u,d,I,c,p;for(null==l&&(l="#FFF"),t.save(),t.translate(e/2,i/2),t.strokeStyle="#000",t.fillStyle=l,t.lineWidth=.03*i,t.lineCap="round",t.beginPath(),a=o=0,d=s.length-1;o<=d;a=o+=1)t.lineTo(s[a],n[a]);for(t.closePath(),t.fill(),a=r=0,I=s.length-1;r<=I;a=r+=1)t.beginPath(),t.moveTo(s[a],n[a]),t.lineTo(s[(a+1)%s.length],n[(a+1)%s.length]),t.stroke();for(t.beginPath(),a=h=0,c=s.length-1;h<=c;a=h+=1)t.lineTo(-s[a],n[a]);for(t.closePath(),t.fill(),a=u=0,p=s.length-1;u<=p;a=u+=1)t.beginPath(),t.moveTo(-s[a],n[a]),t.lineTo(-s[(a+1)%s.length],n[(a+1)%s.length]),t.stroke();return t.restore()},t.table=[],t.I0II1=function(e,i,s,n,l){var a,o;return null==l&&(l=0),o=e+i+s+n+l,t.table[o]||(a=new t(n,{badge:e,laser:i,finish:s,hue:l}).toImage(),t.table[o]=a),t.table[o]},t.getRandomImage=function(e){var i,s,n;return i=["star","paw","pirate","reddit","invader","youtube"][Math.floor(6*Math.random())],s=["zinc","gold","alloy","carbon","titanium"][Math.floor(5*Math.random())],n=["0","1","2","3"][Math.floor(4*Math.random())],t.I0II1(i,n,s,e)},t.test=function(){var e,i,s,n,l,a,o,r,h,u,d,I;for(u=["zinc","gold","alloy","carbon","titanium"],s=0,a=u.length;s<a;s++)for(e=u[s],d=["star","paw","pirate","reddit","invader","youtube"],n=0,o=d.length;n<o;n++)for(i=d[n],I=["simple"],h=0,r=I.length;h<r;h++)l=I[h],document.body.appendChild(new t(128,{badge:i,laser:l,finish:e}).canvas)},t}(),this.OI1IO=function(){function t(e){var i,s,n,l;if(this.I110I=e,this.key=localStorage.getItem("ECPKey"),null!=this.key&&this.key.length>11&&(this.key=this.key.substring(this.key.length-11,this.key.length)),this.verified=localStorage.getItem("ECPVerified"),this.custom={badge:localStorage.getItem("badge")||"star",finish:localStorage.getItem("finish")||"alloy",laser:localStorage.getItem("laser")||"1"},"fullcolor"===this.custom.finish&&(this.custom.finish="alloy"),this.additional_badges=[],null!=localStorage.getItem("additional_badges")){try{this.additional_badges=JSON.parse(localStorage.getItem("additional_badges"))}catch(t){t}for(l=this.additional_badges,s=0,n=l.length;s<n;s++)i=l[s],t.options.badge[i.name]||(t.options.badge[i.url]=i.name)}this.key||"yes"!==this.verified||this.IIlIl("no")}return t.prototype.l1lO0=function(){var t;return t="xxxxx-xxxxx".replace(/x/g,function(){return(16*Math.random()|0).toString(16)}),this.I11l0(t)},t.prototype.I11l0=function(t){if(t!==this.key)return this.key=t,null!=this.key&&this.key.length>11&&(this.key=this.key.substring(this.key.length-11,this.key.length)),this.verified="no",localStorage.setItem("ECPKey",this.key),localStorage.setItem("ECPVerified","no")},t.prototype.lO1ll=function(t){return/([0-9a-f]{5})-([0-9a-f]{5})/.test(t)},t.prototype.IIlIl=function(t){return this.verified=t,localStorage.setItem("ECPVerified",this.verified)},t.prototype.removeKey=function(){return localStorage.removeItem("ECPKey"),localStorage.removeItem("ECPVerified"),this.I110I.O1IO0.reloadGame()},t.prototype.OO11I=function(){return"yes"===this.verified},t.prototype.llI10=function(t,e,i){var s,n,l,a;if(this.I110I.O1IO0.IOIIO?e&&(this.I11l0(t),this.IIlIl("yes"),this.verified="yes"):t===this.key&&this.IIlIl(e?"yes":"no"),e&&null!=i){for(a=[],n=0,l=i.length;n<l;n++)s=i[n],a.push(this.installCustomBadge(s.name,s.url));return a}},t.prototype.verify=function(t){return this.l101l=new I10IO(this,function(e){return function(i,s){return e.region=s,e.verifyServer(i,t)}}(this))},t.prototype.verifyServer=function(t,e){var i;return i=WSS.create(t),i.onmessage=function(t){return function(s){var n,l,a,o;if(s=JSON.parse(s.data),t.IIlIl(s.verified),t.additional_badges=[],localStorage.setItem("additional_badges",JSON.stringify(t.additional_badges)),t.OO11I()&&null!=s.custom_badges)for(o=s.custom_badges,l=0,a=o.length;l<a;l++)n=o[l],t.installCustomBadge(n.name,n.url);return e(t.OO11I()),i.close()}}(this),i.onopen=function(t){return function(){return i.send(JSON.stringify({name:"verify_key",data:{key:t.key}}))}}(this)},t.prototype.installCustomBadge=function(e,i){var s,n,l,a;for(a=this.additional_badges,n=0,l=a.length;n<l;n++)if(s=a[n],s.url===i)return;return this.additional_badges.push({name:e,url:i}),localStorage.setItem("additional_badges",JSON.stringify(this.additional_badges)),t.options.badge[i]=e},t.options={badge:{star:"Star",reddit:"Reddit",pirate:"Pirate",csf:"Centauri Space Force",pmf:"Proxima Mining Front",nwac:"New World Army Citizens",unge:"United Nations Green Eagles",halo:"Halo Corsairs",youtube:"Youtube",twitch:"Twitch",invader:"Invader",empire:"Galactic Empire",alliance:"Rebel Alliance",sdf:"Soloist Defence Force",paw:"Paw",gamepedia:"Gamepedia",discord:"Discord",medic:"Medic",blank:"Blank"},finish:{zinc:"Zinc",alloy:"Alloy",gold:"Gold",titanium:"Titanium",carbon:"Carbon"},laser:{0:"Single",1:"Double",2:"Lightning",3:"Digital"}},t}(),this.II1II=function(){function t(t){this.I110I=t}return t.prototype.ll111=function(t,e,i,s){var n,l,a,o,r,h,u,d,I,c,p,O,m,f;for(i/=2,l=t.getContext("2d"),l.save(),l.clearRect(0,0,t.width,t.height),l.translate(t.width/2,t.height/2),l.scale(t.width/2,t.height/2),l.fillStyle="#FFF",p=this.I110I.O1IO0.installed_modes,r=0,u=p.length;r<u;r++)d=p[r],d.id===s&&(I=d);for(n=new O1IIl(e,i,I),f={},a=h=-i,O=i-1;h<=O;a=h+=1)for(o=c=-i,m=i-1;c<=m;o=c+=1)n.get(a,o,f),f.on&&(l.beginPath(),l.arc(f.x/i,-f.y/i,f.size/i,0,2*Math.PI,!0),l.fill());return null!=I.drawRadarInfo&&(I.options.map_id=e,I.options.map_size=i,I.drawRadarInfo(l)),l.restore()},t}(),this.lOll0=function(){function t(){var t,e,i;for(this.IIIIl=[-1011393833,-976314432,839460795,-421701588,1980082871,546305162,1623261005,892242836,881268343,546305156,63201784,1507945471,2096522726,774615138,-643097469,439299200,808909985,-677324264,-676012277,1330256882,1677439667,-662944360,426854107,1077601070,956698694,-1844041477,-1844238272,-1893741710,776581756,-1893544903,874187636,1227730819,589969921,-1329607567,882345148,-1802742346,1563250459,88051913,497129727,1586759904,-133013522,-1828736344,-931446683,-438019612,-463320716,-462795919],this.min_length=3,this.max_length=5,this.OIO01=[4053,4054,4055,4056,21325,21328],t=e=0,i=this.OIO01.length-1;0<=i?e<=i:e>=i;t=0<=i?++e:--e)this.OIO01[t]=String.fromCharCode(this.OIO01[t])}return t.prototype.hash=function(t){var e,i,s,n;for(n=0,e=i=0,s=t.length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i)n=4294967295&t.charCodeAt(e)+(n<<6)+(n<<16)-n;return n},t.prototype.I000l=function(t){var e;return this.check(t)?t:"undefined"!=typeof lIl1O&&null!==lIl1O?(e=Math.abs(this.hash(t))%lIl1O.length,lIl1O[e].toUpperCase()):""},t.prototype.check=function(t){var e,i,s,n,l,a,o,r,h,u,d;for(r=this.OIO01,n=0,o=r.length;n<o;n++)if(e=r[n],t.indexOf(e)>=0)return!1;for(t=t.toLowerCase(),t=t.replace(/3/g,"e"),t=t.replace(/4/g,"a"),t=t.replace(/1/g,"i"),t=t.replace(/2/g,"z"),t=t.replace(/0/g,"o"),t=t.replace(/5/g,"s"),t=t.replace(/6/g,"g"),t=t.replace(/7/g,"t"),t=t.replace(/9/g,"g"),t=t.replace(/!/g,"i"),i=l=0,h=t.length-this.min_length;l<=h;i=l+=1)for(s=a=this.min_length,u=Math.min(this.max_length,t.length-i);a<=u;s=a+=1)if(d=t.substring(i,i+s),this.IIIIl.indexOf(this.hash(d))>=0)return!1;return!0},t}(),this.lIl1O=["Arkady Darell","Bel Riose","Cleon I","Dors Venabili","Ebling Mis","Gaal Dornick","Hari Seldon","Hober Mallow","Janov Pelorat","The Mule","Preem Palver","R.D. Olivaw","R.G. Reventlov","Raych Seldon","Salvor Hardin","Wanda Seldon","Yugo Amaryl","James T. Kirk","Leonard McCoy","Hikaru Sulu","Montgomery Scott","Spock","Picard","Christine Chapel","Nyota Uhura","Pavel Chekov","Ford","Zaphod","Marvin","Anakin","Luke","Leia","Ackbar","Tarkin","Jabba","Rey","Kylo","Han","Vader","D.A.R.Y.L.","HAL 9000","Lyta Alexander","Stephen Franklin","Lennier"],this.WSS=function(){function t(){}return t.create=function(t){var e,i,s;return s=t.split(":"),e=s[0].replace(/\./g,"-")+".starblast.io",i=s[1],new WebSocket("wss://"+e+":"+i)},t}(),this.O1OI1=function(){function t(){this.ships=[],this.ships_by_code=[]}return t.prototype.clear=function(){return this.ships=[],this.ships_by_code=[]},t.prototype.add=function(t){return this.ships.push(t),this.ships_by_code[100*t.level+t.model]=t},t.prototype.getDefaultShip=function(){return this.ships[0]},t.prototype.O00II=function(){return this.ships[Math.floor(Math.random()*this.ships.length)]},t}(),II1l1=new this.O1OI1,this.BattleShips=function(){function t(){this.ships=[],this.ships_by_code=[]}return t.prototype.add=function(t){return this.ships.push(t),this.ships_by_code[100*t.level+t.model]=t},t.prototype.O00II=function(){return this.ships[Math.floor(Math.random()*this.ships.length)]},t}(),BATTLE_SHIPS=new this.BattleShips,II1l1.add({name:"Fly",level:1,model:1,size:1.05,specs:{shield:{capacity:[75,100],reload:[2,3]},generator:{capacity:[40,60],reload:[10,15]},ship:{mass:60,speed:[125,145],rotation:[110,130],acceleration:[100,120]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-65,-60,-50,-20,10,30,55,75,60]},width:[0,8,10,30,25,30,18,15,0],height:[0,6,8,12,20,20,18,15,0],propeller:!0,texture:[4,63,10,1,1,1,12,17]},IlIIO:{section_segments:12,offset:{x:0,y:-0,z:20},position:{x:[0,0,0,0,0,0,0],y:[-15,0,20,30,60]},width:[0,13,17,10,5],height:[0,18,25,18,5],propeller:!1,texture:[7,9,9,4,4]},cannon:{section_segments:6,offset:{x:0,y:-15,z:-10},position:{x:[0,0,0,0,0,0],y:[-40,-50,-20,0,20,30],z:[0,0,0,0,0,20]},width:[0,5,8,11,7,0],height:[0,5,8,11,10,0],angle:0,laser:{damage:[5,6],rate:4,type:1,speed:[160,180],number:1,error:2.5},propeller:!1,texture:[3,3,10,3]}},wings:{main:{length:[60,20],width:[100,50,40],angle:[-10,10],position:[0,20,10],doubleside:!0,offset:{x:0,y:10,z:5},bump:{position:30,size:20},texture:[11,63]}}}),II1l1.add({name:"Delta-Fighter",level:2,model:1,size:1.3,specs:{shield:{capacity:[100,150],reload:[3,4]},generator:{capacity:[50,80],reload:[15,25]},ship:{mass:80,speed:[110,135],rotation:[80,100],acceleration:[110,120]}},bodies:{IlIIO:{angle:0,section_segments:8,offset:{x:0,y:-20,z:12},position:{x:[0,0,0,0,0],y:[-20,-10,0,10,20],z:[-7,-3,0,5,3]},width:[3,12,18,16,3],height:[3,6,8,6,3],texture:[9]},cockpit2:{angle:0,section_segments:8,offset:{x:0,y:-10,z:12},position:{x:[0,0,0,0],y:[-10,0,10,40],z:[0,0,5,3]},width:[5,18,16,3],height:[5,12,10,5],texture:[9,2,11]},propulsor:{section_segments:8,offset:{x:0,y:35,z:10},position:{x:[0,0,0,0,0,0],y:[0,10,20,30,40,30],z:[0,0,0,0,0]},width:[5,15,10,10,10,0],height:[15,15,15,15,10,0],texture:[63,63,4,5,12],propeller:!0},bumps:{section_segments:8,offset:{x:40,y:40,z:5},position:{x:[0,0,0,0,0,0],y:[-40,-10,0,10,40,45],z:[0,0,0,0,0,0]},width:[0,5,8,12,5,0],height:[0,25,28,22,15,0],texture:[63]},gunsupport:{section_segments:8,offset:{x:30,y:-40,z:5},position:{x:[-30,-20,-10,0,0,0],y:[-20,-15,-5,10,40,55],z:[-20,-20,-10,0,0,0]},width:[3,5,8,4,5,0],height:[3,5,8,12,15,0],texture:63},gun:{section_segments:8,offset:{x:0,y:-60,z:-15},position:{x:[0,0,0,0],y:[-20,-10,5,10],z:[0,0,0,0]},width:[3,7,8,3],height:[3,7,8,3],texture:[6,4,5],laser:{damage:[3,5],rate:3,type:1,speed:[100,120],number:3,angle:15,error:0}}},wings:{main:{doubleside:!0,offset:{x:0,y:-25,z:5},length:[100],width:[120,30,40],angle:[0,20],position:[30,90,85],texture:11,bump:{position:30,size:20}}}}),II1l1.add({name:"Trident",level:2,model:2,size:1.2,specs:{shield:{capacity:[125,175],reload:[3,5]},generator:{capacity:[50,80],reload:[15,20]},ship:{mass:100,speed:[110,135],rotation:[70,85],acceleration:[90,110]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0],y:[-100,-50,0,30,70,100,90],z:[0,0,0,0,0,0,0]},width:[1,25,15,30,30,20,10],height:[1,20,20,30,30,10,0],texture:[1,1,10,2,3],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-40,z:10},position:{x:[0,0,0,0,0,0,0],y:[-20,-10,0,30,40]},width:[0,10,10,10,0],height:[0,10,15,12,0],texture:[9],propeller:!1},Il1O1:{section_segments:12,offset:{x:50,y:40,z:0},position:{x:[0,0,0,0,0,0,0],y:[-50,-45,-20,0,20,50,55]},width:[0,5,10,10,15,10,0],height:[0,5,15,15,10,5,0],angle:0,laser:{damage:[4,8],rate:2.5,type:1,speed:[100,120],number:1,angle:0,error:0},propeller:!1,texture:[4,4,10,4,63,4]}},wings:{main:{offset:{x:0,y:60,z:0},length:[80,30],width:[70,50,60],texture:[4,63],angle:[0,0],position:[10,-20,-50],bump:{position:-10,size:15}},Illll:{length:[30,20],width:[10,30,0],angle:[50,20],position:[90,80,50],texture:[63],bump:{position:10,size:30}}}}),II1l1.add({name:"Side-Fighter",level:3,model:2,size:1.5,next:[403,404],specs:{shield:{capacity:[125,175],reload:[2,4]},generator:{capacity:[75,125],reload:[20,35]},ship:{mass:90,speed:[100,120],rotation:[50,70],acceleration:[100,130]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[-30,-22,-15,0,15,22,40,30],z:[0,0,0,0,0,0,0,0,0]},width:[5,10,25,30,25,17,15,0],height:[5,10,25,30,25,17,15,0],texture:[5,63,63,63,63,12,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-20,z:0},position:{x:[0,0,0,0,0,0,0],y:[-10,-8,0]},width:[0,10,10],height:[0,10,10],texture:[9],propeller:!1,laser:{damage:[4,6],rate:10,type:1,speed:[150,240],number:1,error:20}}},wings:{wings1:{doubleside:!0,offset:{x:60,y:0,z:-80},length:[0,50,50,50],width:[0,0,100,100,0],angle:[95,90,90,95],position:[0,0,0,0,0],texture:[7],bump:{position:0,size:8}},join:{offset:{x:0,y:0,z:0},length:[61],width:[10,6],angle:[0],position:[0,0,0,50],texture:[8],bump:{position:10,size:20}}}}),II1l1.add({name:"Pulse-Fighter",level:3,model:1,size:1.3,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[60,90],reload:[20,30]},ship:{mass:120,speed:[105,120],rotation:[60,80],acceleration:[80,100]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0],y:[-90,-75,-50,0,50,105,90]},width:[0,15,25,30,35,20,0],height:[0,10,15,25,25,20,0],propeller:!0,texture:[63,1,1,10,2,12]},IlIIO:{section_segments:12,offset:{x:0,y:-20,z:20},position:{x:[0,0,0,0,0,0,0],y:[-30,-10,10,30,60]},width:[0,10,15,10,5],height:[0,18,25,18,5],propeller:!1,texture:9},cannon:{section_segments:6,offset:{x:0,y:-40,z:-10},position:{x:[0,0,0,0,0,0],y:[-40,-50,-20,0,20,50]},width:[0,5,10,10,15,0],height:[0,5,15,15,10,0],angle:0,laser:{damage:[15,30],rate:1,type:2,speed:[150,175],number:1,error:0},propeller:!1,texture:3},lII1l:{section_segments:8,offset:{x:50,y:50,z:-10},position:{x:[0,0,5,5,0,0,0],y:[-52,-50,-20,0,20,40,42]},width:[0,5,10,10,5,5,0],height:[0,5,10,15,10,5,0],angle:0,laser:{damage:[3,6],rate:3,type:1,speed:[100,150],number:1,error:0},propeller:!1,texture:4}},wings:{main:{length:[80,20],width:[120,50,40],angle:[-10,20],position:[30,50,30],doubleside:!0,bump:{position:30,size:10},texture:[11,63]},Illll:{length:[40],width:[40,20,30],angle:[10,-10],position:[-40,-60,-55],bump:{position:0,size:30},texture:63},IOI1l:{length:[40,10],width:[50,20,20],angle:[40,30],position:[70,75,80],doubleside:!0,texture:63,bump:{position:0,size:20}}}}),II1l1.add({name:"Shadow X-1",level:3,model:3,size:.8,zoom:.8,specs:{shield:{capacity:[90,130],reload:[3,6]},generator:{capacity:[50,80],reload:[12,16]},ship:{mass:70,speed:[120,155],rotation:[35,60],acceleration:[130,150]}},bodies:{main:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-100,-98,-95,-70,-40,0,40,70,80,90,100]},width:[0,10,20,30,40,20,20,40,40,40,20,0],height:[0,4,4,20,20,10,10,15,15,15,10,10],texture:[12,5,63,4,4,63,4,4,5]},OlI1I:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0],y:[90,95,100,105,90]},width:[10,15,18,19,2],height:[3,5,7,8,2],texture:[63],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-25,z:15},position:{x:[0,0,0,0,0,0],y:[-45,-40,-25,0,5],z:[0,0,0,0,0,0]},width:[0,10,15,13,0],height:[0,10,15,5,0],texture:[9]},laser:{section_segments:10,offset:{x:70,y:10,z:-20},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,70,60]},width:[0,10,15,15,15,10,10,15,5,0],height:[0,10,15,15,15,10,10,15,5,0],texture:[3,4,10,3],propeller:!0,laser:{damage:[3,4],rate:6,type:1,speed:[180,210],number:1}}},wings:{top:{offset:{x:0,y:50,z:5},length:[30],width:[70,30],angle:[90],position:[0,50],texture:[4],bump:{position:10,size:15}},side_joins:{offset:{x:0,y:30,z:-3},length:[100],width:[100,40],angle:[0],position:[-50,50],texture:[4],bump:{position:10,size:10}}}}),II1l1.add({name:"Y-Defender",level:3,model:4,size:1.5,specs:{shield:{capacity:[175,225],reload:[4,6]},generator:{capacity:[50,80],reload:[18,25]},ship:{mass:200,speed:[80,100],rotation:[40,60],acceleration:[70,80]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-100,-95,-50,-40,-20,-10,30,70,65],z:[0,0,0,0,0,0,0,0,0]},width:[0,20,25,10,10,20,15,20,0],height:[0,10,20,15,15,20,25,15,0],texture:[1,2,2,63,2,10,2,12],laser:{damage:[20,40],rate:2,type:1,speed:[130,170],number:1,recoil:75,error:0}},propulsors:{section_segments:8,offset:{x:50,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-30,-25,20,25,40,50,60,100,90],z:[0,0,0,0,0,0,0,0,0]},width:[0,20,15,5,25,20,15,15,0],height:[0,20,15,5,25,20,20,10,0],texture:[63,63,63,2,2,3,4,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-70,z:10},position:{x:[0,0,0,0,0,0,0],y:[-20,-10,0,10,20]},width:[0,10,10,10,0],height:[0,10,15,12,0],texture:[9],propeller:!1}},wings:{join:{offset:{x:14,y:0,z:0},length:[25],width:[20,10],angle:[0],position:[0,0,0,50],texture:[63],bump:{position:10,size:40}},join2:{offset:{x:14,y:50,z:0},length:[25],width:[20,10],angle:[0],position:[0,0,0,50],texture:[3],bump:{position:10,size:40}},Illll:{offset:{x:5,y:40,z:10},length:[10,20],width:[15,30,50],angle:[60,-20],position:[0,5,60],texture:[63],bump:{position:10,size:60}}}}),II1l1.add({name:"Vanguard",level:4,model:1,size:1.2,specs:{shield:{capacity:[140,190],reload:[3,4]},generator:{capacity:[80,140],reload:[25,35]},ship:{mass:200,speed:[75,90],rotation:[90,120],acceleration:[60,80]}},bodies:{main:{section_segments:11,offset:{x:0,y:-47,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[0,6,12,48,77,110,137,141],z:[0,0,0,0,0,0,0,0]},width:[0,22,24,35,37,34,23,0],height:[0,22,24,35,37,34,23,0],texture:[9,3,2,8,3,2,3]},engines:{section_segments:12,offset:{x:28,y:-27,z:-10},position:{x:[25,-2,-4,-2,0,0],y:[0,40,74,98,108,105],z:[18,10,0,0,0,0]},width:[9,10,9,14,11,0],height:[2,10,9,14,11,0],texture:[3,3,3,3,17],propeller:!0},IlIIO:{section_segments:12,offset:{x:0,y:-30,z:15},position:{x:[0,0,0,0,0],y:[0,40,66,84,89],z:[-8,-2,-1,1,20]},width:[20,30,30,23,0],height:[20,30,30,23,0],texture:[9],propeller:!1},Il1O1:{section_segments:8,offset:{x:18,y:-183,z:8},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[5,0,23,27,62,62,97,102,163],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,5,5,7,7,4,4,7,7],height:[0,5,5,7,7,4,4,7,7],texture:[12,13,4,8,4,4,3,8],propeller:!1,laser:{damage:[18,25],rate:3,type:2,speed:[170,200],recoil:70,number:1,error:0}}},wings:{outer:{offset:{x:37,y:-115,z:15},length:[0,12,12,22,4,38],width:[165,235,246,232,167,122,35],angle:[-15,-15,-15,-8,-8,-8],position:[20,54,54,47,79,100,101],texture:[4,3,4,4,1,8],doubleside:!0,bump:{position:30,size:4}},inner:{offset:{x:-37,y:-115,z:15},length:[12],width:[165,112],angle:[0],position:[20,0],texture:[63,63],doubleside:!0,bump:{position:30,size:4}},winglet:{offset:{x:104,y:-13,z:55},length:[45,15,15,45],width:[25,70,35,70,25],angle:[-70,-70,-110,-110],position:[0,0,0,0,0],texture:[63],doubleside:!0,bump:{position:0,size:5}}}}),II1l1.add({name:"X-Warrior",level:4,model:3,size:1.6,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[90,150],reload:[35,55]},ship:{mass:250,speed:[75,100],rotation:[50,90],acceleration:[90,110]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-100,-99,-50,0,10,30,50,80,100,90],z:[-10,-10,-5,0,0,0,0,0,0,0,0]},width:[0,5,30,35,25,30,50,50,20,0],height:[0,5,20,20,20,20,20,20,10,0],texture:[4,2,10,2,63,11,4,63,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-20,z:5},position:{x:[0,0,0,0,0,0,0],y:[-30,-20,0,30,40]},width:[0,10,15,10,0],height:[0,18,25,18,0],texture:9,propeller:!1},Il1O1:{section_segments:12,offset:{x:30,y:-70,z:0},position:{x:[0,0,0,0,0],y:[-30,-20,0,20,30]},width:[3,5,5,5,3],height:[3,5,15,15,3],texture:[6,4,4,6],angle:0,laser:{damage:[5,8],rate:3,type:1,speed:[120,180],number:1,error:0}},wingendtop:{section_segments:12,offset:{x:105,y:50,z:40},position:{x:[0,0,0,0,0,0,0],y:[-65,-70,-20,0,20,30,5]},width:[0,2,3,7,7,5,0],height:[0,2,3,7,7,5,0],texture:[12,63,63,11,63,12],angle:0},wingendbottom:{section_segments:12,offset:{x:105,y:50,z:-40},position:{x:[0,0,0,0,0,0,0],y:[-65,-70,-20,0,20,30,25]},width:[0,2,3,7,7,5,0],height:[0,2,3,7,7,5,0],texture:[12,63,63,11,63,12],angle:0,laser:{damage:[3,5],rate:2.5,type:1,speed:[100,160],number:1,error:0}},propellers:{section_segments:12,offset:{x:40,y:60,z:0},position:{x:[0,0,5,3,5,0,0],y:[-35,-40,-30,0,40,50,40]},width:[0,5,10,10,15,10,0],height:[0,5,25,30,25,5,0],texture:4,angle:0,propeller:!0}},wings:{xwing1:{doubleside:!0,offset:{x:0,y:70,z:0},length:[80,35],width:[50,40,30],angle:[20,20],position:[0,-10,-20],texture:[1,10],bump:{position:10,size:20}},xwing2:{doubleside:!0,offset:{x:0,y:70,z:0},length:[80,35],width:[50,40,30],angle:[-20,-20],position:[0,-10,-20],texture:[1,1],bump:{position:10,size:20}},winglets2:{offset:{x:30,y:-40,z:0},length:[20,10],width:[30,20,5],angle:[-10,20],position:[0,0,0],texture:63,bump:{position:30,size:10}}}}),II1l1.add({name:"Mercury",level:4,model:2,size:1.3,specs:{shield:{capacity:[150,200],reload:[3,5]},generator:{capacity:[100,150],reload:[30,50]},ship:{mass:200,speed:[85,105],rotation:[60,90],acceleration:[60,80]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0,0],y:[-45,-50,-40,-30,0,50,100,90]},width:[1,5,15,20,30,35,20,0],height:[1,5,10,15,25,15,10,0],texture:[1,4,3,63,11,10,12],propeller:!0,laser:{damage:[20,40],rate:1,type:2,speed:[170,200],number:1,error:0}},IlIIO:{section_segments:8,offset:{x:0,y:20,z:20},position:{x:[0,0,0,0,0,0,0],y:[-40,-20,0,20,50]},width:[0,10,15,10,0],height:[0,18,25,18,0],texture:[4,9,4,4],propeller:!1},lII1l:{section_segments:8,offset:{x:70,y:0,z:-10},position:{x:[0,0,0,10,-5,0,0,0],y:[-115,-80,-100,-30,0,30,100,90]},width:[1,5,10,15,15,20,10,0],height:[1,5,15,20,35,30,10,0],texture:[6,6,4,63,63,4,12],angle:0,propeller:!0},wingends:{section_segments:8,offset:{x:115,y:25,z:-5},position:{x:[0,2,4,2,0,0],y:[-20,-10,0,10,20,15]},width:[2,3,6,3,4,0],height:[5,15,22,17,5,0],texture:[4,4,4,4,6],propeller:!0,angle:2,laser:{damage:[3,5],rate:4,type:1,speed:[150,180],number:1,error:0}}},wings:{main:{length:[80,40],width:[40,30,20],angle:[-10,20],position:[30,50,30],texture:[11,11],bump:{position:30,size:10}},font:{length:[80,30],width:[20,15],angle:[-10,20],position:[-20,-40],texture:[63],bump:{position:30,size:10}}}}),II1l1.add({name:"Side-Interceptor",level:4,model:4,size:1.6,specs:{shield:{capacity:[175,225],reload:[3,6]},generator:{capacity:[100,150],reload:[30,40]},ship:{mass:120,speed:[80,110],rotation:[50,100],acceleration:[110,140]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-30,-22,-15,0,15,22,30,20],z:[0,0,0,0,0,0,0,0,0,0]},width:[5,10,25,30,25,10,15,0],height:[5,10,25,30,25,10,15,0],texture:[1,3,63,63,3,4,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-20,z:0},position:{x:[0,0,0,0,0,0,0],y:[-10,-8,0]},width:[0,10,10],height:[0,10,10],texture:[5,9,5],propeller:!1},Il1O1:{section_segments:12,offset:{x:60,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-25,-30,-20,0,20,30,20]},width:[0,3,5,5,5,3,0],height:[0,3,5,5,5,3,0],texture:[12,6,63,63,6,12],angle:0,laser:{damage:[5,7],rate:5,type:1,speed:[100,200],number:1,error:5}}},wings:{wings1:{doubleside:!0,offset:{x:60,y:20,z:0},length:[-20,-10,-40],width:[50,50,130,30],angle:[280,315,315],position:[0,0,-50,0],texture:4,bump:{position:10,size:-10}},wings2:{doubleside:!0,offset:{x:60,y:20,z:0},length:[20,10,40],width:[50,50,130,30],angle:[-100,-135,-135],position:[0,0,-50,0],texture:4,bump:{position:10,size:10}},join:{doubleside:!0,offset:{x:0,y:0,z:0},length:[61],width:[10,6],angle:[0],position:[0,0,0,50],texture:63,bump:{position:10,size:20}}}}),II1l1.add({name:"Pioneer",level:4,model:5,size:1.6,specs:{shield:{capacity:[175,230],reload:[4,7]},generator:{capacity:[50,100],reload:[25,30]},ship:{mass:250,speed:[90,120],rotation:[40,80],acceleration:[50,100]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0],y:[-100,-60,-10,0,20,50,80,100,90],z:[-10,-5,0,0,0,0,0,0,0,0]},width:[5,50,50,30,40,50,50,20,0],height:[5,20,20,20,30,30,20,10,0],texture:[2,10,2,4,11,11,63,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-40,z:10},position:{x:[0,0,0,0,0,0,0],y:[-30,-20,0,30,40]},width:[0,10,15,10,0],height:[0,18,25,18,0],texture:[9],propeller:!1},Il1O1:{section_segments:12,offset:{x:30,y:-70,z:0},position:{x:[0,0,0,0,0],y:[-30,-20,0,20,30]},width:[3,5,5,5,3],height:[3,5,15,15,3],texture:[6,4,4,6],angle:0,laser:{damage:[6,11],rate:3,type:1,speed:[100,140],number:1,error:0}},shield:{section_segments:12,offset:{x:60,y:-40,z:0},position:{x:[0,5,3,5,0,0],y:[-30,-20,0,20,30,20]},width:[5,10,10,10,5,0],height:[5,25,30,25,5,0],propeller:!0,texture:4,angle:0},shield2:{section_segments:12,offset:{x:60,y:60,z:0},position:{x:[0,5,3,5,0,0],y:[-30,-20,0,20,30,20]},width:[5,10,10,10,5,0],height:[5,25,30,25,5,0],propeller:!0,texture:4,angle:0}}}),II1l1.add({name:"Crusader",level:4,model:6,size:1.6,specs:{shield:{capacity:[250,300],reload:[5,7]},generator:{capacity:[50,90],reload:[20,35]},ship:{mass:250,speed:[75,100],rotation:[40,70],acceleration:[80,100]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[-100,-99,-90,-30,30,100,80],z:[0,0,0,0,0,0,0]},width:[0,5,15,40,25,20,0],height:[0,5,15,40,50,20,0],texture:[6,63,1,8,63,12]},IlIIO:{section_segments:8,offset:{x:0,y:-50,z:30},position:{x:[0,0,0,0,0],y:[-30,-10,0,10,20],z:[-13,-3,0,5,3]},width:[3,13,15,9,3],height:[3,6,8,6,3],texture:[9]},main_propulsor:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0],y:[50],z:[0]},width:[25],height:[0],propeller:!0},side_propulsors:{section_segments:8,offset:{x:60,y:20,z:0},position:{x:[-30,-10,0,0,0],y:[-40,-20,0,20,70],z:[0,0,0,0,0]},width:[5,5,10,20,10],height:[5,5,10,10,10],texture:[63],propeller:!0},lasers:{section_segments:8,offset:{x:45,y:-20,z:-5},position:{x:[0,0,0,0,0],y:[-40,-20,-30,20,70],z:[0,0,0,0,0]},width:[0,5,8,12,1],height:[0,3,5,12,1],texture:[6,6,10],laser:{damage:[6,9],rate:3,type:1,speed:[130,160],number:1,error:0}}},wings:{main:{offset:{x:20,y:-25,z:5},length:[100,15],width:[120,30,40],angle:[0,40],position:[30,90,85],texture:[11,63],bump:{position:0,size:20}},tail:{offset:{x:0,y:75,z:20},length:[30,40],width:[30,20,25],angle:[10,-30],position:[0,0,-30],texture:[63],bump:{position:0,size:20}}}}),II1l1.add({name:"U-Sniper",level:5,model:1,size:1.8,specs:{shield:{capacity:[200,300],reload:[4,6]},generator:{capacity:[80,160],reload:[40,60]},ship:{mass:200,speed:[70,90],rotation:[50,70],acceleration:[60,110]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0],y:[0,-10,40,100,90,100]},width:[0,10,23,10,0],height:[0,5,23,10,0],texture:[12,1,10,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:0,z:30},position:{x:[0,0,0,0],y:[20,40,80],z:[-4,0,-6]},width:[5,10,5],height:[0,8,0],texture:[9]},uwings:{section_segments:8,offset:{x:50,y:-20,z:-10},position:{x:[0,0,0,0,0,0],y:[-90,-100,40,80,90,100]},width:[0,10,25,20,0],height:[0,5,25,20,0],texture:[12,2,3,4]},Il1O1:{section_segments:12,offset:{x:70,y:20,z:0},position:{x:[0,0,0,0,0,0,0],y:[-60,-70,-20,0,20,50,45]},width:[0,5,6,10,15,5,0],height:[0,5,5,10,10,5,0],angle:0,laser:{damage:[40,60],rate:2,type:2,speed:[190,240],recoil:200,number:1,error:0},propeller:!1,texture:[4,4,10,4,63,4]},side_propulsors:{section_segments:10,offset:{x:30,y:30,z:5},position:{x:[0,0,0,0,0,0,0],y:[0,10,13,25,30,40,60,50]},width:[0,5,10,10,10,5,5,10,5,0],
height:[0,5,10,10,10,5,5,10,5,0],propeller:!0,texture:[5,2,11,2,63,11,12]}}}),II1l1.add({name:"T-Warrior",level:5,model:3,size:1.6,specs:{shield:{capacity:[225,325],reload:[4,7]},generator:{capacity:[80,140],reload:[35,50]},ship:{mass:250,speed:[80,90],rotation:[50,80],acceleration:[90,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-95,-100,-98,-70,0,90,91]},width:[0,5,6,20,30,20,3],height:[0,2,4,20,30,25,3],texture:[12,5,63,1,10,12]},cannon:{section_segments:6,offset:{x:0,y:-45,z:-15},position:{x:[0,0,0,0,0,0],y:[-40,-50,-20,0,20,30],z:[0,0,0,0,0,20]},width:[0,5,8,11,7,0],height:[0,5,8,11,10,0],angle:0,laser:{damage:[4,6],rate:3,type:1,speed:[130,160],number:5,angle:30,error:0},propeller:!1,texture:[3,3,10,3]},OlI1I:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0],y:[90,95,95]},width:[15,18,2],height:[18,23,2],texture:[63]},IlIIO:{section_segments:8,offset:{x:0,y:0,z:20},position:{x:[0,0,0,0,0,0],y:[-50,-40,-25,0,5],z:[0,0,0,0,9,9]},width:[0,10,15,10,0],height:[0,10,15,16,0],texture:[9]},O0lO1:{section_segments:10,offset:{x:0,y:30,z:60},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,100,90]},width:[0,15,20,20,20,15,15,20,10,0],height:[0,15,20,20,20,15,15,20,10,0],texture:[4,63,1,1,1,63,1,1,12],propeller:!0},side_propulsors:{section_segments:10,offset:{x:80,y:30,z:-30},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,100,90]},width:[0,15,20,20,20,15,15,20,10,0],height:[0,15,20,20,20,15,15,20,10,0],texture:[4,63,1,1,1,63,1,1,12],propeller:!0}},wings:{top_join:{offset:{x:0,y:50,z:0},length:[60],width:[70,30],angle:[90],position:[0,0,0,50],texture:[11],bump:{position:10,size:20}},side_joins:{offset:{x:0,y:50,z:0},length:[80],width:[70,30],angle:[-20],position:[0,0,0,50],texture:[11],bump:{position:10,size:20}}}}),II1l1.add({name:"Aetos",level:5,model:4,size:1.5,specs:{shield:{capacity:[200,300],reload:[5,7]},generator:{capacity:[80,140],reload:[35,45]},ship:{mass:175,speed:[90,100],rotation:[70,90],acceleration:[110,130]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-100,-99,-98,-50,0,100,80]},width:[0,5,6,17,28,20,0],height:[0,2,4,15,25,25,0],texture:[4,6,10,10,11,12],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-60,z:10},position:{x:[0,0,0,0,0,0,0],y:[-10,0,20,30,40]},width:[0,5,10,10,0],height:[0,5,10,12,0],texture:[9]},lasers:{section_segments:8,offset:{x:81,y:-15,z:-30},position:{x:[0,0,0,0,0],y:[25,70,10,80,90],z:[0,0,0,0,0]},width:[5,0,0,5,0],height:[5,5,0,5,0],texture:[63,63,6],angle:2,laser:{damage:[5,8],rate:5,type:1,speed:[120,180],number:1,angle:0,error:0}}},wings:{top:{doubleside:!0,offset:{x:15,y:40,z:0},length:[50],width:[70,30],angle:[70],position:[0,30],texture:[63],bump:{position:10,size:10}},main:{doubleside:!0,offset:{x:0,y:25,z:15},length:[90,40],width:[70,50,30],angle:[-30,-40],position:[30,20,-20],texture:[8,63],bump:{position:10,size:10}}}}),II1l1.add({name:"Shadow X-2",level:5,model:5,size:1.1,specs:{shield:{capacity:[150,220],reload:[5,7]},generator:{capacity:[80,145],reload:[19,29]},ship:{mass:125,speed:[110,140],rotation:[35,48],acceleration:[140,160]}},bodies:{main:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-100,-98,-95,-70,-40,0,40,70,80,90,100]},width:[0,5,10,20,30,20,20,30,30,30,20,0],height:[0,4,4,20,20,10,10,15,15,15,10,10],texture:[12,5,63,4,4,3,4,4,5]},OlI1I:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0],y:[90,95,100,105,90]},width:[10,15,18,19,2],height:[3,5,7,8,2],texture:[63],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-25,z:12},position:{x:[0,0,0,0,0,0],y:[-45,-40,-25,0,5],z:[0,0,0,0,0,0]},width:[0,10,15,5,0],height:[0,10,15,5,0],texture:[9]},laser:{section_segments:10,offset:{x:50,y:10,z:-13},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-30,-25,0,10,20,25,30,40,70,60]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,5,0],texture:[6,4,10,3,4,3,2],propeller:!0,laser:{damage:[5,7],rate:5,type:1,speed:[160,190],number:1}}},wings:{top:{doubleside:!0,offset:{x:10,y:60,z:5},length:[30],width:[50,30],angle:[60],position:[0,50],texture:[3],bump:{position:10,size:10}},side:{doubleside:!0,offset:{x:10,y:70,z:5},length:[30],width:[40,20],angle:[-13],position:[0,60],texture:[63],bump:{position:10,size:10}},wings:{offset:{x:0,y:35,z:0},length:[80],width:[100,70],angle:[0],position:[-80,50],texture:[4],bump:{position:10,size:15}}}}),II1l1.add({name:"FuryStar",level:5,model:2,size:1.5,specs:{shield:{capacity:[200,275],reload:[6,7]},generator:{capacity:[100,150],reload:[30,40]},ship:{mass:200,speed:[70,100],rotation:[120,180],acceleration:[150,180]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:5},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-50,-45,0,10,15,35,55,40]},width:[0,20,25,17,25,20,15,0],height:[0,15,15,15,20,20,15,0],texture:[1,4,63,4,2,12,17],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-43,z:5},position:{x:[0,0,0,0,0,0,0],y:[-10,-4,10],z:[-5,0,0]},width:[1,18,20],height:[1,15,10],texture:[9]},missiles:{section_segments:12,offset:{x:35,y:-5,z:10},position:{x:[0,0,0,0,0],y:[-30,-23,0,23,30],z:[0,0,0,0,0]},width:[0,5,5,5,0],height:[0,5,5,5,0],texture:[6,4,4,10],angle:0,laser:{damage:[1,2],rate:4,type:1,speed:[100,125],number:1,error:0}},cannon:{section_segments:6,offset:{x:15,y:-10,z:-15},position:{x:[0,0,0,0,0,0],y:[-40,-50,-20,0,20,30],z:[0,0,0,0,0,20]},width:[0,5,8,11,7,0],height:[0,5,8,11,10,0],angle:0,laser:{damage:[12,18],rate:2,type:1,speed:[200,250],number:1,error:0},propeller:!1,texture:[3,3,10,3]},top_propulsors:{section_segments:10,offset:{x:75,y:45,z:40},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,80,70],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,5,0],propeller:!0,texture:[4,4,2,2,5,63,5,63,17]},bottom_propulsors:{section_segments:10,offset:{x:100,y:0,z:-40},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,80,70],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,5,0],propeller:!0,texture:[4,4,2,2,5,63,5,4,17]}},wings:{rooftop:{doubleside:!0,offset:{x:0,y:-20,z:20},length:[20,15,25,25,5],width:[50,40,35,35,35,30],angle:[0,-20,30,30,30],position:[0,10,20,50,80,100],texture:[8,63,3,3],bump:{position:-40,size:5}},bottom:{doubleside:!0,offset:{x:10,y:-20,z:0},length:[30,30,30],width:[60,50,50,50],angle:[-27,-27,-27],position:[0,10,30,40],texture:[1],bump:{position:-40,size:5}},topwinglets:{doubleside:!0,offset:{x:80,y:87,z:45},length:[20],width:[40,30],angle:[60],position:[0,50],texture:[63],bump:{position:10,size:10}},bottomwinglets:{doubleside:!0,offset:{x:100,y:50,z:-45},length:[20],width:[40,30],angle:[-60],position:[0,50],texture:[4],bump:{position:10,size:10}}}}),arrayMult=function(t,e){return t.map(function(t){return t*e})},II1l1.add({name:"Howler",level:5,model:6,size:1.2,zoom:1,specs:{shield:{capacity:[275,340],reload:[5,7]},generator:{capacity:[80,110],reload:[35,50]},ship:{mass:225,speed:[85,98],rotation:[70,95],acceleration:[90,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:-20,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0,0],y:[-145,-135,-125,-130,-100,-55,5,60,85,120,118],z:[0,0,0,0,0,0,0,0,0,0,0,0,0]},width:[0,5,5,8,20,30,35,35,30,22,0],height:[0,5,5,8,15,20,33,30,30,22,0],texture:[17,4,13,3,2,1,10,31,12,17],propeller:!0,laser:{damage:[2.5,4],rate:6,speed:[160,210],number:2,recoil:0,type:1}},IlIIO:{section_segments:8,offset:{x:0,y:-80,z:20},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:arrayMult([-10,-8,15,30],2),z:[-4,-4,1,0,0,0,0,0,0,0,0,0]},width:arrayMult([0,3,8,6],2),height:arrayMult([0,2,8,6],2),texture:[2,9,31]},front1:{section_segments:8,offset:{x:22,y:-125,z:0},position:{x:[0,0,0,0,0,0,-5],y:arrayMult([-15,-8,-3,-5,15,40],1.5),z:[0,0,0,0,0,0,0,0,0,0,0,0]},width:arrayMult([0,3,3,4,8,6],1.5),height:arrayMult([0,3,3,4,8,6],1.5),texture:[17,4,3],laser:{damage:[9,15],rate:1,speed:[150,200],number:1,recoil:25,type:2}},front2:{section_segments:10,offset:{x:32,y:-95,z:0},position:{x:[-4,-4,0,-1],y:arrayMult([0,-8,15,40],1.5),z:[0,0,0,0,0,0,0,0,0,0,0,0]},width:arrayMult([0,5,8,6],1.5),height:arrayMult([0,8,12,10],1.5),texture:[13,2,63],angle:0},propulsors:{section_segments:8,offset:{x:40,y:30,z:-5},position:{x:[-12,-12,-2,0,0,0,0,0,0,0,0,0,0],y:[-90,-100,-60,20,50,48],z:[5,5,5,0,0,0,0,0,0,0,0,0,0]},width:arrayMult([0,3,10,20,12,0],1.2),height:arrayMult([0,3,13,20,12,0],1.2),texture:[4,31,10,13,17],propeller:!0},uwing:{section_segments:[0,60,120,180],offset:{x:-20,y:-30,z:10},position:{x:[0,0,0,0,0,0],y:[-65,-70,40,80,110],z:[0,0,0,0,0,0]},width:[0,5,25,25,0],height:[0,10,25,25,20],texture:[4]}},wings:{main:{doubleside:!0,offset:{x:20,y:-20,z:5},length:[89,0],width:[130,60],angle:[-12,-12],position:[0,80,80],texture:18,bump:{position:20,size:5}},sides:{doubleside:!0,offset:{x:20,y:-20,z:10},length:[84,-3,5,12,-5],width:[25,25,140,140,50,50],angle:[-12,5,5,5,5],position:[40,85,55,55,70,70],texture:[63,4,63,4,17],bump:{position:35,size:15}}}}),II1l1.add({name:"Bat-Defender",level:5,model:7,size:1.8,specs:{shield:{capacity:[300,400],reload:[7,10]},generator:{capacity:[70,100],reload:[25,35]},ship:{mass:350,speed:[70,90],rotation:[40,70],acceleration:[90,100]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-99,-100,-97,-45,-40,-25,-23,15,20,55,50]},width:[0,5,5,30,17,27,25,25,27,15,5],height:[0,2,2,25,27,27,25,25,27,20,0],texture:[6,5,1,4,6,4,63,6,2,12]},propulsors:{section_segments:8,offset:{x:30,y:-20,z:0},position:{x:[-5,-2,0,0,0,0,0,0,0,0,0],y:[30,55,60,80,95,100,90,95]},width:[12,14,14,10,12,10,0],height:[5,14,14,10,12,10,0],texture:[2,6,4,11,6,12],propeller:!0},lasers:{section_segments:8,offset:{x:70,y:-40,z:10},position:{x:[0,0,0,0,0],y:[25,90,10,50,60]},width:[5,5,0,10,5],height:[5,1,0,0,5],texture:[63,6],angle:3,laser:{damage:[10,15],rate:2.5,type:1,speed:[150,200],number:1,error:0},propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-45,z:8},position:{x:[0,0,0,0,0,0],y:[-50,-40,-25,0,5],z:[-10,-5,0,0,0]},width:[0,5,10,10,0],height:[0,10,15,16,0],texture:[9]}},wings:{wings:{offset:{x:20,y:0,z:0},length:[35,15,20,15],width:[100,50,50,40,45],angle:[-10,20,0,0],position:[0,0,10,30,0],texture:[11,4],bump:{position:-20,size:15}},side:{doubleside:!0,offset:{x:105,y:30,z:-30},length:[30,10,30],width:[40,60,60,40],angle:[90,110,110,90],position:[0,-30,-30,0],texture:[63],bump:{position:0,size:15}}}}),II1l1.add({name:"Advanced-Fighter",level:6,model:1,size:2,specs:{shield:{capacity:[200,350],reload:[4,6]},generator:{capacity:[120,200],reload:[50,60]},ship:{mass:400,speed:[70,80],rotation:[30,50],acceleration:[70,100]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0],y:[-100,-80,-90,-50,0,50,100,90]},width:[0,5,15,25,40,25,20,0],height:[0,5,10,30,25,20,10,0],propeller:!0,texture:[4,4,1,1,10,1,1],laser:{damage:[90,150],rate:1,type:2,speed:[180,240],number:1,recoil:150,error:0}},IlIIO:{section_segments:12,offset:{x:0,y:-35,z:33},position:{x:[0,0,0,0,0,0,0],y:[-30,-20,10,30,40],z:[0,0,0,0,0,0,0]},width:[0,12,15,10,0],height:[0,12,18,12,0],propeller:!1,texture:[7,9,9,7]},side_propellers:{section_segments:10,offset:{x:30,y:30,z:0},position:{x:[0,0,0,0,0,0],y:[-50,-20,0,20,80,70]},width:[15,20,10,25,10,0],height:[10,15,15,10,5,0],angle:0,propeller:!0,texture:[3,63,4,10,3]},Il1O1:{section_segments:12,offset:{x:70,y:50,z:-30},position:{x:[0,0,0,0,0,0,0],y:[-50,-45,-20,0,20,50,55]},width:[0,5,10,10,15,10,0],height:[0,5,15,15,10,5,0],angle:0,propeller:!1,texture:[4,4,10,4,63,4],laser:{damage:[6,12],rate:3,type:1,speed:[100,150],number:1,error:0}},cannons2:{section_segments:12,offset:{x:95,y:50,z:-40},position:{x:[0,0,0,0],y:[-50,-20,40,50]},width:[2,5,5,2],height:[2,15,15,2],angle:0,propeller:!1,texture:6,laser:{damage:[4,10],rate:3,type:1,speed:[100,150],number:1,error:0}}},wings:{main:{length:[100,30,20],width:[100,50,40,30],angle:[-25,20,25],position:[30,70,50,50],bump:{position:-20,size:20},offset:{x:0,y:0,z:0},texture:[11,11,63],doubleside:!0},Illll:{length:[40],width:[40,20,30],angle:[10,-10],position:[-50,-70,-65],bump:{position:0,size:30},texture:63}}}),II1l1.add({name:"Scorpion",level:6,model:2,size:2,specs:{shield:{capacity:[225,400],reload:[5,7]},generator:{capacity:[80,175],reload:[38,50]},ship:{mass:450,speed:[75,90],rotation:[50,70],acceleration:[80,100]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0],y:[-90,-40,-30,0,50,100,120,110],z:[-10,-5,0,0,0,0,20,20]},width:[0,12,20,15,25,10,5],height:[0,10,15,25,15,10,5],texture:[1,4,63,11,11,4],propeller:!1},tail:{section_segments:14,offset:{x:0,y:70,z:50},position:{x:[0,0,0,0,0,0],y:[-70,-25,-10,20,40,50],z:[0,0,0,0,-10,-20]},width:[0,5,35,25,5,5],height:[0,5,25,20,5,5],texture:[6,4,63,10,4],laser:{damage:[50,100],rate:.9,type:2,speed:[170,230],number:1,angle:0,error:0,recoil:100}},IlIIO:{section_segments:8,offset:{x:13,y:-44,z:12},position:{x:[-5,0,0,0,0],y:[-15,-5,0,5,15],z:[0,0,0,1,0]},width:[0,8,10,8,0],height:[0,5,5,5,0],texture:[6,5],propeller:!1},lII1l:{section_segments:8,offset:{x:70,y:0,z:-10},position:{x:[0,0,0,10,-5,0,0,0],y:[-115,-80,-100,-60,-30,-10,20,0]},width:[1,5,10,15,15,20,10,0],height:[1,5,15,20,35,30,10,0],texture:[6,6,1,1,11,2,12],laser:{damage:[2,3],rate:1.8,type:1,speed:[130,170],number:2,angle:5,error:0},propeller:!0},wingends:{section_segments:8,offset:{x:105,y:-80,z:-10},position:{x:[0,2,4,2,0],y:[-20,-10,0,10,20]},width:[2,3,6,3,2],height:[5,15,22,17,5],texture:4,angle:0,propeller:!1}},wings:{main:{length:[80,30],width:[40,30,20],angle:[-10,20],position:[30,-50,-80],texture:63,bump:{position:30,size:10}},font:{length:[80,30],width:[20,15],angle:[-10,20],position:[-20,-40],texture:4,bump:{position:30,size:10}}}}),II1l1.add({name:"Marauder",level:6,model:3,size:1.4,specs:{shield:{capacity:[210,350],reload:[8,11]},generator:{capacity:[85,160],reload:[25,40]},ship:{mass:250,speed:[70,110],rotation:[60,80],acceleration:[80,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:-20,z:10},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-65,-75,-55,-40,0,30,60,80,90,80],z:[0,0,0,0,0,0,0,0,0,0,0]},width:[0,6,18,23,30,25,25,30,35,0],height:[0,5,10,12,12,20,15,15,15,0],texture:[6,4,1,10,1,1,11,12,17],propeller:!0,laser:{damage:[10,16],rate:10,type:1,speed:[170,200],recoil:0,number:1,error:0}},IlIIO:{section_segments:[40,90,180,270,320],offset:{x:0,y:-85,z:22},position:{x:[0,0,0,0,0,0],y:[15,35,60,95,125],z:[-1,-2,-1,-1,3]},width:[5,12,14,15,5],height:[0,12,15,15,0],texture:[8.98,8.98,4]},outriggers:{section_segments:10,offset:{x:25,y:0,z:-10},position:{x:[-5,-5,8,-5,0,0,0,0,0,0],y:[-100,-125,-45,0,30,40,70,80,100,90],z:[10,10,5,5,0,0,0,0,0,0,0,0]},width:[0,6,10,10,15,15,15,15,10,0],height:[0,10,20,25,25,25,25,25,20,0],texture:[13,4,4,63,4,18,4,13,17],laser:{damage:[4,8],rate:3,type:1,speed:[110,140],recoil:0,number:1,error:0},propeller:!0},intake:{section_segments:12,offset:{x:25,y:-5,z:10},position:{x:[0,0,5,0,-3,0,0,0,0,0],y:[-10,-30,-5,35,60,70,85,100,85],z:[0,-6,0,0,0,0,0,0,0,0]},width:[0,5,10,10,15,10,10,5,0],height:[0,15,15,20,20,15,15,5,0],texture:[6,4,63,4,63,18,4,17]}},wings:{main:{length:[20,70,35],width:[50,55,40,20],angle:[0,-20,0],position:[20,20,70,25],texture:[3,18,63],doubleside:!0,bump:{position:30,size:15},offset:{x:0,y:0,z:13}},spoiler:{length:[20,45,0,5],width:[40,40,20,30,0],angle:[0,20,90,90],position:[60,60,80,80,90],texture:[10,11,63],doubleside:!0,bump:{position:30,size:18},offset:{x:0,y:0,z:30}},font:{length:[37],width:[40,15],angle:[-10],position:[0,-45],texture:[63],doubleside:!0,bump:{position:30,size:10},offset:{x:35,y:-20,z:10}},shields:{doubleside:!0,offset:{x:12,y:60,z:-15},length:[0,15,45,20],width:[30,30,65,65,30,30],angle:[30,30,90,150],position:[10,10,0,0,10],texture:[4],bump:{position:0,size:4}}}}),II1l1.add({name:"Condor",level:6,model:4,size:1.5,specs:{shield:{capacity:[225,400],reload:[7,10]},generator:{capacity:[70,130],reload:[30,48]},ship:{mass:200,speed:[75,105],rotation:[50,70],acceleration:[80,120]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],y:[-110,-95,-100,-100,-45,-40,-25,-23,15,20,55,80,100,90],z:[-10,-9,-8,-7,-6,-4,-2,0,0,0,0,0,0,0]},width:[0,2,5,10,25,27,27,25,25,27,40,35,30,0],height:[0,2,5,10,25,27,27,25,25,27,20,15,10,0],texture:[6,2,3,10,5,63,5,2,5,3,63,11,4],propeller:!0,laser:{damage:[30,60],rate:2,type:2,speed:[150,200],number:1,angle:0,error:0}},Il1O1:{section_segments:12,offset:{x:75,y:30,z:-25},position:{x:[0,0,0,0,0,0,0],y:[-50,-45,-20,0,20,50,55]},width:[0,5,10,10,10,10,0],height:[0,5,15,15,10,5,0],angle:0,laser:{damage:[3,6],rate:4,type:1,speed:[100,130],number:1,angle:0,error:0},propeller:!1,texture:[6,4,10,4,63,4]},IlIIO:{section_segments:12,offset:{x:0,y:-60,z:8},position:{x:[0,0,0,0],y:[-25,-8,20,65]},width:[0,10,10,0],height:[0,12,15,5],texture:[9]}},wings:{OlI1I:{offset:{x:0,y:25,z:10},length:[90,40],width:[70,50,30],angle:[-30,40],position:[0,20,0],texture:[11,63],doubleside:!0,bump:{position:10,size:20}},front:{offset:{x:0,y:55,z:10},length:[90,40],width:[70,50,30],angle:[-30,-40],position:[-60,-20,-20],texture:[11,63],doubleside:!0,bump:{position:10,size:10}}}}),II1l1.add({name:"A-Speedster",level:6,model:5,size:1.5,specs:{shield:{capacity:[200,300],reload:[6,8]},generator:{capacity:[80,140],reload:[30,45]},ship:{mass:175,speed:[90,115],rotation:[60,80],acceleration:[90,140]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0],y:[-100,-95,0,0,70,65],z:[0,0,0,0,0,0]},width:[0,10,40,20,20,0],height:[0,5,30,30,15,0],texture:[6,11,5,63,12],propeller:!0,laser:{damage:[38,84],rate:1,type:2,speed:[175,230],recoil:50,number:1,error:0}},IlIIO:{section_segments:8,offset:{x:0,y:-60,z:15},position:{x:[0,0,0,0,0,0,0],y:[-20,0,20,40,50],z:[-7,-5,0,0,0]},width:[0,10,10,10,0],height:[0,10,15,12,0],texture:[9]},side_propulsors:{section_segments:10,offset:{x:50,y:25,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,80,70]},width:[0,15,20,20,20,15,15,20,10,0],height:[0,15,20,20,20,15,15,20,10,0],propeller:!0,texture:[4,4,2,2,5,63,5,4,12]},Il1O1:{section_segments:12,offset:{x:30,y:40,z:45},position:{x:[0,0,0,0,0,0,0],y:[-50,-45,-20,0,20,30,40]},width:[0,5,7,10,3,5,0],height:[0,5,7,8,3,5,0],angle:-10,laser:{damage:[8,12],rate:2,type:1,speed:[100,130],number:1,angle:-10,error:0},propeller:!1,texture:[6,4,10,4,63,4]}},wings:{join:{offset:{x:0,y:0,z:10},length:[40,0],width:[10,20],angle:[-1],position:[0,30],texture:[63],bump:{position:0,size:25}},Illll:{offset:{x:0,y:-40,z:10},doubleside:!0,length:[45,10],width:[5,20,30],angle:[50,-10],position:[90,80,50],texture:[4],bump:{position:10,size:30}}}}),II1l1.add({name:"Rock-Tower",level:6,model:6,size:2.1,specs:{shield:{capacity:[300,500],reload:[8,11]},generator:{capacity:[75,115],reload:[35,45]},ship:{mass:450,speed:[75,90],rotation:[50,70],acceleration:[80,90]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-90,-85,-70,-60,-20,-25,40,85,70],z:[-10,-8,-5,0,0,0,0,0,0]},width:[0,40,45,10,12,30,30,20,0],height:[0,10,12,8,12,10,25,20,0],texture:[4,63,4,4,4,11,10,12],propeller:!0},IlIIO:{section_segments:12,offset:{x:0,y:30,z:20},position:{x:[0,0,0,0,0,0,0,0],y:[-30,-20,0,10,20,30],z:[0,0,0,0,0,0]},width:[0,10,15,15,10,5],height:[0,10,15,15,10,5],texture:9,propeller:!1},dimeds_banhammer:{section_segments:6,offset:{x:25,y:-70,z:-10},position:{x:[0,0,0,0,0,0],y:[-20,-10,-20,0,10,12],z:[0,0,0,0,0,0]},width:[0,0,5,7,6,0],height:[0,0,5,7,6,0],texture:[6,6,6,10,12],angle:0,laser:{damage:[4,6],rate:8,type:1,speed:[150,230],number:1,error:5}},propulsors:{section_segments:8,offset:{x:30,y:50,z:0},position:{x:[0,0,5,5,0,0,0],y:[-45,-50,-20,0,20,50,40],z:[0,0,0,0,0,0,0]},width:[0,10,15,15,15,10,0],height:[0,15,20,25,20,10,0],texture:[11,2,3,4,5,12],angle:0,propeller:!0}},wings:{main:{length:[55,15],width:[60,40,30],angle:[-10,20],position:[30,40,30],texture:63,doubleside:!0,offset:{x:0,y:20,z:-5},bump:{position:30,size:20}},finalizer_fins:{length:[20],width:[20,10],angle:[-70],position:[-42,-30],texture:63,doubleside:!0,offset:{x:35,y:-35,z:0},bump:{position:0,size:30}}}}),II1l1.add({name:"Barracuda",level:6,model:7,size:2.4,specs:{shield:{capacity:[300,400],reload:[8,12]},generator:{capacity:[100,150],reload:[8,14]},ship:{mass:675,speed:[70,90],rotation:[30,45],acceleration:[130,150],dash:{rate:2,burst_speed:[160,200],speed:[120,150],acceleration:[70,70],initial_energy:[50,75],energy:[20,30]}}},bodies:{body:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-90,-100,-60,-10,0,20,50,80,100,90],z:[0,0,0,0,0,0,0,0,0,0,0]},width:[0,5,20,25,35,40,40,35,30,0],height:[0,5,40,45,40,60,70,60,30,0],texture:[10,2,10,2,3,13,13,63,12],propeller:!0},front:{section_segments:8,offset:{x:0,y:-20,z:0},position:{x:[0,0,0,0,0],y:[-90,-85,-70,-60,-20]},width:[0,40,45,10,12],height:[0,15,18,8,12],texture:[8,63,4,4,4],propeller:!0},propeller:{section_segments:10,offset:{x:40,y:40,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,70,60]},width:[0,10,15,15,15,10,10,20,15,0],height:[0,10,15,15,15,10,10,18,8,0],texture:[4,4,10,3,3,63,4,63,12],propeller:!0},sides:{section_segments:6,angle:90,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-80,-75,-60,-50,-10,10,50,60,75,80],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,30,35,10,12,12,10,35,30,0],height:[0,10,12,8,12,12,8,12,10,0],texture:[4,63,4,4,4,4,4,63,4]},IlIIO:{section_segments:12,offset:{x:0,y:-20,z:30},position:{x:[0,0,0,0,0,0,0,0],y:[-50,-20,0,10,30,50]},width:[0,12,18,20,15,0],height:[0,20,22,24,20,0],texture:[9]}},wings:{top:{doubleside:!0,offset:{x:0,y:20,z:15},length:[70],width:[70,30],angle:[90],position:[0,30],texture:[63],bump:{position:10,size:30}},top2:{doubleside:!0,offset:{x:0,y:51,z:5},length:[70],width:[50,20],angle:[90],position:[0,60],texture:[63],bump:{position:10,size:30}}}}),II1l1.add({name:"O-Defender",level:6,model:8,size:2.2,specs:{shield:{capacity:[400,550],reload:[10,13]},generator:{capacity:[70,100],reload:[25,40]},ship:{mass:500,speed:[70,80],rotation:[30,40],acceleration:[60,80]}},bodies:{main:{section_segments:8,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0],y:[-90,-88,0,90,91]},width:[5,6,25,10,20],height:[2,10,40,20,20],texture:[63,1,10],propeller:!0,laser:{damage:[35,60],rate:2,type:2,speed:[130,180],number:1,angle:0,error:0}},side:{section_segments:10,offset:{x:50,y:0,z:0},position:{x:[-40,-5,15,25,20,0,-50],y:[-100,-70,-40,-10,20,50,90]},width:[5,20,20,20,20,20,5],height:[15,25,30,30,30,25,0],texture:[0,1,2,3,4,63]},IlIIO:{section_segments:8,offset:{x:0,y:-60,z:18},position:{x:[0,0,0,0,0,0,0],y:[-10,0,20,30,40]},width:[0,5,10,10,0],height:[0,5,10,12,0],texture:[9]},O0lO1:{section_segments:15,offset:{x:0,y:0,z:10},position:{x:[0,0,0,0],y:[80,95,100,90]},width:[5,20,10,0],height:[5,15,5,0],propeller:!0,texture:[1,63,12]},O0OO1:{section_segments:15,offset:{x:0,y:0,z:-10},position:{x:[0,0,0,0],y:[80,95,100,90]},width:[5,20,10,0],height:[5,15,5,0],propeller:!0,texture:[1,63,12]}},wings:{join:{offset:{x:0,y:20,z:0},length:[80,0],width:[130,50],angle:[-1],position:[0,-30],texture:[8],bump:{position:-20,size:15}}}}),II1l1.add({name:"Odyssey",level:7,model:1,size:4,specs:{shield:{capacity:[750,750],reload:[15,15]},generator:{capacity:[330,330],reload:[150,150]},ship:{mass:700,speed:[45,45],rotation:[20,20],acceleration:[150,150]}},tori:{circle:{segments:20,radius:95,section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0],y:[0],z:[0]},width:[20],height:[8],texture:[63,63,4,10,4,4,10,4,63,63,63,63,3,10,3,3,10,3,63]}},bodies:{main:{section_segments:20,offset:{x:0,y:-10,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-130,-130,-85,-70,-60,-20,-25,40,40,100,90]},width:[0,20,40,45,10,12,30,30,40,30,0],height:[0,20,25,25,10,12,25,25,20,10,0],texture:[4,15,63,4,4,4,11,10,4,12]},laser1:{section_segments:12,offset:{x:110,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-25,-30,-20,0,20,30,20]},width:[0,3,5,5,5,3,0],height:[0,3,5,5,5,3,0],texture:[12,6,63,63,6,12],laser:{damage:[20,20],rate:3,type:1,speed:[200,200],number:1,error:0}},laser2:{section_segments:12,offset:{x:110,y:0,z:0},position:{x:[0,0,0,0,0,0,0],y:[-25,-30,-20,0,20,30,20]},width:[0,3,5,5,5,3,0],height:[0,3,5,5,5,3,0],texture:[12,6,63,63,6,12],angle:180,laser:{damage:[20,20],rate:3,type:1,speed:[200,200],number:1,error:0}},cannon:{section_segments:6,offset:{x:0,y:-115,z:0},position:{x:[0,0,0,0],y:[-25,-30,-20,0]},width:[0,15,9,7],height:[0,10,9,7],texture:[6,6,6,10],laser:{damage:[250,250],rate:1,type:1,speed:[100,100],number:1,error:0,recoil:300}},IlIIO:{section_segments:10,offset:{x:0,y:0,z:15},position:{x:[0,0,0,0,0,0,0],y:[-30,-10,0,10,30]},width:[0,12,15,10,0],height:[0,20,22,18,0],texture:[9]},bumpers:{section_segments:8,offset:{x:85,y:20,z:0},position:{x:[-5,0,5,10,5,0,-5],y:[-85,-80,-40,0,20,50,55]},width:[0,10,15,15,15,5,0],height:[0,20,35,35,25,15,0],texture:[11,2,63,4,3],angle:0},toppropulsors:{section_segments:10,offset:{x:17,y:50,z:15},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,50,40]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,10,0],texture:[3,4,10,3,3,63,4],propeller:!0},bottompropulsors:{section_segments:10,offset:{x:17,y:50,z:-15},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,50,40]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,10,0],texture:[3,4,10,3,3,63,4],propeller:!0}},wings:{topjoin:{offset:{x:0,y:-3,z:0},doubleside:!0,length:[100],width:[20,20],angle:[25],position:[0,0,0,50],texture:[1],bump:{position:10,size:30}},bottomjoin:{offset:{x:0,y:-3,z:0},doubleside:!0,length:[100],width:[20,20],angle:[-25],position:[0,0,0,50],texture:[1],bump:{position:-10,size:30}}}}),II1l1.add({name:"Shadow X-3",level:7,model:2,size:3,specs:{shield:{capacity:[400,400],reload:[10,10]},generator:{capacity:[250,250],reload:[45,45]},ship:{mass:350,speed:[140,140],rotation:[35,35],acceleration:[35,35]}},bodies:{main:{section_segments:20,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-130,-128,-115,-70,-40,0,40,70,80,90,100]},width:[0,5,10,20,20,20,20,30,30,30,20,0],height:[0,5,10,30,20,10,10,15,15,15,10,10],texture:[12,3,15,4,63,63,4,4,5],laser:{damage:[225,225],rate:1,type:1,speed:[200,200],number:1,error:0,recoil:500}},air:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[0,-80,-30,-10,10,30,50]},width:[0,25,35,30,30,32,20],height:[0,15,10,10,10,10,10,15,15,15,10,10],texture:[4,3,2,2,2,3]},OlI1I:{section_segments:10,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0],y:[90,95,100,105,90]},width:[10,15,18,22,2],height:[3,5,7,8,2],texture:[63],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-30,z:18},position:{x:[0,0,0,0,0,0,0,0],y:[-65,-25,0,25,60,90,100],z:[0,0,0,0,-10,-8,-10]},width:[0,10,15,10,20,15,10],height:[0,15,20,10,10,10,10],texture:[9,9,9,10,63,3]},laser:{section_segments:10,offset:{x:90,y:10,z:-19},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-30,-25,0,10,20,25,30,40,70,60]},width:[0,10,15,15,15,10,10,15,10,0],height:[0,10,15,15,15,10,10,15,5,0],texture:[6,4,10,3,4,3,2],propeller:!0,laser:{damage:[4,4],rate:3,type:1,speed:[150,150],number:1}},laser2:{section_segments:10,offset:{x:50,y:-20,z:-20},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-30,-25,0,10,20,25,30,40,70,60]},width:[0,10,15,15,15,10,10,15,12,0],height:[0,10,15,15,15,10,10,15,5,0],texture:[6,4,10,3,4,3,2],propeller:!0,laser:{damage:[4,4],rate:4,type:1,speed:[150,150],number:1}}},wings:{wings:{offset:{x:10,y:0,z:0},length:[35,15,30,25],width:[100,50,60,30,45],angle:[-10,20,0,0],position:[0,0,10,30,-10],texture:[4],bump:{position:-20,size:15}}}}),II1l1.add({name:"Bastion",level:7,model:3,size:4,specs:{shield:{capacity:[400,400],reload:[20,20]},generator:{capacity:[500,500],reload:[100,100]},ship:{mass:350,speed:[80,80],rotation:[15,15],acceleration:[125,125]}},bodies:{main:{section_segments:8,offset:{x:0,y:50,z:10},position:{x:[0,0,0,0,0,0,0],y:[-40,-50,-20,0,20,40,25],z:[0,0,0,0,0,0,0]},width:[0,5,22,18,16,15,0],height:[0,2,12,16,16,15,0],texture:[10,1,1,10,8,17],propeller:!0},thrusters:{section_segments:8,offset:{x:40,y:43,z:-24},position:{x:[0,0,0,0,0,0],y:[-25,-20,0,20,40,30],z:[0,0,0,0,0,0]},width:[0,8,12,8,8,0],height:[0,12,12,8,8,0],texture:[63,2,2,2,17],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:30,z:20},position:{x:[0,0,0,0,0,0,0],y:[-15,-10,0,11,35],z:[-5,-3,-1,0,0]},width:[0,5,10,10,0],height:[0,3,5,7,0],texture:[9]},cannon1:{section_segments:4,offset:{x:10,y:-80,z:1},position:{x:[0,0,0,0,0,0,0],y:[-10,0,20,30,40],z:[0,0,0,0,0]},width:[0,2,4,7,3],height:[0,1,3,6,0],texture:[17,4],laser:{damage:[6,6],rate:5,type:1,speed:[200,200],number:1}},cannon2:{section_segments:4,offset:{x:42,y:-129,z:8},position:{x:[0,0,0,0,0,0,0],y:[-10,0,20,30,40],z:[0,0,0,0,0]},width:[0,2,4,7,3],height:[0,1,3,6,0],texture:[17,4],angle:3,laser:{damage:[8,8],rate:4,type:1,speed:[180,180],number:1}},cannon3:{section_segments:4,offset:{x:75,y:-105,z:-8},position:{x:[0,0,0,0,0,0,0],y:[-10,0,20,30,40],z:[0,0,0,0,0]},width:[0,2,4,7,3],height:[0,1,3,6,0],texture:[17,4],angle:5,laser:{damage:[20,20],rate:1.5,type:1,speed:[160,160],number:1}}},wings:{main1:{doubleside:!0,offset:{x:9,y:15,z:0},length:[0,15,0,7],width:[0,160,70,30,30],angle:[0,20,0,-10],position:[30,-20,30,30,30],texture:[13,63,13,8],bump:{position:35,size:5}},main2:{doubleside:!0,offset:{x:30,y:15,z:0},length:[0,15,0,20],width:[0,80,90,200,30],angle:[30,30,30,30],position:[30,30,10,-45,30],texture:[13,3,13,4],bump:{position:35,size:7}},main3:{doubleside:!0,offset:{x:0,y:25,z:-7},length:[45,35,0,20],width:[40,40,40,200,40],angle:[-20,20,-20,-5],position:[20,30,0,-30,10],texture:[0,8,13,63],bump:{position:35,size:20}}}}),II1l1.add({name:"Aries",level:7,model:4,size:4.5,specs:{shield:{capacity:[800,800],reload:[17,17]},generator:{capacity:[350,350],reload:[175,175]},ship:{mass:800,speed:[40,40],rotation:[20,20],acceleration:[150,150]}},bodies:{arm:{section_segments:6,angle:0,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-90,-85,-70,-60,-10,10,60,70,85,90,85],z:[0,0,0,0,0,0,0,0,0,0,0]},width:[0,20,25,10,12,12,15,20,20,15,0],height:[0,10,12,8,12,12,8,12,10,5,0],texture:[4,63,4,4,4,4,4,63,3],propeller:!0},arm45:{section_segments:6,angle:45,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-90,-85,-70,-60,-10,10,60,70,85,90],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,20,25,10,12,12,10,25,20,0],height:[0,10,12,8,12,12,8,12,10,0],texture:[4,63,4,4,4,4,4,63,4]},arm90:{section_segments:6,angle:90,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-90,-85,-70,-60,-10,10,60,70,85,90],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,20,25,10,12,12,10,25,20,0],height:[0,10,12,8,12,12,8,12,10,0],texture:[4,63,4,4,4,4,4,63,4]},arm135:{section_segments:6,angle:-45,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-90,-85,-70,-60,-10,10,60,70,85,90],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,20,25,10,12,12,10,25,20,0],height:[0,10,12,8,12,12,8,12,10,0],texture:[4,63,4,4,4,4,4,63,4]},IlIIO:{section_segments:20,offset:{x:0,y:-10,z:8},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-50,-35,-25,-15,0,15,25,35,70]},width:[0,15,20,25,20,10,15,15,0],height:[0,10,13,15,15,15,12,10,0],texture:[6,15,15,1,4,3,3,15]},topcockpit:{section_segments:16,offset:{x:0,y:-23,z:7},position:{x:[0,0,0,0,0,0,0],y:[-30,-10,0,10,30]},width:[0,12,15,10,0],height:[0,20,22,18,0],texture:[9]},cannon:{section_segments:6,offset:{x:0,y:-63,z:0},position:{x:[0,0,0,0,0,0],y:[-25,-30,-20,0,10,12]},width:[0,10,8,7,6,0],height:[0,5,5,7,6,0],texture:[6,6,6,10,12],laser:{damage:[150,150],rate:.7,type:1,speed:[110,110],number:1,error:0}},sidecannons:{section_segments:6,offset:{x:45,y:-45,z:7},position:{x:[0,0,0,0,0,0],y:[-0,-30,-20,0,10,12],z:[0,0,0,0,-5,-10]},width:[0,3,5,7,6,0],height:[0,3,5,7,6,0],texture:[6,6,15,4,4],angle:-45,laser:{damage:[15,15],rate:4,type:1,speed:[200,200],number:1,error:0}},backsidecannons:{section_segments:6,offset:{x:45,y:45,z:7},position:{x:[0,0,0,0,0,0],y:[-0,-30,-20,0,10,12],z:[0,0,0,0,-5,-10]},width:[0,3,5,7,6,0],height:[0,3,5,7,6,0],
texture:[6,6,15,4,4],angle:225,laser:{damage:[15,15],rate:4,type:1,speed:[200,200],number:1,error:0}}},wings:{side_joins:{offset:{x:0,y:0,z:5},length:[40,30],width:[50,30,0],angle:[30,-10],position:[0,0,50],texture:[1,11],bump:{position:10,size:20}}}}),BATTLE_SHIPS.add({name:"Renegade",designer:"Kleinem",level:3,model:1,size:1.9,specs:{shield:{capacity:[350,350],reload:[0,0]},generator:{capacity:[450,450],reload:[0,0]},ship:{mass:200,speed:[120,120],rotation:[80,80],acceleration:[120,120]}},bodies:{main:{section_segments:8,offset:{x:0,y:-72,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[0,1,35,80,105,105,118,108],z:[0,0,0,0,0,0,0,0]},width:[0,6,12,16,10,8,8,0],height:[0,4,9,16,10,8,8,0],texture:[4,1,10,11,4,13,17],propeller:!0,laser:{damage:[55,55],rate:1,type:1,speed:[110,110],number:1,error:0}},IlIIO:{section_segments:8,offset:{x:0,y:-22,z:10},position:{x:[0,0,0,0,0,0,0],y:[0,3,28,36,37],z:[0,0,0,0,0,0,0]},width:[0,7,10,6,0],height:[0,3,8,4,0],texture:[9]},lasers:{section_segments:8,offset:{x:30,y:-98,z:0},position:{x:[0,0,0,0,0,0,0,0],y:[10,0,62,72,79,102,126,127],z:[6,6,9,3,-3,-5,-5,-5]},width:[0,4,10,4,4,12,5,0],height:[0,4,8,4,4,5,4,0],texture:[12,10,1,4,11,11,63],angle:18},braces:{section_segments:8,offset:{x:28,y:-104,z:0},position:{x:[2,0,10,5,2,2,2,2],y:[0,1,35,52,76,97,112,113],z:[3,3,3,3,0,-5,-5,-5]},width:[0,6,13,14,9,9,4,0],height:[0,3,4,4,4,4,3,0],texture:[63,3,63,4,8,4,63]},thrusters:{section_segments:8,offset:{x:82,y:15,z:0},position:{x:[0,0,0,0],y:[0,7,23,13],z:[0,0,0,0]},width:[0,5,5,0],height:[0,4,4,0],texture:[4,13,17],propeller:!0}},wings:{main:{offset:{x:7,y:0,z:7},length:[24,21,19,5,12],width:[40,44,27,27,70,61],angle:[-10,-4,0,-10,4],position:[0,8,4,-6,-6,-6],texture:[4,63,3,13,4],doubleside:!0,bump:{position:0,size:15}}}}),BATTLE_SHIPS.add({name:"Stingray",designer:"Goldman",level:3,model:2,size:1.5,specs:{shield:{capacity:[440,440],reload:[0,0]},generator:{capacity:[400,400],reload:[0,0]},ship:{mass:250,speed:[100,100],rotation:[90,90],acceleration:[110,110]}},bodies:{main:{section_segments:12,offset:{x:0,y:-20,z:-10},position:{x:[0,0,0,0,0,0,0,0,0,0,0],y:[-70,-67,-60,-40,0,40,80,95,115,125,115],z:[0,0,0,0,0,0,0,0,0,0,0]},width:[0,5,10,20,30,25,25,25,15,13,0],height:[0,5,10,15,25,25,25,20,15,13,0],texture:[4,4,63,2,1,10,63,4,12,17],propeller:!0},Il1O1:{section_segments:8,offset:{x:24,y:-45,z:-35},position:{x:[-1,-1,0,0,0,-5],y:[-55,-65,-25,0,25,35],z:[0,0,0,0,5,10]},width:[0,7,11,14,10,0],height:[0,7,11,14,13,0],angle:0,laser:{damage:[20,20],rate:2,type:1,speed:[150,150],recoil:40,number:1,error:0},texture:[6,4,10,4]},IlIIO:{section_segments:8,offset:{x:0,y:-30,z:8},position:{x:[0,0,0,0,0,0],y:[-35,-20,0,25,55],z:[-6,-5,0,5,5]},width:[0,10,15,10,0],height:[0,10,15,10,0],texture:[7,9,9,4]},arms:{section_segments:8,offset:{x:60,y:-30,z:-10},position:{x:[-26,-17,-6,0,0,0,0,0,0],y:[-47,-40,-20,0,60,70,80,90,80],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,8,15,15,15,12,11,10,0],height:[0,8,10,15,15,12,11,10,0],texture:[63,63,4,4,4,4,12,17],angle:1,propeller:!0}},wings:{wings:{doubleside:!0,offset:{x:5,y:-10,z:-10},length:[35,22,22,15],width:[100,100,63,50,60],angle:[-10,20,0,0],position:[20,0,10,20,10],texture:[63,4,4,63],bump:{position:25,size:10}},top:{doubleside:!0,offset:{x:0,y:85,z:0},length:[5,30],width:[60,60,40],angle:[90,90,90],position:[-30,-30,0],texture:63,bump:{position:20,size:10}},side2:{length:[40,10],width:[60,20,20],angle:[10,60],position:[0,20,15],doubleside:!0,texture:63,bump:{position:10,size:10},offset:{x:0,y:55,z:-15}}}}),BATTLE_SHIPS.add({name:"Intrepid",designer:"Finalizer",level:3,model:3,size:1.6,specs:{shield:{capacity:[320,320],reload:[0,0]},generator:{capacity:[320,320],reload:[0,0]},ship:{mass:180,speed:[130,130],rotation:[110,110],acceleration:[80,80]}},bodies:{main:{section_segments:8,offset:{x:0,y:-20,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0,0,0],y:[-110,-106,-80,-40,-20,0,30,50,80,100,120,115],z:[8,8,8,8,8,8,8,-4,-5,-6,-5,-10]},width:[0,18,37,45,45,40,25,20,18,15,13,10],height:[0,8,12,15,15,15,15,20,18,15,10,0],texture:[3,2,2,2,2,2,2,2,2,2,13]},side_engines:{section_segments:8,offset:{x:45,y:10,z:-7},position:{x:[0,0,0,0,0,0,0,0,0],y:[10,12,18,20,80,90,89,85],z:[0,0,0,0,0,0,0,0,0]},width:[0,6,8,10,11,10,8,0],height:[0,6,7,10,11,10,8,0],texture:[17,17,2,10,3,18,17],propeller:!0},IlIIO:{section_segments:8,offset:{x:0,y:-110,z:26},position:{x:[0,0,0,0,0,0,0],y:[20,40,60,90,120,140,210],z:[-5,-5,-4,-5,-5,-11,-19]},width:[5,13,15,10,6,4,1],height:[0,8,10,4,3,3,0],texture:[9,9,63,63,13,4]},Il1O1:{section_segments:8,angle:3,offset:{x:25,y:-90,z:17},position:{x:[0,0,0,0,2,4,4,0,-3],y:[-10,-1,-4,0,10,30,40,60,70],z:[0,0,0,0,0,0,0,0,0]},width:[0,3,3.5,3,3,3,3,3,0],height:[0,5,5,5,5,5,5,5,0],texture:[17,12,6,3],laser:{damage:[4,4],rate:5,type:1,speed:[170,170],number:1,error:0}},detail:{section_segments:8,offset:{x:0,y:-140,z:22},position:{x:[0,0],y:[20,40],z:[-5,-5]},width:[5,10],height:[0,3],texture:[13]}},wings:{main:{doubleside:!0,offset:{x:0,y:70,z:-12},length:[25,20],width:[70,60,40],angle:[0,20],position:[0,-5,-15],texture:[63,13],bump:{position:30,size:5}}}}),BATTLE_SHIPS.add({name:"Hammer",designer:"Goldman",level:3,model:4,size:1.7,specs:{shield:{capacity:[500,500],reload:[0,0]},generator:{capacity:[350,350],reload:[0,0]},ship:{mass:280,speed:[130,130],rotation:[80,80],acceleration:[60,60],dash:{rate:2,burst_speed:[240,240],speed:[150,150],acceleration:[130,130],initial_energy:[60,60],energy:[30,30]}}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-100,-100,-45,-20,-3,5,55,80,100,90],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,10,15,23,21,21,45,40,15,0],height:[0,4,30,43,41,41,40,35,28,0],texture:[4,4,10,63,2,4,63,4,17],propeller:!0},IlIIO:{section_segments:12,offset:{x:0,y:10,z:40},position:{x:[0,0,0,0,0,0,0,0],y:[-40,-20,0,20,30,50],z:[-10,-5,0,0,-5,-5]},width:[0,12,18,20,15,0],height:[0,15,15,17,13,0],texture:[7,9,9,4,63]},uwings:{section_segments:12,offset:{x:55,y:-20,z:-10},position:{x:[-25,-17,-15,-20,-23,0],y:[-60,-10,40,80,90,100],z:[10,9,0,0,0,0]},width:[5,8,17,10,0],height:[10,10,20,10,0],texture:[63,3,3,4]},arm:{section_segments:12,angle:90,offset:{x:0,y:-81,z:0},position:{x:[-8,-8,-5,-1,0,0,-1,-5,-8,-8],y:[-62,-59,-50,-40,-10,10,40,50,59,62],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,12,13,14,20,20,14,13,12,0],height:[0,12,13,14,25,25,14,13,12,0],texture:[4,63,4,10,63,10,4,63,4]},side_propulsors:{section_segments:10,offset:{x:40,y:40,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-20,-15,0,10,20,25,30,40,70,60],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,10,15,15,15,10,10,20,12,0],height:[0,20,25,25,25,25,25,30,17,0],texture:[4,4,63,3,3,63,4,63,17],propeller:!0}}}),BATTLE_SHIPS.add({name:"Cronus",designer:"SChickenMan",level:3,model:5,size:1.6,specs:{shield:{capacity:[300,300],reload:[0,0]},generator:{capacity:[500,500],reload:[0,0]},ship:{mass:130,speed:[140,140],rotation:[100,100],acceleration:[140,140]}},bodies:{main:{section_segments:12,offset:{x:0,y:0,z:0},position:{x:[0,0,0,0,0,0,0,0,0,0],y:[-93,-90,-80,-40,-30,-20,-10,0,30,10],z:[0,0,0,0,0,0,0,0,0,0]},width:[0,10,20,20,20,15,13,15,20,0],height:[0,10,20,25,25,15,13,10,15,0],texture:[3,2,63,2,2,11,63,12,17],propeller:!0},IlIIO:{section_segments:12,offset:{x:0,y:-70,z:16},position:{x:[0,0,0,0,0,0,0],y:[-15,-13,0,30,40],z:[-20,-10,0,0,0]},width:[0,7,10,10,0],height:[0,15,15,15,0],texture:[9],propeller:!1},cannons1:{section_segments:12,offset:{x:60,y:-50,z:0},position:{x:[0,0,0,0,0],y:[-30,-20,0,20,30],z:[0,0,0,0,0]},width:[2,4,10,10,3],height:[3,5,10,10,3],texture:[6,63,4,63],angle:0,laser:{damage:[3,3],rate:4,type:1,speed:[120,120],number:1,error:0}},cannons2:{section_segments:12,offset:{x:30,y:-50,z:0},position:{x:[0,0,0,0,0],y:[-30,-20,0,20,30],z:[0,0,0,0,0]},width:[2,4,10,10,3],height:[3,5,10,10,3],texture:[6,63,4,63],angle:0,laser:{damage:[5,5],rate:3,type:1,speed:[140,140],number:1,error:0}},cannonsupports:{section_segments:12,offset:{x:45,y:-40,z:5},position:{x:[0,0,0,0,0,0,0],y:[-50,-50,-20,0,20,30,5],z:[0,0,0,0,0,0,0]},width:[0,2,5,3,5,5,0],height:[0,2,5,3,5,5,0],texture:[12,3,2,11,63,12],angle:0},wingend:{section_segments:12,offset:{x:105,y:-20,z:-35},position:{x:[0,0,0,0,0,0,0],y:[-50,-50,-20,0,20,30,5],z:[0,0,0,0,0,0,0]},width:[0,2,5,3,5,5,0],height:[0,2,5,3,5,5,0],texture:[12,3,2,11,63,12],angle:0}},wings:{main:{doubleside:!0,offset:{x:0,y:-50,z:0},length:[70,50,50],width:[60,40,40],angle:[0,-45,0],position:[0,0,30],texture:[4,63],bump:{position:[20],size:18}}}}),THREE.OBJLoader=function(){function t(){var t={objects:[],object:{},vertices:[],normals:[],lO10I:[],materialLibraries:[],startObject:function(t,e){var i,s;if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0,this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],lO10I:[]},materials:[],smooth:!0,startMaterial:function(t,e){var i,s=this._finalize(!1);return s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1),i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==s?s.smooth:this.smooth,groupStart:void 0!==s?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}},this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e,i=this.currentMaterial();if(i&&-1===i.groupEnd&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),t&&this.materials.length>1)for(e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),i}},i&&i.name&&"function"==typeof i.clone&&(s=i.clone(0),s.inherited=!0,this.object.materials.push(s)),this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseUVIndex:function(t,e){var i=parseInt(t,10);return 2*(i>=0?i-1:i+e/2)},addVertex:function(t,e,i){var s=this.vertices,n=this.object.geometry.vertices;n.push(s[t+0],s[t+1],s[t+2]),n.push(s[e+0],s[e+1],s[e+2]),n.push(s[i+0],s[i+1],s[i+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,i){var s=this.normals,n=this.object.geometry.normals;n.push(s[t+0],s[t+1],s[t+2]),n.push(s[e+0],s[e+1],s[e+2]),n.push(s[i+0],s[i+1],s[i+2])},addUV:function(t,e,i){var s=this.lO10I,n=this.object.geometry.lO10I;n.push(s[t+0],s[t+1]),n.push(s[e+0],s[e+1]),n.push(s[i+0],s[i+1])},addUVLine:function(t){var e=this.lO10I;this.object.geometry.lO10I.push(e[t+0],e[t+1])},addFace:function(t,e,i,s,n,l,a,o,r){var h,u,d=this.vertices.length,I=this.parseVertexIndex(t,d),c=this.parseVertexIndex(e,d),p=this.parseVertexIndex(i,d);this.addVertex(I,c,p),void 0!==s&&(h=this.lO10I.length,I=this.parseUVIndex(s,h),c=this.parseUVIndex(n,h),p=this.parseUVIndex(l,h),this.addUV(I,c,p)),void 0!==a&&(u=this.normals.length,I=this.parseNormalIndex(a,u),c=a===o?I:this.parseNormalIndex(o,u),p=a===r?I:this.parseNormalIndex(r,u),this.addNormal(I,c,p))},addLineGeometry:function(t,e){var i,s,n,l,a;for(this.object.geometry.type="Line",i=this.vertices.length,s=this.lO10I.length,n=0,l=t.length;n<l;n++)this.addVertexLine(this.parseVertexIndex(t[n],i));for(a=0,l=e.length;a<l;a++)this.addUVLine(this.parseUVIndex(e[a],s))}};return t.startObject("",!1),t}function e(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.materials=null}var i=/^[og]\s*(.+)?/,s=/^mtllib /,n=/^usemtl /;return e.prototype={constructor:e,load:function(t,e,i,s){var n=this,l=new THREE.FileLoader(n.manager);l.setPath(this.path),l.load(t,function(t){e(n.parse(t))},i,s)},setPath:function(t){this.path=t},setMaterials:function(t){return this.materials=t,this},parse:function(e){var l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v,b,w,x,k,_,z,M,E,S,T,P,R,C,A,j,H,B,D,L,F,V,N,G,U=new t;for(-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,"")),l=e.split("\n"),a="",o="",0,r=[],h="function"==typeof"".trimLeft,u=0,d=l.length;u<d;u++)if(a=l[u],a=h?a.trimLeft():a.trim(),0!==a.length&&"#"!==(o=a.charAt(0)))if("v"===o)switch(I=a.split(/\s+/),I[0]){case"v":U.vertices.push(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3]));break;case"vn":U.normals.push(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3]));break;case"vt":U.lO10I.push(parseFloat(I[1]),parseFloat(I[2]))}else if("f"===o){for(c=a.substr(1).trim(),p=c.split(/\s+/),O=[],m=0,f=p.length;m<f;m++)g=p[m],g.length>0&&(y=g.split("/"),O.push(y));for(v=O[0],m=1,f=O.length-1;m<f;m++)b=O[m],w=O[m+1],U.addFace(v[0],b[0],w[0],v[1],b[1],w[1],v[2],b[2],w[2])}else if("l"===o){if(x=a.substring(1).trim().split(" "),k=[],_=[],-1===a.indexOf("/"))k=x;else for(z=0,M=x.length;z<M;z++)E=x[z].split("/"),""!==E[0]&&k.push(E[0]),""!==E[1]&&_.push(E[1]);U.addLineGeometry(k,_)}else if(null!==(r=i.exec(a)))S=(" "+r[0].substr(1).trim()).substr(1),U.startObject(S);else if(n.test(a))U.object.startMaterial(a.substring(7).trim(),U.materialLibraries);else if(s.test(a))U.materialLibraries.push(a.substring(7).trim());else{if("s"!==o){if("\0"===a)continue;throw Error("Unexpected line: '"+a+"'")}r=a.split(" "),r.length>1?(T=r[1].trim().toLowerCase(),U.object.smooth="0"!==T&&"off"!==T):U.object.smooth=!0,(P=U.object.currentMaterial())&&(P.smooth=U.object.smooth)}for(U.finalize(),R=new THREE.Group,R.materialLibraries=[].concat(U.materialLibraries),u=0,d=U.objects.length;u<d;u++)if(C=U.objects[u],A=C.geometry,j=C.materials,H="Line"===A.type,0!==A.vertices.length){for(B=new THREE.BufferGeometry,B.addAttribute("position",new THREE.BufferAttribute(new Float32Array(A.vertices),3)),A.normals.length>0?B.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(A.normals),3)):B.computeVertexNormals(),A.lO10I.length>0&&B.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(A.lO10I),2)),D=[],L=0,F=j.length;L<F;L++)V=j[L],P=void 0,null!==this.materials&&(P=this.materials.create(V.name),!H||!P||P instanceof THREE.LineBasicMaterial||(N=new THREE.LineBasicMaterial,N.copy(P),P=N)),P||(P=H?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial,P.name=V.name),P.flatShading=!V.smooth,D.push(P);if(D.length>1){for(L=0,F=j.length;L<F;L++)V=j[L],B.addGroup(V.groupStart,V.groupCount,L);G=H?new THREE.LineSegments(B,D):new THREE.Mesh(B,D)}else G=H?new THREE.LineSegments(B,D[0]):new THREE.Mesh(B,D[0]);G.name=C.name,R.add(G)}return R}},e}(),this.AlienModel=function(){function t(t){var e,i,s;this.code=t,s=new THREE.LoadingManager,i=new THREE.OBJLoader(s),this.lambert_img=new Image,this.lambert_img.crossOrigin="Anonymous",this.lambert_img.onload=function(t){return function(){return t.lambert=new THREE.Texture(t.lambert_img),t.lambert.needsUpdate=!0,t.checkLoaded()}}(this),this.lambert_img.src="https://starblast.data.neuronality.com/models/aliens/"+this.code+"/lambert.jpg",this.emissive_img=new Image,this.emissive_img.crossOrigin="Anonymous",this.emissive_img.onload=function(t){return function(){return t.emissive=new THREE.Texture(t.emissive_img),t.emissive.needsUpdate=!0,t.checkLoaded()}}(this),this.emissive_img.src="https://starblast.data.neuronality.com/models/aliens/"+this.code+"/emissive.jpg",e="https://starblast.data.neuronality.com/models/aliens/"+this.code+"/model.obj",i.load(e,function(t){return function(e){return t.object=e,t.checkLoaded()}}(this)),this.queue=[]}return t.prototype.checkLoaded=function(){if(null!=this.object&&null!=this.emissive&&null!=this.lambert)for(this.l1OI0=this.object.children[0];this.queue.length>0;)this.IOO0l(this.queue.splice(0,1)[0])},t.prototype.IOO0l=function(t){var e;return null==this.l1OI0?this.queue.push(t):(e=new THREE.MeshPhongMaterial({color:16777215,map:this.lambert,emissiveMap:this.emissive,emissive:16728080,shininess:30,specular:4210752,specularMap:this.lambert}),t(new THREE.Mesh(this.l1OI0.geometry,e)))},t.prototype.shapePoint=function(t,e,i){var s,n,l;return l=i.length,s=Math.atan2(e,-t),s=Math.round((s+2*Math.PI)/(2*Math.PI)*l)%l,n=Math.sqrt(t*t+e*e),i[s]=Math.max(i[s],n)},t.prototype.l1l00=function(t,e){var i,s,n,l,a,o,r,h,u,d,I,c,p,O,m,f,g,y,v;for(null==e&&(e=50),s=new THREE.Geometry,s.fromBufferGeometry(t),t=s,O=[],l=o=0,I=e-1;0<=I?o<=I:o>=I;l=0<=I?++o:--o)O[l]=0;for(c=t.faces,r=0,u=c.length;r<u;r++)for(n=c[r],m=t.vertices[n.a],f=t.vertices[n.b],g=t.vertices[n.c],l=h=0;h<=99;l=h+=1)i=l/100,y=m.x*i+f.x*(1-i),v=m.y*i+f.y*(1-i),this.shapePoint(y,v,O),y=g.x*i+f.x*(1-i),v=g.y*i+f.y*(1-i),this.shapePoint(y,v,O),y=g.x*i+m.x*(1-i),v=g.y*i+m.y*(1-i),this.shapePoint(y,v,O);for(a=d=0,p=O.length-1;0<=p?d<=p:d>=p;a=0<=p?++d:--d)O[a]=parseFloat(O[a].toFixed(3));return O},t}(),this.AlienModels=function(){function t(){this.models={}}return t.prototype.IOO0l=function(t,e){return this.models[t]||(this.models[t]=new AlienModel(t)),this.models[t].IOO0l(e)},t}(),ALIEN_MODELS=new AlienModels,this.HaloModel=function(){function t(t){var e,i,s;this.code=t,s=new THREE.LoadingManager,i=new THREE.OBJLoader(s),this.emissive_img=new Image,this.emissive_img.crossOrigin="Anonymous",this.emissive_img.onload=function(t){return function(){return t.emissive=new THREE.Texture(t.emissive_img),t.emissive.needsUpdate=!0,t.checkLoaded()}}(this),this.emissive_img.src="https://starblast.data.neuronality.com/models/aliens/"+this.code+"/halo.jpg",e="https://starblast.data.neuronality.com/models/aliens/"+this.code+"/halo.obj",i.load(e,function(t){return function(e){return t.object=e,t.checkLoaded()}}(this)),this.queue=[]}return t.prototype.checkLoaded=function(){if(null!=this.object&&null!=this.emissive)for(this.geometry=this.object.children[0].geometry;this.queue.length>0;)this.IOO0l(this.queue.splice(0,1)[0])},t.prototype.IOO0l=function(t){var e;return null==this.geometry?this.queue.push(t):(e=new THREE.MeshBasicMaterial({color:4210752,map:this.emissive,blending:THREE.AdditiveBlending,transparent:!0,side:THREE.DoubleSide,depthWrite:!1}),t(new THREE.Mesh(this.geometry,e)))},t}(),this.HaloModels=function(){function t(){this.models={}}return t.prototype.IOO0l=function(t,e){return this.models[t]||(this.models[t]=new HaloModel(t)),this.models[t].IOO0l(e)},t}(),HALO_MODELS=new HaloModels,this.Alien=function(){function t(t,e){this.I110I=t,this.code=e.getUint8(1),this.id=e.getUint16(2,!0),this.level=e.getUint8(5),this.ll0lO=this.I110I.IOO1I.ll0lO,this.type=ALIEN_TYPES.types_by_code[this.code],this.speed=.004*this.getSpec("speed"),this.dash_speed=.004*this.getSpec("laser_speed"),this.OlOOO=Math.exp(Math.log(.5)*this.getSpec("OlOOO")/3e3),this.hue=this.getSpec("hue"),this.max_shield=this.getSpec("shield"),this.shield=0,this.mass=this.getSpec("mass"),this.dashing=!1,this.fancy=!1,this.IO0Ol=0,this.OIIO0=0,this.IOlOI=0,this.read(e),this.III10(e),this.createModel(),this.pop=0,this.killed=!1,this.rotx=0,this.rotxs=0,this.roty=0,this.rotys=0,this.rotz=0,this.rotzs=0,this.rotk=.05,this.rotf=.2}return t.prototype.III10=function(t){var e,i,s;if((s=t.getUint32(6,!0))>this.ll0lO.ll01O)this.O0II0=t;else if(s<this.ll0lO.ll01O){if(this.read(t),this.ll0lO.ll01O-s<30)for(e=s+1,i=this.ll0lO.ll01O;e<=i;e+=1)this.l1O00()}else this.read(t)},t.prototype.getSpec=function(t){var e;return e=this.type[t],Array.isArray(e)?e[Math.min(this.level,e.length-1)]:e},t.prototype.read=function(t){return this.x=t.getFloat32(10,!0),this.y=t.getFloat32(14,!0),this.OI10I=t.getFloat32(18,!0),this.OI0O1=t.getFloat32(22,!0),this.r=t.getFloat32(26,!0),this.IOlOI=t.getFloat32(30,!0),this.target_r=t.getFloat32(34,!0),this.shield=t.getUint8(4),2===this.type.llOIl?(this.dashing=!0&t.getUint8(38),t.getUint8(38)>1&&(this.hue=360*(254&t.getUint8(38))/256)):this.fancy=0!==t.getUint8(38),this.last_update=this.ll0lO.ll01O},t.prototype.createModel=function(){var t;return 19===this.code?(t=function(t){return function(){if(null!=t.body_model&&null!=t.halo_model)return t.l1OI0=t.body_model,t.l1OI0.add(t.halo_model),t.I110I.IOO1I.IOO1I.add(t.l1OI0)}}(this),ALIEN_MODELS.IOO0l(this.code,function(e){return function(i){return e.body_model=i,t()}}(this)),HALO_MODELS.IOO0l(this.code,function(e){return function(i){return e.halo_model=i,t()}}(this))):ALIEN_MODELS.IOO0l(this.code,function(t){return function(e){if(!t.killed&&(t.l1OI0=e,t.I110I.IOO1I.IOO1I.add(t.l1OI0),!t.type.facing))return t.l1OI0.rotation.order="ZYX"}}(this))},t.prototype.l1O00=function(){var t,e;if(null!=this.O0II0&&this.ll0lO.ll01O>=this.O0II0.getUint32(6,!0)&&(this.read(this.O0II0),this.O0II0=null),t=this.OI10I,e=this.OI0O1,this.I110I.IOO1I.ll0lO.alien_physics.alienStep(this),this.IO0Ol=this.OI10I-t,this.OIIO0=this.OI0O1-e,this.ll0lO.ll01O>this.last_update+90)return this.killed=!0},t.prototype.dispose=function(){if(null!=this.l1OI0)return this.I110I.IOO1I.IOO1I.remove(this.l1OI0)},t.prototype.updateModel=function(){var t,e,i,s,n,l,a,o,r,h,u,d,I;if(null!=this.l1OI0&&(s=Oll0O.hsvToRgbHex(this.hue/360,1,this.shield/255),this.l1OI0.material.emissive.setHex(s),s=Oll0O.hsvToRgbHex(0,0,this.shield/255*.25),this.l1OI0.material.specular.setHex(s),o=this.getSpec("scale"),this.pop<30?(this.pop++,a=Math.sqrt(this.pop/30)*o,this.l1OI0.scale.set(a,a,a)):this.l1OI0.scale.set(o,o,o),this.type.facing?(this.l1OI0.rotation.z=Math.PI/2,h=100*this.IO0Ol*50/this.mass,this.rotxs=(h-this.rotx)*this.rotk,this.rotxs*=1-this.rotf,this.rotx+=this.rotxs,r=100*-this.OIIO0*50/this.mass,this.rotys=(r-this.roty)*this.rotk,this.rotys*=1-this.rotf,this.roty+=this.rotys,t=0,this.type.rotative&&(t=2*Math.PI*(this.I110I.IOO1I.ll0lO.ll01O/480%480)),this.l1OI0.rotation.y=this.roty+t,this.l1OI0.rotation.x=this.rotx):(l=Math.sqrt(this.OI10I*this.OI10I+this.OI0O1*this.OI0O1),e=0,i=0,l>0&&(d=this.OI10I/l,I=this.OI0O1/l,e=this.IO0Ol*d+this.OIIO0*I,i=this.IO0Ol*I-this.OIIO0*d),n=null!=this.type.I0100?this.type.I0100:1,h=100*-i*50/this.mass*n,this.rotxs=(h-this.rotx)*this.rotk,this.rotxs*=1-this.rotf,this.rotx+=this.rotxs,r=100*-e*50/this.mass,this.rotys=(r-this.roty)*this.rotk,this.rotys*=1-this.rotf,this.roty+=this.rotys,u=this.r+Math.PI,this.rotzs=Math.normAngle(u-this.rotz)*this.rotk,this.rotzs*=1-this.rotf,this.rotz+=this.rotzs,this.l1OI0.rotation.y=this.roty,this.l1OI0.rotation.x=this.rotx,this.l1OI0.rotation.z=this.rotz),this.l1OI0.position.x=this.x,this.l1OI0.position.y=this.y,this.l1OI0.position.z=-1,this.l1OI0.visible=!0,this.ll0lO.I1I1O(this.l1OI0)),null!=this.halo_model)return this.fancy?(s=Oll0O.hsvToRgbHex(0,0,.5+.5*Math.sin(this.I110I.IOO1I.ll0lO.ll01O%60/60*Math.PI*6)),this.halo_model.material.color.set(s)):this.halo_model.material.color.set(0)},t}(),this.GiftModel=function(){function t(){var t,e,i;i=new THREE.LoadingManager,e=new THREE.OBJLoader(i),this.lambert_img=new Image,this.lambert_img.crossOrigin="Anonymous",this.lambert_img.onload=function(t){return function(){return t.lambert=new THREE.Texture(t.lambert_img),t.lambert.needsUpdate=!0}}(this),this.lambert_img.src="https://starblast.data.neuronality.com/models/xmas/gift/lambert.jpg",this.emissive_img=new Image,this.emissive_img.crossOrigin="Anonymous",this.emissive_img.onload=function(t){return function(){return t.emissive=new THREE.Texture(t.emissive_img),t.emissive.needsUpdate=!0}}(this),this.emissive_img.src="https://starblast.data.neuronality.com/models/xmas/gift/emissive.jpg",this.specular_img=new Image,this.specular_img.crossOrigin="Anonymous",this.specular_img.onload=function(t){return function(){return t.specular=new THREE.Texture(t.specular_img),t.specular.needsUpdate=!0}}(this),this.specular_img.src="https://starblast.data.neuronality.com/models/xmas/gift/specular.jpg",t="https://starblast.data.neuronality.com/models/xmas/gift/model.obj",e.load(t,function(t){return function(e){return t.object=e,t.l1OI0=t.object.children[0]}}(this)),this.queue=[]}return t.prototype.IOO0l=function(t){var e;return null==this.l1OI0?null:(e=new THREE.MeshPhongMaterial({color:16777215,map:this.lambert,emissiveMap:this.emissive,emissive:16777215,specular:16777215,specularMap:this.specular,shininess:30,specular:1052688,specularMap:this.lambert}),new THREE.Mesh(this.l1OI0.geometry,e))},t}(),GIFT_MODEL=new GiftModel,this.lO001=function(){function e(){this.settings=new Settings(this),this.l10lI=new OI1IO(this),window.addEventListener("DOMContentLoaded",function(t){return function(){return t.l1lIO()}}(this));try{1===performance.navigation.type&&location.hash==="#"+localStorage.getItem("last_systemid")&&(location.hash="#")}catch(t){t}this.is_touch_device="ontouchstart"in window,this.is_mobile=Math.max(screen.width,screen.height)<800&&this.is_touch_device,this.is_tablet=Math.max(screen.width,screen.height)>900,this.is_app=!1,this.using_gamepad=!1,this.using_keyboard=0}return e.prototype.l1lIO=function(){var t,e,i;if(this.settings.l1lIO(),this.tutorial_active="en"===(e=translations.getLang())||"fr"===e,this.setSize(600),this.mode=new Mode("welcome","Welcome"),this.is_mobile_app?(this.O1IO0=new MobileInterface(this),location.hash="#"):this.is_app?(this.O1IO0=new AppInterface(this),location.hash="#",window.parent===window&&null==localStorage.getItem("debug")&&(location.href="/")):this.O1IO0=new IOlI1(this),this.lIOll=new I0l00(function(t){return function(){return t.I1O1O()}}(this)),this.OlIl1=new O11IO(this),this.total_players=0,this.system_players=0,this.ping=0,this.refused_count=0,this.killers=[],i=Math.floor(1e4*Math.random()),t={seed:i,id:0,name:"Welcome"},this.hue=0,this.player_name="",this.names=new Names(this),this.weapons=new Weapons(this),this.IO010=new l01ll(this,O1Ill.types_by_code[101]),this.IOO1I=new Scene(this,t.seed,this.lIOll,!0),this.lIOll.add(function(e){return function(){return e.is_app?(e.IO010.status.y=-30,e.IO010.status.x=30):e.IO010.status.y=-60,e.IOO1I.ll0lO.initCamera(),e.IOO1I.background.initOffsets(),e.display=new OO10I(e,!0),e.display.start(),null!=e.display.screen.O0lll.IOIIl&&e.display.screen.O0lll.IOIIl(t),e.OlIl1.load()}}(this)),setTimeout(function(t){return function(){return t.lIOll.start()}}(this),1e3),this.key_listeners=[],this.paused=!1,void 0!==saveAs&&null!==saveAs)return this.addKeyListener("Z".charCodeAt(0),{keyPressed:function(t){return function(){return t.is_app?t.takeScreenshot("user",0,100):t.display.make_screenshot=!0}}(this),keyReleased:function(){}})},e.prototype.takeScreenshot=function(t,e,i){if(null==t&&(t="user"),null==e&&(e=0),null==i&&(i=0),this.is_app&&("user"===t||this.settings.check("automatic_screenshots")))return this.display.make_screenshot=!0,this.display.screenshot_type=t,this.display.screenshot_time=e,this.display.screenshot_value=i},e.prototype.setSize=function(t){return this.size=t,this.Ill01=this.size/2,this.IIl0O=this.size/10,this.OlO0I=this.Ill01/10},e.prototype.l1O00=function(){return this.OlIl1.l1O00()},e.prototype.I1O1O=function(){return this.O1IO0.I0lII(this.lIOll.II0lO())},e.prototype.startPrivateGame=function(e,i,s,n){var l;return this.player_name=e,this.bonus=null!=i&&i,this.hue=s,this.mode_id="survival",this.mode=new SurvivalMode(this),this.hue=parseInt(this.hue),isNaN(this.hue)&&(this.hue=0),this.l0l01=!0,this.OlIl1.lIOll.pause(),l=["Fetching Federation conflict map","Contacting rebel forces headquarters","Accessing galactic security database"],this.IOO1I.dispose(),this.display.kill(!this.is_app),this.text=l[Math.floor(Math.random()*l.length)],this.O1IO0.gameLoader(0,t(this.text)),this.OlIl1.beep(),this.OlIl1.fadeOutMusic(),this.preferred=n.gameid,this.private_address=n.gameid+"@"+n.ip+":"+n.port,setTimeout(function(e){return function(){return e.O1IO0.gameLoader(5,t("Connected")),e.IO010=new l01ll(e),e.lIllI=new IOIOI(e,n.ip+":"+n.port,e.bonus,e.hue,!1),e.OlIl1.lIOll.resume()}}(this),1e3)},e.prototype.setMode=function(t,e){var i,s,n,l;if("modding"===t&&null!=e)this.mode_id=t,this.mode=ModdingMode.createMode(this,e),null!=e.soundtrack&&(this.mode.soundtrack=e.soundtrack);else for(l=this.O1IO0.installed_modes,i=0,s=l.length;i<s;i++)n=l[i],n.id===t&&(this.mode=n,this.mode_id=t)},e.prototype.start=function(e,i,s,n){var l,a,o,r,h,u;for(this.mode_id=e,this.player_name=i,this.bonus=null!=s&&s,this.hue=n,r=this.O1IO0.game_modes,l=0,a=r.length;l<a;l++)o=r[l],o.id===this.mode_id&&(this.mode=o);if(this.hue=parseInt(this.hue),isNaN(this.hue)&&(this.hue=0),this.l0l01=!0,this.OlIl1.lIOll.pause(),u=["Fetching Federation conflict map","Contacting rebel forces headquarters","Accessing galactic security database"],this.IOO1I.dispose(),this.display.kill(!this.is_app),this.text=u[Math.floor(Math.random()*u.length)],this.O1IO0.gameLoader(0,t(this.text)),this.OlIl1.beep(),this.OlIl1.fadeOutMusic(),h=window.location.href.split("#"),h.length>1)try{this.preferred=JSON.parse(h[1])}catch(t){t}return setTimeout(function(e){return function(){return e.l101l=new I10IO(e,function(i,s,n){return e.region=s,e.O1IO0.gameLoader(5,t("Connected")),e.IO010=new l01ll(e),e.lIllI=new IOIOI(e,i,e.bonus,e.hue,n),e.OlIl1.lIOll.resume()})}}(this),1e3)},e.prototype.refused=function(){var e;return null!=this.private_address?this.cannotJoin():(e={},null!=this.lIllI&&null!=this.l101l&&(this.l101l.IIIIl[this.lIllI.address]=this.lIllI.address,e=this.l101l.IIIIl),this.preferred=null,this.refused_count++>4?void 0:setTimeout(function(i){return function(){return i.l101l=new I10IO(i,function(e,s,n){return i.region=s,i.O1IO0.gameLoader(5,t("Connected")),i.IO010=new l01ll(i),i.lIllI=new IOIOI(i,e,i.bonus,i.hue,n),i.OlIl1.lIOll.resume()},e)}}(this),5e3))},e.prototype.l00OO=function(){return this.gameover||this.O1IO0.connectionLost(),window.onbeforeunload=null},e.prototype.respawn=function(){if(this.pending_respawn)return this.pending_respawn=!1,this.mode.respawn()},e.prototype.killed=function(t,e,i){if(setTimeout(function(t){return function(){if(t.display.screen.O0lll.hide(),t.pending_respawn=!0,t.O1IO0.killed(i),e)return t.gameover=!0,t.lIllI.socket.close()}}(this),this.mode.respawn_delay),this.l10lI.OO11I()||(window.onbeforeunload=null),!e&&!this.O1IO0.isAdBlocked)return this.O1IO0.refreshAds()},e.prototype.lO0I1=function(e){var i,s,n,l;return this.O1IO0.gameLoader(10,t("Engage")),null!=e.name&&(n=e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),l=t("Warping to system %s").replace("%s",n),i=function(t){return function(){return t.O1IO0.gameLoader(Math.round(10+90*s.II0lO()/100),l)}}(this),s=new I0l00(i),this.IOO1I=new Scene(this,e.seed,s),null!=e.servertime&&this.IOO1I.ll0lO.O0OlI(e.servertime),s.add(function(t){return function(){return t.mode.lO0I1(e)}}(this)),s.start()},e.prototype.entered=function(t){return this.mode.entered(t)},e.prototype.startGame=function(e){if(this.IOO1I.ll0lO.initCamera(1.5),this.IOO1I.background.initOffsets(),this.display=new OO10I(this),this.IOO1I.startControl(),this.display.start(),this.settings.getVolume("music")>0&&this.OlIl1.playMusic(this.mode.soundtrack),null!=e.region&&(this.region=e.region),this.display.screen.O0lll.IOIIl(e),null!=this.private_address?location.hash=this.private_address:location.hash=e.systemid,this.systemid=e.systemid,this.systemid!==this.preferred&&localStorage.setItem("last_systemid",this.systemid),!this.is_app)return window.onbeforeunload=function(){return t("Exit game?")}},e.prototype.lO00O=function(t){return this.display.screen.O0lll.lI0Il.Il11I(this.seed)},e.prototype.message=function(t,e,i,s){return null==e&&(e="#FFF"),null==i&&(i=!1),null==s&&(s=!1),this.display.screen.O0lll.messages.message(t,e,i,s)},e.prototype.addKeyListener=function(t,e){return this.key_listeners[t]=e},e.prototype.keyPressed=function(t){
if(this.display.screen.O0lll.chatpanel.visible)return null!=this.key_listeners[t]&&(this.key_listeners[t].keyPressed(),!0)},e.prototype.keyReleased=function(t){if(this.display.screen.O0lll.chatpanel.visible)return null!=this.key_listeners[t]&&(this.key_listeners[t].keyReleased(),!0)},e.prototype.pushType=function(){return this.lIllI.pushType(this.IO010.type),this.IO010.instance.buildLasers(),this.IO010.instance.updateParameters()},e.prototype.pause=function(){return this.settings.getVolume("music")>0&&this.OlIl1.pauseMusic(),this.OlIl1.pause(),this.paused=!0},e.prototype.resume=function(){return this.settings.getVolume("music")>0&&this.OlIl1.playMusic(),this.OlIl1.resume(),this.paused=!1},e.prototype.propertyChanged=function(t,e){switch(t){case"music":if(this.l0l01)return e>0?this.OlIl1.playMusic(this.mode.soundtrack):this.OlIl1.pauseMusic();if(this.is_app||this.is_mobile_app)return e?null!=this.OlIl1.loaded_soundtrack?this.OlIl1.adjustMusicVolume():this.OlIl1.playMusic(this.O1IO0.getWelcomeMusic()):this.OlIl1.pauseMusic()}},e.prototype.sendGAEvent=function(t,e){ga&&ga("send","event","game_evt",t,e)},e.prototype.cannotJoin=function(){return this.O1IO0.showError(t("Could not join game. Game is either full or has expired.")),location.hash="#"},e.prototype.getClientShipID=function(){var t;return t=localStorage.getItem("client_ship_id"),null==t&&(t=Math.floor(4e9*Math.random())+""+Math.floor(4e9*Math.random()),localStorage.setItem("client_ship_id",t)),t},e.prototype.showGalaxyMap=function(){return null==this.galaxy_map&&(this.galaxy_map=new GalaxyMap(this)),this.galaxy_map.OOOI1()},e.prototype.hideGalaxyMap=function(){if(null!=this.galaxy_map)return this.galaxy_map.hide()},e.prototype.createMatch=function(t,e){return new PrivateServerFinder(this,t.server_location,function(i){return function(s){var n;return n=WSS.create(s),t.ecp_key=i.l10lI.key,n.onmessage=function(t){var i;try{t=JSON.parse(t.data),"match_created"===t.name&&(i=t.data.id,e(!0,i+"@"+s))}catch(t){t}},n.onopen=function(){return n.send(JSON.stringify({name:"create_match",data:t}))}}}(this))},e.prototype.OIO00=function(){var t;t=localStorage.getItem("tr");try{t=Number.parseFloat(t)}catch(e){e,t=1}return Number.isNaN(t)&&(t=1),t=Math.max(1,Math.min(3,t))},e.prototype.l00I0=function(t){var e;return e=this.OIO00(),localStorage.setItem("tr",.25*t+.75*e)},e}(),battle_started=Date.now()>1527804e6,battle_finished=Date.now()>15279228e5,I110I=new lO001,gamesettings=I110I.settings,O10IO=window.eio,window.eio={Socket:function(){}},exportShipTree=function(t,e){var i,s;return null==t&&(t=null),null==e&&(e={}),s="",null==t&&(t=O1Ill.types_by_code[101]),null!=e[t.code]?s:(e[t.code]=t,i=O1Ill.next(t),0===i.length?"":(s+=t.name+" => ",null!=i[0]&&(s+=i[0].name),null!=i[1]&&(s+=" or "+i[1].name),s+="\n",null!=i[0]&&(s+=this.exportShipTree(i[0],e)),null!=i[1]&&(s+=this.exportShipTree(i[1],e)),s))},indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},Translations=function(){function t(t){this.settings=t,this.dict={PLAY:{fr:"JOUER",es:"JUEGA",ja:"ゲーム開始",de:"SPIELEN",pt:"JOGAR",ru:"ИГРАТЬ",hu:"JÁTSZIK",it:"GIOCA",hr:"ZAPOČNI IGRU",tr:"OYNA",cs:"HRÁT",sk:"HRAŤ",id:"Main",nl:"SPEEL",ar:"ألعب",da:"SPIL",vi:"CHƠI",pl:"GRAJ",he:"שחק",sv:"SPELA",ro:"JOACĂ",zh:"开始","zh-tw":"開始遊戲",lt:"GIOCA",az:"OYNA",th:"เล่น",ko:"시작",fa:"بازی کردن",el:"ΠΑΙΖΩ"},LEADERBOARD:{fr:"CLASSEMENT",es:"CLASIFICACIÓN",ja:"順位表",de:"RANGLISTE",pt:"PLACAR",ru:"ТАБЛИЦА ЛИДЕРОВ",hu:"RANGLISTA",it:"CLASSIFICA",hr:"LISTA NAJBOLJIH",tr:"LİDERLİK SIRALAMASI",cs:"GLOBÁLNÍ ŽEBŘÍČEK",sk:"GLOBÁLNY REBRÍČEK",id:"PAPAN PERINGKAT",nl:"SCOREBORD",ar:"قائمة التصنيف",vi:"BẢNG ĐIỂM",pl:"TOPLISTA",sv:"TOPPLISTA",ro:"CLASAMENT",zh:"排行榜","zh-tw":"排行榜",lt:"CLASSIFICA",th:"ลีดเดอร์บอร์ด",ko:"순위표",fa:"رتبه بندی فرماندهان",el:"ΤΑΞΙΝΟΜΗΣΗ ΒΑΘΜΟΛΟΓΙΑΣ"},"JOIN GAME":{fr:"REJOINDRE UNE PARTIE",es:"ENTRAR EN LA PARTIDA",ja:"ゲームに参加",de:"SPIEL BEITRETEN",pt:"ENTRE NA PARTIDA",ru:"ПРИСОЕДИНИТЬСЯ К ИГРЕ",hu:"CSATLAKOZÁS A JÁTÉKBA",it:"ENTRA IN GIOCO",hr:"PRIDRUŽI SE IGRI",tr:"OYUNA KATIL",cs:"VSTOUPIT DO HRY",sk:"VSTÚPIŤ DO HRY",id:"IKUT MAIN",nl:"MEEDOEN MET EEN SPEL",ar:"انضمام للعبة",da:"TILSLUT TIL SPIL",vi:"THAM GIA TRÒ CHƠI",pl:"DOŁĄCZ DO GRY",sv:"GÅ MED I SPEL",ro:"ALĂTURĂ-TE UNUI JOC",zh:"加入游戏","zh-tw":"加入遊戲",lt:"ENTRA IN GIOCO",th:"เข้าร่วมเกม",ko:"게임 참가",fa:"ورود به بازی",el:"ΔΗΛΩΝΩ ΣΥΜΜΕΤΟΧΗ"},"CREATE GAME":{fr:"CRÉER UNE PARTIE",es:"CREAR PARTIDA",ja:"マッチを作成",de:"SPIEL ERSTELLEN",pt:"CRIAR PARTIDA",ru:"СОЗДАТЬ ИГРУ",hu:"JÁTÉK LÉTREHOZÁSA",it:"Crea una partita",hr:"STVORI IGRU",tr:"OYUN OLUŞTUR",cs:"VYTVOŘIT HRU",sk:"VYTVORIŤ HRU",id:"MEMBUAT PERMAINAN",nl:"MAAK SPEL",ar:"ابتكر لعبة",da:"OPRET SPIL",vi:"TẠO TRÒ CHƠI",pl:"STWÓRZ GRĘ",sv:"SKAPA SPEL",ro:"CREEAZĂ UN JOC",zh:"新建游戏","zh-tw":"創立遊戲",lt:"CREA PARTITA",th:"สร้างเกม",ko:"게임 만들기",fa:"ساختن بازی",el:"ΔΗΜΙΟΥΡΓΩ ΠΑΙΧΝΙΔΙ"},QUIT:{fr:"QUITTER",es:"SALIR",ja:"終了",de:"SPIEL VERLASSEN",pt:"SAIR",ru:"ВЫЙТИ",hu:"KILÉPÉS",it:"ABBANDONA",hr:"IZAĐI",tr:"ÇIK",cs:"KONEC",sk:"KONIEC",id:"BERHENTI",nl:"VERLAAT HET SPEL",ar:"مغادرة",da:"FORLAD",vi:"THOÁT",pl:"WYJDŹ",sv:"AVSLUTA",ro:"IEȘI",zh:"退出","zh-tw":"退出",lt:"ABBANDONA",th:"ออก",ko:"종료",fa:"خروج",el:"ΕΓΚΑΤΑΛΕΙΠΩ"},"Please insert your room link in the box below.":{fr:"Merci d'insérer votre lien de partie dans le champ ci dessous.",es:"Por favor, inserta el enlace de tu partida en el cuadro de abajo.",ja:"下のボックスにゲームのリンクを挿入してください。 ",de:"Bitte gebe deinen Spiellink in das Feld unten ein.",pt:"Por favor, insira o link da sua sala na caixa abaixo.",ru:"Пожалуйста, вставьте ссылку на матч в поле снизу.",hu:"Kérjük illessze be a szoba linkjét az alábbi mezőbe.",it:"Perfavore inserisci il sito della stanza nel box qui sotto",hr:"Molimo unesite link sobe u prozor ispod",tr:"Lütfen Oda Bağlantınızı Aşağıdaki Kutuya Ekleyin",cs:"Vložte odkaz arény do níže uvedeného pole.",sk:"Do políčka uvedeného nižšie vložte odkaz arény.",id:"Silahkan masukkan link ruangan anda de dalam kotak di bawah ini",nl:"Vul de kamerlink in in de box hieronder",ar:"رجى إدراج رابط الغرفة في المربع أدناه.",da:"Indsæt venligst linket til dit rum i kassen nede for.",vi:"Làm ơn điền tên sever vào chỗ trống bên dưới",pl:"Proszę podaj link do swojej gry w poniższym polu",sv:"Vad god skriv in din serverslänk i textrutan nedan.",ro:"Te rog inserează link-ul camerei tale in spaţiul de mai jos",zh:"在下面的格子内输入你的服务器链接","zh-tw":"請在方格內輸入你的房間連結",lt:"Perfavore inserisci il sito della stanza nel box qui sotto",th:"กรุณาใส่ลิงค์ห้องของคุณที่ช่องด้านล่าง",ko:"아래 상자에 방 번호를 입력하십시오.",fa:"لطفا لینک بازی را در قسمت زیر وارد کنید",el:"Παρακαλώ μπείτε στο δικό σας link room στο κουτί από κάτω"},"Insert your room link here":{fr:"Entrez votre lien de partie ici",es:"Inserta aquí el enlace de tu partida.",ja:"ここにあなたのルームのリンクを挿入してください。",de:"Den Spiellink bitte hier eingeben",pt:"Insira seu link aqui",ru:"Вставьте ссылку на матч здесь",hu:"Ide illessze be a szoba linkjét",it:"Inserisci il sito della stanza qui",hr:"Ovdje unesite link sobe",tr:"Oda Bağlantınızı Buraya Ekleyin",cs:"Zde vložte odkaz arény.",sk:"Tu zadajte odkaz arény",id:"Masuk anda kamar ini",nl:"Vul de kamerlink hier in",ar:"أدخل رابط غرفتك هنا",da:"Indsæt linket til dit rum her.",vi:"Điền tên sever ở đây",pl:"Wpisz tu swój link",sv:"Skriv in din serverslänk här",ro:"Pune linkul camerei tale aici",zh:"在这里输入你的服务器链接","zh-tw":"在這裡插入你的房間鏈接",lt:"Inserisci il sito della stanza qui",th:"ใส่ลิงค์ห้องของคุณที่นี่",ko:"여기에 방 번호를 입력하십시오.",fa:"لینک بازی خود را اینجا وارد کنید",el:"Μπείτε στο δικό σας room link εδώ"},Cancel:{fr:"Annuler",es:"Cancelar",ja:"取り消し",de:"Abbruch",pt:"Cancelar",ru:"Закрыть",hu:"Mégsem",it:"Cancella",hr:"Odustani",tr:"İptal",cs:"Zrušit",sk:"Zrušiť",nl:"Annuleren",vi:"Hủy bỏ",pl:"Anuluj",sv:"Avbryt",ro:"Anulează",zh:"取消","zh-tw":"取消",lt:"Cancella",th:"ยกเลิก",ko:"취소",fa:"لغو "},"Quit to Menu":{fr:"Retour au menu",es:"Ir al Menú",ja:"メニューへ戻る",de:"Verlassen zum Menü",pt:"Sair para o menu",ru:"Выйти в меню",hu:"Kilépés a menübe",it:"Esci al Menu",hr:"Izađi u izbornik",tr:"Menüye Çık",cs:"Zpět do Menu",sk:"Späť do Menu",nl:"Ga naar Menu",vi:"Trờ về màn hình chính",pl:"Wyjdź do Menu",sv:"Avsluta till Meny",ro:"Întoarce-te la meniul principal",zh:"退出至菜单","zh-tw":"退出菜單",lt:"Esci al Menu",th:"ออกสู่เมนู",ko:"메뉴로 가기",fa:"رفتن به منوی بازی"},"Quit Game":{fr:"Quitter le jeu",es:"Quitar el Juego",ja:"ゲームをやめる",de:"Spiel verlassen",pt:"Sair do jogo",ru:"Выйти из игры",hu:"Kilépés a játékból",it:"Esci dal Gioco",hr:"Izađi iz igre",tr:"Oyundan Çık",cs:"Ukončit Hru",sk:"Ukončiť Hru",nl:"Verlaat het spel",vi:"Thoát game",pl:"Wyjdź z gry",sv:"Avsluta Spelet",ro:"Părăsește jocul",zh:"退出游戏","zh-tw":"退出遊戲",lt:"Esci dal Gioco",th:"ออกเกม",ko:"게임 나가기",fa:"خروج از بازی"},Error:{fr:"Erreur",es:"Error",ja:"エラー",de:"Fehler",pt:"Erro",ru:"Ошибка",hu:"Hiba",it:"Errore",hr:"Greška",tr:"Hata",cs:"Chyba",sk:"Chyba",nl:"Foutmelding",vi:"Lỗi",pl:"Błąd",sv:"Fel",ro:"Eroare",zh:"错误","zh-tw":"錯誤",lt:"Errore",th:"มีข้อผิดพลาด",ko:"오류",fa:"خطا "},"Could not join game. Game is either full or has expired.":{fr:"Impossible de rejoindre le jeu. La partie est soit pleine, soit expirée. ",es:"No es posible seguir el juego. La partida está llena o ha expirado.",ja:"参加できません。ゲームが満員か、すでに終了した可能性があります。",de:"Dem Spiel konnte nicht beigetreten werden. Das Spiel ist entweder voll oder abgelaufen.",pt:"Não foi possível entrar no jogo. A sala está cheia ou expirou",ru:"Не удалось присоединиться к игре. Игра либо полная, либо истек срок действия.",hu:"Nem lehet csatlakozni a játékhoz.A játék lehet hogy tele van vagy lejárt.",it:"Non è possibile entrare in gioco. Il gioco è pieno o è scaduto.",hr:"Nemoguče se je spojiti na igru. Ona je puna ili je istekla.",tr:"Oyuna katılamadın. Oyun dolu veya süresi dolmuş.",cs:"Spojení se nezdařilo. Aréna je buď plná, nebo expirovala.",sk:"Spojenie sa nepodarilo. Aréna je buď plná alebo expirovala",nl:"Kan niet meedoen met spel. Spel is vol of verlopen.",vi:"Không thể tham gia trò chơi. Trò chơi đủ người hoặc đã kết thúc",pl:"Nie można dołączyć do gry. Gra jest pełna, lub wygasła.",sv:"Kunde ej gå med i spelet. Spelet är antingen fullt eller har utgått.",ro:"Nu s-a reușit conexiunea. Jocul este ori plin ori a expirat",zh:"无法加入游戏。房间已满或已过期","zh-tw":"無法加入遊戲。 房間已滿或已過期。",lt:"Non puoi entrare in gioco. Il gioco è pieno o è scaduto.",th:"ไม่สามารถเข้าร่วมเกมได้ เกมอาจเต็มหรือคำขอหมดเวลา",ko:"해당 게임에 참가할 수 없습니다. 만원이거나 종료되었습니다.",fa:"ورود به بازی امکان پذیر نمی باشد ، بازی مورد نظر به طور کامل پر شده است و یا منقضی گردیده است "},"Reload game":{fr:"Réessayer",es:"Recargar",ja:"再読み込み",de:"Spiel neu laden",pt:"Reiniciar",ru:"Перезапустить игру",hu:"Játék újratöltése",it:"Ricarica gioco",hr:"Ponovno učitavam igru",tr:"Oyunu yenile",cs:"Znovu načíst",sk:"Znovu načítať",nl:"Herlaad game",vi:"Tải game",pl:"Przeładuj grę",sv:"Ladda om spel",ro:"Reîncărcare joc",zh:"重新加载游戏","zh-tw":"重新載入遊戲",lt:"Ricarica gioco",th:"โหลดใหม่",ko:"게임 다시 부르기",fa:"بارگذاری"},"Team Mode":{fr:"Mode Équipe",es:"Modo Equipo",ja:"チームモード",de:"Gruppenmodus",pt:"Modo de Equipe",ru:"Командный режим",hu:"Csapat Mód",it:"Modalità Squadra",hr:"Timska Bitka",tr:"Takım Modu",cs:"Týmová Hra",sk:"Týmová Hra",id:"Mode Tim",nl:"Teammodus",ar:"نمط الفريق",da:"Hold",vi:"Chế độ đồng đội",pl:"Tryb drużynowy",he:"מצב קבוצות",sv:"Lagläge",ro:"Mod Echipe",zh:"团队模式","zh-tw":"團隊模式",lt:"Modalità Team",az:"Dostluq Modu",th:"ทีม",ko:"팀 모드",fa:"حالت تیمی",el:"Ομαδικό Παιχνίδι"},"Survival Mode":{fr:"Mode Survie",es:"Modo Supervivencia",ja:"サバイバルモード",de:"Überlebensmodus",pt:"Modo de Sobrevivência",ru:"Выживание",hu:"Túlélő Mód",it:"Modalità Sopravvivenza",hr:"Solo Bitka",tr:"Hayatta Kalma Modu",cs:"Survival Hra",sk:"Survival Hra",id:"Mode Bertahan Hidup",nl:"Overlevingsmodus",ar:"نمط البقاء",da:"Overlevelse",vi:"Chế độ sinh tồn",pl:"Tryb przetrwania",he:"מצב הישרדות",sv:"Överlevnadsläge",ro:"Mod Survival",zh:"生存模式","zh-tw":"生存模式",lt:"Modalità Sopravvivenza",az:"Həyatta Qalma",th:"เอาชีวิตรอด",ko:"서바이벌 모드",fa:"حالت ستیز و گریز",el:"Παιχνίδι Επιβίωσης"},Deathmatch:{fr:"Deathmatch",es:"Combate a Muerte",ja:"デスマッチ",de:"Deathmatch",pt:"Deathmatch",ru:"Бой на смерть",hu:"Deathmatch",it:"Modalità Deathmatch",hr:"Arena",tr:"Ölüm Maçı",cs:"Aréna",sk:"Aréna",id:"Deathmatch",nl:"Deathmatch",ar:"مباراة الموت",da:"Døds kamp",vi:"Deathmatch",pl:"Deathmatch",he:"מצב מהיר",sv:"Deathmatch",ro:"Mod Individual",zh:"死亡竞赛","zh-tw":"死鬥模式",lt:"Deathmatch",az:"Ölüm Oyunu",th:"เดทแมทช์",ko:"데스매치",fa:"مسابقه مرگ",el:"Αγώνας θανάτου"},"Pro Deathmatch":{fr:"Deathmatch Pro",es:"Combate a Muerte Pro",ja:"プロデスマッチ",de:"Pro-Deathmatch",pt:"PRO Deathmatch",ru:"Профессиональный бой на смерть",hu:"Pro Deathmatch",it:"Modalità Deathmatch Pro",hr:"Profesionalna Arena",tr:"Profesyonel Ölüm Maçı",cs:"Aréna",sk:"Pro Aréna",id:"Deathmatch Pro",nl:"Pro Deathmatch",ar:"محترف مباراة الموت",da:"Proffesionel døds kamp",vi:"Pro Deathmatch",pl:"Pro Deathmatch",he:"מצב מהיר מקצוענים",sv:"Pro Deathmatch",ro:"Mod Individual Pro",zh:"大死斗模式","zh-tw":"大死鬥模式",lt:"Pro Deathmatch",az:"Prafisanal Ölüm Oyunu",th:"โปรเดทแมทช์",ko:"프로 데스매치",fa:"قهرمان مسابقه مرگ",el:"Αγώνας θανάτου Pro"},"Weapon Store":{fr:"Magasin d'armes",es:"Tienda de Armas",ja:"武器屋",de:"Waffenladen",pt:"Loja de Armas",ru:"Магазин оружия",hu:"Fegyver bolt",it:"Mercato delle Armi",hr:"Trgovina oružja",tr:"Silah Mağazası",cs:"Obchod",sk:"Obchod",id:"Toko Senjata",nl:"Wapenwinkel",ar:"مخزن الأسلحة",vi:"Cửa hàng vũ khí",pl:"zbrojownia",sv:"Vapenshop",ro:"Magazinul de arme",zh:"武器商店","zh-tw":"武器商店",lt:"Mercato di Armi",th:"ร้านอาวุธ",ko:"무기 상점",fa:"مخزن اسلحه ",el:"Κατάστημα όπλων"},EXIT:{fr:"QUITTER",es:"SALIR",ja:"終了",de:"VERLASSEN",pt:"SAIR",ru:"ВЫЙТИ",hu:"KILÉPÉS",it:"ESCI",hr:"IZLAZ",tr:"ÇIK",cs:"ZPĚT",sk:"SPÄŤ",id:"KELUAR",nl:"EXIT",ar:"مغادرة",da:"AFSLUT",vi:"THOÁT",PL:"WYJŚCIE",sv:"AVSLUTA",ro:"IESIRE",zh:"退出","zh-tw":"退出",lt:"ESCI",th:"ออก",ko:"나가기",fa:"خروج",el:"ΕΞΟΔΟΣ"},Rockets:{fr:"Roquettes",es:"Cohetes",ja:"ロケット",de:"Kleine Raketen",pt:"Foguetes",ru:"Ракеты",hu:"Rakéták",it:"Razzi",hr:"Rakete",tr:"Roket",cs:"Malé Rakety",sk:"Malé Rakety",id:"Roket",nl:"Raket",ar:"صواريخ",vi:"Tên lửa",pl:"Rakiety",sv:"Raketer",ro:"Rachete",zh:"火箭","zh-tw":"火箭筒",lt:"Razzi",th:"จรวด",ko:"로켓",fa:"راکت",el:"Ρουκέτα"},Missiles:{fr:"Missiles",es:"Misiles",ja:"ミサイル",de:"Große Raketen",pt:"Misséis",ru:"Усиленные ракеты",hu:"Nagyobb rakéták",it:"Missili",hr:"Lovci",tr:"Füze",cs:"Velké Rakety",sk:"Veľké rakety",id:"Misil",nl:"Raket",ar:"قذيفة",vi:"Missiles",pl:"Pociski",sv:"Missiler",ro:"Rachete mari",zh:"导弹","zh-tw":"導彈",lt:"Missili",th:"ขีปนาวุธ",ko:"미사일",fa:"موشک",el:"Πύραυλοι"},Torpedo:{fr:"Torpille",es:"Torpedo",ja:"魚雷",de:"Torpedo",pt:"Torpedos",ru:"Торпеда",hu:"Torpedó",it:"Siluro",hr:"Torpedo",tr:"Torpido",cs:"Torpédo",sk:"Torpédo",id:"Torpedo",nl:"Torpedo",ar:"نسف",vi:"Torpedo",pl:"Torpedy",sv:"Torped",ro:"Torpedo",zh:"鱼雷","zh-tw":"魚雷",lt:"Siluri",th:"ตอร์ปิโด",ko:"어뢰",fa:"اژدر",el:"Τορπίλη"},"Space Mines":{fr:"Mines légères",es:"Minas Espaciales",ja:"宇宙機雷",de:"Weltraum Minen",pt:"Minas Espaciais",ru:"Космические мины",hu:"Űr aknák",it:"Miniere dello Spazio",hr:"Svemirska mina",tr:"Uzay Mayını",cs:"Malé Miny",sk:"Malé Míny",id:"Tambang Ruang Angkasa",nl:"Ruimtemijn",ar:"الألغام الفضائية",vi:"Space Mines",pl:"Miny ",sv:"Rymdminor",ro:"Mine spatiale",zh:"太空雷","zh-tw":"小型地雷",lt:"Miniere Spaziali",th:"ทุ่นระเบิด",ko:"우주 지뢰",fa:"مین های فضایی",el:"Μικρές Νάρκες"},"Heavy Mines":{fr:"Mines lourdes",es:"Minas Pesadas",ja:"重機雷",de:"Schwere Minen",pt:"Minas Pesadas",ru:"Тяжелые мины",hu:"Nagy aknák",it:"Miniere Pesanti",hr:"Teška mina",tr:"Ağır Mayın",cs:"Velké Miny",sk:"Veľké Míny",id:"Tambag Berat",nl:"Zware mijn",ar:"الألغام الثقيلة",vi:"Heavy Mines",pl:"Ciężkie miny",sv:"Tunga Minor",ro:"Mine mari",zh:"巨型太空雷","zh-tw":"大型地雷",lt:"Miniere Pesanti",th:"ทุ่นระเบิดหนัก",ko:"대형 지뢰",fa:"مین های سنگین ",el:"Μεγάλες Νάρκες"},"Mining Pod":{fr:"Pod de minage",es:"Pod Minero",ja:"採掘ポッド",de:"Abbaudrohne",pt:"Pod De Mineração",ru:"Добывающий дрон",hu:"Bányász drón",it:"Pod Scavatori",hr:"Rudarski robot",tr:"Maden İHA sı",cs:"Důlní Dron",sk:"Banícky Dron",id:"Polong Pertambangan",nl:"Mijndrone",ar:"جراب إستخراج المعادن",vi:"Hạt khai thác",pl:"Moduł górniczy",sv:"Gruvdrönare",ro:"Minion pentru minerit",zh:"采矿机器人","zh-tw":"採礦機器人",lt:"Pod Minatore",th:"ฝักเหมืองแร่",ko:"채광 포드",fa:"پهپاد حفاری",el:"Μεταλλευτική Άκατος"},"Attack Pod":{fr:"Pod d'attaque",es:"Pod de Ataque",ja:"攻撃ポッド",de:"Angriffsdrohne",pt:"Pod De Ataque",ru:"Атакующий дрон",hu:"Harci drón",it:"Pod Attaccanti",hr:"Napadački robot",tr:"Saldırı İHA sı",cs:"Obranný Dron",sk:"Útočný Dron",id:"Serang serangan",nl:"Aanvalsdrone",ar:"جراب الهجوم",vi:"Hạt tấn công",pl:"Moduł ofensywny",sv:"Attackdrönare",ro:"Minion pentru atac",zh:"攻击机器人","zh-tw":"攻擊機器人",lt:"Pod Attaccante",th:"ฝักโจมตี",ko:"공격 포드",fa:"پهپاد تهاجمی",el:"Επιθετική Άκατος"},"Defense Pod":{fr:"Pod de défense",es:"Pod de Defensa",ja:"防御ポッド",de:"Verteidigungsdrohne",pt:"Pod De Defesa",ru:"Защитный дрон",hu:"Védekező drón",it:"Pod Difensive",hr:"Obrambeni robot",tr:"Savunma İHA sı",cs:"Protistřelový Dron",sk:"Obranný Dron",id:"Pod Pertahanan",nl:"Verdedigingsdrone",ar:"جراب الدفاع",vi:"Hạt phòng thủ",pl:"Moduł defensywny",sv:"Försvarsdrönare",ro:"Minion pentru apărare",zh:"防御机器人","zh-tw":"防禦機器人",lt:"Pod Difensivo",th:"ฝักป้องกัน",ko:"방어 포드",fa:"پهپاد تدافعی",el:"Αμυντική Άκατος"},"ECP Sandbox":{fr:"Sandbox ECP",es:"Caja de arena ECP",ja:"ECPサンドボックス",de:"Elite-Ausweis-Sandbox",pt:"Caixa de areia ECP",ru:"ECP песочница",hu:"EKJ Homokozó",it:"Sandbox ECP",hr:"PEZ Sandbox",tr:"SKİ Sanal Alan",cs:"Sandbox",sk:"Sandbox",id:"EKL Sandbox",nl:"ECP Sandbox",ar:"القائد النخبة يمر آلية تحديد الوصول",vi:"Sân chơi thử nghiệm",pl:"Sandbox ECP",he:"ארגז חול מפקד עליון",sv:"ECP Sandbox",ro:"ECP Loc de antrenament",zh:"ECP沙盒","zh-tw":"菁英指揮官沙盒",lt:"Sandbox ECP",az:"ECP Sandbox",th:"ECP Sandbox",ko:"ECP 샌드박스",fa:"سندباکس حساب فرمانده نخبه",el:"ECP Sandbox"},"Choose sides":{fr:"Choisissez votre camp",es:"Escoge un equipo",ja:"チーム選択",de:"Wähle deine Seite",pt:"Escolha uma equipe",ru:"Выбрать одну из сторон",hu:"Válassz oldalt",it:"Scegli la direzione",hr:"Izaberi Savez",tr:"Taraf Seç",cs:"Vyber si stranu",sk:"Vyber si stranu",id:"Pilih sisi",nl:"Kies je team",ar:"اختر جانبك",da:"Vælg hold",vi:"Chọn đội",pl:"Wybierz stronę",he:"תבחר צד",sv:"Välj lag",ro:"Alege echipa",zh:"选边","zh-tw":"選擇團隊",lt:"Scegli lati",az:"Qrupunu seç",th:"เลือกฝ่าย",ko:"진영을 선택하십시오.",fa:"انتخاب کردن طرف مورد نظر",el:"Διάλεξε πλευρά"},REPAIR:{fr:"RÉPARER",es:"REPARAR",ja:"修理",de:"REPARIEREN",pt:"Reparar",ru:"РЕМОНТ",hu:"JAVÍTÁS",it:"RIPARA",hr:"Popravak",tr:"Onar",cs:"OPRAVIT",sk:"OPRAVIŤ",id:"PERBAIKI",nl:"REPAREER",ar:"إصلاح",da:"REPARER",vi:"Sửa chữa",pl:"NAPRAWA",he:"תקן",sv:"REPARATION",ro:"Repară",zh:"修复","zh-tw":"修復",lt:"RIPARA",az:"Təmir",th:"ซ่อมแซม",ko:"수리",fa:"تعمیر",el:"ΕΠΙΣΚΕΥΑΖΩ"},rounds:{fr:"rounds",es:"Rondas",ja:"ラウンド",de:"Runden",pt:"Rodadas",ru:"Раунды",hu:"fordulók",it:"Rounds",hr:"Rundi",tr:"Raundlar",cs:"Kola",sk:"Kolá",id:"Ronde",nl:"ronden",ar:"جولات",da:"runder",vi:"Vòng",pl:"rundy",he:"סיבובים",sv:"runder",ro:"Runde",zh:"轮次","zh-tw":"回合",lt:"Rounds",az:"Raundlar",th:"รอบ",ko:"라운드",fa:"راند",el:"γύροι"},wins:{fr:"victoires",es:"Victorias",ja:"勝利",de:"Siege",pt:"Vitórias",ru:"Победы",hu:"győzelmek",it:"Vittorie",hr:"Pobijediti",tr:"Kazanmalar",cs:"Výhry",sk:"Výhry",id:"Kemenangan",nl:"overwinningen",ar:"انتصارات",da:"sejre",vi:"Chiến thắng",pl:"zwycięstwa",he:"נצחונות",sv:"vinster",ro:"Victorii",zh:"胜者","zh-tw":"贏家",lt:"Vittorie",az:"Qazanmaq",th:"ชนะ",ko:"승리",fa:"برنده می شود",el:"νίκες"},"GALAXY MAP":{fr:"CARTE DE LA GALAXIE",es:"MAPA GALÁCTICO",ja:"銀河地図",de:"GALAXIEKARTE",pt:"MAPA DA GALÁXIA",ru:"ГАЛАКТИЧЕСКАЯ КАРТА",hu:"GALAXYS TÉRKÉP",it:"MAPPA DELLA GALASSIA",hr:"KARTA GALAKSIJE",tr:"GALAKSİ HARİTASI",cs:"GALAKTICKÁ MAPA",sk:"GALAKTICKÁ MAPA",id:"PETA GALAKSI",nl:"RUIMTEMAP",ar:"خريطة المجرة",vi:"BẢN ĐỒ GIẢI NGÂN HÀ",pl:"MAPA GALAKTYKI",sv:"GALAXKARTA",ro:"HARTA GALAXIE",zh:"地图","zh-tw":"地圖",lt:"MAPPE GALATTICHE",th:"แผนที่กาแล็กซี่",ko:"은하 지도",fa:"نقشه کهکشان",el:"ΧΑΡΤΗΣ ΓΑΛΑΞΙΑ"},"Invasion Mode":{fr:"Mode invasion",es:"Modo Invasión",ja:"侵略モード",de:"Invasionsmodus",pt:"Modo de invasão",ru:"Режим вторжения",hu:"Invázió mód",it:"Modalità d'Invasione",hr:"Invazijska igra",tr:"İstila Modu",cs:"Invaze",sk:"Invázia",id:"Mode invasi",nl:"invasiemodus",ar:"طريقة الغزو",vi:"Chế độ xâm lược",pl:"Tryb przetrwania",sv:"Invasionsläge",ro:"Modul invazie",zh:"入侵模式","zh-tw":"入侵模式",lt:"Modalità d'Invasione",th:"โหมดรุกราน",ko:"침입 모드",fa:"حالت معکوس",el:"Παιχνίδι εισβολών"},RESUME:{fr:"CONTINUER",es:"CONTINUAR",ja:"再開",de:"FORTFAHREN",pt:"CONTINUAR",ru:"ПРОДОЛЖИТЬ",hu:"FOLYTATÁS",it:"CONTINUA",hr:"NASTAVI",tr:"DEVAM ET",cs:"ZPĚT",sk:"SPÄŤ",id:"LANJUT",nl:"HERVAT",ar:"استئنف",vi:"TIẾP TỤC",pl:"KONTYNUUJ",sv:"ÅTERUPPTA",ro:"REVIN-O",zh:"继续","zh-tw":"繼續",lt:"CONTINUA",th:"กลับเข้าสู่เกม",ko:"재개",fa:"ادامه",el:"ΣΥΝΕΧΙΖΩ"},"All Modes":{fr:"Tous les modes",es:"Todos los Modos",ja:"全てのモード",de:"Alle Modi",pt:"Todos os modos",ru:"Все режимы",hu:"Összes mód",it:"Tutte le Modalità",hr:"Sve igre",tr:"Tüm Modlar",cs:"Všechny Hry",sk:"Všetky hry",id:"Semua mode",nl:"Alle modi",ar:"جميع وسائط",vi:"Tất cả chế độ",pl:"Wszystkie Tryby",sv:"Alla Lägen",ro:"Toate modurile",zh:"所有模式","zh-tw":"所有模式",lt:"Tutte le modalità",th:"ทุกโหมด",ko:"모든 모드",fa:"تمام حالت ها ",el:"Όλα τα παιχνίδια"},"Team rank":{fr:"Rang de l'équipe",es:"Rango de Equipo",ja:"チームの順位",de:"Teamrang",pt:"Rank de equipe",ru:"Коммандный ранг",hu:"Csapat rangja",it:"Rango dei team",hr:"Tim rank",tr:"Takım Sıralaması",cs:"Pozice týmu",sk:"Hodnosť týmu",id:"Peringkat tim",nl:"Team rang",ar:"فريق",vi:"Xếp hạng đội",pl:"Ranking Drużyny",sv:"Lagrank",ro:"Clasamentul echipei",zh:"团队排名","zh-tw":"團隊排行",lt:"Rango dei Team",th:"อันดับทีม",ko:"팀 순위",fa:"رتبه تیم ",el:"Κατάταξη Ομάδας"},"Your team wins!":{fr:"Votre équipe a gagné !",es:"¡Tu equipo gana!",ja:"あなたのチームが勝利しました！",de:"Dein Team hat gewonnen!",pt:"Sua equipe ganhou!",ru:"Ваша команда победила!",hu:"A csapatod nyert!",it:"Il tuo team ha vinto!",hr:"Tvoj tim je pobijedio!",tr:"Takımın Kazandı!",cs:"Tvůj tým vyhrál!",sk:"Tvoj tým vyhral!",id:"Tim anda menang!",nl:"Je team heeft gewonnen!",ar:"فريقك يفوز!",vi:"Đội bạn thắng",pl:"Twoja drużyna zwyciężyła!",sv:"Ditt lag vinner!",ro:"Echipa ta castiga!",zh:"你的队赢了","zh-tw":"您的團隊贏了!",lt:"Il tuo team ha vinto!",th:"ทีมของคุณชนะ",ko:"귀하의 팀이 승리하였습니다!",fa:"تیم شما پیروز شد ",el:"Η ομάδα σας κέρδισε!"},About:{fr:"À propos",es:"Acerca de",ja:"starblast.io について",de:"Über",pt:"Ataque",ru:"Об игре",hu:"Ról",it:"Riguardo di",hr:"O",tr:"Hakkında",cs:"O hře",sk:"O hre",id:"Tentang",nl:"Over",ar:"حول",vi:"Thuộc về",pl:"O grze",sv:"Om",ro:"Despre",zh:"关于","zh-tw":"關於",lt:"Riguardo",th:"เกี่ยวกับ",ko:"설명",fa:"درباره",el:"Περίπου"},"How to play":{fr:"Comment jouer",es:"Cómo jugar",ja:"遊び方",de:"Spielregeln",pt:"Como jogar",ru:"Как играть",hu:"Hogyan játsz",it:"Come giocare",hr:"Kako igrati",tr:"Nasıl Oynanır",cs:"Jak hrát",sk:"Návod na hru",id:"Cara bermain",nl:"Hoe te spelen",ar:"كيف ألعب",vi:"Cách chơi",pl:"Jak grać",sv:"Hur man spelar",ro:"Cum să joci",zh:"如何玩Starblast.io?","zh-tw":"如何使出星爆? (操作規則)",lt:"Come giocare",th:"วิธีเล่น",ko:"진행법",fa:"نحوه ی بازی ",el:"Πώς να παίξετε"},"Wave %d":{fr:"Vague %d",es:"Oleada %d",ja:"ウェーブ %d",de:"Welle %d",pt:"Onda %d",ru:"Волна %d",hu:"Hullám %d",it:"Onda %d",hr:"Val %d",tr:"Dalga %d",cs:"Vlna %d",sk:"Vlna %d",id:"Gelombang %d",nl:"aanvalsgolf %d",ar:"موجة٪ d",vi:"Màn",pl:"Fala %d",sv:"Runda %d",ro:"Runda %d",zh:"波数 %d","zh-tw":"第%d輪",lt:"Onda %d",th:"ระลอกที่ %d",ko:"웨이브 %d",fa:"موج %d",el:"Κύμα %d"},"Wave cleared!":{fr:"Vague repoussée !",es:"¡Oleada eliminada!",ja:"ウエーブクリア！",de:"Welle geschafft",pt:"Onda de eliminação ",ru:"Волна уничтожена!",hu:"Hullám letudva!",it:"Onda pulita!",hr:"Val očišćen",tr:"Dalga temizlendi!",cs:"Vlna pokořena!",sk:"Vlna pokorená",id:"Ge